{
  "hash": "9c5dde37e59a139ac892b02f66c6b82a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"NPPES NPI Archives\"\nformat:\n  html:\n    reference-location: block\neditor_options: \n  chunk_output_type: console\n---\n\n::: {.cell}\n\n:::\n\n\n\n\n# 2024-01-01\n\n## Deactivated\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nwk_2024_01_01$deactivated |> \n  dplyr::count(deact_date)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 2\n  deact_date     n\n  <date>     <int>\n1 2024-01-01     1\n2 2024-01-02    47\n3 2024-01-03   502\n4 2024-01-04    28\n5 2024-01-05    18\n6 2024-01-06     5\n```\n\n\n:::\n:::\n\n\n\n\n\n## Base\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nbase <- wk_2024_01_01$base\n\n# Split into individuals and organizations\nbase_grp <- collapse::GRP(base, ~ entity)\n\ncollapse::rsplit(base, base_grp) |> \n  purrr::map(fuimus::remove_quiet) |> \n  setNames(collapse::GRPnames(base_grp))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$I\n# A tibble: 15,267 × 15\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   <chr>      <chr>  <date>      <date>     <date>     <date>     <date>    \n 1 1912620808 I      2024-01-01  2024-01-01 2022-09-26 NA         NA        \n 2 1518543511 I      2024-01-01  2024-01-01 2021-03-20 NA         NA        \n 3 1619688645 I      2024-01-01  2024-01-01 2022-12-12 NA         NA        \n 4 1437575206 I      2024-01-01  2024-01-01 2014-03-17 NA         NA        \n 5 1053912162 I      2024-01-01  2024-01-01 2020-11-04 NA         NA        \n 6 1265752158 I      2024-01-01  2024-01-01 2010-06-02 2018-02-20 2018-09-11\n 7 1609131515 I      2024-01-01  2024-01-01 2012-07-06 NA         NA        \n 8 1750841870 I      2024-01-01  2024-01-01 2019-03-24 NA         NA        \n 9 1942708748 I      2024-01-01  2024-01-01 2018-01-26 NA         NA        \n10 1255864583 I      2024-01-01  2024-01-01 2017-04-04 NA         NA        \n# ℹ 15,257 more rows\n# ℹ 8 more variables: sole_prop <chr>, gender <chr>, prefix <chr>,\n#   first_name <chr>, middle_name <chr>, last_name <chr>, suffix <chr>,\n#   credential <chr>\n\n$O\n# A tibble: 3,917 × 10\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   <chr>      <chr>  <date>      <date>     <date>     <date>     <date>    \n 1 1952724692 O      2024-01-01  2024-01-01 2014-01-31 NA         NA        \n 2 1548924087 O      2024-01-01  2022-10-04 2021-10-29 NA         NA        \n 3 1295504330 O      2024-01-01  2023-09-26 2024-01-01 NA         NA        \n 4 1386413417 O      2024-01-01  2023-09-19 2024-01-01 NA         NA        \n 5 1558130690 O      2024-01-01  2023-12-21 2024-01-01 NA         NA        \n 6 1821867961 O      2024-01-01  2023-12-28 2024-01-01 NA         NA        \n 7 1649049784 O      2024-01-01  2023-12-27 2024-01-01 NA         NA        \n 8 1275302317 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n 9 1356110498 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n10 1508635640 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n# ℹ 3,907 more rows\n# ℹ 3 more variables: org_subpart <chr>, org_parent <chr>, org_provider <chr>\n```\n\n\n:::\n:::\n\n\n\n\n### Other Transformations to Keep in Mind\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Credentials in Last Name\nbase |> \n  collapse::fsubset(codex::sf_detect(last_name, \", \")) |> \n  collapse::fsubset(codex::na(credential)) |> \n  dplyr::glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 2\nColumns: 18\n$ npi          <chr> \"1265752158\", \"1386886174\"\n$ entity       <chr> \"I\", \"I\"\n$ last_update  <date> 2024-01-01, 2024-01-03\n$ cert_date    <date> 2024-01-01, 2024-01-03\n$ enum_date    <date> 2010-06-02, 2009-03-25\n$ deact_date   <date> 2018-02-20, NA\n$ react_date   <date> 2018-09-11, NA\n$ sole_prop    <chr> \"N\", \"Y\"\n$ org_subpart  <chr> NA, NA\n$ org_parent   <chr> NA, NA\n$ org_provider <chr> NA, NA\n$ gender       <chr> \"F\", \"F\"\n$ prefix       <chr> NA, \"MS\"\n$ first_name   <chr> \"LIVIA\", \"JUDY\"\n$ middle_name  <chr> \"S\", \"A\"\n$ last_name    <chr> \"MACHADO, RPH, PHARMD, BCPS\", \"LIU, INC\"\n$ suffix       <chr> NA, NA\n$ credential   <chr> NA, NA\n```\n\n\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nbase_split <- collapse::rsplit(base, base_grp) |> \n  purrr::map(fuimus::remove_quiet) |> \n  setNames(collapse::GRPnames(base_grp))\n\n# Org NPIs that are org_subpart have org_parent names\ncollapse::rsplit(base_split$O, base_split$O$org_subpart)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$N\n# A tibble: 3,514 × 10\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   <chr>      <chr>  <date>      <date>     <date>     <date>     <date>    \n 1 1952724692 O      2024-01-01  2024-01-01 2014-01-31 NA         NA        \n 2 1548924087 O      2024-01-01  2022-10-04 2021-10-29 NA         NA        \n 3 1295504330 O      2024-01-01  2023-09-26 2024-01-01 NA         NA        \n 4 1386413417 O      2024-01-01  2023-09-19 2024-01-01 NA         NA        \n 5 1558130690 O      2024-01-01  2023-12-21 2024-01-01 NA         NA        \n 6 1821867961 O      2024-01-01  2023-12-28 2024-01-01 NA         NA        \n 7 1649049784 O      2024-01-01  2023-12-27 2024-01-01 NA         NA        \n 8 1275302317 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n 9 1356110498 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n10 1508635640 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n# ℹ 3,504 more rows\n# ℹ 3 more variables: org_subpart <chr>, org_parent <chr>, org_provider <chr>\n\n$Y\n# A tibble: 403 × 10\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   <chr>      <chr>  <date>      <date>     <date>     <date>     <date>    \n 1 1689443723 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n 2 1124804042 O      2024-01-01  2024-01-01 2023-09-06 NA         NA        \n 3 1942079942 O      2024-01-01  2024-01-01 2024-01-01 NA         NA        \n 4 1578332573 O      2024-01-01  2023-12-27 2024-01-01 NA         NA        \n 5 1013786011 O      2024-01-01  2024-01-01 2024-01-01 NA         NA        \n 6 1831968833 O      2024-01-01  2024-01-01 2024-01-01 NA         NA        \n 7 1568231561 O      2024-01-01  2024-01-01 2024-01-01 NA         NA        \n 8 1467167593 O      2024-01-01  2024-01-01 2023-01-23 NA         NA        \n 9 1821867821 O      2024-01-01  2024-01-01 2024-01-01 NA         NA        \n10 1114410495 O      2024-01-01  2024-01-01 2018-06-11 NA         NA        \n# ℹ 393 more rows\n# ℹ 3 more variables: org_subpart <chr>, org_parent <chr>, org_provider <chr>\n```\n\n\n:::\n\n```{.r .cell-code}\n# Individuals - Sole Proprietors\ncollapse::rsplit(base_split$I, base_split$I$sole_prop)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$N\n# A tibble: 10,405 × 15\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   <chr>      <chr>  <date>      <date>     <date>     <date>     <date>    \n 1 1912620808 I      2024-01-01  2024-01-01 2022-09-26 NA         NA        \n 2 1619688645 I      2024-01-01  2024-01-01 2022-12-12 NA         NA        \n 3 1265752158 I      2024-01-01  2024-01-01 2010-06-02 2018-02-20 2018-09-11\n 4 1609131515 I      2024-01-01  2024-01-01 2012-07-06 NA         NA        \n 5 1750841870 I      2024-01-01  2024-01-01 2019-03-24 NA         NA        \n 6 1942708748 I      2024-01-01  2024-01-01 2018-01-26 NA         NA        \n 7 1477895621 I      2024-01-01  2024-01-01 2013-03-25 NA         NA        \n 8 1891305488 I      2024-01-01  2024-01-01 2020-08-07 NA         NA        \n 9 1477322501 I      2024-01-01  2022-10-20 2024-01-01 NA         NA        \n10 1568231694 I      2024-01-01  2022-03-28 2024-01-01 NA         NA        \n# ℹ 10,395 more rows\n# ℹ 8 more variables: sole_prop <chr>, gender <chr>, prefix <chr>,\n#   first_name <chr>, middle_name <chr>, last_name <chr>, suffix <chr>,\n#   credential <chr>\n\n$X\n# A tibble: 29 × 15\n   npi        entity last_update cert_date enum_date  deact_date react_date\n   <chr>      <chr>  <date>      <date>    <date>     <date>     <date>    \n 1 1639155427 I      2024-01-06  NA        2005-12-22 NA         NA        \n 2 1992706071 I      2024-01-06  NA        2005-08-10 NA         NA        \n 3 1619942935 I      2024-01-06  NA        2006-02-21 NA         NA        \n 4 1710978242 I      2024-01-06  NA        2005-11-03 NA         NA        \n 5 1376521179 I      2024-01-06  NA        2006-01-03 NA         NA        \n 6 1033109871 I      2024-01-06  NA        2005-10-24 NA         NA        \n 7 1750325726 I      2024-01-06  NA        2006-06-16 NA         NA        \n 8 1144274283 I      2024-01-06  NA        2006-05-22 NA         NA        \n 9 1528045325 I      2024-01-06  NA        2005-12-22 NA         NA        \n10 1578511382 I      2024-01-06  NA        2006-05-04 NA         NA        \n# ℹ 19 more rows\n# ℹ 8 more variables: sole_prop <chr>, gender <chr>, prefix <chr>,\n#   first_name <chr>, middle_name <chr>, last_name <chr>, suffix <chr>,\n#   credential <chr>\n\n$Y\n# A tibble: 4,833 × 15\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   <chr>      <chr>  <date>      <date>     <date>     <date>     <date>    \n 1 1518543511 I      2024-01-01  2024-01-01 2021-03-20 NA         NA        \n 2 1437575206 I      2024-01-01  2024-01-01 2014-03-17 NA         NA        \n 3 1053912162 I      2024-01-01  2024-01-01 2020-11-04 NA         NA        \n 4 1255864583 I      2024-01-01  2024-01-01 2017-04-04 NA         NA        \n 5 1831968973 I      2024-01-01  2023-12-12 2024-01-01 NA         NA        \n 6 1922877067 I      2024-01-01  2023-12-10 2024-01-01 NA         NA        \n 7 1568231603 I      2024-01-01  2023-12-20 2024-01-01 NA         NA        \n 8 1477322519 I      2024-01-01  2023-12-23 2024-01-01 NA         NA        \n 9 1912776055 I      2024-01-01  2023-12-19 2024-01-01 NA         NA        \n10 1730958877 I      2024-01-01  2023-12-26 2024-01-01 NA         NA        \n# ℹ 4,823 more rows\n# ℹ 8 more variables: sole_prop <chr>, gender <chr>, prefix <chr>,\n#   first_name <chr>, middle_name <chr>, last_name <chr>, suffix <chr>,\n#   credential <chr>\n```\n\n\n:::\n:::\n\n\n\n\n## Address\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\naddress <- wk_2024_01_01$address\n\n# Exact match on all address fields\nexact <- address |> \n  dplyr::filter(\n    mail_address == prac_address,\n    mail_city == prac_city,\n    mail_state == prac_state,\n    mail_zip == prac_zip,\n    mail_country == prac_country,\n    mail_phone == prac_phone,\n    mail_fax == prac_fax) |> \n  collapse::fcompute(\n    npi = npi,\n    entity = entity,\n    purpose = \"MP\",\n    address = prac_address,\n    city = prac_city,\n    state = prac_state,\n    zip = make_zip(prac_zip),\n    country = prac_country,\n    phone = make_phone(prac_phone),\n    fax = make_phone(prac_fax))\n\n# Match on all except FAX\nfax <- address |> \n  dplyr::filter(\n    npi %!in% exact$npi,  \n    mail_address == prac_address, \n    mail_city == prac_city,\n    mail_state == prac_state,\n    mail_country == prac_country,\n    mail_zip == prac_zip,\n    mail_phone == prac_phone) |> \n  collapse::fcompute(\n    npi = npi,\n    entity = entity,\n    address = prac_address,\n    city = prac_city,\n    state = prac_state,\n    zip = make_zip(prac_zip),\n    country = prac_country,\n    phone = make_phone(prac_phone),\n    fax = make_case(mail_fax, prac_fax),\n    purpose = data.table::fcase(\n      codex::not_na(mail_fax) & codex::na(prac_fax), \"M\",\n      codex::na(mail_fax) & codex::not_na(prac_fax), \"P\",\n      default = \"MP\")) |> \n  collapse::fmutate(fax = make_phone(fax))\n\n# Match on all except ZIP, PHONE, and FAX\nphone <- address |> \n  dplyr::filter(npi %!in% c(exact$npi, fax$npi),      \n    mail_address == prac_address,\n    mail_city == prac_city,\n    mail_state == prac_state,\n    mail_country == prac_country) |>\n  collapse::fcompute(\n    npi = npi,\n    entity = entity,\n    purpose = data.table::fcase(\n      codex::not_na(mail_phone) & codex::na(prac_phone), \"M\",\n      codex::na(mail_phone) & codex::not_na(prac_phone), \"P\",\n      default = \"MP\"),\n    address = prac_address,\n    city = prac_city,\n    state = prac_state,\n    zip = make_case(mail_zip, prac_zip),\n    country = prac_country,\n    phone = make_case(mail_phone, prac_phone),\n    fax = make_case(mail_fax, prac_fax)) |> \n  collapse::fmutate(\n    zip = make_zip(zip),\n    phone = make_phone(phone),\n    fax = make_phone(fax))\n\n# Pivot remaining addresses\npiv <- address |> \n  dplyr::filter(npi %!in% c(exact$npi, fax$npi, phone$npi)) |> \n  tidyr::pivot_longer(\n    -c(npi, entity), \n    names_to = \"type_part\", \n    values_to = \"value\") |> \n  tidyr::separate_wider_delim(\n    type_part, \n    delim = \"_\", \n    names = c(\"type\", \"part\")) |> \n  collapse::fmutate(\n    purpose = dplyr::case_when(\n      type == \"mail\" ~ \"M\",\n      type == \"prac\" ~ \"P\",\n    .default = type),\n    type = NULL) |>\n  tidyr::pivot_wider(\n    names_from = part, \n    values_from = value) |> \n  collapse::fmutate(\n    zip = make_zip(zip),\n    phone = make_phone(phone),\n    fax = make_phone(fax))\n\naddress <- collapse::rowbind(exact, fax, phone, piv)\n\nadd_grp <- collapse::GRP(address, ~ entity)\n\ncollapse::rsplit(address, add_grp) |> \n  purrr::map(remove_quiet) |> \n  setNames(collapse::GRPnames(add_grp))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$I\n# A tibble: 22,883 × 10\n   npi        entity purpose address       city  state zip   country phone fax  \n   <chr>      <chr>  <chr>   <chr>         <chr> <chr> <chr> <chr>   <chr> <chr>\n 1 1437575206 I      MP      3840 PACKARD… ANN … MI    4810… US      (734… (734…\n 2 1477895621 I      MP      3144 SANTA A… EL M… CA    9173… US      (626… (626…\n 3 1346019486 I      MP      57 TOWNSHIP … CHES… OH    4561… US      (740… (740…\n 4 1265201206 I      MP      822 LOVELACE… BREW… AL    3642… US      (251… (800…\n 5 1447029483 I      MP      350 FAIRWAY … DEER… FL    3344… US      (877… (866…\n 6 1295504249 I      MP      1550 N 115TH… SEAT… WA    9813… US      (206… (206…\n 7 1073382024 I      MP      401 16TH ST … ROCH… MN    5590… US      (507… (507…\n 8 1639948698 I      MP      920 SARATOGA… SAN … CA    9512… US      (408… (408…\n 9 1508635574 I      MP      14725 SE RHO… PORT… OR    9723… US      (971… (971…\n10 1932978905 I      MP      3801 KELL BL… WICH… TX    7630… US      (940… (940…\n# ℹ 22,873 more rows\n\n$O\n# A tibble: 5,839 × 10\n   npi        entity purpose address       city  state zip   country phone fax  \n   <chr>      <chr>  <chr>   <chr>         <chr> <chr> <chr> <chr>   <chr> <chr>\n 1 1548924087 O      MP      46 GRAMATAN … MOUN… NY    1055… US      (295… (646…\n 2 1205605342 O      MP      7610 CARROLL… TAKO… MD    2091… US      (301… (301…\n 3 1114796257 O      MP      6510 KENILWO… RIVE… MD    2073… US      (301… (301…\n 4 1902675945 O      MP      2585 PACIFIC… TORR… CA    9050… US      (424… (310…\n 5 1538938576 O      MP      10751 W ROWE… PEOR… AZ    8538… US      (623… (623…\n 6 1568231512 O      MP      1121 FIRECRA… JUST… TX    7624… US      (940… (940…\n 7 1912776964 O      MP      3760 CURTIS … COCOA FL    3292… US      (321… (321…\n 8 1306615364 O      MP      350 FAIRWAY … DEER… FL    3344… US      (877… (866…\n 9 1336918390 O      MP      240 E GARRIS… GAST… NC    2805… US      (980… (980…\n10 1649049610 O      MP      6751 N SUNSE… GLEN… AZ    8530… US      (775… (702…\n# ℹ 5,829 more rows\n```\n\n\n:::\n:::\n\n\n\n\n## Taxonomy\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntaxonomy <- wk_2024_01_01$taxonomy |> \n  dplyr::select(npi, entity, dplyr::starts_with(\"taxonomy\")) |> \n  collapse::fmutate(\n    taxonomy_level = data.table::fcase(\n      taxonomy_primary == \"Y\", \"P\",\n      taxonomy_primary == \"N\", \"O\",\n      taxonomy_primary == \"X\", \"X\"),\n    taxonomy_primary = NULL)\n\ntaxonomy <- collapse::rowbind(\n  taxonomy |> \n    collapse::fsubset(codex::na(taxonomy_group)) |> \n    collapse::fselect(-taxonomy_group) |> \n    dplyr::distinct(),\n  taxonomy |> \n    collapse::fsubset(codex::not_na(taxonomy_group)) |> \n    collapse::fselect(-taxonomy_code, -taxonomy_level) |> \n    dplyr::distinct() |> \n    collapse::frename(taxonomy_code = taxonomy_group) |> \n    collapse::fmutate(taxonomy_level = \"G\")\n  )\n\n# taxonomy <- collapse::join(\n#   license, \n#   taxonomy, \n#   on = c(\"npi\"), \n#   how = \"full\") |> \n#   dplyr::distinct()\n\ntax_grp <- collapse::GRP(taxonomy, ~ entity)\n\ntaxonomy <- collapse::rsplit(taxonomy, tax_grp) |> \n  purrr::map(remove_quiet) |> \n  setNames(collapse::GRPnames(tax_grp))\n\ntaxonomy\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$I\n# A tibble: 20,828 × 4\n   npi        entity taxonomy_code taxonomy_level\n   <chr>      <chr>  <chr>         <chr>         \n 1 1912620808 I      390200000X    O             \n 2 1912620808 I      363A00000X    P             \n 3 1518543511 I      163WH0200X    P             \n 4 1619688645 I      163W00000X    P             \n 5 1619688645 I      363LA2100X    O             \n 6 1437575206 I      103TB0200X    P             \n 7 1265752158 I      1835P0018X    O             \n 8 1265752158 I      1835C0206X    P             \n 9 1265752158 I      1835C0205X    O             \n10 1609131515 I      207Q00000X    P             \n# ℹ 20,818 more rows\n\n$O\n# A tibble: 5,433 × 4\n   npi        entity taxonomy_code taxonomy_level\n   <chr>      <chr>  <chr>         <chr>         \n 1 1548924087 O      1041C0700X    P             \n 2 1649049784 O      261QU0200X    P             \n 3 1275302317 O      261QE0002X    P             \n 4 1356110498 O      261QP2300X    P             \n 5 1508635640 O      261QM0801X    P             \n 6 1235908377 O      251E00000X    P             \n 7 1689443723 O      251300000X    P             \n 8 1306615448 O      251E00000X    P             \n 9 1205605342 O      261QP1100X    P             \n10 1396514436 O      3104A0625X    P             \n# ℹ 5,423 more rows\n```\n\n\n:::\n:::\n\n\n\n\n#### Duplicates\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntaxonomy$O |> \n  dplyr::mutate(N = dplyr::n(), .by = npi) |> \n  dplyr::filter(N == 2) |> \n  dplyr::mutate(eq = taxonomy_code == collapse::flag(taxonomy_code), .by = npi) |> \n  dplyr::filter(eq)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 21 × 6\n   npi        entity taxonomy_code taxonomy_level     N eq   \n   <chr>      <chr>  <chr>         <chr>          <int> <lgl>\n 1 1093182198 O      324500000X    P                  2 TRUE \n 2 1598991168 O      324500000X    P                  2 TRUE \n 3 1881904035 O      324500000X    P                  2 TRUE \n 4 1902331937 O      3336C0003X    P                  2 TRUE \n 5 1194812784 O      332B00000X    P                  2 TRUE \n 6 1235225210 O      251E00000X    P                  2 TRUE \n 7 1376554865 O      332B00000X    P                  2 TRUE \n 8 1881787380 O      251G00000X    P                  2 TRUE \n 9 1750790853 O      261QI0500X    P                  2 TRUE \n10 1588717151 O      251E00000X    P                  2 TRUE \n# ℹ 11 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\ntaxonomy$I |> \n  dplyr::mutate(N = dplyr::n(), .by = npi) |> \n  dplyr::filter(N == 2) |> \n  dplyr::mutate(eq = taxonomy_code == collapse::flag(taxonomy_code), .by = npi) |> \n  dplyr::filter(eq)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,135 × 6\n   npi        entity taxonomy_code taxonomy_level     N eq   \n   <chr>      <chr>  <chr>         <chr>          <int> <lgl>\n 1 1255864583 I      101YM0800X    P                  2 TRUE \n 2 1760251805 I      1041S0200X    P                  2 TRUE \n 3 1962271916 I      225100000X    P                  2 TRUE \n 4 1477322436 I      163W00000X    P                  2 TRUE \n 5 1023887098 I      335E00000X    P                  2 TRUE \n 6 1922877992 I      133V00000X    P                  2 TRUE \n 7 1700655776 I      225X00000X    P                  2 TRUE \n 8 1285629089 I      207R00000X    P                  2 TRUE \n 9 1235908211 I      172A00000X    P                  2 TRUE \n10 1922236736 I      207R00000X    P                  2 TRUE \n# ℹ 1,125 more rows\n```\n\n\n:::\n:::\n\n\n\n\n## License\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlicense <- collapse::fselect(\n  wk_2024_01_01$taxonomy, \n  npi, \n  entity, \n  license_no, \n  license_state)\n\nlicense_grp <- collapse::GRP(license, ~ entity)\n\nlicense <- collapse::rsplit(license, license_grp) |> \n  purrr::map(\n    \\(df) \n    fuimus::remove_quiet(df) |> \n      dplyr::filter(codex::not_na(license_no))) |> \n  setNames(collapse::GRPnames(license_grp))\n\nlicense\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$I\n# A tibble: 15,565 × 4\n   npi        entity license_no license_state\n   <chr>      <chr>  <chr>      <chr>        \n 1 1518543511 I      70884      NY           \n 2 1619688645 I      0001270234 VA           \n 3 1619688645 I      0024185857 VA           \n 4 1437575206 I      6301009991 MI           \n 5 1053912162 I      032328     NY           \n 6 1265752158 I      PS52491    FL           \n 7 1265752158 I      PS52491    FL           \n 8 1265752158 I      PS52491    FL           \n 9 1609131515 I      280453-1   NY           \n10 1942708748 I      585919     NY           \n# ℹ 15,555 more rows\n\n$O\n# A tibble: 592 × 4\n   npi        entity license_no license_state\n   <chr>      <chr>  <chr>      <chr>        \n 1 1952724692 O      6301009991 MI           \n 2 1508824574 O      SA5335     FL           \n 3 1528515327 O      6401015547 MI           \n 4 1891209284 O      ISW01554   RI           \n 5 1437334182 O      9190       TX           \n 6 1427109271 O      602289671  WA           \n 7 1750821781 O      168900     WA           \n 8 1093182198 O      190859AP   CA           \n 9 1093182198 O      190075AP   CA           \n10 1841677408 O      190070AP   CA           \n# ℹ 582 more rows\n```\n\n\n:::\n:::\n\n\n\n\n## Identifiers\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nidentifier <- wk_2024_01_01$identifier |> \n  # Remove Taxonomy Codes\n  collapse::fsubset(codex::sf_ndetect(otid, \"^[A-Z0-9]{9}X$\"))\n\nid_grp <- collapse::GRP(identifier, ~ entity)\n\ncollapse::rsplit(identifier, id_grp) |> \n  purrr::map(remove_quiet) |> \n  setNames(collapse::GRPnames(id_grp))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$I\n# A tibble: 3,052 × 6\n   npi        entity otid       otid_type otid_state otid_issuer                \n   <chr>      <chr>  <chr>      <chr>     <chr>      <chr>                      \n 1 1003685140 I      3496       01        NH         STATE OF NEW HAMPSHIRE OFF…\n 2 1134998198 I      1194322628 05        MI         <NA>                       \n 3 1578544367 I      10007752   05        TX         <NA>                       \n 4 1578544367 I      152031401  05        TX         <NA>                       \n 5 1578544367 I      152028001  05        TX         <NA>                       \n 6 1316936222 I      4160095    01        TN         BLUE CROSS                 \n 7 1316936222 I      1053635    05        LA         <NA>                       \n 8 1316936222 I      087281     05        AZ         <NA>                       \n 9 1316936222 I      3000540    05        TN         <NA>                       \n10 1316936222 I      P00444174  01        <NA>       MEDICARE RAILROAD          \n# ℹ 3,042 more rows\n\n$O\n# A tibble: 1,314 × 6\n   npi        entity otid       otid_type otid_state otid_issuer          \n   <chr>      <chr>  <chr>      <chr>     <chr>      <chr>                \n 1 1417726456 O      0155098    05        OH         <NA>                 \n 2 1225765241 O      U5083      01        TX         TEXAS MEDICAL LICENSE\n 3 1689443665 O      1417266396 05        NY         <NA>                 \n 4 1255611539 O      014469     01        TX         TEXAS HCSSA LICENSE  \n 5 1508824574 O      890596700  05        FL         <NA>                 \n 6 1750958104 O      1386940575 05        WI         <NA>                 \n 7 1982294732 O      250000218  05        NV         <NA>                 \n 8 1891209284 O      U300404468 01        RI         MEDICARE PTAN        \n 9 1730729385 O      1952817926 01        <NA>       ORGANIZATIONAL NPI   \n10 1730729385 O      1043526098 01        <NA>       NPI                  \n# ℹ 1,304 more rows\n```\n\n\n:::\n:::\n\n\n\n\n## Other Names\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nother <- wk_2024_01_01$other\n\noth_grp <- collapse::GRP(other, ~ entity)\n\nother <- collapse::rsplit(other, oth_grp) |> \n  purrr::map(remove_quiet) |> \n  setNames(collapse::GRPnames(oth_grp))\n\nother$I <- vctrs::vec_slice(other$I, cheapr::row_na_counts(other$I) < 6)\n\nother\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$I\n# A tibble: 1,219 × 9\n   npi   entity other_prefix other_first other_middle other_last other_last_type\n   <chr> <chr>  <chr>        <chr>       <chr>        <chr>      <chr>          \n 1 1255… I      <NA>         GWEN        <NA>         WILSON     2              \n 2 1659… I      <NA>         KATELIN     LEE ANN      BOYER      1              \n 3 1184… I      <NA>         AESHA       ISHWARBHAI   PATEL      5              \n 4 1437… I      <NA>         TREVA       JO           MOYA       1              \n 5 1881… I      <NA>         AMANDA      RENEE        SCHELLHORN 1              \n 6 1871… I      <NA>         BRITTANY    C            DARNELL    1              \n 7 1770… I      <NA>         PEBBLES     MAURINE      YEE        5              \n 8 1497… I      <NA>         CARING      FOR          MAMAS      2              \n 9 1033… I      <NA>         JANINE      LISSETT      LESSLEY    1              \n10 1952… I      <NA>         NICOLE      <NA>         BORDEN     1              \n# ℹ 1,209 more rows\n# ℹ 2 more variables: other_suffix <chr>, other_credential <chr>\n\n$O\n# A tibble: 1,125 × 4\n   npi        entity other_org_name                            other_org_type\n   <chr>      <chr>  <chr>                                     <chr>         \n 1 1548924087 O      MORGAN HEART PLLC                         4             \n 2 1538845474 O      SRS-LA MIRADA, LLC                        3             \n 3 1477337988 O      RISING SUN DERMATOLOGY & COSMETICS CENTER 3             \n 4 1447567391 O      UNITED PLUS HOME HEALTH LLC               3             \n 5 1841442092 O      PALOMA HOME HEALTHCARE                    3             \n 6 1508824574 O      THE ALFANO CENTER                         3             \n 7 1295004455 O      MAXSERVE HOSPICE                          3             \n 8 1790271476 O      MAXSERVE HOSPICE                          3             \n 9 1740833243 O      SUMMIT HEALTHCARE                         3             \n10 1427561562 O      J&CO CHIROPRACTIC                         3             \n# ℹ 1,115 more rows\n```\n\n\n:::\n:::\n\n\n\n\n## Authorized Official\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nwk_2024_01_01$ao |> \n  collapse::fmutate(ao_phone = make_phone(ao_phone))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3,917 × 10\n   npi       entity ao_prefix ao_first ao_middle ao_last ao_suffix ao_credential\n   <chr>     <chr>  <chr>     <chr>    <chr>     <chr>   <chr>     <chr>        \n 1 19527246… O      <NA>      MICHELE  <NA>      WHITE   <NA>      PHD, LLP, LPC\n 2 15489240… O      <NA>      TANESHA  <NA>      MORGAN  <NA>      LCSW         \n 3 12955043… O      <NA>      KENDRA   <NA>      TAYLOR  <NA>      <NA>         \n 4 13864134… O      <NA>      MELISSA  <NA>      DELLA … <NA>      LCSW         \n 5 15581306… O      MRS       MALYNDI  R         WEST    <NA>      <NA>         \n 6 18218679… O      <NA>      AURORA   CANE      HOYLE   <NA>      FNP-BC       \n 7 16490497… O      DR        ASMITA   <NA>      PATEL   <NA>      MD           \n 8 12753023… O      MR        RANGANA… <NA>      NARASI… <NA>      <NA>         \n 9 13561104… O      DR        AKRAM    <NA>      ABD EL… <NA>      MD           \n10 15086356… O      <NA>      JAYSON   <NA>      ROWLAND <NA>      CHT CPH      \n# ℹ 3,907 more rows\n# ℹ 2 more variables: ao_title <chr>, ao_phone <chr>\n```\n\n\n:::\n:::\n\n\n\n\n<hr>\n\n\n\n\n{{< pagebreak >}}\n\n\n\n\n\n\n\n## Session Information \n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n**R version 4.4.2 (2024-10-31 ucrt)**\n\n**Platform:** x86_64-w64-mingw32/x64 \n\n**locale:**\n_LC_COLLATE=English_United States.utf8_, _LC_CTYPE=English_United States.utf8_, _LC_MONETARY=English_United States.utf8_, _LC_NUMERIC=C_ and _LC_TIME=English_United States.utf8_\n\n**attached base packages:** \n_stats_, _graphics_, _grDevices_, _utils_, _datasets_, _methods_ and _base_\n\n**other attached packages:** \n_S7(v.0.2.0)_, _arknpi(v.0.0.0.9000)_, _arktax(v.0.0.1)_, _nppez(v.0.0.1)_, _codex(v.0.0.1)_, _fuimus(v.0.0.2)_, _collapse(v.2.0.18)_, _data.table(v.1.16.99)_, _lubridate(v.1.9.3)_, _forcats(v.1.0.0)_, _stringr(v.1.5.1)_, _dplyr(v.1.1.4)_, _purrr(v.1.0.2)_, _readr(v.2.1.5)_, _tidyr(v.1.3.1)_, _tibble(v.3.2.1)_, _ggplot2(v.3.5.1)_ and _tidyverse(v.2.0.0)_\n\n**loaded via a namespace (and not attached):** \n_rappdirs(v.0.3.3)_, _utf8(v.1.2.4)_, _generics(v.0.1.3)_, _stringi(v.1.8.4)_, _hms(v.1.1.3)_, _digest(v.0.6.37)_, _magrittr(v.2.0.3)_, _evaluate(v.1.0.1)_, _grid(v.4.4.2)_, _timechange(v.0.3.0)_, _fastmap(v.1.2.0)_, _jsonlite(v.1.8.9)_, _pins(v.1.4.0)_, _pander(v.0.6.5)_, _fansi(v.1.0.6)_, _scales(v.1.3.0)_, _textshaping(v.0.4.0)_, _RApiSerialize(v.0.1.4)_, _cli(v.3.6.3)_, _rlang(v.1.1.4)_, _munsell(v.0.5.1)_, _withr(v.3.0.2)_, _yaml(v.2.3.10)_, _qs(v.0.27.2)_, _tools(v.4.4.2)_, _parallel(v.4.4.2)_, _tzdb(v.0.4.0)_, _colorspace(v.2.1-1)_, _vctrs(v.0.6.5)_, _R6(v.2.5.1)_, _lifecycle(v.1.0.4)_, _snakecase(v.0.11.1)_, _cheapr(v.0.9.91.9000)_, _stringfish(v.0.16.0)_, _fs(v.1.6.5)_, _htmlwidgets(v.1.6.4)_, _janitor(v.2.2.0)_, _ragg(v.1.3.3)_, _pkgconfig(v.2.0.3)_, _RcppParallel(v.5.1.9)_, _pillar(v.1.9.0)_, _gtable(v.0.3.6)_, _glue(v.1.8.0)_, _Rcpp(v.1.0.13-1)_, _systemfonts(v.1.1.0)_, _xfun(v.0.49)_, _tidyselect(v.1.2.1)_, _rstudioapi(v.0.17.1)_, _knitr(v.1.49)_, _htmltools(v.0.5.8.1)_, _rmarkdown(v.2.29)_ and _compiler(v.4.4.2)_\n:::\n:::\n",
    "supporting": [
      "nppes_archives_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}