{
  "hash": "c0e1da4f15ab71bc63cb15aebbdd5bb1",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"NPPES NPI Registry Archive\"\nformat:\n  html:\n    reference-location: block\neditor_options: \n  chunk_output_type: console\n---\n\n::: {.cell}\n\n:::\n\n\n\n\n# Weekly NPPES Step-Through\n\n## Deactivated NPIs\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndeactivated |> collapse::fcount(deact_date)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 34 × 2\n   deact_date     N\n   <date>     <int>\n 1 2024-01-01     1\n 2 2024-01-02    47\n 3 2024-01-03   502\n 4 2024-01-04    28\n 5 2024-01-05    18\n 6 2024-01-06     5\n 7 2024-01-08    35\n 8 2024-01-09    14\n 9 2024-01-10   318\n10 2024-01-11    40\n# ℹ 24 more rows\n```\n\n\n:::\n:::\n\n\n\n\n## Base\n\n   - Remove `suffix` columns\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nbase <- collapse::rsplit(\n  collapse::funique(wk$base), \n  wk$base$entity) |> \n  purrr::map(fuimus::remove_quiet)\n\nbase$I$prefix <- NULL\nbase$I$suffix <- NULL\nbase\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$I\n# A tibble: 15,267 × 13\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   <chr>      <chr>  <date>      <date>     <date>     <date>     <date>    \n 1 1912620808 I      2024-01-01  2024-01-01 2022-09-26 NA         NA        \n 2 1518543511 I      2024-01-01  2024-01-01 2021-03-20 NA         NA        \n 3 1619688645 I      2024-01-01  2024-01-01 2022-12-12 NA         NA        \n 4 1437575206 I      2024-01-01  2024-01-01 2014-03-17 NA         NA        \n 5 1053912162 I      2024-01-01  2024-01-01 2020-11-04 NA         NA        \n 6 1265752158 I      2024-01-01  2024-01-01 2010-06-02 2018-02-20 2018-09-11\n 7 1609131515 I      2024-01-01  2024-01-01 2012-07-06 NA         NA        \n 8 1750841870 I      2024-01-01  2024-01-01 2019-03-24 NA         NA        \n 9 1942708748 I      2024-01-01  2024-01-01 2018-01-26 NA         NA        \n10 1255864583 I      2024-01-01  2024-01-01 2017-04-04 NA         NA        \n# ℹ 15,257 more rows\n# ℹ 6 more variables: sole_prop <chr>, gender <chr>, first_name <chr>,\n#   middle_name <chr>, last_name <chr>, credential <chr>\n\n$O\n# A tibble: 3,917 × 10\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   <chr>      <chr>  <date>      <date>     <date>     <date>     <date>    \n 1 1952724692 O      2024-01-01  2024-01-01 2014-01-31 NA         NA        \n 2 1548924087 O      2024-01-01  2022-10-04 2021-10-29 NA         NA        \n 3 1295504330 O      2024-01-01  2023-09-26 2024-01-01 NA         NA        \n 4 1386413417 O      2024-01-01  2023-09-19 2024-01-01 NA         NA        \n 5 1558130690 O      2024-01-01  2023-12-21 2024-01-01 NA         NA        \n 6 1821867961 O      2024-01-01  2023-12-28 2024-01-01 NA         NA        \n 7 1649049784 O      2024-01-01  2023-12-27 2024-01-01 NA         NA        \n 8 1275302317 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n 9 1356110498 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n10 1508635640 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n# ℹ 3,907 more rows\n# ℹ 3 more variables: org_subpart <chr>, org_parent <chr>, org_provider <chr>\n```\n\n\n:::\n:::\n\n\n\n\n### Considerations:\n\n#### No Credentials\n\n   - Look for credentials in `last_name`\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nbase$I |> \n  collapse::fsubset(codex::na(credential)) |> \n  collapse::fsubset(codex::sf_detect(last_name, \", \")) |> \n  dplyr::glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 2\nColumns: 13\n$ npi         <chr> \"1265752158\", \"1386886174\"\n$ entity      <chr> \"I\", \"I\"\n$ last_update <date> 2024-01-01, 2024-01-03\n$ cert_date   <date> 2024-01-01, 2024-01-03\n$ enum_date   <date> 2010-06-02, 2009-03-25\n$ deact_date  <date> 2018-02-20, NA\n$ react_date  <date> 2018-09-11, NA\n$ sole_prop   <chr> \"N\", \"Y\"\n$ gender      <chr> \"F\", \"F\"\n$ first_name  <chr> \"LIVIA\", \"JUDY\"\n$ middle_name <chr> \"S\", \"A\"\n$ last_name   <chr> \"MACHADO, RPH, PHARMD, BCPS\", \"LIU, INC\"\n$ credential  <chr> NA, NA\n```\n\n\n:::\n:::\n\n\n\n\n#### Organization Parts \n\n   - `org_subpart`s have `org_parent` names\n   - Non-subparts only have `org_provider` names\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncollapse::rsplit(\n  base$O |> \n    dplyr::relocate(\n      org_parent, \n      org_provider, \n      .after = npi), \n  base$O$org_subpart) |> \n  purrr::map(\\(df) \n      fuimus::remove_quiet(df) |> \n      dplyr::select(-org_subpart))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$N\n# A tibble: 3,514 × 8\n   npi        org_provider   entity last_update cert_date  enum_date  deact_date\n   <chr>      <chr>          <chr>  <date>      <date>     <date>     <date>    \n 1 1952724692 WHITE BEHAVIO… O      2024-01-01  2024-01-01 2014-01-31 NA        \n 2 1548924087 MORGAN HEART … O      2024-01-01  2022-10-04 2021-10-29 NA        \n 3 1295504330 KENDRA TAYLOR… O      2024-01-01  2023-09-26 2024-01-01 NA        \n 4 1386413417 ULYSSES' PLAC… O      2024-01-01  2023-09-19 2024-01-01 NA        \n 5 1558130690 RETHINK COUNS… O      2024-01-01  2023-12-21 2024-01-01 NA        \n 6 1821867961 AURORA COMMUN… O      2024-01-01  2023-12-28 2024-01-01 NA        \n 7 1649049784 PULSE URGENT … O      2024-01-01  2023-12-27 2024-01-01 NA        \n 8 1275302317 NVR & SDD CON… O      2024-01-01  2023-12-30 2024-01-01 NA        \n 9 1356110498 HEBKRAM'S PA   O      2024-01-01  2023-12-30 2024-01-01 NA        \n10 1508635640 HYPNOSIS412    O      2024-01-01  2023-12-30 2024-01-01 NA        \n# ℹ 3,504 more rows\n# ℹ 1 more variable: react_date <date>\n\n$Y\n# A tibble: 403 × 9\n   npi        org_parent   org_provider entity last_update cert_date  enum_date \n   <chr>      <chr>        <chr>        <chr>  <date>      <date>     <date>    \n 1 1689443723 RAE 6 LLC    RAE6TECH     O      2024-01-01  2023-12-30 2024-01-01\n 2 1124804042 POPLAR PEDI… POPLAR PEDI… O      2024-01-01  2024-01-01 2023-09-06\n 3 1942079942 ASTERRA LLC  AUBURN ACUP… O      2024-01-01  2024-01-01 2024-01-01\n 4 1578332573 LW CARE LLC  LW CARE LLC  O      2024-01-01  2023-12-27 2024-01-01\n 5 1013786011 LW CARE LLC  LW CARE LLC  O      2024-01-01  2024-01-01 2024-01-01\n 6 1831968833 LW CARE LLC  LW CARE LLC  O      2024-01-01  2024-01-01 2024-01-01\n 7 1568231561 LW CARE LLC  LW CARE LLC  O      2024-01-01  2024-01-01 2024-01-01\n 8 1467167593 1336854454   CLINICAL CA… O      2024-01-01  2024-01-01 2023-01-23\n 9 1821867821 LW CARE LLC  LW CARE LLC  O      2024-01-01  2024-01-01 2024-01-01\n10 1114410495 LAKE WASHIN… ADVANCED PA… O      2024-01-01  2024-01-01 2018-06-11\n# ℹ 393 more rows\n# ℹ 2 more variables: deact_date <date>, react_date <date>\n```\n\n\n:::\n:::\n\n\n\n\n#### Sole Proprietors\n\n   - If `sole_prop` is `X` *(Did Not Answer)*, then `cert_date` is `NA`\n   - Looks like `deact_date` & `react_date` are `NA` as well\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncollapse::rsplit(\n  base$I, \n  base$I$sole_prop) |> \n  purrr::map(fuimus::remove_quiet)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$N\n# A tibble: 10,405 × 13\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   <chr>      <chr>  <date>      <date>     <date>     <date>     <date>    \n 1 1912620808 I      2024-01-01  2024-01-01 2022-09-26 NA         NA        \n 2 1619688645 I      2024-01-01  2024-01-01 2022-12-12 NA         NA        \n 3 1265752158 I      2024-01-01  2024-01-01 2010-06-02 2018-02-20 2018-09-11\n 4 1609131515 I      2024-01-01  2024-01-01 2012-07-06 NA         NA        \n 5 1750841870 I      2024-01-01  2024-01-01 2019-03-24 NA         NA        \n 6 1942708748 I      2024-01-01  2024-01-01 2018-01-26 NA         NA        \n 7 1477895621 I      2024-01-01  2024-01-01 2013-03-25 NA         NA        \n 8 1891305488 I      2024-01-01  2024-01-01 2020-08-07 NA         NA        \n 9 1477322501 I      2024-01-01  2022-10-20 2024-01-01 NA         NA        \n10 1568231694 I      2024-01-01  2022-03-28 2024-01-01 NA         NA        \n# ℹ 10,395 more rows\n# ℹ 6 more variables: sole_prop <chr>, gender <chr>, first_name <chr>,\n#   middle_name <chr>, last_name <chr>, credential <chr>\n\n$X\n# A tibble: 29 × 10\n   npi     entity last_update enum_date  sole_prop gender first_name middle_name\n   <chr>   <chr>  <date>      <date>     <chr>     <chr>  <chr>      <chr>      \n 1 163915… I      2024-01-06  2005-12-22 X         M      STEPHEN    JOHN       \n 2 199270… I      2024-01-06  2005-08-10 X         F      PRISCILA   <NA>       \n 3 161994… I      2024-01-06  2006-02-21 X         F      NORMA      VB         \n 4 171097… I      2024-01-06  2005-11-03 X         F      SHAHIRA    HALIM      \n 5 137652… I      2024-01-06  2006-01-03 X         F      ROSEMARY   M          \n 6 103310… I      2024-01-06  2005-10-24 X         M      JOHN       B          \n 7 175032… I      2024-01-06  2006-06-16 X         F      MERRILL    <NA>       \n 8 114427… I      2024-01-06  2006-05-22 X         F      LUCILLE    J          \n 9 152804… I      2024-01-06  2005-12-22 X         M      JOHN       <NA>       \n10 157851… I      2024-01-06  2006-05-04 X         M      DONALD     MICHAEL    \n# ℹ 19 more rows\n# ℹ 2 more variables: last_name <chr>, credential <chr>\n\n$Y\n# A tibble: 4,833 × 13\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   <chr>      <chr>  <date>      <date>     <date>     <date>     <date>    \n 1 1518543511 I      2024-01-01  2024-01-01 2021-03-20 NA         NA        \n 2 1437575206 I      2024-01-01  2024-01-01 2014-03-17 NA         NA        \n 3 1053912162 I      2024-01-01  2024-01-01 2020-11-04 NA         NA        \n 4 1255864583 I      2024-01-01  2024-01-01 2017-04-04 NA         NA        \n 5 1831968973 I      2024-01-01  2023-12-12 2024-01-01 NA         NA        \n 6 1922877067 I      2024-01-01  2023-12-10 2024-01-01 NA         NA        \n 7 1568231603 I      2024-01-01  2023-12-20 2024-01-01 NA         NA        \n 8 1477322519 I      2024-01-01  2023-12-23 2024-01-01 NA         NA        \n 9 1912776055 I      2024-01-01  2023-12-19 2024-01-01 NA         NA        \n10 1730958877 I      2024-01-01  2023-12-26 2024-01-01 NA         NA        \n# ℹ 4,823 more rows\n# ℹ 6 more variables: sole_prop <chr>, gender <chr>, first_name <chr>,\n#   middle_name <chr>, last_name <chr>, credential <chr>\n```\n\n\n:::\n:::\n\n\n\n\n<hr>\n\n## Address\n\n   - Consider matches on **city, state, & zip** with different addresses\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\naddress <- collapse::funique(wk$address)\n\n# Exact match on all address fields\nexact <- address |> \n  dplyr::filter(\n    mail_address == prac_address,\n    mail_city == prac_city,\n    mail_state == prac_state,\n    mail_zip == prac_zip,\n    mail_country == prac_country,\n    mail_phone == prac_phone,\n    mail_fax == prac_fax) |> \n  collapse::fcompute(\n    npi = npi,\n    entity = entity,\n    purpose = \"MP\",\n    address = prac_address,\n    city = prac_city,\n    state = prac_state,\n    zip = arknpi::make_zip(prac_zip),\n    country = prac_country,\n    phone = arknpi::make_phone(prac_phone),\n    fax = arknpi::make_phone(prac_fax))\n\n# Match on all except FAX\nfax <- address |> \n  dplyr::filter(\n    npi %!in% exact$npi,  \n    mail_address == prac_address, \n    mail_city == prac_city,\n    mail_state == prac_state,\n    mail_country == prac_country,\n    mail_zip == prac_zip,\n    mail_phone == prac_phone) |> \n  collapse::fcompute(\n    npi = npi,\n    entity = entity,\n    address = prac_address,\n    city = prac_city,\n    state = prac_state,\n    zip = arknpi::make_zip(prac_zip),\n    country = prac_country,\n    phone = arknpi::make_phone(prac_phone),\n    fax = arknpi::make_case(mail_fax, prac_fax),\n    purpose = arknpi::make_purpose(mail_fax, prac_fax)) |>\n  collapse::fmutate(fax = arknpi::make_phone(fax))\n\n# Match on all except ZIP, PHONE, and FAX\nphone <- address |> \n  dplyr::filter(npi %!in% c(exact$npi, fax$npi),      \n    mail_address == prac_address,\n    mail_city == prac_city,\n    mail_state == prac_state,\n    mail_country == prac_country) |>\n  collapse::fcompute(\n    npi = npi,\n    entity = entity,\n    purpose = arknpi::make_purpose(mail_phone, prac_phone),\n    address = prac_address,\n    city = prac_city,\n    state = prac_state,\n    zip = arknpi::make_case(mail_zip, prac_zip),\n    country = prac_country,\n    phone = arknpi::make_case(mail_phone, prac_phone),\n    fax = arknpi::make_case(mail_fax, prac_fax)) |> \n  collapse::fmutate(\n    zip = arknpi::make_zip(zip),\n    phone = arknpi::make_phone(phone),\n    fax = arknpi::make_phone(fax))\n\n# Pivot remaining addresses\npiv <- address |> \n  dplyr::filter(npi %!in% c(exact$npi, fax$npi, phone$npi)) |> \n  tidyr::pivot_longer(\n    -c(npi, entity), \n    names_to = \"type_part\", \n    values_to = \"value\") |> \n  tidyr::separate_wider_delim(\n    type_part, \n    delim = \"_\", \n    names = c(\"type\", \"part\")) |> \n  collapse::fmutate(\n    purpose = dplyr::case_when(\n      type == \"mail\" ~ \"M\",\n      type == \"prac\" ~ \"P\",\n    .default = type),\n    type = NULL) |>\n  tidyr::pivot_wider(\n    names_from = part, \n    values_from = value) |> \n  collapse::fmutate(\n    zip = arknpi::make_zip(zip),\n    phone = arknpi::make_phone(phone),\n    fax = arknpi::make_phone(fax))\n\naddress <- collapse::rowbind(exact, fax, phone, piv)\n\naddress <- collapse::rsplit(\n  address, \n  address$entity) |> \n  purrr::map(remove_quiet)\n\naddress\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$I\n# A tibble: 22,883 × 10\n   npi        entity purpose address       city  state zip   country phone fax  \n   <chr>      <chr>  <chr>   <chr>         <chr> <chr> <chr> <chr>   <chr> <chr>\n 1 1437575206 I      MP      3840 PACKARD… ANN … MI    4810… US      (734… (734…\n 2 1477895621 I      MP      3144 SANTA A… EL M… CA    9173… US      (626… (626…\n 3 1346019486 I      MP      57 TOWNSHIP … CHES… OH    4561… US      (740… (740…\n 4 1265201206 I      MP      822 LOVELACE… BREW… AL    3642… US      (251… (800…\n 5 1447029483 I      MP      350 FAIRWAY … DEER… FL    3344… US      (877… (866…\n 6 1295504249 I      MP      1550 N 115TH… SEAT… WA    9813… US      (206… (206…\n 7 1073382024 I      MP      401 16TH ST … ROCH… MN    5590… US      (507… (507…\n 8 1639948698 I      MP      920 SARATOGA… SAN … CA    9512… US      (408… (408…\n 9 1508635574 I      MP      14725 SE RHO… PORT… OR    9723… US      (971… (971…\n10 1932978905 I      MP      3801 KELL BL… WICH… TX    7630… US      (940… (940…\n# ℹ 22,873 more rows\n\n$O\n# A tibble: 5,839 × 10\n   npi        entity purpose address       city  state zip   country phone fax  \n   <chr>      <chr>  <chr>   <chr>         <chr> <chr> <chr> <chr>   <chr> <chr>\n 1 1548924087 O      MP      46 GRAMATAN … MOUN… NY    1055… US      (295… (646…\n 2 1205605342 O      MP      7610 CARROLL… TAKO… MD    2091… US      (301… (301…\n 3 1114796257 O      MP      6510 KENILWO… RIVE… MD    2073… US      (301… (301…\n 4 1902675945 O      MP      2585 PACIFIC… TORR… CA    9050… US      (424… (310…\n 5 1538938576 O      MP      10751 W ROWE… PEOR… AZ    8538… US      (623… (623…\n 6 1568231512 O      MP      1121 FIRECRA… JUST… TX    7624… US      (940… (940…\n 7 1912776964 O      MP      3760 CURTIS … COCOA FL    3292… US      (321… (321…\n 8 1306615364 O      MP      350 FAIRWAY … DEER… FL    3344… US      (877… (866…\n 9 1336918390 O      MP      240 E GARRIS… GAST… NC    2805… US      (980… (980…\n10 1649049610 O      MP      6751 N SUNSE… GLEN… AZ    8530… US      (775… (702…\n# ℹ 5,829 more rows\n```\n\n\n:::\n:::\n\n\n\n\n### Secondary Practice Locations\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nploc <- tidytable::fread(\n  \"D:/NBER_NPI_Archives/weekly/unzipped/practicelocation/pl_pfile_20240101-20240107.csv\",\n  colClasses = list(character = 1:10)) |> \n  setNames(c(\"npi\", \"add_1\", \"add_2\", \"city\", \"state\", \n             \"zip\", \"country\", \"phone\", \"ext\", \"fax\")) |> \n  purrr::map_dfr(fuimus::na_if_common) |> \n  fuimus::combine(address, c(\"add_1\", \"add_2\"), sep = \" \") |>\n  fuimus::combine(phone, c(\"phone\", \"ext\"), sep = \" \") |>\n  dplyr::reframe(\n    npi,\n    purpose = \"S\",\n    address,\n    city,\n    state,\n    zip = arknpi::make_zip(zip),\n    country,\n    phone = arknpi::make_phone(phone),\n    fax = arknpi::make_phone(fax))\n\nploc\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4,958 × 9\n   npi        purpose address              city  state zip   country phone fax  \n   <chr>      <chr>   <chr>                <chr> <chr> <chr> <chr>   <chr> <chr>\n 1 1336918309 S       455 E Eisenhower Pk… Ann … MI    4810… US      (734… (517…\n 2 1073382040 S       455 E Eisenhower Pk… Ann … MI    4810… US      (888… <NA> \n 3 1376008821 S       876 Dutchess Tpke    Poug… NY    1260… US      (845… <NA> \n 4 1750841870 S       300 Crescent Dr      Vaca… CA    9568… US      (949… <NA> \n 5 1811383706 S       Dogwood Ave Buildin… John… TN    37614 US      (423… (423…\n 6 1811383706 S       111 W Stone Dr Ste … King… TN    3766… US      (423… <NA> \n 7 1255864583 S       10521 Meridian Ave N Seat… WA    9813… US      (206… <NA> \n 8 1295396158 S       176 Palisade Ave     Jers… NJ    0730… US      (201… <NA> \n 9 1295396158 S       29 E 29th St         Bayo… NJ    0700… US      (201… <NA> \n10 1285629089 S       4 Sheridan Sq Suite… King… TN    3766… US      (423… (423…\n# ℹ 4,948 more rows\n```\n\n\n:::\n:::\n\n\n\n\n<hr>\n\n## Taxonomy\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntaxonomy <- wk$taxonomy |> \n  dplyr::select(\n    npi, \n    entity, \n    dplyr::starts_with(\"taxonomy\")) |> \n  collapse::fmutate(\n    taxonomy_level = data.table::fcase(\n      taxonomy_primary == \"Y\", \"P\",\n      taxonomy_primary == \"N\", \"O\",\n      taxonomy_primary == \"X\", \"X\"),\n    taxonomy_primary = NULL)\n\ntaxonomy <- collapse::rowbind(\n  taxonomy |> \n    collapse::fsubset(codex::na(taxonomy_group)) |> \n    collapse::fselect(-taxonomy_group) |> \n    collapse::funique(),\n  taxonomy |> \n    collapse::fsubset(codex::not_na(taxonomy_group)) |> \n    collapse::fselect(-taxonomy_code, -taxonomy_level) |> \n    collapse::funique() |> \n    collapse::frename(taxonomy_code = taxonomy_group) |> \n    collapse::fmutate(taxonomy_level = \"G\")) |> \n  collapse::fmutate(\n    taxonomy_level = factor(\n      taxonomy_level, \n      levels = c(\"P\", \"O\", \"X\", \"G\"), \n      ordered = TRUE)) |> \n  dplyr::arrange(npi, taxonomy_level) |> \n  #------------------Deduplicate Primary Taxonomy\n  collapse::fmutate(primary = ifelse(taxonomy_level == \"P\", taxonomy_code, NA_character_)) |> \n  tidyr::fill(primary, .by = npi) |> \n  collapse::fgroup_by(npi) |>\n  collapse::fmutate(eq = ifelse(taxonomy_level != \"P\" & taxonomy_code == primary, TRUE, FALSE)) |> \n  collapse::fungroup() |> \n  collapse::fsubset(!eq) |> \n  collapse::fselect(-eq, -primary)\n\ncollapse::rsplit(\n  taxonomy, \n  taxonomy$entity) |> \n  purrr::map(remove_quiet)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$I\n# A tibble: 18,711 × 4\n   npi        entity taxonomy_code taxonomy_level\n   <chr>      <chr>  <chr>         <ord>         \n 1 1003009861 I      207RC0000X    P             \n 2 1003013137 I      363AM0700X    P             \n 3 1003018060 I      106H00000X    P             \n 4 1003047531 I      207L00000X    P             \n 5 1003047531 I      390200000X    O             \n 6 1003052903 I      2084P0800X    P             \n 7 1003063173 I      208G00000X    P             \n 8 1003109091 I      208100000X    P             \n 9 1003109091 I      2081P2900X    O             \n10 1003122698 I      2085R0202X    P             \n# ℹ 18,701 more rows\n\n$O\n# A tibble: 3,318 × 4\n   npi        entity taxonomy_code taxonomy_level\n   <chr>      <chr>  <chr>         <ord>         \n 1 1003096488 O      261Q00000X    P             \n 2 1003196072 O      3416L0300X    P             \n 3 1003200874 O      253Z00000X    P             \n 4 1003200874 O      251E00000X    O             \n 5 1003330226 O      251E00000X    P             \n 6 1003330226 O      251J00000X    O             \n 7 1003337734 O      324500000X    P             \n 8 1003407230 O      261QM1300X    P             \n 9 1003407230 O      251E00000X    O             \n10 1003407230 O      193200000X    G             \n# ℹ 3,308 more rows\n```\n\n\n:::\n:::\n\n\n\n\n## License\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlicense <- collapse::fselect(\n  wk$taxonomy, \n  npi, \n  entity, \n  license_no, \n  license_state) |> \n  collapse::funique()\n\nlicense <- collapse::rsplit(\n  license, \n  license$entity) |> \n  purrr::map(\n    function(df) \n      fuimus::remove_quiet(df) |> \n      dplyr::filter(codex::not_na(license_no)))\n\nlicense\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$I\n# A tibble: 14,155 × 4\n   npi        entity license_no license_state\n   <chr>      <chr>  <chr>      <chr>        \n 1 1518543511 I      70884      NY           \n 2 1619688645 I      0001270234 VA           \n 3 1619688645 I      0024185857 VA           \n 4 1437575206 I      6301009991 MI           \n 5 1053912162 I      032328     NY           \n 6 1265752158 I      PS52491    FL           \n 7 1609131515 I      280453-1   NY           \n 8 1942708748 I      585919     NY           \n 9 1255864583 I      MC60672915 WA           \n10 1255864583 I      LH60963777 WA           \n# ℹ 14,145 more rows\n\n$O\n# A tibble: 532 × 4\n   npi        entity license_no license_state\n   <chr>      <chr>  <chr>      <chr>        \n 1 1952724692 O      6301009991 MI           \n 2 1508824574 O      SA5335     FL           \n 3 1528515327 O      6401015547 MI           \n 4 1891209284 O      ISW01554   RI           \n 5 1437334182 O      9190       TX           \n 6 1427109271 O      602289671  WA           \n 7 1750821781 O      168900     WA           \n 8 1093182198 O      190859AP   CA           \n 9 1093182198 O      190075AP   CA           \n10 1841677408 O      190070AP   CA           \n# ℹ 522 more rows\n```\n\n\n:::\n:::\n\n\n\n\n## Identifiers\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nidentifier <- wk$identifier |> \n  # Remove Taxonomy Codes\n  collapse::fsubset(\n    codex::sf_ndetect(otid, \"^[A-Z0-9]{9}X$\")) |> \n  collapse::fmutate(otid_type = as.character(as.integer(otid_type)))\n\ncollapse::rsplit(\n  identifier, \n  identifier$entity) |> \n  purrr::map(remove_quiet)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$I\n# A tibble: 3,052 × 6\n   npi        entity otid       otid_type otid_state otid_issuer                \n   <chr>      <chr>  <chr>      <chr>     <chr>      <chr>                      \n 1 1003685140 I      3496       1         NH         STATE OF NEW HAMPSHIRE OFF…\n 2 1134998198 I      1194322628 5         MI         <NA>                       \n 3 1578544367 I      10007752   5         TX         <NA>                       \n 4 1578544367 I      152031401  5         TX         <NA>                       \n 5 1578544367 I      152028001  5         TX         <NA>                       \n 6 1316936222 I      4160095    1         TN         BLUE CROSS                 \n 7 1316936222 I      1053635    5         LA         <NA>                       \n 8 1316936222 I      087281     5         AZ         <NA>                       \n 9 1316936222 I      3000540    5         TN         <NA>                       \n10 1316936222 I      P00444174  1         <NA>       MEDICARE RAILROAD          \n# ℹ 3,042 more rows\n\n$O\n# A tibble: 1,314 × 6\n   npi        entity otid       otid_type otid_state otid_issuer          \n   <chr>      <chr>  <chr>      <chr>     <chr>      <chr>                \n 1 1417726456 O      0155098    5         OH         <NA>                 \n 2 1225765241 O      U5083      1         TX         TEXAS MEDICAL LICENSE\n 3 1689443665 O      1417266396 5         NY         <NA>                 \n 4 1255611539 O      014469     1         TX         TEXAS HCSSA LICENSE  \n 5 1508824574 O      890596700  5         FL         <NA>                 \n 6 1750958104 O      1386940575 5         WI         <NA>                 \n 7 1982294732 O      250000218  5         NV         <NA>                 \n 8 1891209284 O      U300404468 1         RI         MEDICARE PTAN        \n 9 1730729385 O      1952817926 1         <NA>       ORGANIZATIONAL NPI   \n10 1730729385 O      1043526098 1         <NA>       NPI                  \n# ℹ 1,304 more rows\n```\n\n\n:::\n:::\n\n\n\n\n## Other Names\n\n   - change prefix to `oname_`\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nwk$other <- wk$other |> \n  setNames(c(\n    \"npi\", \"entity\", \"onm_org\", \n    \"onm_org_type\", \"onm_prefix\", \n    \"onm_first\", \"onm_middle\", \n    \"onm_last\", \"onm_last_type\", \n    \"onm_suffix\", \"onm_credential\")) |> \n  collapse::fselect(-onm_suffix, -onm_prefix)\n\nother <- collapse::rsplit(\n  wk$other, \n  wk$other$entity) |> \n  purrr::map(remove_quiet)\n\nother$O <- collapse::frename(other$O, onm_type = onm_org_type)\nother$I <- collapse::frename(other$I, onm_type = onm_last_type)\n\nother$I\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,221 × 7\n   npi        entity onm_first onm_middle onm_last   onm_type onm_credential\n   <chr>      <chr>  <chr>     <chr>      <chr>      <chr>    <chr>         \n 1 1255864583 I      GWEN      <NA>       WILSON     2        LMHC, ATR     \n 2 1659140796 I      KATELIN   LEE ANN    BOYER      1        <NA>          \n 3 1184493223 I      AESHA     ISHWARBHAI PATEL      5        <NA>          \n 4 1437928579 I      TREVA     JO         MOYA       1        <NA>          \n 5 1881463826 I      AMANDA    RENEE      SCHELLHORN 1        <NA>          \n 6 1871362814 I      BRITTANY  C          DARNELL    1        CCMA-CHC      \n 7 1770352718 I      PEBBLES   MAURINE    YEE        5        PMHNP-BC      \n 8 1497524441 I      CARING    FOR        MAMAS      2        <NA>          \n 9 1033988084 I      JANINE    LISSETT    LESSLEY    1        <NA>          \n10 1487423430 I      <NA>      <NA>       <NA>       2        <NA>          \n# ℹ 1,211 more rows\n```\n\n\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\noname <- tidytable::fread(\n  \"D:/NBER_NPI_Archives/weekly/unzipped/othername/othername_pfile_20240101-20240107.csv\",\n    colClasses = list(character = 1:3)) |> \n  janitor::clean_names() |>\n    purrr::map_dfr(fuimus::na_if_common) |> \n  dplyr::reframe(\n    npi, \n    entity = \"O\",\n    oname_org = provider_other_organization_name, \n    oname_type = provider_other_organization_name_type_code)\n\n\ndplyr::left_join(oname, other$O, by = c(\"npi\", \"entity\")) |> \n  dplyr::arrange(npi)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,721 × 6\n   npi        entity oname_org                       oname_type onm_org onm_type\n   <chr>      <chr>  <chr>                           <chr>      <chr>   <chr>   \n 1 1003096488 O      Trace Regional Hospital         3          TRACE … 3       \n 2 1003196072 O      Hocking Township Fire Dept.     3          HOCKIN… 3       \n 3 1003199829 O      Plains Ear, Nose, Throat & Fac… 3          PLAINS… 3       \n 4 1003330226 O      Thrive Skilled Pediatric Care   3          THRIVE… 3       \n 5 1003337734 O      Ohio Detox Center               3          OHIO D… 3       \n 6 1003372533 O      Glacier Valley SBS FFS          5          <NA>    <NA>    \n 7 1003407230 O      Milk Guide                      3          MILK G… 3       \n 8 1003407230 O      Mother Nurture Lactation Care … 3          MILK G… 3       \n 9 1003429242 O      Durango Neurosurgery Satellite… 3          DURANG… 3       \n10 1003429903 O      25 Road OB-GYN Clinic           3          25 ROA… 3       \n# ℹ 1,711 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\ndplyr::arrange(other$O, npi)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,125 × 4\n   npi        entity onm_org                                           onm_type\n   <chr>      <chr>  <chr>                                             <chr>   \n 1 1003096488 O      TRACE REGIONAL HOSPITAL                           3       \n 2 1003196072 O      HOCKING TOWNSHIP FIRE DEPT                        3       \n 3 1003199829 O      PLAINS EAR, NOSE, THROAT & FACIAL PLASTIC SURGERY 3       \n 4 1003330226 O      THRIVE SKILLED PEDIATRIC CARE                     3       \n 5 1003337734 O      OHIO DETOX CENTER                                 3       \n 6 1003407230 O      MILK GUIDE                                        3       \n 7 1003429242 O      DURANGO NEUROSURGERY SATELLITE CLINIC             3       \n 8 1003429903 O      25 ROAD OB-GYN CLINIC                             3       \n 9 1003463092 O      MEDCARE PHARMACY                                  3       \n10 1003495466 O      LIFESTANCE HEALTH                                 3       \n# ℹ 1,115 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\ndplyr::arrange(oname, npi)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,721 × 4\n   npi        entity oname_org                                        oname_type\n   <chr>      <chr>  <chr>                                            <chr>     \n 1 1003096488 O      Trace Regional Hospital                          3         \n 2 1003196072 O      Hocking Township Fire Dept.                      3         \n 3 1003199829 O      Plains Ear, Nose, Throat & Facial Plastic Surge… 3         \n 4 1003330226 O      Thrive Skilled Pediatric Care                    3         \n 5 1003337734 O      Ohio Detox Center                                3         \n 6 1003372533 O      Glacier Valley SBS FFS                           5         \n 7 1003407230 O      Milk Guide                                       3         \n 8 1003407230 O      Mother Nurture Lactation Care LLC                3         \n 9 1003429242 O      Durango Neurosurgery Satellite Clinic            3         \n10 1003429903 O      25 Road OB-GYN Clinic                            3         \n# ℹ 1,711 more rows\n```\n\n\n:::\n:::\n\n\n\n\n\n## Authorized Official\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nwk$ao |> \n  collapse::fmutate(ao_phone = arknpi::make_phone(ao_phone)) |> \n  collapse::fselect(-ao_prefix, -ao_suffix)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3,917 × 8\n   npi        entity ao_first  ao_middle ao_last ao_credential ao_title ao_phone\n   <chr>      <chr>  <chr>     <chr>     <chr>   <chr>         <chr>    <chr>   \n 1 1952724692 O      MICHELE   <NA>      WHITE   PHD, LLP, LPC OWNER    (734) 9…\n 2 1548924087 O      TANESHA   <NA>      MORGAN  LCSW          CEO      (929) 5…\n 3 1295504330 O      KENDRA    <NA>      TAYLOR  <NA>          OWNER    (615) 2…\n 4 1386413417 O      MELISSA   <NA>      DELLA … LCSW          OWNER    (520) 8…\n 5 1558130690 O      MALYNDI   R         WEST    <NA>          OWNER &… (512) 5…\n 6 1821867961 O      AURORA    CANE      HOYLE   FNP-BC        PRIMARY… (503) 5…\n 7 1649049784 O      ASMITA    <NA>      PATEL   MD            SECRETA… (630) 3…\n 8 1275302317 O      RANGANAR… <NA>      NARASI… <NA>          MANAGER… (781) 3…\n 9 1356110498 O      AKRAM     <NA>      ABD EL… MD            PHYSICI… (704) 4…\n10 1508635640 O      JAYSON    <NA>      ROWLAND CHT CPH       HYPNOTH… (412) 2…\n# ℹ 3,907 more rows\n```\n\n\n:::\n:::\n\n\n\n\n<hr>\n\n## Session Information \n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n**R version 4.4.2 (2024-10-31 ucrt)**\n\n**Platform:** x86_64-w64-mingw32/x64 \n\n**locale:**\n_LC_COLLATE=English_United States.utf8_, _LC_CTYPE=English_United States.utf8_, _LC_MONETARY=English_United States.utf8_, _LC_NUMERIC=C_ and _LC_TIME=English_United States.utf8_\n\n**attached base packages:** \n_stats_, _graphics_, _grDevices_, _utils_, _datasets_, _methods_ and _base_\n\n**other attached packages:** \n_arknpi(v.0.0.0.9001)_, _codex(v.0.0.1)_, _fuimus(v.0.0.5.9002)_, _collapse(v.2.0.18)_, _data.table(v.1.16.99)_, _lubridate(v.1.9.4)_, _forcats(v.1.0.0)_, _stringr(v.1.5.1)_, _dplyr(v.1.1.4)_, _purrr(v.1.0.2)_, _readr(v.2.1.5)_, _tidyr(v.1.3.1.9000)_, _tibble(v.3.2.1)_, _ggplot2(v.3.5.1)_ and _tidyverse(v.2.0.0)_\n\n**loaded via a namespace (and not attached):** \n_rappdirs(v.0.3.3)_, _utf8(v.1.2.4)_, _generics(v.0.1.3)_, _stringi(v.1.8.4)_, _hms(v.1.1.3)_, _digest(v.0.6.37)_, _magrittr(v.2.0.3)_, _evaluate(v.1.0.1)_, _grid(v.4.4.2)_, _timechange(v.0.3.0)_, _fastmap(v.1.2.0)_, _jsonlite(v.1.8.9)_, _pins(v.1.4.0)_, _pander(v.0.6.5)_, _tidytable(v.0.11.2)_, _fansi(v.1.0.6)_, _scales(v.1.3.0)_, _textshaping(v.0.4.1)_, _RApiSerialize(v.0.1.4)_, _cli(v.3.6.3)_, _rlang(v.1.1.4)_, _munsell(v.0.5.1)_, _withr(v.3.0.2)_, _yaml(v.2.3.10)_, _qs(v.0.27.2)_, _tools(v.4.4.2)_, _parallel(v.4.4.2)_, _tzdb(v.0.4.0)_, _colorspace(v.2.1-1)_, _vctrs(v.0.6.5)_, _R6(v.2.5.1)_, _lifecycle(v.1.0.4)_, _snakecase(v.0.11.1)_, _cheapr(v.0.9.92)_, _stringfish(v.0.16.0)_, _fs(v.1.6.5)_, _htmlwidgets(v.1.6.4)_, _janitor(v.2.2.0)_, _ragg(v.1.3.3)_, _pkgconfig(v.2.0.3)_, _RcppParallel(v.5.1.9)_, _pillar(v.1.9.0)_, _gtable(v.0.3.6)_, _glue(v.1.8.0)_, _Rcpp(v.1.0.13-1)_, _systemfonts(v.1.1.0)_, _xfun(v.0.49)_, _tidyselect(v.1.2.1)_, _rstudioapi(v.0.17.1)_, _knitr(v.1.49)_, _htmltools(v.0.5.8.1)_, _rmarkdown(v.2.29)_ and _compiler(v.4.4.2)_\n:::\n:::\n",
    "supporting": [
      "nppes_archives_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}