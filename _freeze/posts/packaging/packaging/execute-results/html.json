{
  "hash": "54fc5fd4f7163006ecaed47f43f9fd63",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"R Packaging Workflow\"\nformat:\n  html:\n    reference-location: margin\n    other-links:\n      - text: Regex Cheatsheet\n        icon: bookmark-plus\n        href: https://github.com/raredd/regex\n      - text: RexEgg\n        icon: bookmark-plus\n        href: https://www.rexegg.com/\n      - text: Regex in R\n        icon: bookmark-plus\n        href: https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html\neditor_options: \n  chunk_output_type: console\n---\n\n::: {.cell}\n\n:::\n\n\n\n\n\n# Create A Package\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncreate_package(\"C:/Path/To/Folder/<package-name>\")\n```\n:::\n\n\n\n\nConnect to Git\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nuse_git()\n```\n:::\n\n\n\n\n_Will ask you to commit files to Git. Say yes._\n\nCreate Repository on GitHub\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nuse_github()\n```\n:::\n\n\n\n\n_Will ask you to commit files to GitHub. Say yes._\n\nAdd License & COC\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nuse_mit_license(\"Your Full Name\")\nuse_code_of_conduct(\"your@email.com\")\n```\n:::\n\n\n\n\nAdd README, Package Document, and News\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nuse_readme_rmd()\nuse_package_doc()\nuse_news_md()\n```\n:::\n\n\n\n\nUse `{roxyglobals}`\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nroxyglobals::use_roxyglobals()\n```\n:::\n\n\n\n\nUse `{testthat}`\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nuse_testthat(parallel = TRUE)\nuse_test(\"add-test\")\n```\n:::\n\n\n\n\nCreate `{pkgdown}` site\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nuse_pkgdown_github_pages()\n```\n:::\n\n\n\n\nRun Before Committing\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncheck()\nbuild_rmd(\"README.Rmd\")\nuse_tidy_description()\n```\n:::\n\n\n\n\n\n# Add a `{pin}`\n\nCall `usethis::use_data_raw(\"<dataset>\")`\n\nAdd `pins_internal.R` file to `data-raw` directory\n\n\n\n\n::: {.cell layout-align=\"center\" filename='pins_internal.R'}\n\n```{.r .cell-code}\npin_update <- function(x, name, title, description) {\n\n  board <- pins::board_folder(\n    here::here(\"inst/extdata/pins\")\n    )\n\n  board |>\n    pins::pin_write(\n      x,\n      name        = name,\n      title       = title,\n      description = description,\n      type        = \"qs\"\n    )\n\n  board |> pins::write_board_manifest()\n\n}\n\ndelete_pins <- function(pin_names) {\n\n  board <- pins::board_folder(\n    here::here(\"inst/extdata/pins\")\n  )\n\n  pins::pin_delete(board, names = pin_names)\n\n}\n```\n:::\n\n\n\n\nCreate a new pin\n\n\n\n\n::: {.cell layout-align=\"center\" filename='dataset.R'}\n\n```{.r .cell-code}\nsource(here::here(\"data-raw\", \"pins_internal.R\"))\n\npin_update(\n  dataset,\n  name = \"object_name\",\n  title = \"Short Description\",\n  description = \"Long Description\"\n)\n```\n:::\n\n\n\n\nAdd `pins.R` file to package\n\n\n\n\n::: {.cell layout-align=\"center\" filename='pins.R'}\n\n```{.r .cell-code}\n#' Return GitHub raw url\n#'\n#' @param x `<chr>` string\n#'\n#' @returns `<chr>` GitHub raw url\n#'\n#' @examples\n#' gh_raw(\"andrewbruce/example/main/inst/pins/\")\n#'\n#' @autoglobal\n#'\n#' @keywords internal\n#'\n#' @export\ngh_raw <- function(x) {\n  paste0(\"https://raw.githubusercontent.com/\", x)\n}\n\n#' Mount [pins][pins::pins-package] board\n#'\n#' @param source `<chr>` `\"local\"` or `\"remote\"`\n#'\n#' @param package `<chr>` package name\n#'\n#' @returns `<pins_board_folder>` or `<pins_board_url>`\n#'\n#' @autoglobal\n#'\n#' @keywords internal\n#'\n#' @export\nmount_board <- function(source = c(\"local\", \"remote\"), package = \"<package_name>\") {\n\n  source <- match.arg(source)\n\n  switch(\n    source,\n    local = pins::board_folder(\n      fs::path_package(\"extdata/pins\", package = package)),\n    remote = pins::board_url(\n      gh_raw(\n        glue::glue(\"andrewallenbruce/{package}/master/inst/extdata/pins/\")\n      )\n    )\n  )\n}\n\n#' Get a pinned dataset from a [pins][pins::pins-package] board\n#'\n#' @param pin `<chr>` string name of pinned dataset\n#'\n#' @param ... additional arguments passed to `mount_board()`\n#'\n#' @returns `<tibble>` or `<data.frame>`\n#'\n#' @autoglobal\n#'\n#' @keywords internal\n#'\n#' @export\nget_pin <- function(pin, ...) {\n\n  board <- mount_board(...)\n\n  pin <- rlang::arg_match0(pin, list_pins())\n\n  pins::pin_read(board, pin)\n\n}\n\n#' List pins from a [pins][pins::pins-package] board\n#'\n#' @param ... arguments to pass to [mount_board()]\n#'\n#' @returns `<list>` of [pins][pins::pins-package]\n#'\n#' @autoglobal\n#'\n#' @keywords internal\n#'\n#' @export\nlist_pins <- function(...) {\n\n  board <- mount_board(...)\n\n  pins::pin_list(board)\n\n}\n```\n:::\n\n\n\n\n\n## Session Information \n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n**R version 4.4.1 (2024-06-14 ucrt)**\n\n**Platform:** x86_64-w64-mingw32/x64 \n\n**locale:**\n_LC_COLLATE=English_United States.utf8_, _LC_CTYPE=English_United States.utf8_, _LC_MONETARY=English_United States.utf8_, _LC_NUMERIC=C_ and _LC_TIME=English_United States.utf8_\n\n**attached base packages:** \n_stats_, _graphics_, _grDevices_, _utils_, _datasets_, _methods_ and _base_\n\n**other attached packages:** \nusethis(v.3.0.0)\n\n**loaded via a namespace (and not attached):** \n_digest(v.0.6.37)_, _fastmap(v.1.2.0)_, _xfun(v.0.48)_, _magrittr(v.2.0.3)_, _glue(v.1.8.0)_, _knitr(v.1.48)_, _htmltools(v.0.5.8.1)_, _rmarkdown(v.2.29)_, _lifecycle(v.1.0.4)_, _cli(v.3.6.3)_, _pander(v.0.6.5)_, _vctrs(v.0.6.5)_, _textshaping(v.0.4.0)_, _systemfonts(v.1.1.0)_, _compiler(v.4.4.1)_, _purrr(v.1.0.2)_, _rstudioapi(v.0.17.1)_, _tools(v.4.4.1)_, _ragg(v.1.3.3)_, _evaluate(v.1.0.1)_, _Rcpp(v.1.0.13)_, _yaml(v.2.3.10)_, _rlang(v.1.1.4)_, _jsonlite(v.1.8.9)_, _fs(v.1.6.5)_ and _htmlwidgets(v.1.6.4)_\n:::\n:::\n",
    "supporting": [
      "packaging_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}