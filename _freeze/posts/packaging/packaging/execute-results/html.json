{
  "hash": "bd10480ae4de4d04ba2071da915617ec",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"R Packaging Workflow\"\nformat:\n  html:\n    reference-location: margin\n    other-links:\n      - text: Regex Cheatsheet\n        icon: bookmark-plus\n        href: https://github.com/raredd/regex\n      - text: RexEgg\n        icon: bookmark-plus\n        href: https://www.rexegg.com/\n      - text: Regex in R\n        icon: bookmark-plus\n        href: https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html\neditor_options: \n  chunk_output_type: console\n---\n\n::: {.cell}\n\n:::\n\n\n\n\n\n# Create A Package\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nusethis::create_package(\"C:/Path/To/Folder/<package-name>\")\n\nusethis::create_package(\n  \"C:/Users/Andrew/Desktop/Repositories/rvu\",\n  fields = list(\n    Package = \"rvu\",\n    Title = \"Tidy Revenue Integrity Tools\",\n    \"Authors@R\" = utils::person(\n      \"Andrew\", \n      \"Bruce\", \n      , \n      email = \"andrewallenbruce@gmail.com\", \n      role = c(\"aut\", \"cre\", \"cph\")\n      ),\n    Maintainer = \"Andrew Bruce <andrewallenbruce@gmail.com>\",\n    Description = \"Revenue integrity tools.\",\n    License = \"MIT + file LICENSE\",\n    URL = \"https://github.com/andrewallenbruce/rvu\",\n    BugReports = \"https://github.com/andrewallenbruce/rvu/issues\")\n  )\n```\n:::\n\n\n\n\nConnect to Git\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nusethis::use_git()\n```\n:::\n\n\n\n\n_Will ask you to commit files to Git. Say yes._\n\nCreate Repository on GitHub\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nusethis::use_github()\n```\n:::\n\n\n\n\n_Will ask you to commit files to GitHub. Say yes._\n\nAdd License & COC\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nusethis::use_mit_license(\"Your Full Name\")\nusethis::use_code_of_conduct(\"your@email.com\")\n```\n:::\n\n\n\n\nAdd README, Package Document, and News\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nusethis::use_readme_rmd()\nusethis::use_package_doc()\nusethis::use_news_md()\n```\n:::\n\n\n\n\nUse `{roxyglobals}`\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nroxyglobals::use_roxyglobals()\n```\n:::\n\n\n\n\nUse `{testthat}`\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nusethis::use_testthat(parallel = TRUE)\nusethis::use_test(\"add-test\")\n```\n:::\n\n\n\n\nCreate `{pkgdown}` site\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nusethis::use_pkgdown_github_pages()\n```\n:::\n\n\n\n\nUse `_pkgdown.yml`\n\n\n\n\n::: {.cell layout-align=\"center\" filename='_pkgdown.yml'}\n\n```{.yaml .cell-code}\nurl: https://andrewallenbruce.github.io/codex/\n\ntemplate:\n  bootstrap: 5\n  light-switch: true\n  bslib:\n    base_font: {google: \"Roboto\"}\n    heading_font: {google: \"Roboto Slab\"}\n    code_font: {google: \"Source Code Pro\"}\n\nnavbar:\n  structure:\n    left:\n    - intro\n    - reference\n    - articles\n    - tutorials\n    - news\n    right:\n    - search\n    - github\n    - lightswitch\n  components:\n    reference:\n      text: Reference\n      href: reference/index.html\n    search:\n      search: []\n    lightswitch:\n      icon: fa-sun\n      aria-label: Light switch\n      id: lightswitch\n      menu:\n      - text: Light\n        theme: light\n        icon: fa-sun\n      - text: Dark\n        theme: dark\n        icon: fa-moon\n      - text: Auto\n        theme: auto\n        icon: fa-adjust\n    news:\n      text: Changelog\n      href: news/index.html\n    github:\n      icon: fab fa-github fa-lg\n      href: https://github.com/andrewallenbruce/codex/\n      aria-label: GitHub\n```\n:::\n\n\n\n\nExample of Function Reference\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.yaml .cell-code}\n- title: Classifications\n  desc: >\n    Classification systems for added context and dimensionality reduction.\n  contents:\n  - betos\n  - ndc_lookup\n  - taxonomies\n  - taxonomy_codes\n  - taxonomy_crosswalk\n- title: Utilities\n  desc: >\n    Various helper functions.\n  contents:\n  - change\n  - geomean\n  - years_df\n  - duration_vec\n  - summary_stats\n  - add_counties\n```\n:::\n\n\n\n\n\nRun Before Committing\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndevtools::check()\ndevtools::build_rmd(\"README.Rmd\")\nusethis::use_tidy_description()\n```\n:::\n\n\n\n\n\n# Add a `{pin}`\n\nCall `usethis::use_data_raw(\"<dataset>\")`\n\nAdd `pins_internal.R` file to `data-raw` directory\n\n\n\n\n::: {.cell layout-align=\"center\" filename='pins_internal.R'}\n\n```{.r .cell-code}\npin_update <- function(x, name, title, description) {\n\n  board <- pins::board_folder(\n    here::here(\"inst/extdata/pins\"))\n\n  board |>\n    pins::pin_write(\n      x,\n      name        = name,\n      title       = title,\n      description = description,\n      type        = \"qs\")\n\n  board |> pins::write_board_manifest()\n}\n\ndelete_pins <- function(pin_names) {\n\n  board <- pins::board_folder(\n    here::here(\"inst/extdata/pins\"))\n\n  pins::pin_delete(board, names = pin_names)\n}\n```\n:::\n\n\n\n\nCreate a new pin\n\n\n\n\n::: {.cell layout-align=\"center\" filename='dataset.R'}\n\n```{.r .cell-code}\nsource(here::here(\"data-raw\", \"pins_internal.R\"))\n\npin_update(\n  dataset,\n  name = \"object_name\",\n  title = \"Short Description\",\n  description = \"Long Description\"\n)\n```\n:::\n\n\n\n\nAdd `pins.R` file to package\n\n\n\n\n::: {.cell layout-align=\"center\" filename='pins.R'}\n\n```{.r .cell-code}\n#' Return GitHub raw url\n#'\n#' @param x `<chr>` string\n#'\n#' @returns `<chr>` GitHub raw url\n#'\n#' @examples\n#' gh_raw(\"andrewbruce/example/main/inst/pins/\")\n#'\n#' @autoglobal\n#'\n#' @keywords internal\n#'\n#' @export\ngh_raw <- function(x) {\n  paste0(\"https://raw.githubusercontent.com/\", x)\n}\n\n#' Mount [pins][pins::pins-package] board\n#'\n#' @param source `<chr>` `\"local\"` or `\"remote\"`\n#'\n#' @param package `<chr>` package name\n#'\n#' @returns `<pins_board_folder>` or `<pins_board_url>`\n#'\n#' @autoglobal\n#' \n#' @importFrom pins board_folder board_url\n#' @importFrom fs path_package\n#' @importFrom glue glue\n#'\n#' @keywords internal\n#'\n#' @export\nmount_board <- function(source = c(\"local\", \"remote\"), package = \"<package_name>\") {\n\n  source <- match.arg(source)\n\n  switch(\n    source,\n    local = board_folder(\n      path_package(\"extdata/pins\", package = package)\n      ),\n    remote = board_url(\n      gh_raw(\n        glue(\"andrewallenbruce/{package}/master/inst/extdata/pins/\")\n        )\n      ),\n    stop(\"Invalid source\")\n    )\n}\n\n#' Get a pinned dataset from a [pins][pins::pins-package] board\n#'\n#' @param pin `<chr>` string name of pinned dataset\n#'\n#' @param ... additional arguments passed to `mount_board()`\n#'\n#' @returns `<tibble>` or `<data.frame>`\n#'\n#' @autoglobal\n#' \n#' @importFrom pins pin_read\n#'\n#' @keywords internal\n#'\n#' @export\nget_pin <- function(pin, ...) {\n\n  board <- mount_board(...)\n\n  pin <- match.arg(pin, list_pins())\n\n  pin_read(board, pin)\n}\n\n#' List pins from a [pins][pins::pins-package] board\n#'\n#' @param ... arguments to pass to [mount_board()]\n#'\n#' @returns `<list>` of [pins][pins::pins-package]\n#'\n#' @autoglobal\n#' \n#' @importFrom pins pin_list\n#'\n#' @keywords internal\n#'\n#' @export\nlist_pins <- function(...) {\n\n  board <- mount_board(...)\n\n  pin_list(board)\n}\n```\n:::\n\n\n\n\n\n## Session Information \n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n**R version 4.4.2 (2024-10-31 ucrt)**\n\n**Platform:** x86_64-w64-mingw32/x64 \n\n**locale:**\n_LC_COLLATE=English_United States.utf8_, _LC_CTYPE=English_United States.utf8_, _LC_MONETARY=English_United States.utf8_, _LC_NUMERIC=C_ and _LC_TIME=English_United States.utf8_\n\n**attached base packages:** \n_stats_, _graphics_, _grDevices_, _utils_, _datasets_, _methods_ and _base_\n\n**other attached packages:** \nusethis(v.3.0.0)\n\n**loaded via a namespace (and not attached):** \n_digest(v.0.6.37)_, _fastmap(v.1.2.0)_, _xfun(v.0.49)_, _magrittr(v.2.0.3)_, _glue(v.1.8.0)_, _knitr(v.1.49)_, _htmltools(v.0.5.8.1)_, _rmarkdown(v.2.29)_, _lifecycle(v.1.0.4)_, _cli(v.3.6.3)_, _pander(v.0.6.5)_, _vctrs(v.0.6.5)_, _textshaping(v.0.4.0)_, _systemfonts(v.1.1.0)_, _compiler(v.4.4.2)_, _purrr(v.1.0.2)_, _rstudioapi(v.0.17.1)_, _tools(v.4.4.2)_, _ragg(v.1.3.3)_, _evaluate(v.1.0.1)_, _Rcpp(v.1.0.13-1)_, _yaml(v.2.3.10)_, _rlang(v.1.1.4)_, _jsonlite(v.1.8.9)_, _fs(v.1.6.5)_ and _htmlwidgets(v.1.6.4)_\n:::\n:::\n",
    "supporting": [
      "packaging_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}