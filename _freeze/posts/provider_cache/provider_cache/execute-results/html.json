{
  "hash": "bd62153fab853a6ae92f17263c0b881b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"provider: Metadata Caching\"\nformat:\n  html:\n    reference-location: block\neditor_options: \n  chunk_output_type: console\n---\n\n::: {.cell}\n\n:::\n\n\n\n\n   - [Centers for Medicare & Medicaid Services Data API](https://data.cms.gov/api-docs)\n   = [API FAQ for data.CMS.gov | OCTOBER 2024 - VERSION 1.6](https://data.cms.gov/sites/default/files/2024-10/7ef65521-65a4-41ed-b600-3a0011f8ec4b/API%20Guide%20Formatted%201_6.pdf)\n\n# National Downloadable File\n\n>   **Previous Work**\n>\n>   * [provider(gh issue #60) - version 1](https://github.com/andrewallenbruce/provider/issues/60#issue-2000723817)\n>   * [provider(gh issue #60) - version 2](https://github.com/andrewallenbruce/provider/issues/60#issuecomment-1820270391)\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmeta_ndf <- \\(fname) {\n  \n  stopifnot(curl::has_internet())\n  \n  x <- request(\n    paste0(\n      \"https://data.cms.gov/\",\n      \"provider-data/api/1/\",\n      \"metastore/schemas/\",\n      \"dataset/items/\",\n      switch(fname, \n             affiliations = \"27ea-46a8\", \n             clinicians   = \"mj5m-pzi6\", \n             stop(\"Invalid argument\")),\n    \"?show-reference-ids=true\")) |>\n       req_perform() |>\n       resp_body_json(\n         check_type     = FALSE,\n         simplifyVector = TRUE)\n  \n  distro <- gelm(\n    gelm(\n      x,\n      \"distribution\"), \n    \"identifier\")\n  \n  y <- request(\n    paste0(\n    \"https://data.cms.gov/\", \n    \"provider-data/api/1/\",\n    \"datastore/query/\", \n    distro, \n    \"?limit=1&offset=100&\",\n    \"count=true&results=true&\", \n    \"schema=true&keys=true&\",\n    \"format=json&rowIds=true\")) |>\n       req_perform() |>\n       resp_body_json(\n         check_type = FALSE,\n         simplifyVector = TRUE)\n  \n  z <- gelm(gelm(gelm(\n        y, \n        \"schema\"), \n      distro), \n    \"fields\")\n  \n  out <- list(\n    title        = gelm(x, \"title\"),\n    description  = gelm(x, \"description\"),\n    identifier   = gelm(gelm(x, \"identifier\"), \"identifier\"),\n    distribution = distro,\n    issued       = gelm(x, \"issued\"), \n    modified     = gelm(x, \"modified\")[[1]], \n    released     = gelm(x, \"released\"),\n    dimension    = str_glue('{gelm(gelm(y, \"count\"), is.numeric)} x {gelm(gelm(z, \"record_number\"), \"length\")}'), \n    fields       = delist(getelem(z[names(z)], \"description\")),\n    site         = gelm(x, \"landingPage\"),\n    csv          = gelm(gelm(gelm(x, \"distribution\"), \"data\"), \"downloadURL\", m = \"df\"),\n    dictionary   = paste0(\"https://data.cms.gov/provider-data/sites/default/files/data_dictionaries/physician/DOC_Data_Dictionary.pdf\"))\n  \n  out\n}\n\nmeta_ndf(\"affiliations\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$title\n[1] \"Facility Affiliation Data\"\n\n$description\n[1] \"This is the facility affiliations data publicly reported in the Provider Data Catalog.\"\n\n$identifier\n[1] \"27ea-46a8\"\n\n$distribution\n[1] \"c0bada3c-9379-5a16-99ec-868e930451d6\"\n\n$issued\n[1] \"2023-08-17\"\n\n$modified\n[1] \"2024-12-02\"\n\n$released\n[1] \"2024-12-12\"\n\n$dimension\n1561449 x 10\n\n$fields\n[1] \"NPI\"                                       \n[2] \"Ind_PAC_ID\"                                \n[3] \"Provider Last Name\"                        \n[4] \"Provider First Name\"                       \n[5] \"Provider Middle Name\"                      \n[6] \"suff\"                                      \n[7] \"facility_type\"                             \n[8] \"Facility Affiliations Certification Number\"\n[9] \"Facility Type Certification Number\"        \n\n$site\n[1] \"https://data.cms.gov/provider-data/dataset/27ea-46a8\"\n\n$csv\n[1] \"https://data.cms.gov/provider-data/sites/default/files/resources/b7c4080ae144663e43353a9c35cd3f53_1733184311/Facility_Affiliation.csv\"\n\n$dictionary\n[1] \"https://data.cms.gov/provider-data/sites/default/files/data_dictionaries/physician/DOC_Data_Dictionary.pdf\"\n```\n\n\n:::\n\n```{.r .cell-code}\nmeta_ndf(\"clinicians\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$title\n[1] \"National Downloadable File\"\n\n$description\n[1] \"The Doctors and Clinicians national downloadable file is organized such that each line is unique at the clinician/enrollment record/group/address level. Clinicians with multiple Medicare enrollment records and/or single enrollments linking to multiple practice locations are listed on multiple lines.\"\n\n$identifier\n[1] \"mj5m-pzi6\"\n\n$distribution\n[1] \"21902f69-cf10-57df-b859-94bb4c92e05d\"\n\n$issued\n[1] \"2023-08-17\"\n\n$modified\n[1] \"2024-12-02\"\n\n$released\n[1] \"2024-12-12\"\n\n$dimension\n2595328 x 10\n\n$fields\n [1] \"NPI\"                  \"Ind_PAC_ID\"           \"Ind_enrl_ID\"         \n [4] \"Provider Last Name\"   \"Provider First Name\"  \"Provider Middle Name\"\n [7] \"suff\"                 \"gndr\"                 \"Cred\"                \n[10] \"Med_sch\"              \"Grd_yr\"               \"pri_spec\"            \n[13] \"sec_spec_1\"           \"sec_spec_2\"           \"sec_spec_3\"          \n[16] \"sec_spec_4\"           \"sec_spec_all\"         \"Telehlth\"            \n[19] \"Facility Name\"        \"org_pac_id\"           \"num_org_mem\"         \n[22] \"adr_ln_1\"             \"adr_ln_2\"             \"ln_2_sprs\"           \n[25] \"City/Town\"            \"State\"                \"ZIP Code\"            \n[28] \"Telephone Number\"     \"ind_assgn\"            \"grp_assgn\"           \n[31] \"adrs_id\"             \n\n$site\n[1] \"https://data.cms.gov/provider-data/dataset/mj5m-pzi6\"\n\n$csv\n[1] \"https://data.cms.gov/provider-data/sites/default/files/resources/52c3f098d7e56028a298fd297cb0b38d_1733184310/DAC_NationalDownloadableFile.csv\"\n\n$dictionary\n[1] \"https://data.cms.gov/provider-data/sites/default/files/data_dictionaries/physician/DOC_Data_Dictionary.pdf\"\n```\n\n\n:::\n:::\n\n\n\n\n\n## pointblank\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(pointblank)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'pointblank'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:data.table':\n\n    between\n```\n\n\n:::\n\n```{.r .cell-code}\njohnd <- affiliations(npi = 1558595660, na.rm = FALSE)\n\njohnd |> \n  create_informant(\n    tbl_name = NULL,\n    label = \"Provider Facility Affiliations\"\n  ) |> \n  info_tabular(\n    `Row Definition` = \"A row has randomized values.\",\n    Source = c(\n      \"- From the **pointblank** package.\",\n      \"- [https://rstudio.github.io/pointblank/]()\"\n     )\n   ) |> \n  info_columns(\n    columns = npi,\n    info = \"10-digit National Provider Identifier.\") |>\n  info_columns(\n    columns = pac,\n    info = \"10-digit PECOS Associate Control ID.\") |>\n  info_columns(\n    columns = vars(first, middle, last, suffix),\n    info = \"Individual Provider's Name.\") |>\n  info_columns(\n    columns = facility_type,\n    info = \"Individual Provider's Name.\") |>\n  info_section(\n    section_name = \"Notes\",\n    usage = \"`affiliations(parent_ccn = '670055')`\",\n    Source = c(\n      \"- From the **(provider)** package.\",\n      \"- [CMS Affiliations API](https://data.cms.gov/provider-data/dataset/27ea-46a8)\"\n    )) |> \n  get_informant_report(\n    title = \"**`affiliations()`** Data Dictionary\",\n    size = \"standard\"\n  )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"pb_information\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>@import url(\"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n#pb_information table {\n  font-family: 'IBM Plex Sans', system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#pb_information thead, #pb_information tbody, #pb_information tfoot, #pb_information tr, #pb_information td, #pb_information th {\n  border-style: none;\n}\n\n#pb_information p {\n  margin: 0;\n  padding: 0;\n}\n\n#pb_information .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 130%;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: 650px;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#pb_information .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#pb_information .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#pb_information .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#pb_information .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#pb_information .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pb_information .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#pb_information .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#pb_information .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#pb_information .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#pb_information .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#pb_information .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#pb_information .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#pb_information .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#pb_information .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#pb_information .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#pb_information .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#pb_information .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#pb_information .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pb_information .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#pb_information .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#pb_information .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#pb_information .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pb_information .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#pb_information .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#pb_information .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pb_information .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pb_information .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#pb_information .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pb_information .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#pb_information .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#pb_information .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#pb_information .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pb_information .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#pb_information .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#pb_information .gt_left {\n  text-align: left;\n}\n\n#pb_information .gt_center {\n  text-align: center;\n}\n\n#pb_information .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#pb_information .gt_font_normal {\n  font-weight: normal;\n}\n\n#pb_information .gt_font_bold {\n  font-weight: bold;\n}\n\n#pb_information .gt_font_italic {\n  font-style: italic;\n}\n\n#pb_information .gt_super {\n  font-size: 65%;\n}\n\n#pb_information .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#pb_information .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#pb_information .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#pb_information .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#pb_information .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#pb_information .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#pb_information .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#pb_information .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#pb_information div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n\n#pb_information {\n  -webkit-font-smoothing: antialiased;\n  letter-spacing: .15px;\n}\n\n#pb_information a {\n  color: #375F84;\n  text-decoration: none;\n}\n\n#pb_information a:hover {\n  color: #375F84;\n  text-decoration: underline;\n}\n\n#pb_information p {\n  overflow: visible;\n  margin-top: 2px;\n  margin-left: 0;\n  margin-right: 0;\n  margin-bottom: 5px;\n}\n\n#pb_information ul {\n  list-style-type: square;\n  padding-left: 25px;\n  margin-top: -4px;\n  margin-bottom: 6px;\n}\n\n#pb_information li {\n  text-indent: -1px;\n}\n\n#pb_information h4 {\n  font-weight: 500;\n  color: #444444;\n}\n\n#pb_information code {\n  font-family: 'IBM Plex Mono', monospace, courier;\n  font-size: 90%;\n  font-weight: 500;\n  color: #666666;\n  background-color: transparent;\n  padding: 0;\n}\n\n#pb_information .pb_date {\n  text-decoration-style: solid;\n  text-decoration-color: #9933CC;\n  text-decoration-line: underline;\n  text-underline-position: under;\n  font-variant-numeric: tabular-nums;\n  margin-right: 4px;\n}\n\n#pb_information .pb_label {\n  border: solid 1px;\n  border-color: inherit;\n  padding: 0px 3px 0px 3px;\n}\n\n#pb_information .pb_label_rounded {\n  border: solid 1px;\n  border-color: inherit;\n  border-radius: 8px;\n  padding: 0px 8px 0px 8px;\n}\n\n#pb_information .pb_sub_label {\n  font-size: smaller;\n  color: #777777;\n}\n\n#pb_information .pb_col_type {\n  font-size: 75%;\n}\n\n#pb_information .gt_sourcenote {\n  height: 35px;\n  font-size: 60%;\n  padding: 0;\n}\n\n#pb_information .gt_group_heading {\n  text-indent: -3px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"1\" class=\"gt_heading gt_title gt_font_normal\" style=\"color: #444444; font-size: 28px; text-align: left; font-weight: 500;\"><span data-qmd-base64=\"PHN0cm9uZz48Y29kZT5hZmZpbGlhdGlvbnMoKTwvY29kZT48L3N0cm9uZz4gRGF0YSBEaWN0aW9uYXJ5\"><span class='gt_from_md'><strong><code>affiliations()</code></strong> Data Dictionary</span></span></td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"1\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style=\"font-size: 12px; text-align: left;\"><span data-qmd-base64=\"PHNwYW4gc3R5bGU9InRleHQtZGVjb3JhdGlvbi1zdHlsZTpzb2xpZDt0ZXh0LWRlY29yYXRpb24tY29sb3I6I0FERDhFNjt0ZXh0LWRlY29yYXRpb24tbGluZTp1bmRlcmxpbmU7dGV4dC11bmRlcmxpbmUtcG9zaXRpb246dW5kZXI7Y29sb3I6IzMzMzMzMztmb250LXZhcmlhbnQtbnVtZXJpYzp0YWJ1bGFyLW51bXM7cGFkZGluZy1sZWZ0OjRweDttYXJnaW4tcmlnaHQ6NXB4O3BhZGRpbmctcmlnaHQ6MnB4OyI+UHJvdmlkZXIgRmFjaWxpdHkgQWZmaWxpYXRpb25zPC9zcGFuPjwvcD4KPGRpdiBzdHlsZT0iaGVpZ2h0OjI1cHg7bWFyZ2luLXRvcDoxMHB4OyI+PHNwYW4gc3R5bGU9ImJhY2tncm91bmQtY29sb3I6I0YxRDM1QTtjb2xvcjojMjIyMjIyO3BhZGRpbmc6MC41ZW0gMC41ZW07cG9zaXRpb246aW5oZXJpdDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bWFyZ2luOjVweCAwcHggNXB4IDVweDtmb250LXdlaWdodDpib2xkO2JvcmRlcjpzb2xpZCAxcHggI0YxRDM1QTtwYWRkaW5nOjJweCAxNXB4IDJweCAxNXB4O2ZvbnQtc2l6ZTpzbWFsbGVyOyI+dGliYmxlPC9zcGFuPgo8c3BhbiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjpub25lO2NvbG9yOiMyMjIyMjI7cGFkZGluZzowLjVlbSAwLjVlbTtwb3NpdGlvbjppbmhlcml0O21hcmdpbjo1cHggMTBweCA1cHggLTRweDtmb250LXdlaWdodDpib2xkO2JvcmRlcjpzb2xpZCAxcHggI0YxRDM1QTtwYWRkaW5nOjJweCAxNXB4IDJweCAxNXB4O2ZvbnQtc2l6ZTpzbWFsbGVyOyI+am9obmQ8L3NwYW4+PHNwYW4gc3R5bGU9ImJhY2tncm91bmQtY29sb3I6I2VlY2JmZjtjb2xvcjojMzMzMzMzO3BhZGRpbmc6MC41ZW0gMC41ZW07cG9zaXRpb246aW5oZXJpdDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bWFyZ2luOjVweCAwcHggNXB4IDVweDtmb250LXdlaWdodDpib2xkO2JvcmRlcjpzb2xpZCAxcHggI2VlY2JmZjtwYWRkaW5nOjJweCAxNXB4IDJweCAxNXB4O2ZvbnQtc2l6ZTpzbWFsbGVyOyI+Um93czwvc3Bhbj4KPHNwYW4gc3R5bGU9ImJhY2tncm91bmQtY29sb3I6bm9uZTtjb2xvcjojMzMzMzMzO3BhZGRpbmc6MC41ZW0gMC41ZW07cG9zaXRpb246aW5oZXJpdDttYXJnaW46NXB4IDBweCA1cHggLTRweDtmb250LXdlaWdodDpib2xkO2JvcmRlcjpzb2xpZCAxcHggI2VlY2JmZjtwYWRkaW5nOjJweCAxNXB4IDJweCAxNXB4O2ZvbnQtc2l6ZTpzbWFsbGVyOyI+Mzwvc3Bhbj4KPHNwYW4gc3R5bGU9ImJhY2tncm91bmQtY29sb3I6I0JERTdCNDtjb2xvcjojMzMzMzMzO3BhZGRpbmc6MC41ZW0gMC41ZW07cG9zaXRpb246aW5oZXJpdDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bWFyZ2luOjVweCAwcHggNXB4IDFweDtmb250LXdlaWdodDpib2xkO2JvcmRlcjpzb2xpZCAxcHggI0JERTdCNDtwYWRkaW5nOjJweCAxNXB4IDJweCAxNXB4O2ZvbnQtc2l6ZTpzbWFsbGVyOyI+Q29sdW1uczwvc3Bhbj4KPHNwYW4gc3R5bGU9ImJhY2tncm91bmQtY29sb3I6bm9uZTtjb2xvcjojMzMzMzMzO3BhZGRpbmc6MC41ZW0gMC41ZW07cG9zaXRpb246aW5oZXJpdDttYXJnaW46NXB4IDBweCA1cHggLTRweDtmb250LXdlaWdodDpib2xkO2JvcmRlcjpzb2xpZCAxcHggI0JERTdCNDtwYWRkaW5nOjJweCAxNXB4IDJweCAxNXB4O2ZvbnQtc2l6ZTpzbWFsbGVyOyI+OTwvc3Bhbj48L2Rpdj4K\"><span class='gt_from_md'><span style=\"text-decoration-style:solid;text-decoration-color:#ADD8E6;text-decoration-line:underline;text-underline-position:under;color:#333333;font-variant-numeric:tabular-nums;padding-left:4px;margin-right:5px;padding-right:2px;\">Provider Facility Affiliations</span></p>\n<div style=\"height:25px;margin-top:10px;\"><span style=\"background-color:#F1D35A;color:#222222;padding:0.5em 0.5em;position:inherit;text-transform:uppercase;margin:5px 0px 5px 5px;font-weight:bold;border:solid 1px #F1D35A;padding:2px 15px 2px 15px;font-size:smaller;\">tibble</span>\n<span style=\"background-color:none;color:#222222;padding:0.5em 0.5em;position:inherit;margin:5px 10px 5px -4px;font-weight:bold;border:solid 1px #F1D35A;padding:2px 15px 2px 15px;font-size:smaller;\">johnd</span><span style=\"background-color:#eecbff;color:#333333;padding:0.5em 0.5em;position:inherit;text-transform:uppercase;margin:5px 0px 5px 5px;font-weight:bold;border:solid 1px #eecbff;padding:2px 15px 2px 15px;font-size:smaller;\">Rows</span>\n<span style=\"background-color:none;color:#333333;padding:0.5em 0.5em;position:inherit;margin:5px 0px 5px -4px;font-weight:bold;border:solid 1px #eecbff;padding:2px 15px 2px 15px;font-size:smaller;\">3</span>\n<span style=\"background-color:#BDE7B4;color:#333333;padding:0.5em 0.5em;position:inherit;text-transform:uppercase;margin:5px 0px 5px 1px;font-weight:bold;border:solid 1px #BDE7B4;padding:2px 15px 2px 15px;font-size:smaller;\">Columns</span>\n<span style=\"background-color:none;color:#333333;padding:0.5em 0.5em;position:inherit;margin:5px 0px 5px -4px;font-weight:bold;border:solid 1px #BDE7B4;padding:2px 15px 2px 15px;font-size:smaller;\">9</span></div>\n</span></span></td>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"1\" class=\"gt_group_heading\" style=\"color: #444444; font-weight: 500; text-transform: uppercase; background-color: #FCFCFC; border-bottom-width: 1; border-bottom-style: solid; border-bottom-color: #EFEFEF;\" scope=\"col\" id=\"Table\">Table</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Table  item\" class=\"gt_row gt_left\" style=\"color: #666666; font-size: smaller; border-top-width: 1; border-top-style: solid; border-top-color: #EFEFEF;\"><h4 style=\"margin-bottom:5px;\">ROW DEFINITION</h4>\n\nA row has randomized values.</td></tr>\n    <tr><td headers=\"Table  item\" class=\"gt_row gt_left\" style=\"color: #666666; font-size: smaller; border-top-width: 1; border-top-style: solid; border-top-color: #EFEFEF;\"><h4 style=\"margin-bottom:5px;\">SOURCE</h4>\n\n- From the **pointblank** package.\n\n- [https://rstudio.github.io/pointblank/]()</td></tr>\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"1\" class=\"gt_group_heading\" style=\"color: #444444; font-weight: 500; text-transform: uppercase; background-color: #FCFCFC; border-bottom-width: 1; border-bottom-style: solid; border-bottom-color: #EFEFEF;\" scope=\"col\" id=\"Columns\">Columns</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Columns  item\" class=\"gt_row gt_left\" style=\"color: #666666; font-size: smaller; border-top-width: 1; border-top-style: solid; border-top-color: #EFEFEF;\"><code style=\"margin-bottom:5px;color:#555555;font-weight:500;line-height:2em;border:solid 1px #499FFE;padding:2px 8px 3px 8px;background-color:#FAFAFA;\">npi</code>&nbsp;&nbsp;<code class=\"pb_col_type\">character</code>\n\n<strong class=\"pb_sub_label\">INFO</strong> 10-digit National Provider Identifier.</td></tr>\n    <tr><td headers=\"Columns  item\" class=\"gt_row gt_left\" style=\"color: #666666; font-size: smaller; border-top-width: 1; border-top-style: solid; border-top-color: #EFEFEF;\"><code style=\"margin-bottom:5px;color:#555555;font-weight:500;line-height:2em;border:solid 1px #499FFE;padding:2px 8px 3px 8px;background-color:#FAFAFA;\">pac</code>&nbsp;&nbsp;<code class=\"pb_col_type\">character</code>\n\n<strong class=\"pb_sub_label\">INFO</strong> 10-digit PECOS Associate Control ID.</td></tr>\n    <tr><td headers=\"Columns  item\" class=\"gt_row gt_left\" style=\"color: #666666; font-size: smaller; border-top-width: 1; border-top-style: solid; border-top-color: #EFEFEF;\"><code style=\"margin-bottom:5px;color:#555555;font-weight:500;line-height:2em;border:solid 1px #499FFE;padding:2px 8px 3px 8px;background-color:#FAFAFA;\">first</code>&nbsp;&nbsp;<code class=\"pb_col_type\">character</code>\n\n<strong class=\"pb_sub_label\">INFO</strong> Individual Provider's Name.</td></tr>\n    <tr><td headers=\"Columns  item\" class=\"gt_row gt_left\" style=\"color: #666666; font-size: smaller; border-top-width: 1; border-top-style: solid; border-top-color: #EFEFEF;\"><code style=\"margin-bottom:5px;color:#555555;font-weight:500;line-height:2em;border:solid 1px #499FFE;padding:2px 8px 3px 8px;background-color:#FAFAFA;\">middle</code>&nbsp;&nbsp;<code class=\"pb_col_type\">character</code>\n\n<strong class=\"pb_sub_label\">INFO</strong> Individual Provider's Name.</td></tr>\n    <tr><td headers=\"Columns  item\" class=\"gt_row gt_left\" style=\"color: #666666; font-size: smaller; border-top-width: 1; border-top-style: solid; border-top-color: #EFEFEF;\"><code style=\"margin-bottom:5px;color:#555555;font-weight:500;line-height:2em;border:solid 1px #499FFE;padding:2px 8px 3px 8px;background-color:#FAFAFA;\">last</code>&nbsp;&nbsp;<code class=\"pb_col_type\">character</code>\n\n<strong class=\"pb_sub_label\">INFO</strong> Individual Provider's Name.</td></tr>\n    <tr><td headers=\"Columns  item\" class=\"gt_row gt_left\" style=\"color: #666666; font-size: smaller; border-top-width: 1; border-top-style: solid; border-top-color: #EFEFEF;\"><code style=\"margin-bottom:5px;color:#555555;font-weight:500;line-height:2em;border:solid 1px #499FFE;padding:2px 8px 3px 8px;background-color:#FAFAFA;\">suffix</code>&nbsp;&nbsp;<code class=\"pb_col_type\">character</code>\n\n<strong class=\"pb_sub_label\">INFO</strong> Individual Provider's Name.</td></tr>\n    <tr><td headers=\"Columns  item\" class=\"gt_row gt_left\" style=\"color: #666666; font-size: smaller; border-top-width: 1; border-top-style: solid; border-top-color: #EFEFEF;\"><code style=\"margin-bottom:5px;color:#555555;font-weight:500;line-height:2em;border:solid 1px #499FFE;padding:2px 8px 3px 8px;background-color:#FAFAFA;\">facility_type</code>&nbsp;&nbsp;<code class=\"pb_col_type\">factor</code>\n\n<strong class=\"pb_sub_label\">INFO</strong> Individual Provider's Name.</td></tr>\n    <tr><td headers=\"Columns  item\" class=\"gt_row gt_left\" style=\"color: #666666; font-size: smaller; border-top-width: 1; border-top-style: solid; border-top-color: #EFEFEF;\"><code style=\"margin-bottom:5px;color:#555555;font-weight:500;line-height:2em;border:solid 1px #499FFE;padding:2px 8px 3px 8px;background-color:#FAFAFA;\">facility_ccn</code>&nbsp;&nbsp;<code class=\"pb_col_type\">character</code>\n\n<strong class=\"pb_sub_label\"></strong> </td></tr>\n    <tr><td headers=\"Columns  item\" class=\"gt_row gt_left\" style=\"color: #666666; font-size: smaller; border-top-width: 1; border-top-style: solid; border-top-color: #EFEFEF;\"><code style=\"margin-bottom:5px;color:#555555;font-weight:500;line-height:2em;border:solid 1px #499FFE;padding:2px 8px 3px 8px;background-color:#FAFAFA;\">parent_ccn</code>&nbsp;&nbsp;<code class=\"pb_col_type\">character</code>\n\n<strong class=\"pb_sub_label\"></strong> </td></tr>\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"1\" class=\"gt_group_heading\" style=\"color: #444444; font-weight: 500; text-transform: uppercase; background-color: #FCFCFC; border-bottom-width: 1; border-bottom-style: solid; border-bottom-color: #EFEFEF;\" scope=\"col\" id=\"Notes\">Notes</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Notes  item\" class=\"gt_row gt_left\" style=\"color: #666666; font-size: smaller; border-top-width: 1; border-top-style: solid; border-top-color: #EFEFEF;\"><h4 style=\"margin-bottom:5px;\">USAGE</h4>\n\n`affiliations(parent_ccn = '670055')`</td></tr>\n    <tr><td headers=\"Notes  item\" class=\"gt_row gt_left\" style=\"color: #666666; font-size: smaller; border-top-width: 1; border-top-style: solid; border-top-color: #EFEFEF;\"><h4 style=\"margin-bottom:5px;\">SOURCE</h4>\n\n- From the **(provider)** package.\n\n- [CMS Affiliations API](https://data.cms.gov/provider-data/dataset/27ea-46a8)</td></tr>\n  </tbody>\n  <tfoot class=\"gt_sourcenotes\">\n    <tr>\n      <td class=\"gt_sourcenote\" colspan=\"1\"><span data-qmd-base64=\"PHNwYW4gc3R5bGU9ImJhY2tncm91bmQtY29sb3I6I0ZGRjtjb2xvcjojNDQ0O3BhZGRpbmc6MC41ZW0gMC41ZW07cG9zaXRpb246aW5oZXJpdDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bWFyZ2luLWxlZnQ6MTBweDtib3JkZXI6c29saWQgMXB4ICM5OTk5OTk7Zm9udC12YXJpYW50LW51bWVyaWM6dGFidWxhci1udW1zO2JvcmRlci1yYWRpdXM6MDtwYWRkaW5nOjJweCAxMHB4IDJweCAxMHB4O3BhZGRpbmc6MnB4IDEwcHggMnB4IDEwcHg7Ij4yMDI0LTEyLTE2IDAyOjEwOjAwIEVTVDwvc3Bhbj4KPHNwYW4gc3R5bGU9ImJhY2tncm91bmQtY29sb3I6I0ZGRjtjb2xvcjojNDQ0O3BhZGRpbmc6MC41ZW0gMC41ZW07cG9zaXRpb246aW5oZXJpdDttYXJnaW46NXB4IDFweCA1cHggMDtib3JkZXI6c29saWQgMXB4ICM5OTk5OTk7Zm9udC12YXJpYW50LW51bWVyaWM6dGFidWxhci1udW1zO2JvcmRlci1yYWRpdXM6MDtwYWRkaW5nOjJweCAxMHB4IDJweCAxMHB4OyI+Jmx0OyAxIHM8L3NwYW4+CjxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNGRkY7Y29sb3I6IzQ0NDtwYWRkaW5nOjAuNWVtIDAuNWVtO3Bvc2l0aW9uOmluaGVyaXQ7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO21hcmdpbjo1cHggMXB4IDVweCAtMXB4O2JvcmRlcjpzb2xpZCAxcHggIzk5OTk5OTtmb250LXZhcmlhbnQtbnVtZXJpYzp0YWJ1bGFyLW51bXM7Ym9yZGVyLXJhZGl1czowO3BhZGRpbmc6MnB4IDEwcHggMnB4IDEwcHg7Ij4yMDI0LTEyLTE2IDAyOjEwOjAwIEVTVDwvc3Bhbj4=\"><span class='gt_from_md'><span style=\"background-color:#FFF;color:#444;padding:0.5em 0.5em;position:inherit;text-transform:uppercase;margin-left:10px;border:solid 1px #999999;font-variant-numeric:tabular-nums;border-radius:0;padding:2px 10px 2px 10px;padding:2px 10px 2px 10px;\">2024-12-16 02:10:00 EST</span>\n<span style=\"background-color:#FFF;color:#444;padding:0.5em 0.5em;position:inherit;margin:5px 1px 5px 0;border:solid 1px #999999;font-variant-numeric:tabular-nums;border-radius:0;padding:2px 10px 2px 10px;\">&lt; 1 s</span>\n<span style=\"background-color:#FFF;color:#444;padding:0.5em 0.5em;position:inherit;text-transform:uppercase;margin:5px 1px 5px -1px;border:solid 1px #999999;font-variant-numeric:tabular-nums;border-radius:0;padding:2px 10px 2px 10px;\">2024-12-16 02:10:00 EST</span></span></span></td>\n    </tr>\n  </tfoot>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n# New API FAQ\n\n## Finding Data\n\n> Is there a catalog of available data?\n\nYes, the [`data.json`](https://data.cms.gov/data.json) file is an [**Open Data**](https://resources.data.gov/resources/dcat-us/) catalog containing the datasets available on our site. As new data is added, it is automatically updated to the **data.json**.\n\nIn the **data.json**, there is an array called **dataset**. You can search through this array using the title of your dataset, such as `\"Payroll Based Journal Daily Nurse Staffing\"`. Inside of the dataset, there is an array called **distribution** which will contain all the versions of the data in all available formats for each version. In this array there are a few different types of entries:\n\n   * The first entry (with a description of 'latest') will provide a URL that will always point to the latest data, even as new versions are published.\n   * The remaining entries will provide references to the data at fixed points in time, listed in descending order by date. For example, `\"https://data.cms.gov/data-api/v1/dataset/d10d792e-\nea6e-4145-8512-34efbc1be04b/data\"` will always point to the **Payroll Based Journal Daily Nurse Staffing** data from **Q2 2021**. Some datasets will have multiple historical versions available and some will only have the most recent data available.\n      * The data with mediaType of \"text/csv\" is downloadable as a CSV file and data with mediaType of \"application/zip\" is downloadable as a ZIP file.\n      * The data with a format of \"API\" will point to an API endpoint.\n\n> How can I get an earlier version of the data?\n\nIf your data has earlier versions available, there is a \"temporal\" field in the distribution section of the data.json file which will indicate the time period. An example is below.\n\nOlder Version Code Example in Python\n\nFinds the API link for the 2017 Medicare Inpatient Hospitals - by Provider and Service Data\n\nhttps://data.cms.gov/provider-summary-by-type-of-service/medicare-inpatient-hospitals/medicare-inpatient-hospitals-by-provider-and-service\n\n```python\nimport requests\n\nurl         = \"https://data.cms.gov/data.json\"\ntitle       = \"Medicare Inpatient Hospitals - by Provider and Service\"\ntime_period = \"2017-01-01/2017-12-31\"\nresponse    = requests.request(\"GET\", url)\n\nif response.ok:\n    response = response.json()\n    dataset = response['dataset']\n    for set in dataset:\n        if title == set['title']:\n            for distro in set['distribution']:\n                if 'format' in distro.keys():\n                    if distro['format'] == \"API\" and distro['temporal'] == time_period:\n                        print(f\"API link for {title} from {time_period} is {distro['accessURL']}\")\n```\n\n\n\n--------------------------------------------------------------------------------\n\n# Codebook\n\n## Code\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncode <- \\(variable, levels, labels) {\n  dplyr::tibble(\n    variable = variable, \n    level = levels, \n    label = labels)\n}\n\ncode(\n  \"SEX\", \n  levels = c(0, 1), \n  labels = c(\"Male\", \"Female\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 3\n  variable level label \n  <chr>    <dbl> <chr> \n1 SEX          0 Male  \n2 SEX          1 Female\n```\n\n\n:::\n:::\n\n\n\n\n## Codebook\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncodebook <- \\(...) {\n  \n  map <- rlang::list2(...)\n  \n  names(map) <- purrr::map_chr(map, \\(x) x$variable[1])\n  \n  return(map)\n}\n\ncodebook(\n  code(\"SEX\", \n       levels = 0:1, \n       labels = c(\"Male\", \"Female\")), \n  code(\"STUDY\", \n       levels = 1:3, \n       labels = c(\"S1\", \"S2\", \"S3\")))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$SEX\n# A tibble: 2 × 3\n  variable level label \n  <chr>    <int> <chr> \n1 SEX          0 Male  \n2 SEX          1 Female\n\n$STUDY\n# A tibble: 3 × 3\n  variable level label\n  <chr>    <int> <chr>\n1 STUDY        1 S1   \n2 STUDY        2 S2   \n3 STUDY        3 S3   \n```\n\n\n:::\n:::\n\n\n\n\n## Encode\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nencode <- \\(data, codebook) {\n  \n  mapped_vars <- names(codebook)\n  \n  mapped_data <- purrr::map2(data, names(data), \\(x, var, m) {\n      \n      if (!var %in% mapped_vars) return(x)\n      \n      x <- factor(x, levels = m[[var]]$level, labels = m[[var]]$label)\n      \n      return(x)\n    },\n    m <- codebook\n  )\n  dplyr::as_tibble(mapped_data)\n}\n\nlabels <- codebook(\n  code(\"SEX\", \n       levels = 0:1, \n       labels = c(\"Male\", \"Female\")), \n  code(\"STUDY\", \n       levels = 1:3, \n       labels = c(\"S1\", \"S2\", \"S3\"))\n  )\n\ndataset <- data.frame(\n  STUDY = c(1, 1, 1, 2, 2, 2),\n  SEX   = c(0, 0, 1, 1, 1, 0),\n  AGE   = c(32, 18, 64, 52, 26, 80)\n)\n\nencode(dataset, labels)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 3\n  STUDY SEX      AGE\n  <fct> <fct>  <dbl>\n1 S1    Male      32\n2 S1    Male      18\n3 S1    Female    64\n4 S2    Female    52\n5 S2    Female    26\n6 S2    Male      80\n```\n\n\n:::\n:::\n\n\n\n\n## Decode\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndecode <- \\(data, codebook) {\n  \n  mapped_vars <- names(codebook)\n  \n  mapped_data <- purrr::map2(data, names(data), \\(x, var, m) {\n    \n      if (!var %in% mapped_vars) return(x)\n    \n      x_chr <- as.character(x)\n      \n      x_lvl <- m[[var]]$level\n      \n      x_lab <- m[[var]]$label\n      \n      x <- x_lvl[match(x_chr, x_lab)]\n      \n      return(x)\n    },\n    m <- codebook\n  )\n  dplyr::as_tibble(mapped_data)\n}\n\nlabels <- codebook(\n code(\"SEX\", levels = c(0, 1), labels = c(\"Male\", \"Female\")),\n code(\"STUDY\", levels = c(1, 2, 3), labels = c(\"S1\", \"S2\", \"S3\")))\n\ndataset <- data.frame(\n  STUDY = factor(c(\"S1\", \"S1\", \"S1\", \"S2\", \"S2\", \"S2\")),\n  SEX   = factor(c(\"Male\", \"Male\", \"Female\", \"Female\", \"Female\", \"Male\")),\n  AGE   = c(32, 18, 64, 52, 26, 80))\n\ndecode(dataset, labels)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 3\n  STUDY   SEX   AGE\n  <dbl> <dbl> <dbl>\n1     1     0    32\n2     1     0    18\n3     1     1    64\n4     2     1    52\n5     2     1    26\n6     2     0    80\n```\n\n\n:::\n:::\n\n\n\n\n--------------------------------------------------------------------------------\n\n\n## Session Information \n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n**R version 4.4.2 (2024-10-31 ucrt)**\n\n**Platform:** x86_64-w64-mingw32/x64 \n\n**locale:**\n_LC_COLLATE=English_United States.utf8_, _LC_CTYPE=English_United States.utf8_, _LC_MONETARY=English_United States.utf8_, _LC_NUMERIC=C_ and _LC_TIME=English_United States.utf8_\n\n**attached base packages:** \n_stats_, _graphics_, _grDevices_, _utils_, _datasets_, _methods_ and _base_\n\n**other attached packages:** \n_pointblank(v.0.12.2)_, _httr2(v.1.0.7)_, _codex(v.0.0.1)_, _provider(v.0.0.1.9000)_, _collapse(v.2.0.18)_, _kit(v.0.0.19)_, _magrittr(v.2.0.3)_, _data.table(v.1.16.99)_, _fastverse(v.0.3.4)_, _lubridate(v.1.9.4)_, _forcats(v.1.0.0)_, _stringr(v.1.5.1)_, _dplyr(v.1.1.4)_, _purrr(v.1.0.2)_, _readr(v.2.1.5)_, _tidyr(v.1.3.1.9000)_, _tibble(v.3.2.1)_, _ggplot2(v.3.5.1)_ and _tidyverse(v.2.0.0)_\n\n**loaded via a namespace (and not attached):** \n_gtable(v.0.3.6)_, _xfun(v.0.49)_, _htmlwidgets(v.1.6.4)_, _tzdb(v.0.4.0)_, _vctrs(v.0.6.5)_, _tools(v.4.4.2)_, _generics(v.0.1.3)_, _curl(v.6.0.1)_, _parallel(v.4.4.2)_, _fansi(v.1.0.6)_, _pkgconfig(v.2.0.3)_, _gt(v.0.11.1.9000)_, _lifecycle(v.1.0.4)_, _compiler(v.4.4.2)_, _cheapr(v.0.9.92)_, _textshaping(v.0.4.1)_, _munsell(v.0.5.1)_, _janitor(v.2.2.0)_, _snakecase(v.0.11.1)_, _htmltools(v.0.5.8.1)_, _sass(v.0.4.9)_, _yaml(v.2.3.10)_, _pillar(v.1.9.0)_, _crayon(v.1.5.3)_, _commonmark(v.1.9.2)_, _tidyselect(v.1.2.1)_, _digest(v.0.6.37)_, _stringi(v.1.8.4)_, _pander(v.0.6.5)_, _fuimus(v.0.0.5.9003)_, _fastmap(v.1.2.0)_, _grid(v.4.4.2)_, _blastula(v.0.3.5)_, _colorspace(v.2.1-1)_, _cli(v.3.6.3)_, _base64enc(v.0.1-3)_, _utf8(v.1.2.4)_, _withr(v.3.0.2)_, _scales(v.1.3.0)_, _rappdirs(v.0.3.3)_, _timechange(v.0.3.0)_, _rmarkdown(v.2.29)_, _ragg(v.1.3.3)_, _hms(v.1.1.3)_, _evaluate(v.1.0.1)_, _knitr(v.1.49)_, _markdown(v.1.13)_, _rlang(v.1.1.4)_, _Rcpp(v.1.0.13-1)_, _zeallot(v.0.1.0)_, _glue(v.1.8.0)_, _xml2(v.1.3.6)_, _rstudioapi(v.0.17.1)_, _jsonlite(v.1.8.9)_, _R6(v.2.5.1)_ and _systemfonts(v.1.1.0)_\n:::\n:::\n",
    "supporting": [
      "provider_cache_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}