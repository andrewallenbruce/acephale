[
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html",
    "href": "posts/taxonomy/provider_taxonomy.html",
    "title": "Taxonomy Codes",
    "section": "",
    "text": "Purpose: Categorize health care providers by their type, classification, and specialization.\n\nMaintenance: National Uniform Claim Committee (NUCC). Updated twice a year, in January and July.\n\nApplication: Used in various healthcare processes, including:\n\nElectronic healthcare transactions\nNPI enumeration\nMedicare provider enrollment\nInsurance credentialing\nClaims processing\nDetermining network adequacy"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#key-points",
    "href": "posts/taxonomy/provider_taxonomy.html#key-points",
    "title": "Taxonomy Codes",
    "section": "",
    "text": "Purpose: Categorize health care providers by their type, classification, and specialization.\n\nMaintenance: National Uniform Claim Committee (NUCC). Updated twice a year, in January and July.\n\nApplication: Used in various healthcare processes, including:\n\nElectronic healthcare transactions\nNPI enumeration\nMedicare provider enrollment\nInsurance credentialing\nClaims processing\nDetermining network adequacy"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#overview",
    "href": "posts/taxonomy/provider_taxonomy.html#overview",
    "title": "Taxonomy Codes",
    "section": "Overview",
    "text": "Overview\nThe Health Care Provider Taxonomy Code Set is an external, non-medical data code set designed for use in an electronic environment, specifically within the ASC X12N Health Care transactions, including those mandated under HIPAA.\nA taxonomy code is a unique alphanumeric code, ten characters in length, that describes a health care service provider’s type, classification, and the area of specialization.\nTaxonomy codes are selected by the provider at the time of NPI registration. When providers apply for NPIs, the National Plan and Provider Enumeration System (NPPES) does not verify the accuracy of the selected taxonomy codes. It only validates that the codes exist within the current version of the code set.\nThe code set is structured into 3 distinct levels:\n\nProvider Grouping\nClassification\nArea of Specialization\n\nIt is important for healthcare providers to select the most appropriate taxonomy code(s) as it can affect various aspects of their practice, including billing and claims processing. Selection of a taxonomy code does not replace any credentialing or validation process that the provider requesting the code should complete."
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#hierarchy",
    "href": "posts/taxonomy/provider_taxonomy.html#hierarchy",
    "title": "Taxonomy Codes",
    "section": "Hierarchy",
    "text": "Hierarchy\n\n\n\n\nflowchart LR\n  A{{Group}} -.- D(Multi-Specialty)\n  A{{Group}} -.- E(Single-Specialty)\n  B{{Individual}} --&gt; F(Allopathic)\n  B{{Individual}} -.- G(Behavioral)\n  C{{Non-Individual}} -.- H(Hospitals)\n  C{{Non-Individual}} -.- I(Laboratories)\n  F(Allopathic) --&gt; J([Anesthesiology])\n  J([Anesthesiology]) --o K[[207L00000X]]\n  J([Anesthesiology]) --&gt; L&gt;Addiction Medicine]\n  L&gt;Addiction Medicine] --o M[[207LA0401X]]\n\n\nExample of Taxonomy Hierarchy\n\n\n\n\n\n\n\n\n\nLevel I: Provider Grouping\n\n\n\nA major grouping of service(s) or occupation(s) of health care providers.\nExamples:\n\nAllopathic & Osteopathic Physicians\nDental Providers\nHospitals\n\n\n\n\n\n\n\n\n\nLevel II: Classification\n\n\n\nA more specific service or occupation related to the Provider Grouping.\nFor example, the Classification for Allopathic & Osteopathic Physicians is based upon the General Specialty Certificates, as issued by the appropriate national boards.\nThe following boards, however, will have their general certificates appear as Level III Areas strictly due to display limitations of the code set for Boards that have multiple general certificates:\n\nMedical Genetics\nPreventive Medicine\nPsychiatry & Neurology\nRadiology\nSurgery\nOtolaryngology\nPathology\n\n\n\n\n\n\n\n\n\nLevel III: Area of Specialization\n\n\n\nA more specialized area of the Classification in which a provider chooses to practice or make services available.\nFor example, the Area of Specialization for provider grouping Allopathic & Osteopathic Physicians is based upon the Subspecialty Certificates as issued by the appropriate national boards.\n\n\n\n\nCodetaxonomy &lt;- provider::taxonomies(shape = \"wide\") |&gt; \n  select(grouping,\n         classification,\n         specialization,\n         code)\n\nhtmltools::browsable(\n  htmltools::tagList(\n    htmltools::tags$button(\n      \"Expand/collapse all\", \n      onclick = \"Reactable.toggleAllRowsExpanded('taxonomy-table')\"\n      ),\n    reactable::reactable(\n      taxonomy,\n      groupBy = c(\n        \"grouping\", \n        \"classification\", \n        \"specialization\"\n        ),\n      elementId = \"taxonomy-table\",\n      columns = list(\n        grouping = reactable::colDef(\n          name = \"Provider\\nGrouping\"\n          ),\n        classification = reactable::colDef(\n          name = \"Classification\"\n          ),\n        specialization = reactable::colDef(\n          name = \"Area of\\nSpecialization\",\n          na = \"None\"\n          ),\n        code = reactable::colDef(\n          name = \"Taxonomy\\nCode\",\n          style = list(fontFamily = \"monospace\", whiteSpace = \"pre\")\n          )\n        ),\n      # compact = TRUE,\n      searchable = TRUE,\n      pagination = FALSE,\n      highlight = TRUE,\n      bordered = TRUE,\n      theme = reactableTheme(\n    borderColor = \"#dfe2e5\",\n    stripedColor = \"#f6f8fa\",\n    highlightColor = \"#f0f5f9\",\n    cellPadding = \"28px 16px\",\n    searchInputStyle = list(width = \"100%\")\n  )\n      )\n    )\n  )\n\nExpand/collapse all"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#medicare-crosswalk",
    "href": "posts/taxonomy/provider_taxonomy.html#medicare-crosswalk",
    "title": "Taxonomy Codes",
    "section": "Medicare Crosswalk",
    "text": "Medicare Crosswalk\n\nProviders and suppliers with the proper taxonomy code eligible for Medicare programs.\n\nThe Medicare Provider and Supplier Taxonomy Crosswalk dataset lists the providers and suppliers eligible to enroll in Medicare programs with the proper healthcare provider taxonomy code. This data includes the Medicare specialty codes, if available, provider/supplier type description, taxonomy code, and the taxonomy description.\nFootnotes\n\nCodedplyr::tibble(\n  ind = c(1:14),\n  desc = c(\n    \"Medicare no longer enrolls this provider type.\",\n    \"This is an arrangement whereby immunization services are rendered by health care providers who are under contract to the entity/individual who is enrolled in Medicare as a Mass Immunization Roster Biller. The Healthcare Provider Taxonomy Code(s) would be that (those) of the health care provider(s) who render the immunization services.\",\n    \"Medicare carriers use Specialty Code 87 for Pharmacies when processing prescription drugs that are paid through the Medicare Physician Fee Schedule. However, the description for Specialty Code 87 remains All Other Suppliers.\",\n    \"Because the Medicare Provider Type Physician/Undefined Physician Type applies to physicians,Unknown Supplier/Provider Specialty applies to other than physicians. Because Medicare does not enroll every non-physician supplier/provider type in the Healthcare Provider Taxonomy Code Set, we cannot arbitrarily link this Medicare Provider Type to all remaining supplier/provider types in the Healthcare Provider Taxonomy Code Set. In truth, this Medicare Provider Type would link to every Healthcare Provider Taxonomy Code (except those that describe physicians) that is listed in this document. We do not list them here because doing so would greatly increase the size of this document.\",\n    \"Because the Medicare Provider Type indicates that the provider/supplier is a Physician, we have linked this to the most generic Allopathic & Osteopathic Physicians classification. It could technically link to every Allopathic & Osteopathic Physician.\",\n    \"Medicare specialty code designation is for Part B DMEPOS purposes.\",\n    \"Medicare specialty code designation is for Part B DMEPOS purposes.\",\n    \"Medicare specialty code designation is for Part B DMEPOS purposes.\",\n    \"Medicare specialty code designation is for Part B DMEPOS purposes.\",\n    \"Medicare specialty code designation is for Part B DMEPOS purposes.\",\n    \"Medicare specialty code designation is for Part B DMEPOS purposes.\",\n    \"There is no linkage to specific Healthcare Provider Taxonomy Codes because an Indian Health Service facility can be various provider types/classifications.\",\n    \"Medicare specialty code designation is for Part B DMEPOS purposes.\",\n    \"Does not meet the definition of health care provider at 45 CFR 160.103 is not eligible for an NPI.\"\n    )\n  ) |&gt;\n  gt::gt(rowname_col = \"ind\") |&gt; \n  gt::opt_table_font(gt::google_font(name = \"Karla\")) |&gt;\n  gt::cols_label(\n    ind = \"Mark\",\n    desc = \"Footnote\") |&gt;\n  gt::tab_style(\n    style = gt::cell_text(\n      font = gt::google_font(name = \"Fira Mono\")),\n    locations = gt::cells_body(columns = c(ind))\n  ) |&gt; \n  gt::sub_missing(missing_text = \"---\") |&gt; \n  gt::tab_options(\n    quarto.disable_processing = TRUE\n  )\n\n\n\n\n\n\n      Footnote\n    \n\n\n1\nMedicare no longer enrolls this provider type.\n\n\n2\nThis is an arrangement whereby immunization services are rendered by health care providers who are under contract to the entity/individual who is enrolled in Medicare as a Mass Immunization Roster Biller. The Healthcare Provider Taxonomy Code(s) would be that (those) of the health care provider(s) who render the immunization services.\n\n\n3\nMedicare carriers use Specialty Code 87 for Pharmacies when processing prescription drugs that are paid through the Medicare Physician Fee Schedule. However, the description for Specialty Code 87 remains All Other Suppliers.\n\n\n4\nBecause the Medicare Provider Type Physician/Undefined Physician Type applies to physicians,Unknown Supplier/Provider Specialty applies to other than physicians. Because Medicare does not enroll every non-physician supplier/provider type in the Healthcare Provider Taxonomy Code Set, we cannot arbitrarily link this Medicare Provider Type to all remaining supplier/provider types in the Healthcare Provider Taxonomy Code Set. In truth, this Medicare Provider Type would link to every Healthcare Provider Taxonomy Code (except those that describe physicians) that is listed in this document. We do not list them here because doing so would greatly increase the size of this document.\n\n\n5\nBecause the Medicare Provider Type indicates that the provider/supplier is a Physician, we have linked this to the most generic Allopathic & Osteopathic Physicians classification. It could technically link to every Allopathic & Osteopathic Physician.\n\n\n6\nMedicare specialty code designation is for Part B DMEPOS purposes.\n\n\n7\nMedicare specialty code designation is for Part B DMEPOS purposes.\n\n\n8\nMedicare specialty code designation is for Part B DMEPOS purposes.\n\n\n9\nMedicare specialty code designation is for Part B DMEPOS purposes.\n\n\n10\nMedicare specialty code designation is for Part B DMEPOS purposes.\n\n\n11\nMedicare specialty code designation is for Part B DMEPOS purposes.\n\n\n12\nThere is no linkage to specific Healthcare Provider Taxonomy Codes because an Indian Health Service facility can be various provider types/classifications.\n\n\n13\nMedicare specialty code designation is for Part B DMEPOS purposes.\n\n\n14\nDoes not meet the definition of health care provider at 45 CFR 160.103 is not eligible for an NPI.\n\n\n\n\n\n\n\n\nCodexwalk &lt;- provider::taxonomy_crosswalk(tidy = FALSE) |&gt; \n  janitor::clean_names() |&gt; \n  dplyr::slice(1:558) |&gt; \n  dplyr::mutate(\n    .id = dplyr::row_number(),\n    .after = provider_taxonomy_code\n  ) |&gt; \n  tidyr::separate_longer_delim(\n    cols = provider_taxonomy_description_type_classification_specialization,\n    delim = \"/\"\n  ) |&gt; \n  dplyr::mutate(\n    .group = dplyr::row_number(), \n    .by = c(provider_taxonomy_code, .id)\n  ) |&gt;\n  tidyr::pivot_wider(\n    names_from = .group,\n    values_from = provider_taxonomy_description_type_classification_specialization,\n    names_prefix = \"tax\"\n  ) |&gt; \n  tidyr::unite(\n    \"specialization\",\n    c(tax3, tax4, tax5, tax6),\n    sep = \"/\",\n    na.rm = TRUE\n  ) |&gt; \n  dplyr::mutate(\n    dplyr::across(\n      dplyr::where(is.character),\n      ~dplyr::na_if(., \"\")\n    )\n  )\n\nxwalk |&gt; \n  dplyr::reframe(\n    note1 = stringr::str_extract(medicare_specialty_code, \"(?&lt;=\\\\[).*?(?=\\\\])\"),\n    note2 = stringr::str_extract(\n      medicare_provider_supplier_type_description, \"(?&lt;=\\\\[).*?(?=\\\\])\"),\n    med_spec = stringr::str_remove_all(medicare_specialty_code, \"\\\\[[0-9]{1,2}\\\\]\"),\n    med_type = stringr::str_remove_all(medicare_provider_supplier_type_description, \"\\\\[[0-9]{1,2}\\\\]\"),\n    tax_code = provider_taxonomy_code,\n    tax_grouping = dplyr::na_if(tax1, \"\"),\n    tax_classification = dplyr::na_if(tax2, \"\"),\n    tax_specialization = dplyr::na_if(specialization, \"\")\n    ) |&gt;\n  dplyr::slice(1:30) |&gt;\n  gt::gt() |&gt; \n  gt::opt_table_font(gt::google_font(name = \"Karla\")) |&gt;\n  gt::tab_spanner(\n    label = \"Medicare Specialty\",\n    columns = c(med_spec, med_type)\n  ) |&gt; \n  gt::tab_spanner(\n    label = \"Provider Taxonomy\",\n    columns = c(tax_code, tax_grouping, tax_classification, tax_specialization)\n  ) |&gt;\n  gt::cols_label(\n    med_spec = \"Code\",\n    med_type = \"Provider Type/Description\",\n    tax_code = \"Code\",\n    tax_grouping = \"Grouping\",\n    tax_classification = \"Classification\",\n    tax_specialization = \"Specialization\"\n  ) |&gt;\n  gt::tab_style(\n    style = gt::cell_text(\n      font = gt::google_font(name = \"Fira Mono\")),\n    locations = gt::cells_body(columns = c(med_spec, tax_code))\n  ) |&gt; \n  gt::sub_missing(missing_text = \"---\") |&gt; \n  gt::tab_options(\n    quarto.disable_processing = TRUE\n  )\n\n\n\n\n\n\nnote1\n      note2\n      \n        Medicare Specialty\n      \n      \n        Provider Taxonomy\n      \n    \n\nCode\n      Provider Type/Description\n      Code\n      Grouping\n      Classification\n      Specialization\n    \n\n\n\n—\n—\n01\nPhysician/General Practice\n208D00000X\nAllopathic & Osteopathic Physicians\nGeneral Practice\n—\n\n\n—\n—\n02\nPhysician/General Surgery\n208600000X\nAllopathic & Osteopathic Physicians\nSurgery\n—\n\n\n—\n—\n02\nPhysician/General Surgery\n2086H0002X\nAllopathic & Osteopathic Physicians\nSurgery\nHospice and Palliative Medicine\n\n\n—\n—\n02\nPhysician/General Surgery\n2086S0120X\nAllopathic & Osteopathic Physicians\nSurgery\nPediatric Surgery\n\n\n—\n—\n02\nPhysician/General Surgery\n2086S0122X\nAllopathic & Osteopathic Physicians\nSurgery\nPlastic and Reconstructive Surgery\n\n\n—\n—\n02\nPhysician/General Surgery\n2086S0105X\nAllopathic & Osteopathic Physicians\nSurgery\nSurgery of the Hand\n\n\n—\n—\n02\nPhysician/General Surgery\n2086S0102X\nAllopathic & Osteopathic Physicians\nSurgery\nSurgical Critical Care\n\n\n—\n—\n02\nPhysician/General Surgery\n2086X0206X\nAllopathic & Osteopathic Physicians\nSurgery\nSurgical Oncology\n\n\n—\n—\n02\nPhysician/General Surgery\n2086S0127X\nAllopathic & Osteopathic Physicians\nSurgery\nTrauma Surgery\n\n\n—\n—\n02\nPhysician/General Surgery\n2086S0129X\nAllopathic & Osteopathic Physicians\nSurgery\nVascular Surgery\n\n\n—\n—\n02\nPhysician/General Surgery\n208G00000X\nAllopathic & Osteopathic Physicians\nThoracic Surgery (Cardiothoracic Vascular Surgery)\n—\n\n\n—\n—\n02\nPhysician/General Surgery\n204F00000X\nAllopathic & Osteopathic Physicians\nTransplant Surgery\n—\n\n\n—\n—\n02\nPhysician/General Surgery\n208C00000X\nAllopathic & Osteopathic Physicians\nColon & Rectal Surgery\n—\n\n\n—\n—\n02\nPhysician/General Surgery\n207T00000X\nAllopathic & Osteopathic Physicians\nNeurological Surgery\n—\n\n\n—\n—\n02\nPhysician/General Surgery\n204E00000X\nAllopathic & Osteopathic Physicians\nOral & Maxillofacial Surgery\n—\n\n\n—\n—\n02\nPhysician/General Surgery\n207X00000X\nAllopathic & Osteopathic Physicians\nOrthopedic Surgery\n—\n\n\n—\n—\n02\nPhysician/General Surgery\n207XS0114X\nAllopathic & Osteopathic Physicians\nOrthopedic Surgery\nAdult Reconstructive Orthopedic Surgery\n\n\n—\n—\n02\nPhysician/General Surgery\n207XX0004X\nAllopathic & Osteopathic Physicians\nOrthopedic Surgery\nFoot and Ankle Surgery\n\n\n—\n—\n02\nPhysician/General Surgery\n207XS0106X\nAllopathic & Osteopathic Physicians\nOrthopedic Surgery\nHand Surgery\n\n\n—\n—\n02\nPhysician/General Surgery\n207XS0117X\nAllopathic & Osteopathic Physicians\nOrthopedic Surgery\nOrthopedic Surgery of the Spine\n\n\n—\n—\n02\nPhysician/General Surgery\n207XX0801X\nAllopathic & Osteopathic Physicians\nOrthopedic Surgery\nOrthopedic Trauma\n\n\n—\n—\n02\nPhysician/General Surgery\n207XP3100X\nAllopathic & Osteopathic Physicians\nOrthopedic Surgery\nPediatric Orthopedic Surgery\n\n\n—\n—\n02\nPhysician/General Surgery\n207XX0005X\nAllopathic & Osteopathic Physicians\nOrthopedic Surgery\nSports Medicine\n\n\n—\n—\n02\nPhysician/General Surgery\n208200000X\nAllopathic & Osteopathic Physicians\nPlastic Surgery\n—\n\n\n—\n—\n02\nPhysician/General Surgery\n2082S0099X\nAllopathic & Osteopathic Physicians\nPlastic Surgery\nPlastic Surgery Within the Head & Neck\n\n\n—\n—\n02\nPhysician/General Surgery\n2082S0105X\nAllopathic & Osteopathic Physicians\nPlastic Surgery\nSurgery of the Hand\n\n\n—\n—\n03\nPhysician/Allergy/ Immunology\n207K00000X \nAllopathic & Osteopathic Physicians\nAllergy and Immunology\n—\n\n\n—\n—\n03\nPhysician/Allergy/ Immunology\n207KA0200X\nAllopathic & Osteopathic Physicians\nAllergy and Immunology\nAllergy\n\n\n—\n—\n03\nPhysician/Allergy/ Immunology\n207KI0005X\nAllopathic & Osteopathic Physicians\nAllergy and Immunology\nClinical & Laboratory Immunology\n\n\n—\n—\n04\nPhysician/Otolaryngology\n207Y00000X \nAllopathic & Osteopathic Physicians\n Otolaryngology \n—"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#sources",
    "href": "posts/taxonomy/provider_taxonomy.html#sources",
    "title": "Taxonomy Codes",
    "section": "Sources",
    "text": "Sources\n\nHealth Care Provider Taxonomy Code Set v24.0 (PDF)\ntaxonomy.NUCC.org\nCMS.gov\nASAM.org"
  },
  {
    "objectID": "posts/mpfs/mpfs.html",
    "href": "posts/mpfs/mpfs.html",
    "title": "Medicare Physician Fee Schedule",
    "section": "",
    "text": "This is an overview of the general format of the Medicare Physician Fee Schedule (MPFS), specifically the PFS Relative Value File. Updates are released on the first day of each quarter. If required, a correction notice may be issued. The file is a zip archive and typically contains six files:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRVU\n\n\nData Dictionary, Record Layout and File Documentation\n\n\n\n\n\n\n\nPPRRVU\n\n\nPhysician Fee Schedule RVUs and Policy Indicators\n\n\n\n\n\n\n\nGPCI\n\n\nGeographic Practice Cost Index Components for each Carrier/Locality combination\n\n\n\n\n\n\n\nLOCCO\n\n\nLocality to County Crosswalk\n\n\n\n\n\n\n\nANES\n\n\nAnesthesia Conversion Factors\n\n\n\n\n\n\n\nOPPSCAP\n\n\nOPPS-based capitation-adjusted payment amounts.\n\n\n\n\n\n\n\nWhat follows is a thorough dissection of each file in the archive, starting with the RVU file.\n\nThe pdf labeled “RVU” is a comprehensive guide to the structure and contents of each file in the Relative Value zip file. It describes the methodology, that contains a data dictionary, record layout, and documentation\n\nrvu24a &lt;- rvu::get_source(\"pprvu\")$rvu24a_jan |&gt; \n  dplyr::mutate(\n    mod = cheapr::factor_(mod),\n    status_code = cheapr::factor_(status_code),\n    pctc_ind = cheapr::factor_(pctc_ind),\n    glob_days = cheapr::factor_(glob_days),\n    mult_proc = cheapr::factor_(mult_proc),\n    bilat_surg = cheapr::factor_(bilat_surg),\n    asst_surg = cheapr::factor_(asst_surg),\n    co_surg = cheapr::factor_(co_surg),\n    team_surg = cheapr::factor_(team_surg),\n    physician_supervision_of_diagnostic_procedures = cheapr::factor_(physician_supervision_of_diagnostic_procedures),\n    diagnostic_imaging_family_indicator = cheapr::factor_(diagnostic_imaging_family_indicator),\n    )\n\nover &lt;- cheapr::overview(rvu24a, hist = TRUE)\n\nhcpcs_row &lt;- over$categorical |&gt; \n  dplyr::select(variable = col, value = n_unique) |&gt; \n  dplyr::filter(variable == \"hcpcs\")\n\n\n\ndplyr::left_join(\n  vars |&gt; dplyr::filter(!is.na(value)),\n  dplyr::tibble(\n    variable = names(idx[collapse::funique(vars$variable)]),\n    description = idx[collapse::funique(vars$variable)]),\n  by = dplyr::join_by(variable)\n  ) |&gt; \n  fuimus::combine(\n    name = variable, \n    columns = c('variable', 'description'), \n    sep = \"&lt;br&gt;&lt;br&gt;\"\n    ) |&gt;\n  dplyr::add_row(\n    variable = toupper(hcpcs_row$variable),\n    value = as.character(format(hcpcs_row$value, big.mark = \",\")),\n    n = 18499,\n    pct = 1.0,\n    .before = 1\n    ) |&gt; \n  gt::gt(\n    groupname_col = \"variable\",\n    # rowname_col = \"value\",\n    row_group_as_column = TRUE,\n    process_md = TRUE) |&gt; \n  gt::tab_stubhead(label = \"Variable\") |&gt; \n  gt::cols_label(\n    value = \"Unique\\nValues\",\n    n = \"Total\",\n    pct = \"Percentage\"\n    ) |&gt;\n  gt::fmt_percent(columns = pct) |&gt; \n  gt::fmt_integer(columns = n) |&gt;\n  gt::opt_table_font(font = gt::google_font(name = \"Recursive\")) |&gt; \n  gt::opt_all_caps() |&gt; \n  gt::tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#4758AB\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = gt::px(20),\n    column_labels.padding.horizontal = gt::px(20),\n    table.border.top.color = \"#4758AB\",\n    table.width = gt::pct(100),\n    column_labels.hidden = FALSE,\n    # stub.font.weight = \"bold\",\n    # stub_row_group.font.weight = \"bold\",\n    column_labels.font.weight = \"bold\"\n  )\n\n\n\n\n\nVariable\n      Unique\nValues\n      Total\n      Percentage\n    \n\n\n\nHCPCS\n\n16,324\n18,499\n100.00%\n\n\n\nMODFor diagnostic tests, a blank in this field denotes the global service and the following modifiers identify the components:26 = Professional componentTC = Technical component For services other than those with a professional and/or technical component, a blank will appear in this field with one exception: the presence of CPT modifier -53 indicates that separate RVUs and a fee schedule amount have been established for procedures which the physician terminated before completion. This modifier is used only with colonoscopy CPT codes 44388 and 45378, or with G0105 and G0121. Any other codes billed with modifier -53 are subject to carrier medical review and priced by individual consideration.53 = Discontinued Procedure - Under certain circumstances, the physician may elect to terminate a surgical or diagnostic procedure. Due to extenuating circumstances, or those that threaten the well being of the patient, it may be necessary to indicate that a surgical or diagnostic procedure was started but discontinued.\n\n26\n1,096\n5.92%\n\n\nTC\n1,076\n5.82%\n\n\n53\n4\n0.02%\n\n\n\nSTATUS CODEIndicates whether the code is in the fee schedule and whether it is separately payable if the service is covered. Only RVUs associated with status codes of A, R, or T, are used for Medicare payment.\n\nA\n8,975\n48.52%\n\n\nX\n2,527\n13.66%\n\n\nI\n1,411\n7.63%\n\n\nE\n1,343\n7.26%\n\n\nM\n1,201\n6.49%\n\n\nC\n1,156\n6.25%\n\n\nR\n1,050\n5.68%\n\n\nN\n327\n1.77%\n\n\nJ\n276\n1.49%\n\n\nP\n142\n0.77%\n\n\nB\n83\n0.45%\n\n\nT\n8\n0.04%\n\n\n\nNOT USED FOR MEDICARE PAYMENTThe name says it all\n\n+\n133\n0.72%\n\n\n\nNON FAC INDICATORAn NA in this field indicates that this procedure is rarely or never performed in the non-facility setting.\n\nNA\n4,066\n21.98%\n\n\n\nFACILITY INDICATORAn NA in this field indicates that this procedure is rarely or never performed in the facility setting.\n\nNA\n2,468\n13.34%\n\n\n\nPCTC INDProfessional Component (PC) or Technical Component (TC) Indicator\n\n9\n7,704\n41.65%\n\n\n0\n7,128\n38.53%\n\n\n1\n3,229\n17.45%\n\n\n3\n178\n0.96%\n\n\n5\n104\n0.56%\n\n\n7\n74\n0.40%\n\n\n2\n44\n0.24%\n\n\n6\n20\n0.11%\n\n\n4\n17\n0.09%\n\n\n8\n1\n0.01%\n\n\n\nGLOB DAYSGlobal Surgery postoperative timeframes that apply to payment for each surgical procedure or another indicator that describes how the global concept applies to the service.\n\nXXX\n11,262\n60.88%\n\n\n090\n3,771\n20.38%\n\n\n000\n1,326\n7.17%\n\n\nYYY\n933\n5.04%\n\n\nZZZ\n719\n3.89%\n\n\n010\n471\n2.55%\n\n\nMMM\n17\n0.09%\n\n\n\nMULT PROCMultiple Procedure (CPT Modifier 51) indicator shows which payment adjustment rule for multiple procedures applies to the service.\n\n9\n7,876\n42.58%\n\n\n2\n5,287\n28.58%\n\n\n0\n4,044\n21.86%\n\n\n4\n420\n2.27%\n\n\n3\n361\n1.95%\n\n\n6\n361\n1.95%\n\n\n7\n98\n0.53%\n\n\n5\n52\n0.28%\n\n\n\nBILAT SURGBilateral Surgery Indicator (CPT Modifier 50) for services subject to a payment adjustment.\n\n9\n7,892\n42.66%\n\n\n0\n7,784\n42.08%\n\n\n1\n2,203\n11.91%\n\n\n2\n383\n2.07%\n\n\n3\n237\n1.28%\n\n\n\nASST SURGAssistant at Surgery (Modifiers AS, 80, 81, and 82) indicator for services where Medicare never pays an assistant at surgery.\n\n9\n7,940\n42.92%\n\n\n0\n5,595\n30.24%\n\n\n2\n2,781\n15.03%\n\n\n1\n2,183\n11.80%\n\n\n\nCO SURGCo-Surgeons (Modifier 62) This field gives an indicator for services for which Medicare may pay 2 surgeons, each in a different specialty.\n\n9\n7,885\n42.62%\n\n\n0\n7,839\n42.38%\n\n\n1\n2,474\n13.37%\n\n\n2\n301\n1.63%\n\n\n\nTEAM SURGTeam Surgeons (Modifier 66) This field gives an indicator for services for which Medicare may pay team surgeons.\n\n0\n10,430\n56.38%\n\n\n9\n7,885\n42.62%\n\n\n1\n133\n0.72%\n\n\n2\n51\n0.28%\n\n\n\nENDO BASEEndoscopic Base Code for each code with a multiple surgery indicator of 3.\n\n52000\n44\n0.24%\n\n\n31231\n30\n0.16%\n\n\n43235\n30\n0.16%\n\n\n31622\n20\n0.11%\n\n\n43200\n18\n0.10%\n\n\n49320\n18\n0.10%\n\n\n29870\n15\n0.08%\n\n\n45330\n14\n0.08%\n\n\n45378\n14\n0.08%\n\n\n44388\n13\n0.07%\n\n\n29805\n11\n0.06%\n\n\n43260\n10\n0.05%\n\n\n45300\n10\n0.05%\n\n\n46600\n10\n0.05%\n\n\n44360\n9\n0.05%\n\n\n31525\n8\n0.04%\n\n\n31575\n8\n0.04%\n\n\n31526\n7\n0.04%\n\n\n52351\n7\n0.04%\n\n\n58555\n7\n0.04%\n\n\n29860\n6\n0.03%\n\n\n29830\n5\n0.03%\n\n\n29840\n5\n0.03%\n\n\n43191\n5\n0.03%\n\n\n50570\n5\n0.03%\n\n\n57452\n5\n0.03%\n\n\n31505\n4\n0.02%\n\n\n47552\n4\n0.02%\n\n\n50951\n4\n0.02%\n\n\n44376\n3\n0.02%\n\n\n44380\n3\n0.02%\n\n\n50551\n3\n0.02%\n\n\n0652T\n2\n0.01%\n\n\n50970\n2\n0.01%\n\n\n43197\n1\n0.01%\n\n\n66710\n1\n0.01%\n\n\n\nPHYSICIAN SUPERVISION OF DIAGNOSTIC PROCEDURESMedicare uses this field in post payment review.\n\n09\n17,465\n94.41%\n\n\n01\n533\n2.88%\n\n\n02\n249\n1.35%\n\n\n03\n207\n1.12%\n\n\n04\n16\n0.09%\n\n\n6A\n13\n0.07%\n\n\n7A\n9\n0.05%\n\n\n21\n5\n0.03%\n\n\n05\n1\n0.01%\n\n\n66\n1\n0.01%\n\n\n\nDIAGNOSTIC IMAGING FAMILY INDICATORIdentifies the applicable Diagnostic Service family for HCPCS codes with a Multiple Procedure indicator of 4. For services effective January 1, 2011, and after, family indicators 01 - 11 won’t populate.\n\n99\n18,055\n97.60%\n\n\n88\n444\n2.40%\n\n\n\n\n\n\n\nover$numeric |&gt; \n  dplyr::select(\n    variable = col, \n    unique = n_unique,\n    # min = p0, \n    # p25,\n    # median = p50,\n    p75,\n    max = p100,\n    iqr, \n    mean,\n    sd,\n    hist\n    ) |&gt;\n  gt::gt(\n    groupname_col = \"variable\",\n    row_group_as_column = TRUE,\n    process_md = TRUE) |&gt; \n  gt::fmt_integer(columns = unique) |&gt;\n  gt::fmt_number(columns = p75:sd) |&gt;\n  gt::opt_table_font(font = gt::google_font(name = \"Recursive\")) |&gt; \n  gt::tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#4758AB\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = gt::px(20),\n    column_labels.padding.horizontal = gt::px(20),\n    table.border.top.color = \"#4758AB\",\n    table.width = gt::pct(100),\n    column_labels.hidden = FALSE\n  )\n\n\n\n\n\n\n      unique\n      p75\n      max\n      iqr\n      mean\n      sd\n      hist\n    \n\n\n\nwork_rvu\n\n2,486\n3.21\n108.91\n3.21\n3.88\n8.51\n▇▁▁▁▁\n\n\n\nnon_fac_pe_rvu\n\n2,310\n5.35\n355.87\n5.35\n4.01\n10.52\n▇▁▁▁▁\n\n\n\nfacility_pe_rvu\n\n2,079\n3.66\n53.07\n3.66\n3.03\n5.60\n▇▁▁▁▁\n\n\n\nmp_rvu\n\n1,026\n0.43\n28.99\n0.43\n0.83\n2.20\n▇▁▁▁▁\n\n\n\nnon_facility_total\n\n3,877\n9.79\n364.53\n9.79\n8.71\n18.07\n▇▁▁▁▁\n\n\n\nfacility_total\n\n3,683\n7.50\n171.00\n7.50\n7.74\n15.57\n▇▁▁▁▁\n\n\n\npre_op\n\n8\n0.00\n0.17\n0.00\n0.02\n0.04\n▇▁▂▁▁\n\n\n\nintra_op\n\n14\n0.00\n0.84\n0.00\n0.17\n0.32\n▇▁▁▁▂\n\n\n\npost_op\n\n11\n0.00\n0.23\n0.00\n0.03\n0.07\n▇▁▁▁▁\n\n\n\nconv_factor\n\n1\n32.74\n32.74\n0.00\n32.74\n0.00\n▁▁▇▁▁\n\n\n\nnon_facility_pe_used_for_opps_payment_amount\n\n417\n0.00\n159.54\n0.00\n0.90\n7.15\n▇▁▁▁▁\n\n\n\nfacility_pe_used_for_opps_payment_amount\n\n417\n0.00\n159.54\n0.00\n0.90\n7.15\n▇▁▁▁▁\n\n\n\nmp_used_for_opps_payment_amount\n\n81\n0.00\n1.83\n0.00\n0.01\n0.06\n▇▁▁▁▁\n\n\n\n\n\n\n\nThe MPFS is a listing of the relative value units (RVUs) for each CPT code, as well as the geographic practice cost index (GPCI) for each code. The RVUs are used to calculate the payment amount for each service, while the GPCI is used to adjust the payment amount based on the location where the service is provided.\nThis file contains information on services covered by the MPFS in 2024. For more than 10,000 physician services, the file contains the associated RVUs, a fee schedule status indicator, and various payment policy indicators needed for payment adjustment (i.e., payment of assistant at surgery, team surgery, bilateral surgery, etc.).\nThe MPFS amounts are adjusted to reflect the variation in practice costs from area to area. A GPCI has been established for every Medicare payment locality for each of the three components of a procedure’s RVU:\n\nPhysician Work\nPractice Expense\nMalpractice Expense (sometimes called Professional Liability Insurance)\n\nThe GPCIs are applied in the calculation of a fee schedule payment amount by multiplying the RVU for each component times the GPCI for that component.\nNATIONAL PHYSICIAN FEE SCHEDULE RELATIVE VALUE FILE CALENDAR YEAR 2024\n\n\\[ x = [(RVU_w \\times GPCI_w) + (RVU_p \\times GPCI_p) + (RVU_m \\times GPCI_m)] \\times CF \\]\n\n\\[ y = 0.95x \\]\n\n\\[ z = 0.95(1.15x) \\]\n\n\n\n\n\n\nMany Ways to Say the Same Thing\n\n\n\n\nAs there is a corresponding GPCI value for each of the three components of an RVU, the formula is essentially the dot product of the RVU and GPCI vectors, multiplied by the conversion factor:\n\n\\[ a \\cdot b = a_1b_1 + a_2b_2 + a_3b_3\\] \nSetting up the variables:\n\nwrvu  = 6.26   # Work RVU\nwgpci = 1      # Work GPCI\n\npgpci = 0.883  # Practice GPCI\nprvu  = 4.36   # Practice RVU\n\nmrvu  = 0.99   # Malpractice RVU\nmgpci = 1.125  # Malpractice GPCI\n\ncf    = 32.744 # Conversion Factor\n\n\nBasic Calculation:\n\n((wrvu * wgpci) + \n   (prvu * pgpci) + \n   (mrvu * mgpci)) * cf\n\n[1] 367.5065\n\n\n\nWith base R’s Matrix Multiplication Infix Operator:\n\nas.vector(\n  c(wrvu, prvu, mrvu) %*% \n  c(wgpci, pgpci, mgpci) * cf)\n\n[1] 367.5065\n\n\n\nWith the pracma package’s dot() function:\n\npracma::dot(\n  c(wrvu, prvu, mrvu), \n  c(wgpci, pgpci, mgpci)) * cf\n\n[1] 367.5065\n\n\n\nWith the northstar package’s calculate_amounts() function:\n\ncalculate_amounts(\n  wrvu  = 6.26,\n  nprvu = 7.92,\n  fprvu = 4.36,\n  mrvu  = 0.99,\n  cf    = 32.744,\n  wgpci = 1,\n  pgpci = 0.883,\n  mgpci = 1.125\n)\n\nFacility Amounts:\n\nRVU Total ............ 11.22\nParticipating ........ $367.51\nNon-Particpating ..... $349.13\nLimiting Charge ...... $401.50\n\nNon-Facility Amounts:\n\nRVU Total ............ 14.37\nParticipating ........ $470.44\nNon-Particpating ..... $446.91\nLimiting Charge ...... $513.95\n\n\n\n\n\n\n\n\n\n\nNon-Facility vs. Facility\n\n\n\nUnder the MPFS, many procedures have separate payment amounts for physician services when provided in facility and non-facility settings.\nThe amount is determined by the Place of Service (POS) code. In general, the POS code reflects the actual place where the patient receives the face-to-face service and determines whether the facility or non-facility payment rate is paid.\nServices rendered to a patient who is an inpatient of a hospital (POS code 21) or an outpatient of a hospital (POS codes 19 or 22), the facility rate is paid, regardless of where the face-to-face encounter with the patient occurred.\n\n\n\n\n\n\n\n\n\nTherapy Code Capitation\n\n\n\nCertain therapy codes will receive a 50% reduction to the Practice Expense.\nSection 5102(b) of the Deficit Reduction Act of 2005 requires a payment cap on the Technical Component (TC) of certain diagnostic imaging procedures and the TC portions of the global diagnostic imaging services.\nThis cap is based on the Outpatient Prospective Payment System (OPPS) payment. To implement this provision, the Physician Fee Schedule amount is compared to the OPPS payment amount and the lower amount is used in the formula to calculate payment.\n\n\n\nAccepting assignment means that a healthcare provider or facility is partnered with Medicare and is required by law to charge only the Medicare-approved amount for various services. This amount is preset by Medicare and is often less than many healthcare facilities would charge.\nBecause of this, when patients receive care at a facility that accepts assignment, they will be required to pay lower out-of-pocket costs as Medicare will cover the full amount of the service cost. Personal costs only include the premium and any charges up to the deductible amount.\nPhysicians or facilities that do not accept assignment are a non-participating providers. All physicians are required to file with Medicare, indicating that they either accept or do not accept assignment. If a provider does not accept assignment, it means that they are not required to charge only the Medicare-approved amount for services.\n\nOne possible option for non-participating providers is to choose to accept assignment for some services but to decline assignment for others. For services that they accept assignment for, they are only able to bill the Medicare-approved amount. However, for other services, they are allowed to charge up to 15 percent more than the Medicare-approved amount.\nThis limit cap is known as the limiting charge. Providers that do not fully participate only receive 95 percent of the Medicare-approved amount when Medicare reimburses them for the cost of care. In turn, the provider can charge the patient up to 15 percent more than this reimbursement amount. This extra charge will not be covered by Medicare, which causes Medicare recipients to incur greater out-of-pocket costs.\nThe Medicare limiting charge is the maximum amount a Non-Participating Provider can charge for services submitted on a non-assigned claim. This is that maximum amount a beneficiary could legally be charged.\n\nThe Medicare limiting charge is, by law, set at \\(115\\%\\) of the payment amount for the service furnished by the Non-Participating Physician.\nHowever, the law sets the payment amount for Non-Participating Physicians at \\(95\\%\\) of the payment amount for Participating Physicians (i.e., the Fee Schedule amount).\nCalculating \\(95\\%\\) of \\(115\\%\\) of an amount, \\(x\\), is equivalent to \\(x \\times 1.0925\\) (or \\(109.25\\%\\)):\n\n# 95% of 115% of 10\n(10 * 1.15) * 0.95 \n\n[1] 10.925\n\n# 109.25% of 10\n10 * 1.0925 \n\n[1] 10.925\n\n# using the northstar package\nlimiting_charge(10)\n\n[1] 10.925\n\n\n\nThis file contains information on services covered by the Medicare Physician Fee Schedule (MPFS). For more than 10,000 physician services, the file contains the associated relative value units (RVUs), a fee schedule status indicator, and various payment policy indicators needed for payment adjustment (i.e., payment of assistant at surgery, team surgery, bilateral surgery, etc.).\nThe Medicare physician fee schedule amounts are adjusted to reflect the variation in practice costs from area to area. A geographic practice cost index (GPCI) has been established for every Medicare payment locality for each of the three components of a procedure’s relative value unit (i.e., the RVUs for work, practice expense, and malpractice). The GPCIs are applied in the calculation of a fee schedule payment amount by multiplying the RVU for each component times the GPCI for that component.\n\n\nIndicates whether the code is in the fee schedule and whether it is separately payable if the service is covered. See Attachment A for description of values.\nOnly RVUs associated with status codes of A, R, or T, are used for Medicare payment.\n\n\nProvides time frames that apply to each surgical procedure.\n\n\n\nPreoperative\nIntraoperative\nPostoperative\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFacility\nNon-Facility\n\n\n\nAn NA in this field indicates that this procedure is rarely or never performed in the Facility setting:\n\n\nAn NA in this field indicates that this procedure is rarely or never performed in the Non-Facility setting:\n\n\n\n\nIndicates applicable payment adjustment rule for multiple procedures (modifier 51)."
  },
  {
    "objectID": "posts/mpfs/mpfs.html#rvu",
    "href": "posts/mpfs/mpfs.html#rvu",
    "title": "Medicare Physician Fee Schedule",
    "section": "",
    "text": "The pdf labeled “RVU” is a comprehensive guide to the structure and contents of each file in the Relative Value zip file. It describes the methodology, that contains a data dictionary, record layout, and documentation\n\nrvu24a &lt;- rvu::get_source(\"pprvu\")$rvu24a_jan |&gt; \n  dplyr::mutate(\n    mod = cheapr::factor_(mod),\n    status_code = cheapr::factor_(status_code),\n    pctc_ind = cheapr::factor_(pctc_ind),\n    glob_days = cheapr::factor_(glob_days),\n    mult_proc = cheapr::factor_(mult_proc),\n    bilat_surg = cheapr::factor_(bilat_surg),\n    asst_surg = cheapr::factor_(asst_surg),\n    co_surg = cheapr::factor_(co_surg),\n    team_surg = cheapr::factor_(team_surg),\n    physician_supervision_of_diagnostic_procedures = cheapr::factor_(physician_supervision_of_diagnostic_procedures),\n    diagnostic_imaging_family_indicator = cheapr::factor_(diagnostic_imaging_family_indicator),\n    )\n\nover &lt;- cheapr::overview(rvu24a, hist = TRUE)\n\nhcpcs_row &lt;- over$categorical |&gt; \n  dplyr::select(variable = col, value = n_unique) |&gt; \n  dplyr::filter(variable == \"hcpcs\")"
  },
  {
    "objectID": "posts/mpfs/mpfs.html#indicators",
    "href": "posts/mpfs/mpfs.html#indicators",
    "title": "Medicare Physician Fee Schedule",
    "section": "",
    "text": "dplyr::left_join(\n  vars |&gt; dplyr::filter(!is.na(value)),\n  dplyr::tibble(\n    variable = names(idx[collapse::funique(vars$variable)]),\n    description = idx[collapse::funique(vars$variable)]),\n  by = dplyr::join_by(variable)\n  ) |&gt; \n  fuimus::combine(\n    name = variable, \n    columns = c('variable', 'description'), \n    sep = \"&lt;br&gt;&lt;br&gt;\"\n    ) |&gt;\n  dplyr::add_row(\n    variable = toupper(hcpcs_row$variable),\n    value = as.character(format(hcpcs_row$value, big.mark = \",\")),\n    n = 18499,\n    pct = 1.0,\n    .before = 1\n    ) |&gt; \n  gt::gt(\n    groupname_col = \"variable\",\n    # rowname_col = \"value\",\n    row_group_as_column = TRUE,\n    process_md = TRUE) |&gt; \n  gt::tab_stubhead(label = \"Variable\") |&gt; \n  gt::cols_label(\n    value = \"Unique\\nValues\",\n    n = \"Total\",\n    pct = \"Percentage\"\n    ) |&gt;\n  gt::fmt_percent(columns = pct) |&gt; \n  gt::fmt_integer(columns = n) |&gt;\n  gt::opt_table_font(font = gt::google_font(name = \"Recursive\")) |&gt; \n  gt::opt_all_caps() |&gt; \n  gt::tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#4758AB\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = gt::px(20),\n    column_labels.padding.horizontal = gt::px(20),\n    table.border.top.color = \"#4758AB\",\n    table.width = gt::pct(100),\n    column_labels.hidden = FALSE,\n    # stub.font.weight = \"bold\",\n    # stub_row_group.font.weight = \"bold\",\n    column_labels.font.weight = \"bold\"\n  )\n\n\n\n\n\nVariable\n      Unique\nValues\n      Total\n      Percentage\n    \n\n\n\nHCPCS\n\n16,324\n18,499\n100.00%\n\n\n\nMODFor diagnostic tests, a blank in this field denotes the global service and the following modifiers identify the components:26 = Professional componentTC = Technical component For services other than those with a professional and/or technical component, a blank will appear in this field with one exception: the presence of CPT modifier -53 indicates that separate RVUs and a fee schedule amount have been established for procedures which the physician terminated before completion. This modifier is used only with colonoscopy CPT codes 44388 and 45378, or with G0105 and G0121. Any other codes billed with modifier -53 are subject to carrier medical review and priced by individual consideration.53 = Discontinued Procedure - Under certain circumstances, the physician may elect to terminate a surgical or diagnostic procedure. Due to extenuating circumstances, or those that threaten the well being of the patient, it may be necessary to indicate that a surgical or diagnostic procedure was started but discontinued.\n\n26\n1,096\n5.92%\n\n\nTC\n1,076\n5.82%\n\n\n53\n4\n0.02%\n\n\n\nSTATUS CODEIndicates whether the code is in the fee schedule and whether it is separately payable if the service is covered. Only RVUs associated with status codes of A, R, or T, are used for Medicare payment.\n\nA\n8,975\n48.52%\n\n\nX\n2,527\n13.66%\n\n\nI\n1,411\n7.63%\n\n\nE\n1,343\n7.26%\n\n\nM\n1,201\n6.49%\n\n\nC\n1,156\n6.25%\n\n\nR\n1,050\n5.68%\n\n\nN\n327\n1.77%\n\n\nJ\n276\n1.49%\n\n\nP\n142\n0.77%\n\n\nB\n83\n0.45%\n\n\nT\n8\n0.04%\n\n\n\nNOT USED FOR MEDICARE PAYMENTThe name says it all\n\n+\n133\n0.72%\n\n\n\nNON FAC INDICATORAn NA in this field indicates that this procedure is rarely or never performed in the non-facility setting.\n\nNA\n4,066\n21.98%\n\n\n\nFACILITY INDICATORAn NA in this field indicates that this procedure is rarely or never performed in the facility setting.\n\nNA\n2,468\n13.34%\n\n\n\nPCTC INDProfessional Component (PC) or Technical Component (TC) Indicator\n\n9\n7,704\n41.65%\n\n\n0\n7,128\n38.53%\n\n\n1\n3,229\n17.45%\n\n\n3\n178\n0.96%\n\n\n5\n104\n0.56%\n\n\n7\n74\n0.40%\n\n\n2\n44\n0.24%\n\n\n6\n20\n0.11%\n\n\n4\n17\n0.09%\n\n\n8\n1\n0.01%\n\n\n\nGLOB DAYSGlobal Surgery postoperative timeframes that apply to payment for each surgical procedure or another indicator that describes how the global concept applies to the service.\n\nXXX\n11,262\n60.88%\n\n\n090\n3,771\n20.38%\n\n\n000\n1,326\n7.17%\n\n\nYYY\n933\n5.04%\n\n\nZZZ\n719\n3.89%\n\n\n010\n471\n2.55%\n\n\nMMM\n17\n0.09%\n\n\n\nMULT PROCMultiple Procedure (CPT Modifier 51) indicator shows which payment adjustment rule for multiple procedures applies to the service.\n\n9\n7,876\n42.58%\n\n\n2\n5,287\n28.58%\n\n\n0\n4,044\n21.86%\n\n\n4\n420\n2.27%\n\n\n3\n361\n1.95%\n\n\n6\n361\n1.95%\n\n\n7\n98\n0.53%\n\n\n5\n52\n0.28%\n\n\n\nBILAT SURGBilateral Surgery Indicator (CPT Modifier 50) for services subject to a payment adjustment.\n\n9\n7,892\n42.66%\n\n\n0\n7,784\n42.08%\n\n\n1\n2,203\n11.91%\n\n\n2\n383\n2.07%\n\n\n3\n237\n1.28%\n\n\n\nASST SURGAssistant at Surgery (Modifiers AS, 80, 81, and 82) indicator for services where Medicare never pays an assistant at surgery.\n\n9\n7,940\n42.92%\n\n\n0\n5,595\n30.24%\n\n\n2\n2,781\n15.03%\n\n\n1\n2,183\n11.80%\n\n\n\nCO SURGCo-Surgeons (Modifier 62) This field gives an indicator for services for which Medicare may pay 2 surgeons, each in a different specialty.\n\n9\n7,885\n42.62%\n\n\n0\n7,839\n42.38%\n\n\n1\n2,474\n13.37%\n\n\n2\n301\n1.63%\n\n\n\nTEAM SURGTeam Surgeons (Modifier 66) This field gives an indicator for services for which Medicare may pay team surgeons.\n\n0\n10,430\n56.38%\n\n\n9\n7,885\n42.62%\n\n\n1\n133\n0.72%\n\n\n2\n51\n0.28%\n\n\n\nENDO BASEEndoscopic Base Code for each code with a multiple surgery indicator of 3.\n\n52000\n44\n0.24%\n\n\n31231\n30\n0.16%\n\n\n43235\n30\n0.16%\n\n\n31622\n20\n0.11%\n\n\n43200\n18\n0.10%\n\n\n49320\n18\n0.10%\n\n\n29870\n15\n0.08%\n\n\n45330\n14\n0.08%\n\n\n45378\n14\n0.08%\n\n\n44388\n13\n0.07%\n\n\n29805\n11\n0.06%\n\n\n43260\n10\n0.05%\n\n\n45300\n10\n0.05%\n\n\n46600\n10\n0.05%\n\n\n44360\n9\n0.05%\n\n\n31525\n8\n0.04%\n\n\n31575\n8\n0.04%\n\n\n31526\n7\n0.04%\n\n\n52351\n7\n0.04%\n\n\n58555\n7\n0.04%\n\n\n29860\n6\n0.03%\n\n\n29830\n5\n0.03%\n\n\n29840\n5\n0.03%\n\n\n43191\n5\n0.03%\n\n\n50570\n5\n0.03%\n\n\n57452\n5\n0.03%\n\n\n31505\n4\n0.02%\n\n\n47552\n4\n0.02%\n\n\n50951\n4\n0.02%\n\n\n44376\n3\n0.02%\n\n\n44380\n3\n0.02%\n\n\n50551\n3\n0.02%\n\n\n0652T\n2\n0.01%\n\n\n50970\n2\n0.01%\n\n\n43197\n1\n0.01%\n\n\n66710\n1\n0.01%\n\n\n\nPHYSICIAN SUPERVISION OF DIAGNOSTIC PROCEDURESMedicare uses this field in post payment review.\n\n09\n17,465\n94.41%\n\n\n01\n533\n2.88%\n\n\n02\n249\n1.35%\n\n\n03\n207\n1.12%\n\n\n04\n16\n0.09%\n\n\n6A\n13\n0.07%\n\n\n7A\n9\n0.05%\n\n\n21\n5\n0.03%\n\n\n05\n1\n0.01%\n\n\n66\n1\n0.01%\n\n\n\nDIAGNOSTIC IMAGING FAMILY INDICATORIdentifies the applicable Diagnostic Service family for HCPCS codes with a Multiple Procedure indicator of 4. For services effective January 1, 2011, and after, family indicators 01 - 11 won’t populate.\n\n99\n18,055\n97.60%\n\n\n88\n444\n2.40%\n\n\n\n\n\n\n\nover$numeric |&gt; \n  dplyr::select(\n    variable = col, \n    unique = n_unique,\n    # min = p0, \n    # p25,\n    # median = p50,\n    p75,\n    max = p100,\n    iqr, \n    mean,\n    sd,\n    hist\n    ) |&gt;\n  gt::gt(\n    groupname_col = \"variable\",\n    row_group_as_column = TRUE,\n    process_md = TRUE) |&gt; \n  gt::fmt_integer(columns = unique) |&gt;\n  gt::fmt_number(columns = p75:sd) |&gt;\n  gt::opt_table_font(font = gt::google_font(name = \"Recursive\")) |&gt; \n  gt::tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#4758AB\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = gt::px(20),\n    column_labels.padding.horizontal = gt::px(20),\n    table.border.top.color = \"#4758AB\",\n    table.width = gt::pct(100),\n    column_labels.hidden = FALSE\n  )\n\n\n\n\n\n\n      unique\n      p75\n      max\n      iqr\n      mean\n      sd\n      hist\n    \n\n\n\nwork_rvu\n\n2,486\n3.21\n108.91\n3.21\n3.88\n8.51\n▇▁▁▁▁\n\n\n\nnon_fac_pe_rvu\n\n2,310\n5.35\n355.87\n5.35\n4.01\n10.52\n▇▁▁▁▁\n\n\n\nfacility_pe_rvu\n\n2,079\n3.66\n53.07\n3.66\n3.03\n5.60\n▇▁▁▁▁\n\n\n\nmp_rvu\n\n1,026\n0.43\n28.99\n0.43\n0.83\n2.20\n▇▁▁▁▁\n\n\n\nnon_facility_total\n\n3,877\n9.79\n364.53\n9.79\n8.71\n18.07\n▇▁▁▁▁\n\n\n\nfacility_total\n\n3,683\n7.50\n171.00\n7.50\n7.74\n15.57\n▇▁▁▁▁\n\n\n\npre_op\n\n8\n0.00\n0.17\n0.00\n0.02\n0.04\n▇▁▂▁▁\n\n\n\nintra_op\n\n14\n0.00\n0.84\n0.00\n0.17\n0.32\n▇▁▁▁▂\n\n\n\npost_op\n\n11\n0.00\n0.23\n0.00\n0.03\n0.07\n▇▁▁▁▁\n\n\n\nconv_factor\n\n1\n32.74\n32.74\n0.00\n32.74\n0.00\n▁▁▇▁▁\n\n\n\nnon_facility_pe_used_for_opps_payment_amount\n\n417\n0.00\n159.54\n0.00\n0.90\n7.15\n▇▁▁▁▁\n\n\n\nfacility_pe_used_for_opps_payment_amount\n\n417\n0.00\n159.54\n0.00\n0.90\n7.15\n▇▁▁▁▁\n\n\n\nmp_used_for_opps_payment_amount\n\n81\n0.00\n1.83\n0.00\n0.01\n0.06\n▇▁▁▁▁"
  },
  {
    "objectID": "posts/mpfs/mpfs.html#pprvu",
    "href": "posts/mpfs/mpfs.html#pprvu",
    "title": "Medicare Physician Fee Schedule",
    "section": "",
    "text": "The MPFS is a listing of the relative value units (RVUs) for each CPT code, as well as the geographic practice cost index (GPCI) for each code. The RVUs are used to calculate the payment amount for each service, while the GPCI is used to adjust the payment amount based on the location where the service is provided.\nThis file contains information on services covered by the MPFS in 2024. For more than 10,000 physician services, the file contains the associated RVUs, a fee schedule status indicator, and various payment policy indicators needed for payment adjustment (i.e., payment of assistant at surgery, team surgery, bilateral surgery, etc.).\nThe MPFS amounts are adjusted to reflect the variation in practice costs from area to area. A GPCI has been established for every Medicare payment locality for each of the three components of a procedure’s RVU:\n\nPhysician Work\nPractice Expense\nMalpractice Expense (sometimes called Professional Liability Insurance)\n\nThe GPCIs are applied in the calculation of a fee schedule payment amount by multiplying the RVU for each component times the GPCI for that component.\nNATIONAL PHYSICIAN FEE SCHEDULE RELATIVE VALUE FILE CALENDAR YEAR 2024\n\n\\[ x = [(RVU_w \\times GPCI_w) + (RVU_p \\times GPCI_p) + (RVU_m \\times GPCI_m)] \\times CF \\]\n\n\\[ y = 0.95x \\]\n\n\\[ z = 0.95(1.15x) \\]\n\n\n\n\n\n\nMany Ways to Say the Same Thing\n\n\n\n\nAs there is a corresponding GPCI value for each of the three components of an RVU, the formula is essentially the dot product of the RVU and GPCI vectors, multiplied by the conversion factor:\n\n\\[ a \\cdot b = a_1b_1 + a_2b_2 + a_3b_3\\] \nSetting up the variables:\n\nwrvu  = 6.26   # Work RVU\nwgpci = 1      # Work GPCI\n\npgpci = 0.883  # Practice GPCI\nprvu  = 4.36   # Practice RVU\n\nmrvu  = 0.99   # Malpractice RVU\nmgpci = 1.125  # Malpractice GPCI\n\ncf    = 32.744 # Conversion Factor\n\n\nBasic Calculation:\n\n((wrvu * wgpci) + \n   (prvu * pgpci) + \n   (mrvu * mgpci)) * cf\n\n[1] 367.5065\n\n\n\nWith base R’s Matrix Multiplication Infix Operator:\n\nas.vector(\n  c(wrvu, prvu, mrvu) %*% \n  c(wgpci, pgpci, mgpci) * cf)\n\n[1] 367.5065\n\n\n\nWith the pracma package’s dot() function:\n\npracma::dot(\n  c(wrvu, prvu, mrvu), \n  c(wgpci, pgpci, mgpci)) * cf\n\n[1] 367.5065\n\n\n\nWith the northstar package’s calculate_amounts() function:\n\ncalculate_amounts(\n  wrvu  = 6.26,\n  nprvu = 7.92,\n  fprvu = 4.36,\n  mrvu  = 0.99,\n  cf    = 32.744,\n  wgpci = 1,\n  pgpci = 0.883,\n  mgpci = 1.125\n)\n\nFacility Amounts:\n\nRVU Total ............ 11.22\nParticipating ........ $367.51\nNon-Particpating ..... $349.13\nLimiting Charge ...... $401.50\n\nNon-Facility Amounts:\n\nRVU Total ............ 14.37\nParticipating ........ $470.44\nNon-Particpating ..... $446.91\nLimiting Charge ...... $513.95\n\n\n\n\n\n\n\n\n\n\nNon-Facility vs. Facility\n\n\n\nUnder the MPFS, many procedures have separate payment amounts for physician services when provided in facility and non-facility settings.\nThe amount is determined by the Place of Service (POS) code. In general, the POS code reflects the actual place where the patient receives the face-to-face service and determines whether the facility or non-facility payment rate is paid.\nServices rendered to a patient who is an inpatient of a hospital (POS code 21) or an outpatient of a hospital (POS codes 19 or 22), the facility rate is paid, regardless of where the face-to-face encounter with the patient occurred.\n\n\n\n\n\n\n\n\n\nTherapy Code Capitation\n\n\n\nCertain therapy codes will receive a 50% reduction to the Practice Expense.\nSection 5102(b) of the Deficit Reduction Act of 2005 requires a payment cap on the Technical Component (TC) of certain diagnostic imaging procedures and the TC portions of the global diagnostic imaging services.\nThis cap is based on the Outpatient Prospective Payment System (OPPS) payment. To implement this provision, the Physician Fee Schedule amount is compared to the OPPS payment amount and the lower amount is used in the formula to calculate payment."
  },
  {
    "objectID": "posts/mpfs/mpfs.html#accepting-assignment",
    "href": "posts/mpfs/mpfs.html#accepting-assignment",
    "title": "Medicare Physician Fee Schedule",
    "section": "",
    "text": "Accepting assignment means that a healthcare provider or facility is partnered with Medicare and is required by law to charge only the Medicare-approved amount for various services. This amount is preset by Medicare and is often less than many healthcare facilities would charge.\nBecause of this, when patients receive care at a facility that accepts assignment, they will be required to pay lower out-of-pocket costs as Medicare will cover the full amount of the service cost. Personal costs only include the premium and any charges up to the deductible amount.\nPhysicians or facilities that do not accept assignment are a non-participating providers. All physicians are required to file with Medicare, indicating that they either accept or do not accept assignment. If a provider does not accept assignment, it means that they are not required to charge only the Medicare-approved amount for services.\n\nOne possible option for non-participating providers is to choose to accept assignment for some services but to decline assignment for others. For services that they accept assignment for, they are only able to bill the Medicare-approved amount. However, for other services, they are allowed to charge up to 15 percent more than the Medicare-approved amount.\nThis limit cap is known as the limiting charge. Providers that do not fully participate only receive 95 percent of the Medicare-approved amount when Medicare reimburses them for the cost of care. In turn, the provider can charge the patient up to 15 percent more than this reimbursement amount. This extra charge will not be covered by Medicare, which causes Medicare recipients to incur greater out-of-pocket costs.\nThe Medicare limiting charge is the maximum amount a Non-Participating Provider can charge for services submitted on a non-assigned claim. This is that maximum amount a beneficiary could legally be charged.\n\nThe Medicare limiting charge is, by law, set at \\(115\\%\\) of the payment amount for the service furnished by the Non-Participating Physician.\nHowever, the law sets the payment amount for Non-Participating Physicians at \\(95\\%\\) of the payment amount for Participating Physicians (i.e., the Fee Schedule amount).\nCalculating \\(95\\%\\) of \\(115\\%\\) of an amount, \\(x\\), is equivalent to \\(x \\times 1.0925\\) (or \\(109.25\\%\\)):\n\n# 95% of 115% of 10\n(10 * 1.15) * 0.95 \n\n[1] 10.925\n\n# 109.25% of 10\n10 * 1.0925 \n\n[1] 10.925\n\n# using the northstar package\nlimiting_charge(10)\n\n[1] 10.925"
  },
  {
    "objectID": "posts/mpfs/mpfs.html#relative-value-file",
    "href": "posts/mpfs/mpfs.html#relative-value-file",
    "title": "Medicare Physician Fee Schedule",
    "section": "",
    "text": "This file contains information on services covered by the Medicare Physician Fee Schedule (MPFS). For more than 10,000 physician services, the file contains the associated relative value units (RVUs), a fee schedule status indicator, and various payment policy indicators needed for payment adjustment (i.e., payment of assistant at surgery, team surgery, bilateral surgery, etc.).\nThe Medicare physician fee schedule amounts are adjusted to reflect the variation in practice costs from area to area. A geographic practice cost index (GPCI) has been established for every Medicare payment locality for each of the three components of a procedure’s relative value unit (i.e., the RVUs for work, practice expense, and malpractice). The GPCIs are applied in the calculation of a fee schedule payment amount by multiplying the RVU for each component times the GPCI for that component.\n\n\nIndicates whether the code is in the fee schedule and whether it is separately payable if the service is covered. See Attachment A for description of values.\nOnly RVUs associated with status codes of A, R, or T, are used for Medicare payment."
  },
  {
    "objectID": "posts/mpfs/mpfs.html#global-surgery-days",
    "href": "posts/mpfs/mpfs.html#global-surgery-days",
    "title": "Medicare Physician Fee Schedule",
    "section": "",
    "text": "Provides time frames that apply to each surgical procedure.\n\n\n\nPreoperative\nIntraoperative\nPostoperative"
  },
  {
    "objectID": "posts/mpfs/mpfs.html#indicators-1",
    "href": "posts/mpfs/mpfs.html#indicators-1",
    "title": "Medicare Physician Fee Schedule",
    "section": "",
    "text": "Facility\nNon-Facility\n\n\n\nAn NA in this field indicates that this procedure is rarely or never performed in the Facility setting:\n\n\nAn NA in this field indicates that this procedure is rarely or never performed in the Non-Facility setting:\n\n\n\n\nIndicates applicable payment adjustment rule for multiple procedures (modifier 51)."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Learning for Getting Ahead",
    "section": "",
    "text": "Order By\n       Default\n         \n          Date - Oldest\n        \n         \n          Date - Newest\n        \n         \n          Title\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\nDate\n\n\nTitle\n\n\nReading Time\n\n\n\n\n\n\n2024-07-28\n\n\nTaxonomy Codes\n\n\n10 min\n\n\n\n\n2024-07-30\n\n\nMedicare Physician Fee Schedule\n\n\n37 min\n\n\n\n\n2024-07-31\n\n\nBuilding an NPI Constructor\n\n\n14 min\n\n\n\n\n\nNo matching items\n\n Back to top"
  },
  {
    "objectID": "posts/npi/npi_constructor.html",
    "href": "posts/npi/npi_constructor.html",
    "title": "Building an NPI Constructor",
    "section": "",
    "text": "The National Provider Identifier (NPI) is a unique 10-digit identification number assigned to health care providers in the United States through NPPES. The Centers for Medicare & Medicaid Services (CMS) developed the NPI as a way to standardize the identification of health care providers across the health care industry. NPPES is the National Plan and Provider Enumeration System (NPPES) NPI Registry, a free directory of all active NPI records."
  },
  {
    "objectID": "posts/npi/npi_constructor.html#sec-requirements",
    "href": "posts/npi/npi_constructor.html#sec-requirements",
    "title": "Building an NPI Constructor",
    "section": "Requirements for the NPI",
    "text": "Requirements for the NPI\n\nConsist of 10 numeric digits. The 10th digit is the check digit.\nHave no embedded intelligence.\nBegin with a 1 or 2. \nGenerated by a scattering algorithm using all possible numeric combinations.\nBe unique, without requiring database access for verification.\nUse of other first digits for the NPI must be coordinated with the use of first digits by the standard health plan identifier, when it is adopted."
  },
  {
    "objectID": "posts/npi/npi_constructor.html#sec-checkdigit",
    "href": "posts/npi/npi_constructor.html#sec-checkdigit",
    "title": "Building an NPI Constructor",
    "section": "Requirements for the NPI Check Digit",
    "text": "Requirements for the NPI Check Digit\n\nCalculated using the Luhn formula for computing the modulus 10 “double-add-double” check digit. \n\n\nThis algorithm is recognized as an ISO standard and is the specified check digit algorithm to be used for the card issuer identifier on a standard health identification card.Prefix 80840\nWhen an NPI is used as a card issuer identifier on a standard health identification card, it is preceded by the prefix 80840, in which 80 indicates health applications and 840 indicates the United States.\nTo enable this feature for any NPI, the check digit will always be calculated as if the prefix is present.\nFor a non-prefixed NPI, this is accomplished by adding the constant 24 in step 2 of the check digit calculation."
  },
  {
    "objectID": "posts/npi/npi_constructor.html#luhn-formula-for-modulus-10-double-add-double-check-digit",
    "href": "posts/npi/npi_constructor.html#luhn-formula-for-modulus-10-double-add-double-check-digit",
    "title": "Building an NPI Constructor",
    "section": "Luhn Formula for Modulus 10 “double-add-double” Check Digit",
    "text": "Luhn Formula for Modulus 10 “double-add-double” Check Digit\nThe Luhn check digit formula is calculated as follows:\n\nDouble the value of alternate digits, beginning with the rightmost digit.\nAdd the individual digits of the products resulting from step 1 to the unaffected digits from the original number.\nSubtract the total obtained in step 2 from the next highest number ending in zero. This is the check digit. If the total obtained in step 2 is a number ending in zero, the check digit is zero.\n\n\n\n\n\n\n\n\nMultiples of Ten\n\n\n\nThe next highest number ending in zero is simply the next multiple of ten.\nSpecifically, for some number \\(n\\), the next multiple of ten would be \\(n + (10 - (n \\mod 10))\\) if \\(n\\) is not already a multiple of ten.\nFor example, if \\(n\\) is 23, the next multiple of ten 30. If \\(n\\) is a multiple of ten, such as 50, the next multiple of 10 is 60.\n\n\n\nCheck Digit Calculation Examples\n\n\nWith Prefix\nWithout Prefix\n\n\n\n\nAssume the 9-position identifier part of the NPI is 123456789:\n\n\nidentifier &lt;- 123456789\n\nidentifier\n\n[1] 123456789\n\n\n\nIf used as a card issuer identifier on a standard health identification card the full number is 80840123456789:\n\n\nprefix &lt;- 80840\n\nprefixed &lt;- paste0(prefix, identifier)\n\nprefixed\n\n[1] \"80840123456789\"\n\n\n\nCard issuer identifier without check digit: 8 0 8 4 0 1 2 3 4 5 6 7 8 9\n\n\nid_split &lt;- unlist(strsplit(prefixed, \"\"), use.names = FALSE)\n\nid_split\n\n [1] \"8\" \"0\" \"8\" \"4\" \"0\" \"1\" \"2\" \"3\" \"4\" \"5\" \"6\" \"7\" \"8\" \"9\"\n\n\n\nStep 1: Double the value of alternate digits, beginning with the rightmost digit: 0 8 2 6 10 14 18\n\n\n# Reverse order of digits\nreversed &lt;- rev(id_split)\n\n# Select index of every other digit\nidx_even &lt;- seq(1, length(id_split), 2)\n\n# Double the value of the alternate digits\nreversed[idx_even] &lt;- as.numeric(reversed[idx_even]) * 2\n\n# Reverse the order back\noriginal &lt;- rev(reversed)\n\noriginal\n\n [1] \"8\"  \"0\"  \"8\"  \"8\"  \"0\"  \"2\"  \"2\"  \"6\"  \"4\"  \"10\" \"6\"  \"14\" \"8\"  \"18\"\n\n\n\nStep 2: Add the individual digits of products of doubling, plus unaffected digits: 8 + 0 + 8 + 8 + 0 + 2 + 2 + 6 + 4 + 1 + 0 + 6 + 1 + 4 + 8 + 1 + 8 = 67\n\n\n# Split and unlist to separate digits\nresplit &lt;- unlist(strsplit(original, \"\"), use.names = FALSE)\n\n# Add constant 24 to the sum of the digits\nadded &lt;- sum(as.numeric(resplit))\n\nadded\n\n[1] 67\n\n\n\nStep 3: Subtract from next higher number ending in zero: 70 – 67 = 3\n\n\n# Find the next highest multiple of 10\nmod10 &lt;- ceiling(added / 10) * 10\n\n# Subtract the sum from the next highest multiple of 10\ncheck &lt;- mod10 - added\n\ncheck\n\n[1] 3\n\n\n\nTherefore, the check digit is 3\n\n\npaste0(prefixed, check)\n\n[1] \"808401234567893\"\n\n\n\nand the card issuer identifier with the check digit appended is 808401234567893.\n\n\n\nAssume the 9-position identifier part of the NPI is 123456789. Using the Luhn formula on the identifier portion, the check digit is calculated as follows:\nNPI without check digit: 1 2 3 4 5 6 7 8 9\nStep 1: Double the value of alternate digits, beginning with the rightmost digit. 2 6 10 14 18\nStep 2: Add constant 24, to account for the 80840 prefix that would be present on a card issuer identifier, plus the individual digits of products of doubling, plus unaffected digits. 24 + 2 + 2 + 6 + 4 + 1 + 0 + 6 + 1 + 4 + 8 + 1 + 8 = 67\nStep 3: Subtract from next higher number ending in zero. 70 – 67 = 3\nCheck digit = 3\nNPI with check digit = 1234567893"
  },
  {
    "objectID": "posts/npi/npi_constructor.html#input-validation",
    "href": "posts/npi/npi_constructor.html#input-validation",
    "title": "Building an NPI Constructor",
    "section": "Input Validation",
    "text": "Input Validation\n\n\n\ninput_validation.R\n\n# Must be a character vector as R drops leading zeros\n# ---This won't be needed if NPIs must start with a 1 or 2\ncheck_is_character &lt;- function(x) {\n  \n  arg  &lt;- rlang::caller_arg(x)\n  call &lt;- rlang::caller_env()\n  \n  if (any(!rlang::is_character(x))) {\n    cli::cli_abort(\n      \"{.arg {arg}} must be a {.cls character} vector.\", \n      arg = arg, \n      call = call)\n  }\n}\n\n# Characters must all be numbers\ncheck_characters_numeric &lt;- function(x) {\n  \n  arg  &lt;- rlang::caller_arg(x)\n  call &lt;- rlang::caller_env()\n  \n  if (any(!stringfish::sf_grepl(x, \"^[[:digit:]]+$\"), na.rm = TRUE)) {\n    cli::cli_abort(\n      \"{.arg {arg}} must contain numbers only.\", \n      arg = arg, \n      call = call)\n  }\n}\n\n# Must have 10 characters\ncheck_nchars_10 &lt;- function(x) {\n  \n  arg  &lt;- rlang::caller_arg(x)\n  call &lt;- rlang::caller_env()\n  \n  if (any(stringfish::sf_nchar(x) != 10L)) {\n    cli::cli_abort(\n      \"{.arg {arg}} must be 10 characters long.\", \n      arg = arg, \n      call = call)\n  }\n}\n\nx &lt;- \"123456789\"\n\n# Must begin with 1 or 2\ncheck_first_char &lt;- function(x) {\n  \n  arg  &lt;- rlang::caller_arg(x)\n  call &lt;- rlang::caller_env()\n  \n  if (any(!stringfish::sf_substr(x, 1, 1) %in% c(\"1\", \"2\"))) {\n    cli::cli_abort(\n      \"{.arg {arg}} must start with 1 or 2.\", \n      arg = arg, \n      call = call)\n  }\n}"
  },
  {
    "objectID": "posts/npi/npi_constructor.html#first-draft",
    "href": "posts/npi/npi_constructor.html#first-draft",
    "title": "Building an NPI Constructor",
    "section": "First Draft",
    "text": "First Draft\n\n\n\nconstruct_npi_1.R\n\nconstruct_npi_1 &lt;- function(npi) {\n  \n  check_is_character(npi)\n  check_characters_numeric(npi)\n  check_nchars_10(npi)\n  check_first_char(npi)\n  \n  npi_test &lt;- npi\n  \n  # Remove the 10th digit to create the 9-position identifier part of the NPI\n  id &lt;- unlist(strsplit(npi_test, \"\"), use.names = FALSE)[1:9]\n  \n  #---\n  id_print &lt;- rlang::sym(paste0(c(id, \"_\"), collapse = \"\"))\n  cli::cli_alert(\"01. Keep first 9 digits: {.strong {.val {id_print}}}\")\n  #---\n  \n  # Reverse order of digits\n  x &lt;- rev(id)\n  \n  #---\n  rev_print &lt;- rlang::sym(paste0(x, collapse = \"\"))\n  cli::cli_alert(\"02. Reverse order of digits:  {.strong {.val {rev_print}}}\")\n  #---\n  \n  # Select index of every other digit\n  idx &lt;- seq(1, length(x), 2)\n  \n  #---\n  idx_print &lt;- rlang::sym(paste0(x[idx], collapse = \" \"))\n  cli::cli_alert(\"03. Select every other digit: {.strong {.val {idx_print}}}\")\n  #---\n  \n  # Double the value of the alternate digits\n  x[idx] &lt;- as.numeric(x[idx]) * 2\n  \n  #---\n  dbl_print &lt;- rlang::sym(paste0(x[idx], collapse = \" \"))\n  cli::cli_alert(\"04. Double each alternate digit: {.strong {.val {dbl_print}}}\")\n  ins_print &lt;- rlang::sym(paste0(x, collapse = \" \"))\n  cli::cli_alert(\"05. Insert alternates back into original string: {.strong {.val {ins_print}}}\")\n  #---\n  \n  # Reverse order of digits again\n  x &lt;- rev(x)\n  \n  #---\n  rev2 &lt;- x\n  rev2_print &lt;- rlang::sym(paste0(x, collapse = \" \"))\n  cli::cli_alert(\"06. Reverse order again: {.strong {.val {rev2_print}}}\")\n  #---\n  \n  \n  # Split and unlist to separate digits\n  x &lt;- unlist(strsplit(x, \"\"), use.names = FALSE)\n  \n  #---\n  rev2 &lt;- unlist(strsplit(rev2, \"\"), use.names = FALSE)\n  add &lt;- sum(as.numeric(x))\n  add_print &lt;- rlang::sym(paste0(paste0(rev2, collapse = \" + \"), paste0(\" = \", add)))\n  cli::cli_alert(\"07. Sum the individual digits: {.strong {.val {add_print}}}\")\n  #---\n  \n  # Add constant 24 to the sum of the digits\n  x &lt;- sum(as.numeric(x)) + 24\n  \n  #---\n  const_print &lt;- rlang::sym(paste0(paste0(c(add, 24), collapse = \" + \"), paste0(\" = \", add + 24)))\n  cli::cli_alert(\"08. Add {.emph constant} {.strong 24} to the sum: {.strong {.val {const_print}}}\")\n  #---\n  \n  # Find the next higher number ending in zero\n  y &lt;- ceiling(x / 10) * 10\n  \n  #---\n  int_print &lt;- rlang::sym(paste0(paste0(\"⌈\", add + 24,\"⌉\"), paste0(\" = \", y)))\n  cli::cli_alert(\"09. Find next largest integer divisible by 10: {.strong {.val {int_print}}}\")\n  #---\n  \n  # Find the check digit by subtracting x from y\n  z &lt;- y - x\n  \n  #---\n  check_print &lt;- rlang::sym(paste0(paste0(c(y, (add + 24)), collapse = \" - \"), paste0(\" = \", z)))\n  cli::cli_alert(c(\"10. Find the check digit by subtracting {.emph step 08} from {.emph step 09}: \n{.strong {.val {check_print}}}\"))\n  #---\n  \n  # Append the check digit to the end of the 9-digit identifier\n  id[10] &lt;- z\n  \n  #---\n  append_print &lt;- rlang::sym(paste0(id, collapse = \"\"))\n  cli::cli_alert(c(\"11. Append the check digit to the number from step 01: {.strong {.val {append_print}}}\"))\n  #---\n  \n  # Collapse the vector into a single string\n  npi_valid &lt;- paste0(id, collapse = \"\")\n  \n  # Is the syntactically valid NPI identical to the test NPI?\n  if (identical(npi_valid, npi_test)) {\n    \n    #---\n    identical &lt;- rlang::sym(paste0(c(npi_test, npi_valid), collapse = \" = \"))\n    cli::cli_alert_success(c(\"NPI {.strong is} syntactically valid: {.strong {.val {identical}}}\"))\n    #---\n  }\n  \n  if (!identical(npi_valid, npi_test)) {\n    \n    #---\n    not_identical &lt;- rlang::sym(paste0(c(npi_test, npi_valid), collapse = \" != \"))\n    cli::cli_alert_danger(c(\"NPI {.strong is not} syntactically valid: {.strong {.val {not_identical}}}\"))\n    #---\n  }\n}\n\n\nTesting Validation\n\nconstruct_npi_1(123456789)\n\nError in `construct_npi_1()`:\n! `npi` must be a &lt;character&gt; vector.\n\nconstruct_npi_1(\"123456789\")\n\nError in `construct_npi_1()`:\n! `npi` must be 10 characters long.\n\nconstruct_npi_1(\"O123456789\")\n\nError in `construct_npi_1()`:\n! `npi` must contain numbers only.\n\nconstruct_npi_1(\"0000000000\")\n\nError in `construct_npi_1()`:\n! `npi` must start with 1 or 2.\n\n\nDoes it Work?\n\nconstruct_npi_1(\"1234567891\")\n\n→ 01. Keep first 9 digits: 123456789_\n\n\n→ 02. Reverse order of digits:  987654321\n\n\n→ 03. Select every other digit: 9 7 5 3 1\n\n\n→ 04. Double each alternate digit: 18 14 10 6 2\n\n\n→ 05. Insert alternates back into original string: 18 8 14 6 10 4 6 2 2\n\n\n→ 06. Reverse order again: 2 2 6 4 10 6 14 8 18\n\n\n→ 07. Sum the individual digits: 2 + 2 + 6 + 4 + 1 + 0 + 6 + 1 + 4 + 8 + 1 + 8 = 43\n\n\n→ 08. Add constant 24 to the sum: 43 + 24 = 67\n\n\n→ 09. Find next largest integer divisible by 10: ⌈67⌉ = 70\n\n\n→ 10. Find the check digit by subtracting step 08 from step 09: \n70 - 67 = 3\n\n\n→ 11. Append the check digit to the number from step 01: 1234567893\n\n\n✖ NPI is not syntactically valid: 1234567891 != 1234567893\n\nconstruct_npi_1(\"1043477615\")\n\n→ 01. Keep first 9 digits: 104347761_\n\n\n→ 02. Reverse order of digits:  167743401\n\n\n→ 03. Select every other digit: 1 7 4 4 1\n\n\n→ 04. Double each alternate digit: 2 14 8 8 2\n\n\n→ 05. Insert alternates back into original string: 2 6 14 7 8 3 8 0 2\n\n\n→ 06. Reverse order again: 2 0 8 3 8 7 14 6 2\n\n\n→ 07. Sum the individual digits: 2 + 0 + 8 + 3 + 8 + 7 + 1 + 4 + 6 + 2 = 41\n\n\n→ 08. Add constant 24 to the sum: 41 + 24 = 65\n\n\n→ 09. Find next largest integer divisible by 10: ⌈65⌉ = 70\n\n\n→ 10. Find the check digit by subtracting step 08 from step 09: \n70 - 65 = 5\n\n\n→ 11. Append the check digit to the number from step 01: 1043477615\n\n\n✔ NPI is syntactically valid: 1043477615 = 1043477615\n\nconstruct_npi_1(\"1000000000\")\n\n→ 01. Keep first 9 digits: 100000000_\n\n\n→ 02. Reverse order of digits:  000000001\n\n\n→ 03. Select every other digit: 0 0 0 0 1\n\n\n→ 04. Double each alternate digit: 0 0 0 0 2\n\n\n→ 05. Insert alternates back into original string: 0 0 0 0 0 0 0 0 2\n\n\n→ 06. Reverse order again: 2 0 0 0 0 0 0 0 0\n\n\n→ 07. Sum the individual digits: 2 + 0 + 0 + 0 + 0 + 0 + 0 + 0 + 0 = 2\n\n\n→ 08. Add constant 24 to the sum: 2 + 24 = 26\n\n\n→ 09. Find next largest integer divisible by 10: ⌈26⌉ = 30\n\n\n→ 10. Find the check digit by subtracting step 08 from step 09: \n30 - 26 = 4\n\n\n→ 11. Append the check digit to the number from step 01: 1000000004\n\n\n✖ NPI is not syntactically valid: 1000000000 != 1000000004"
  },
  {
    "objectID": "posts/npi/npi_constructor.html#second-draft",
    "href": "posts/npi/npi_constructor.html#second-draft",
    "title": "Building an NPI Constructor",
    "section": "Second Draft",
    "text": "Second Draft\n\ncli_npi &lt;- npi_test &lt;- \"1234567891\"\n\n\nnpi_msg &lt;- function(x, msg) {\n  \n  arg  &lt;- rlang::caller_arg(x)\n  call &lt;- rlang::caller_env()\n  \n  rlang::inform(\n    message = (\n      c(\"&gt;\" = glue::glue_col(\"{msg}:\"), \n        \" \" = glue::glue_col(\"     {blue {x}}\"))),\n    use_cli_format = TRUE,\n    arg = arg,\n    call = call\n  )\n}\n\nnpi_msg(x = npi_test, \"Testing NPI\")\n\n→ Testing NPI:\n  1234567891\n\n\n\n\n\nconstruct_npi_2.R\n\nconstruct_npi_2 &lt;- function(npi) {\n  \n  check_is_character(npi)\n  check_characters_numeric(npi)\n  check_nchars_10(npi)\n  check_first_char(npi)\n  \n  npi_test &lt;- npi\n  \n  npi_msg(npi_test, \"Testing NPI\")\n  \n  # Remove the 10th digit to create the 9-position identifier part of the NPI\n  id_9 &lt;- unlist(strsplit(npi_test, \"\"), use.names = FALSE)[1:9]\n  \n  npi_msg(paste0(id_9, collapse = \"\"), \"Remove 10th digit\")\n  \n  # Reverse order of digits\n  x_rev &lt;- rev(id_9)\n  \n  npi_msg(paste0(x_rev, collapse = \"\"), \"Reverse order\")\n  \n  # Select index of every other digit\n  x_idx &lt;- seq(1, length(x_rev), 2)\n  \n  npi_msg(paste0(x_rev[x_idx], collapse = \" \"), \"Select every other digit\")\n  \n  # Double the value of the alternate digits\n  x_rev[x_idx] &lt;- as.numeric(x_rev[x_idx]) * 2\n  \n  npi_msg(paste0(x_rev[x_idx], collapse = \" \"), \"Double each\")\n  npi_msg(paste0(x_rev, collapse = \" \"), \"Replace original with doubles\")\n  \n  # Split and unlist to separate digits\n  x_split &lt;- unlist(strsplit(x_rev, \"\"), use.names = FALSE)\n  x_add &lt;- sum(as.numeric(x_split))\n  \n  npi_msg(paste0(paste0(x_split, collapse = \" + \"), paste0(\" = \", x_add)), \"Sum individual digits\")\n\n  # Add constant 24 to the sum of the digits\n  x_24 &lt;- x_add + 24\n  \n  npi_msg(paste0(paste0(c(x_add, 24), collapse = \" + \"), paste0(\" = \", x_24)), \"Add 24 to the sum\")\n  \n  x_divide &lt;- x_24 / 10\n  npi_msg(paste0(paste0(x_24, \" / \", 10), paste0(\" = \", x_divide)), \"Divide by 10\")\n  \n  x_divide_first &lt;- as.numeric(unlist(strsplit(as.character(x_divide), \"\"), use.names = FALSE)[1])\n  npi_msg(paste0(paste0(x_divide), paste0(\" = \", x_divide_first)), \"Take first digit\")\n  \n  x_plus_one &lt;- x_divide_first + 1\n  npi_msg(paste0(paste0(x_divide_first, \" + \", 1), paste0(\" = \", x_plus_one)), \"Add one\")\n  \n  x_paste_zero &lt;- paste0(x_plus_one, \"0\")\n  npi_msg(paste0(paste0(x_plus_one, \" * \", 10), paste0(\" = \", x_paste_zero)), \"Multiply by 10\")\n  \n  # Find the next higher number ending in zero\n  x_next &lt;- ceiling(x_24 / 10) * 10\n  npi_msg(paste0(paste0(\"⌈\", x_24,\"⌉\"), paste0(\" = \" , x_next)), \"Next multiple of 10\")\n  \n  # Find the check digit by subtracting x from y\n  x_check &lt;- x_next - x_24\n  npi_msg(paste0(paste0(c(x_next, x_24), collapse = \" - \"), paste0(\" = \", x_check)), \"Find the check digit\")\n  \n  # Append the check digit to the end of the 9-digit identifier\n  id_10 &lt;- id_9\n  id_10[10] &lt;- x_check\n  \n  npi_msg(paste0(id_10, collapse = \"\"), \"Append check digit\")\n  \n  # Collapse the vector into a single string\n  npi_valid &lt;- paste0(id_10, collapse = \"\")\n  \n  # Is the syntactically valid NPI identical to the test NPI?\n  if (identical(npi_valid, npi_test)) {\n    npi_msg(paste0(c(npi_test, npi_valid), collapse = \" == \"), \"NPI is syntactically valid\")\n  }\n  \n  if (!identical(npi_valid, npi_test)) {\n    npi_msg(paste0(c(npi_test, npi_valid), collapse = \" != \"), \"NPI is not syntactically valid\")\n  }\n  invisible(npi_valid)\n}\n\n\nTesting Validation\n\nconstruct_npi_2(123456789)\n\nError in `construct_npi_2()`:\n! `npi` must be a &lt;character&gt; vector.\n\nconstruct_npi_2(\"123456789\")\n\nError in `construct_npi_2()`:\n! `npi` must be 10 characters long.\n\nconstruct_npi_2(\"O123456789\")\n\nError in `construct_npi_2()`:\n! `npi` must contain numbers only.\n\nconstruct_npi_2(\"0000000000\")\n\nError in `construct_npi_2()`:\n! `npi` must start with 1 or 2.\n\n\nDoes it Work?\n\nconstruct_npi_2(\"1234567891\")\n\n→ Testing NPI:\n→ Remove 10th digit:\n→ Reverse order:\n→ Select every other digit:\n→ Double each:\n→ Replace original with doubles:\n→ Sum individual digits:\n→ Add 24 to the sum:\n→ Divide by 10:\n→ Take first digit:\n→ Add one:\n→ Multiply by 10:\n→ Next multiple of 10:\n→ Find the check digit:\n→ Append check digit:\n→ NPI is not syntactically valid:\n  1234567891\n\nconstruct_npi_2(\"1043477615\")\n\n→ Testing NPI:\n→ Remove 10th digit:\n→ Reverse order:\n→ Select every other digit:\n→ Double each:\n→ Replace original with doubles:\n→ Sum individual digits:\n→ Add 24 to the sum:\n→ Divide by 10:\n→ Take first digit:\n→ Add one:\n→ Multiply by 10:\n→ Next multiple of 10:\n→ Find the check digit:\n→ Append check digit:\n→ NPI is syntactically valid:\n  1043477615\n\nconstruct_npi_2(\"1000000000\")\n\n→ Testing NPI:\n→ Remove 10th digit:\n→ Reverse order:\n→ Select every other digit:\n→ Double each:\n→ Replace original with doubles:\n→ Sum individual digits:\n→ Add 24 to the sum:\n→ Divide by 10:\n→ Take first digit:\n→ Add one:\n→ Multiply by 10:\n→ Next multiple of 10:\n→ Find the check digit:\n→ Append check digit:\n→ NPI is not syntactically valid:\n  1000000000\n\n\n\nx &lt;- \"1234567891\"\nx &lt;- \"1043477615\"\n\nbase_npi &lt;- function(x) {\n  \n  xa &lt;- xb &lt;- as.integer(unlist(strsplit(x, \"\"), use.names = FALSE)[1:9])\n  \n  x &lt;- rev(xb)\n  \n  even &lt;- x[seq(1, length(x), 2)] * 2\n  odd  &lt;- x[seq(2, length(x), 2)]\n  \n  even_less &lt;- even[which(even &lt; 9)]\n  even_more &lt;- as.integer(unlist(strsplit(as.character(even[which(even &gt; 9)]), \"\"), use.names = FALSE))\n  \n  sumup &lt;- sum(odd) + sum(even_less) + sum(even_more) + 24\n  \n  xb[10] &lt;- (ceiling(sumup / 10) * 10) - sumup\n  \n  identical(as.integer(paste0(xb, collapse = \"\")), xa)\n}\n\n# base_npi(\"1043477615\")\n\n\nx &lt;- \"1234567891\"\nx &lt;- \"1043477615\"\n\nluhn &lt;- function(x) {\n  \n  xa &lt;- x\n  \n  x &lt;- rev(\n    as.integer(\n      unlist(\n        strsplit(x, \"\"), use.names = FALSE)[1:9]\n      )\n    )\n  \n  idx_odd  &lt;- seq_along(x) %% 2 == 1\n  idx_even &lt;- seq_along(x) %% 2 == 0\n  \n  x[idx_even] &lt;- x[idx_even] * 2\n  x[idx_even] &lt;- ifelse(x[idx_even] &gt; 9, x[idx_even] - 9, x[idx_even])\n  \n  sumx &lt;- collapse::fsum(c(x[idx_odd], x[idx_even], 24))\n  x &lt;- rev(x)\n  x[10] &lt;- (ceiling(sumx / 10) * 10) - sumx\n  x\n  \n  # sum_x %% 10 == 0\n}\n\n\n# luhn(\"123456789\")\n# luhn(\"104347761\")"
  }
]