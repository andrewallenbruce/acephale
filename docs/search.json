[
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html",
    "href": "posts/taxonomy/provider_taxonomy.html",
    "title": "arktax: Provider Taxonomy Codeset",
    "section": "",
    "text": "Purpose: Categorize health care providers by their type, classification, and specialization.\n\nMaintenance: National Uniform Claim Committee (NUCC). Updated twice a year, in January and July.\n\nApplication: Used in various healthcare processes, including:\n\nElectronic healthcare transactions\nNPI enumeration\nMedicare provider enrollment\nInsurance credentialing\nClaims processing\nDetermining network adequacy"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#raw",
    "href": "posts/taxonomy/provider_taxonomy.html#raw",
    "title": "arktax: Provider Taxonomy Codeset",
    "section": "\n3.1 Raw",
    "text": "3.1 Raw\n\narktax::taxonomy_raw()\n\n# A tibble: 27,054 × 13\n    year version code       display_name section grouping         classification\n   &lt;dbl&gt;   &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;            &lt;chr&gt;         \n 1  2009       0 101Y00000X &lt;NA&gt;         &lt;NA&gt;    Behavioral Heal… Counselor     \n 2  2009       1 101Y00000X &lt;NA&gt;         &lt;NA&gt;    Behavioral Heal… Counselor     \n 3  2010       0 101Y00000X &lt;NA&gt;         &lt;NA&gt;    Behavioral Heal… Counselor     \n 4  2010       1 101Y00000X &lt;NA&gt;         &lt;NA&gt;    Behavioral Heal… Counselor     \n 5  2011       0 101Y00000X &lt;NA&gt;         &lt;NA&gt;    Behavioral Heal… Counselor     \n 6  2011       1 101Y00000X &lt;NA&gt;         &lt;NA&gt;    Behavioral Heal… Counselor     \n 7  2012       0 101Y00000X &lt;NA&gt;         &lt;NA&gt;    Behavioral Heal… Counselor     \n 8  2012       1 101Y00000X &lt;NA&gt;         &lt;NA&gt;    Behavioral Heal… Counselor     \n 9  2013       0 101Y00000X &lt;NA&gt;         &lt;NA&gt;    Behavioral Heal… Counselor     \n10  2013       1 101Y00000X &lt;NA&gt;         &lt;NA&gt;    Behavioral Heal… Counselor     \n# ℹ 27,044 more rows\n# ℹ 6 more variables: specialization &lt;chr&gt;, definition &lt;chr&gt;, notes &lt;chr&gt;,\n#   modified &lt;date&gt;, effective &lt;date&gt;, deactivated &lt;date&gt;"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#hierarchy",
    "href": "posts/taxonomy/provider_taxonomy.html#hierarchy",
    "title": "arktax: Provider Taxonomy Codeset",
    "section": "\n3.2 Hierarchy",
    "text": "3.2 Hierarchy\n\narktax::taxonomy_hierarchy()\n\n# A tibble: 3,259 × 3\n   taxonomy_code taxonomy_level      taxonomy_level_title                       \n   &lt;chr&gt;         &lt;ord&gt;               &lt;chr&gt;                                      \n 1 101200000X    I. Section          Individual                                 \n 2 101200000X    II. Grouping        Behavioral Health & Social Service Provide…\n 3 101200000X    III. Classification Drama Therapist                            \n 4 101Y00000X    I. Section          Individual                                 \n 5 101Y00000X    II. Grouping        Behavioral Health & Social Service Provide…\n 6 101Y00000X    III. Classification Counselor                                  \n 7 101YA0400X    I. Section          Individual                                 \n 8 101YA0400X    II. Grouping        Behavioral Health & Social Service Provide…\n 9 101YA0400X    III. Classification Counselor                                  \n10 101YA0400X    IV. Specialization  Addiction (Substance Use Disorder)         \n# ℹ 3,249 more rows"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#changelog",
    "href": "posts/taxonomy/provider_taxonomy.html#changelog",
    "title": "arktax: Provider Taxonomy Codeset",
    "section": "\n3.3 Changelog",
    "text": "3.3 Changelog\n\narktax::taxonomy_changelog()\n\n# A tibble: 599 × 4\n   code       date       change      details           \n   &lt;chr&gt;      &lt;date&gt;     &lt;ord&gt;       &lt;chr&gt;             \n 1 101200000X 2021-01-01 effective   new               \n 2 102L00000X 2007-01-01 effective   new               \n 3 102L00000X 2007-07-01 modified    definition, source\n 4 102X00000X 2007-07-01 effective   new               \n 5 103G00000X 2007-01-01 modified    title             \n 6 103G00000X 2019-01-01 modified    definition        \n 7 103GC0700X 2007-01-01 deactivated use 103G00000X    \n 8 103K00000X 2008-07-01 effective   new               \n 9 103K00000X 2016-01-01 modified    definition        \n10 103T00000X 2007-01-01 modified    definition        \n# ℹ 589 more rows"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#sources",
    "href": "posts/taxonomy/provider_taxonomy.html#sources",
    "title": "arktax: Provider Taxonomy Codeset",
    "section": "\n3.4 Sources",
    "text": "3.4 Sources\n\narktax::taxonomy_sources()\n\n# A tibble: 721 × 3\n   code       source     text                                                   \n   &lt;chr&gt;      &lt;ord&gt;      &lt;chr&gt;                                                  \n 1 101200000X primary    North American Drama Therapy Association, www.nadta.org\n 2 101Y00000X primary    Abridged from definitions provided by the National Boa…\n 3 102L00000X primary    Registry of Psychoanalysts published by the National A…\n 4 102X00000X primary    The National Federation for Biblio/Poetry Therapy      \n 5 103G00000X primary    American Psychological Association, www.apa.org        \n 6 103K00000X primary    Association of Professional Behavior Analysts, www.apb…\n 7 103T00000X primary    American Psychological Association                     \n 8 103TA0400X primary    American Psychological Association, www.apa.org        \n 9 103TA0400X additional The APA proficiency is Addiction Psychology.           \n10 103TA0700X primary    American Psychological Association, www.apa.org        \n# ℹ 711 more rows"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#display-names",
    "href": "posts/taxonomy/provider_taxonomy.html#display-names",
    "title": "arktax: Provider Taxonomy Codeset",
    "section": "\n3.5 Display Names",
    "text": "3.5 Display Names\n\narktax::taxonomy_display()\n\n# A tibble: 874 × 2\n   taxonomy_code taxonomy_display                            \n   &lt;chr&gt;         &lt;chr&gt;                                       \n 1 101200000X    Drama Therapist                             \n 2 101Y00000X    Counselor                                   \n 3 101YA0400X    Addiction (Substance Use Disorder) Counselor\n 4 101YM0800X    Mental Health Counselor                     \n 5 101YP1600X    Pastoral Counselor                          \n 6 101YP2500X    Professional Counselor                      \n 7 101YS0200X    School Counselor                            \n 8 102L00000X    Psychoanalyst                               \n 9 102X00000X    Poetry Therapist                            \n10 103G00000X    Clinical Neuropsychologist                  \n# ℹ 864 more rows"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#definitions",
    "href": "posts/taxonomy/provider_taxonomy.html#definitions",
    "title": "arktax: Provider Taxonomy Codeset",
    "section": "\n3.6 Definitions",
    "text": "3.6 Definitions\n\narktax::taxonomy_definition()\n\n# A tibble: 874 × 2\n   taxonomy_code taxonomy_definition                                            \n   &lt;chr&gt;         &lt;chr&gt;                                                          \n 1 101200000X    Drama therapists are trained in the intentional use of drama a…\n 2 101Y00000X    A provider who is trained and educated in the performance of b…\n 3 101YA0400X    &lt;NA&gt;                                                           \n 4 101YM0800X    &lt;NA&gt;                                                           \n 5 101YP1600X    &lt;NA&gt;                                                           \n 6 101YP2500X    &lt;NA&gt;                                                           \n 7 101YS0200X    &lt;NA&gt;                                                           \n 8 102L00000X    Psychoanalysis is a comprehensive, theoretical framework which…\n 9 102X00000X    A medical or mental health professional who has attained crede…\n10 103G00000X    A clinical psychologist who applies principles of assessment a…\n# ℹ 864 more rows"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#raw-1",
    "href": "posts/taxonomy/provider_taxonomy.html#raw-1",
    "title": "arktax: Provider Taxonomy Codeset",
    "section": "\n4.1 Raw",
    "text": "4.1 Raw\n\narktax::crosswalk_raw()\n\n# A tibble: 559 × 6\n   taxonomy_code taxonomy_description       specialty_code specialty_description\n   &lt;chr&gt;         &lt;chr&gt;                      &lt;chr&gt;          &lt;chr&gt;                \n 1 101YM0800X    &lt;NA&gt;                       E2             Mental Health Counse…\n 2 101YP2500X    &lt;NA&gt;                       E2             Licensed Professiona…\n 3 103T00000X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n 4 103TA0400X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n 5 103TA0700X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n 6 103TB0200X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n 7 103TC0700X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n 8 103TC0700X    Behavioral Health & Socia… 68             Psychologist, Clinic…\n 9 103TC1900X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n10 103TC2200X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n# ℹ 549 more rows\n# ℹ 2 more variables: footnote &lt;chr&gt;, footnote_description &lt;chr&gt;\n\n\n\narktax::taxonomy_raw(taxonomy_code = c(\"101YM0800X\", \"101YP2500X\")) |&gt; \n  dplyr::filter(codex::not_na(display_name))\n\n# A tibble: 16 × 13\n    year version code       display_name         section grouping classification\n   &lt;dbl&gt;   &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;                &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;         \n 1  2021       0 101YM0800X Mental Health Couns… &lt;NA&gt;    Behavio… Counselor     \n 2  2021       1 101YM0800X Mental Health Couns… Indivi… Behavio… Counselor     \n 3  2022       0 101YM0800X Mental Health Couns… Indivi… Behavio… Counselor     \n 4  2022       1 101YM0800X Mental Health Couns… Indivi… Behavio… Counselor     \n 5  2023       0 101YM0800X Mental Health Couns… Indivi… Behavio… Counselor     \n 6  2023       1 101YM0800X Mental Health Couns… Indivi… Behavio… Counselor     \n 7  2024       0 101YM0800X Mental Health Couns… Indivi… Behavio… Counselor     \n 8  2024       1 101YM0800X Mental Health Couns… Indivi… Behavio… Counselor     \n 9  2021       0 101YP2500X Professional Counse… &lt;NA&gt;    Behavio… Counselor     \n10  2021       1 101YP2500X Professional Counse… Indivi… Behavio… Counselor     \n11  2022       0 101YP2500X Professional Counse… Indivi… Behavio… Counselor     \n12  2022       1 101YP2500X Professional Counse… Indivi… Behavio… Counselor     \n13  2023       0 101YP2500X Professional Counse… Indivi… Behavio… Counselor     \n14  2023       1 101YP2500X Professional Counse… Indivi… Behavio… Counselor     \n15  2024       0 101YP2500X Professional Counse… Indivi… Behavio… Counselor     \n16  2024       1 101YP2500X Professional Counse… Indivi… Behavio… Counselor     \n# ℹ 6 more variables: specialization &lt;chr&gt;, definition &lt;chr&gt;, notes &lt;chr&gt;,\n#   modified &lt;date&gt;, effective &lt;date&gt;, deactivated &lt;date&gt;"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#footnotes",
    "href": "posts/taxonomy/provider_taxonomy.html#footnotes",
    "title": "arktax: Provider Taxonomy Codeset",
    "section": "\n4.2 Footnotes",
    "text": "4.2 Footnotes\n\narktax::crosswalk_footnotes()\n\n# A tibble: 50 × 3\n   taxonomy_code specialty_code footnote                                        \n   &lt;chr&gt;         &lt;chr&gt;          &lt;glue&gt;                                          \n 1 251V00000X    61             (1) Medicare no longer enrolls this provider ty…\n 2 &lt;NA&gt;          73             (2) This is an arrangement whereby immunization…\n 3 &lt;NA&gt;          88             (4) Because the Medicare Provider Type Physicia…\n 4 208D00000X    99             (6) Medicare specialty code designation is for …\n 5 332800000X    A9             (13) Medicare specialty code designation is for…\n 6 332B00000X    87             (3) Medicare carriers use Specialty Code 87 for…\n 7 156FX1800X    96             (5) Because the Medicare Provider Type indicate…\n 8 282N00000X    A0             (7) Medicare specialty code designation is for …\n 9 282N00000X    A0             (7) Medicare specialty code designation is for …\n10 282NC2000X    A0             (7) Medicare specialty code designation is for …\n# ℹ 40 more rows"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#taxonomy",
    "href": "posts/taxonomy/provider_taxonomy.html#taxonomy",
    "title": "arktax: Provider Taxonomy Codeset",
    "section": "\n4.3 Taxonomy",
    "text": "4.3 Taxonomy\n\narktax::crosswalk_taxonomy()\n\n# A tibble: 559 × 4\n   taxonomy_code taxonomy_description       specialty_code specialty_description\n   &lt;chr&gt;         &lt;chr&gt;                      &lt;chr&gt;          &lt;chr&gt;                \n 1 101YM0800X    &lt;NA&gt;                       E2             Mental Health Counse…\n 2 101YP2500X    &lt;NA&gt;                       E2             Licensed Professiona…\n 3 103T00000X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n 4 103TA0400X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n 5 103TA0700X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n 6 103TB0200X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n 7 103TC0700X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n 8 103TC0700X    Behavioral Health & Socia… 68             Psychologist, Clinic…\n 9 103TC1900X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n10 103TC2200X    Behavioral Health & Socia… 62             Psychologist, Clinic…\n# ℹ 549 more rows\n\n\nTaxonomy Split\n\narktax::crosswalk_taxonomy() |&gt; \n  dplyr::select(taxonomy_code, taxonomy_description) |&gt; \n  tidyr::separate_longer_delim(cols = taxonomy_description, delim = stringr::regex(\"[\\\\/|,]\")) |&gt;\n  dplyr::mutate(taxonomy_description = dplyr::if_else(codex::sf_detect(taxonomy_description, \n        \"Urban Indian Health \\\\(I\"), \"Urban Indian Health [ITU] Pharmacy\", stringr::str_squish(taxonomy_description))) |&gt; \n  dplyr::filter(codex::sf_ndetect(taxonomy_description, \"^T$|U\\\\)\\\\sPharmacy\")) |&gt;\n  dplyr::mutate(n_desc = dplyr::row_number(), .by = taxonomy_code) |&gt;\n  # tidyr::pivot_wider(names_from = n_desc, \n  #                    values_from = taxonomy_description,\n  #                    names_prefix = \"tax_\") |&gt; \n  # dplyr::count(taxonomy_code, sort = TRUE) |&gt; \n  # dplyr::filter(n &lt; 8) |&gt; \n  # dplyr::count(n)\n\ntaxonomy\n\ntaxonomy |&gt; \n  hacksaw::count_split(\n    tax1,\n    tax2,\n    tax3,\n    tax4,\n    tax5,\n    tax6\n  )\n\nSpecialty Split\n\nspecialty &lt;- xwalk |&gt; \n  dplyr::select(\n    .id, \n    specialty_code,\n    specialty_type,\n    type_note,\n    code_note) |&gt;\n  dplyr::left_join(footnotes, \n    by = dplyr::join_by(type_note == note)) |&gt; \n  dplyr::left_join(footnotes, \n    by = dplyr::join_by(code_note == note)) |&gt; \n  fuimus::combine(\n    name = note, \n    columns = c(\n      \"type_note\", \n      \"code_note\"), \n    sep = \", \") |&gt;\n  fuimus::combine(\n    name = note_description, \n    columns = c(\n      \"note_description.x\", \n      \"note_description.y\"), \n    sep = \" \")\n\n\nspecialty |&gt; \n  dplyr::mutate(.id = as.character(.id)) |&gt; \n  tidyr::nest(data = .id) |&gt; \n  dplyr::mutate(.id = purrr::map_chr(\n    data, function(x) \n      glue::glue(\"{codex::delist(x)}\") |&gt; \n      glue::glue_collapse(sep = \", \")),\n    data = NULL) |&gt; \n  tidyr::separate_longer_delim(\n    cols = specialty_type, \n    delim = stringr::fixed(\"/\")) |&gt; \n  dplyr::mutate(specialty_type = stringr::str_squish(specialty_type))"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#sources-1",
    "href": "posts/taxonomy/provider_taxonomy.html#sources-1",
    "title": "arktax: Provider Taxonomy Codeset",
    "section": "\n4.4 Sources",
    "text": "4.4 Sources\n\nHealth Care Provider Taxonomy Code Set v24.0 (PDF)\ntaxonomy.NUCC.org\nCMS.gov\nASAM.org"
  },
  {
    "objectID": "posts/taxonomy/provider_taxonomy.html#session-information",
    "href": "posts/taxonomy/provider_taxonomy.html#session-information",
    "title": "arktax: Provider Taxonomy Codeset",
    "section": "\n4.5 Session Information",
    "text": "4.5 Session Information\n\n\nR version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nother attached packages: arktax(v.0.0.1.9003), codex(v.0.0.1), provider(v.0.0.1.9000), collapsibleTree(v.0.1.8), lubridate(v.1.9.4), forcats(v.1.0.0), stringr(v.1.5.1), dplyr(v.1.1.4), purrr(v.1.0.2), readr(v.2.1.5), tidyr(v.1.3.1.9000), tibble(v.3.2.1), ggplot2(v.3.5.1) and tidyverse(v.2.0.0)\nloaded via a namespace (and not attached): rappdirs(v.0.3.3), utf8(v.1.2.4), generics(v.0.1.3), stringi(v.1.8.4), hms(v.1.1.3), digest(v.0.6.37), magrittr(v.2.0.3), evaluate(v.1.0.1), grid(v.4.4.2), timechange(v.0.3.0), fastmap(v.1.2.0), jsonlite(v.1.8.9), pins(v.1.4.0), pander(v.0.6.5), fansi(v.1.0.6), scales(v.1.3.0), httr2(v.1.0.7), textshaping(v.0.4.1), RApiSerialize(v.0.1.4), cli(v.3.6.3), rlang(v.1.1.4), munsell(v.0.5.1), withr(v.3.0.2), yaml(v.2.3.10), qs(v.0.27.2), tools(v.4.4.2), parallel(v.4.4.2), tzdb(v.0.4.0), zeallot(v.0.1.0), colorspace(v.2.1-1), vctrs(v.0.6.5), R6(v.2.5.1), lifecycle(v.1.0.4), cheapr(v.0.9.92), stringfish(v.0.16.0), fs(v.1.6.5), htmlwidgets(v.1.6.4), ragg(v.1.3.3), pkgconfig(v.2.0.3), RcppParallel(v.5.1.9), pillar(v.1.9.0), gtable(v.0.3.6), glue(v.1.8.0), data.table(v.1.16.99), Rcpp(v.1.0.13-1), systemfonts(v.1.1.0), collapse(v.2.0.18), xfun(v.0.49), tidyselect(v.1.2.1), data.tree(v.1.1.0), rstudioapi(v.0.17.1), knitr(v.1.49), htmltools(v.0.5.8.1), rmarkdown(v.2.29) and compiler(v.4.4.2)"
  },
  {
    "objectID": "posts/regex/regex.html",
    "href": "posts/regex/regex.html",
    "title": "codex: Medical Code Regex Builder",
    "section": "",
    "text": "The postfix for a wildcard that begins with a letter is [0-9]{n}.\nIn remove_redundant(), try pmap for rr() step.\nGroups 3, 4 & 5 beginning with letters.\nGroup 5 ending with letters.\n\n\n\n\n\n\n\n\nGood Examples\n\n\n\n\n\n\n\nlist(\"L80\", \n     c(\"L56\", \"L59\"))\n\nlength(sf_extract(hcpcs, \"^L56|^L59|^L80\"))\nlength(sf_extract(hcpcs, \"^L(5[69]|80)[0-9]{2}$\"))\n\nbench::mark(\n  raw = sf_extract(hcpcs, \"^L56|^L59|^L80\"),\n  compact = sf_extract(hcpcs, \"^L(5[69]|80)[0-9]{2}$\"),\n  iterations = 10000) |&gt; \n  select(expression:total_time)\n\n\n\nlist(c(\"021\", \"022\", \"026\", \"027\"), \n     c(\"032\", \"033\"), \n     c(\"042\", \"044\"), \n     \"050\")\n\nbench::mark(\n  raw = sf_extract(hcpcs, \"^021|^022|^026|^027|^032|^033|^042|^044|^050\"),\n  compact = sf_extract(hcpcs, sf_convert(\"^0(2[1267]|3[23]|4[24]|50)[A-Z0-9]{2}$\")),\n  iterations = 10000) |&gt; \n  select(expression:total_time)\n\n\n\nlist(c(\"C75\", \"C97\"),\n     c(\"G02\", \"G04\"))\n\nlength(sf_extract(hcpcs, \"^C75|^C97|^G02|^G04\"))\nlength(sf_extract(hcpcs, \"^C(75|97)[0-9]{2}$|^G0[24][0-9]{2}$\"))\nlength(sf_extract(hcpcs, \"^(C(75|97)|G0[24])[0-9]{2}$\"))\n\nbench::mark(\n  raw = sf_extract(hcpcs, \"^C75|^C97|^G02|^G04\"),\n  reduced = sf_extract(hcpcs, \"^C(75|97)[0-9]{2}$|^G0[24][0-9]{2}$\"),\n  compact = sf_extract(hcpcs, sf_convert(\"^(C(75|97)|G0[24])[0-9]{2}$\")),\n  iterations = 10000) |&gt; \n  select(expression:total_time)\n\n\n\nlist(\"0[2-5]\", \n     \"15\", \n     \"2[027]\", \n     \"3[0-24-6]\", \n     \"5[0458]\", \n     \"6[134]\", \n     \"76\", \n     \"9[25]\", \n     \"C[79]\", \n     \"E0\", \n     \"G0\", \n     \"S2\") -&gt; c4list\n\nc4list\n\nc4raw &lt;- \"^02|^03|^04|^05|^15|^20|^22|^27|^30|^31|^32|^34|^35|^36|^50|^54|^55|^58|^61|^63|^64|^76|^92|^95|^C7|^C9|^E0|^G0|^S2\"\n\nc4compact &lt;- paste0(\"^(\", sf_collapse(list_c(c4list), collapse = \"|\"), \")[A-Z0-9]{3}$\")\n\nlength(sf_extract(hcpcs, c4raw))\nlength(sf_extract(hcpcs, c4compact))\n\nbench::mark(\n  raw = sf_extract(hcpcs, c4raw),\n  compact = sf_extract(hcpcs, c4compact),\n  iterations = 10000) |&gt; \n  select(expression:total_time)"
  },
  {
    "objectID": "posts/regex/regex.html#session-information",
    "href": "posts/regex/regex.html#session-information",
    "title": "codex: Medical Code Regex Builder",
    "section": "\n6.1 Session Information",
    "text": "6.1 Session Information\n\n\nR version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nother attached packages: codex(v.0.0.1), fuimus(v.0.0.5.9002), collapse(v.2.0.18), data.table(v.1.16.99), stringfish(v.0.16.0), S7(v.0.2.0.9000), vctrs(v.0.6.5), cli(v.3.6.3), rlang(v.1.1.4), lubridate(v.1.9.4), forcats(v.1.0.0), stringr(v.1.5.1), dplyr(v.1.1.4), purrr(v.1.0.2), readr(v.2.1.5), tidyr(v.1.3.1.9000), tibble(v.3.2.1), ggplot2(v.3.5.1) and tidyverse(v.2.0.0)\nloaded via a namespace (and not attached): rappdirs(v.0.3.3), utf8(v.1.2.4), generics(v.0.1.3), stringi(v.1.8.4), hms(v.1.1.3), digest(v.0.6.37), magrittr(v.2.0.3), evaluate(v.1.0.1), grid(v.4.4.2), timechange(v.0.3.0), fastmap(v.1.2.0), rprojroot(v.2.0.4), jsonlite(v.1.8.9), pins(v.1.4.0), pander(v.0.6.5), kit(v.0.0.19), fansi(v.1.0.6), scales(v.1.3.0), northstar(v.0.0.8), textshaping(v.0.4.1), RApiSerialize(v.0.1.4), crayon(v.1.5.3), munsell(v.0.5.1), withr(v.3.0.2), yaml(v.2.3.10), qs(v.0.27.2), tools(v.4.4.2), parallel(v.4.4.2), tzdb(v.0.4.0), colorspace(v.2.1-1), here(v.1.0.1), R6(v.2.5.1), lifecycle(v.1.0.4), cheapr(v.0.9.92), fs(v.1.6.5), htmlwidgets(v.1.6.4), ragg(v.1.3.3), pkgconfig(v.2.0.3), RcppParallel(v.5.1.9), pillar(v.1.9.0), gtable(v.0.3.6), glue(v.1.8.0), Rcpp(v.1.0.13-1), systemfonts(v.1.1.0), xfun(v.0.49), tidyselect(v.1.2.1), rstudioapi(v.0.17.1), knitr(v.1.49), htmltools(v.0.5.8.1), rmarkdown(v.2.29) and compiler(v.4.4.2)"
  },
  {
    "objectID": "posts/provider_cache/provider_cache.html",
    "href": "posts/provider_cache/provider_cache.html",
    "title": "provider: Metadata Caching",
    "section": "",
    "text": "Previous Work\n\nprovider #60 - version 1\nprovider #60 - version 2\n\n\n\nCenters for Medicare & Medicaid Services Data API\nAPI FAQ for data.CMS.gov | OCTOBER 2024 - VERSION 1.6\n\n\nhttr2::url_parse(\"https://data.cms.gov/provider-data/api/1/datastore/query/\")\n\n&lt;httr2_url&gt; https://data.cms.gov/provider-data/api/1/datastore/query/\n\n\n• scheme: https\n\n\n• hostname: data.cms.gov\n\n\n• path: /provider-data/api/1/datastore/query/\n\ndistro \n\nError: object 'distro' not found\n\nunclass(httr2::url_parse(\"?limit=1&offset=100&count=true&results=true&schema=true&keys=true&format=json&rowIds=true\"))\n\n$scheme\nNULL\n\n$hostname\nNULL\n\n$username\nNULL\n\n$password\nNULL\n\n$port\nNULL\n\n$path\nNULL\n\n$query\n$query$limit\n[1] \"1\"\n\n$query$offset\n[1] \"100\"\n\n$query$count\n[1] \"true\"\n\n$query$results\n[1] \"true\"\n\n$query$schema\n[1] \"true\"\n\n$query$keys\n[1] \"true\"\n\n$query$format\n[1] \"json\"\n\n$query$rowIds\n[1] \"true\"\n\n\n$fragment\nNULL\n\n\n\nfname = \"affiliations\"\n\nndf_identifier &lt;- \\(x) {\n  kit::nswitch(\n    x,\n    \"affiliations\", \"27ea-46a8\",\n    \"clinicians\", \"mj5m-pzi6\",\n    default = NA_character_,\n    nThread = 4L\n  )\n}\n\nurl_ndf &lt;- httr2::url_parse(\"https://data.cms.gov/provider-data/api/1/metastore/schemas/dataset/items/\")\n\nurl_tmp &lt;- url_ndf |&gt; \n  httr2::url_build() |&gt; \n  httr2::request()\n\nhttr2::req_template(url_tmp, \"/{fname}?show-reference-ids=true\", fname = ndf_identifier(fname))\n\n&lt;httr2_request&gt;\n\n\nGET\nhttps://data.cms.gov/provider-data/api/1/metastore/schemas/dataset/items/27ea-46a8?show-reference-ids=true\n\n\nBody: empty\n\n\n\nurl_ndf |&gt; \n  httr2::url_build() |&gt; \n  httr2::request() |&gt; \n  httr2::req_url_path_append(\n    ndf_identifier(fname)\n    ) |&gt; \n  httr2::req_url_path_append(\"?show-reference-ids=true\") |&gt;\n  httr2::req_perform() |&gt;\n  httr2::resp_body_json(check_type = FALSE, simplifyVector = TRUE)\n\n\nmeta_ndf &lt;- \\(fname) {\n  \n  stopifnot(curl::has_internet())\n  \n  x &lt;- request(\n    paste0(\n      \"https://data.cms.gov/\",\n      \"provider-data/api/1/\",\n      \"metastore/schemas/\",\n      \"dataset/items/\",\n      switch(fname, \n             affiliations = \"27ea-46a8\", \n             clinicians   = \"mj5m-pzi6\", \n             stop(\"Invalid argument\")),\n    \"?show-reference-ids=true\")) |&gt;\n       req_perform() |&gt;\n       resp_body_json(\n         check_type     = FALSE,\n         simplifyVector = TRUE)\n  \n  distro &lt;- gelm(gelm(x, \"distribution\"), \"identifier\")\n  \n  y &lt;- request(\n    paste0(\n    \"https://data.cms.gov/\", \n    \"provider-data/api/1/\",\n    \"datastore/query/\", \n    distro, \n    \"?limit=1&offset=100&\",\n    \"count=true&results=true&\", \n    \"schema=true&keys=true&\",\n    \"format=json&rowIds=true\")) |&gt;\n       req_perform() |&gt;\n       resp_body_json(\n         check_type = FALSE,\n         simplifyVector = TRUE)\n  \n  z &lt;- gelm(gelm(gelm(y, \"schema\"), distro), \"fields\")\n  \n  list(\n    title        = gelm(x, \"title\"),\n    description  = gelm(x, \"description\"),\n    identifier   = gelm(gelm(x, \"identifier\"), \"identifier\"),\n    distribution = distro,\n    issued       = gelm(x, \"issued\"), \n    modified     = gelm(x, \"modified\")[[1]], \n    released     = gelm(x, \"released\"),\n    dimensions   = paste0(gelm(gelm(y, \"count\"), is.numeric), \" x \", gelm(gelm(z, \"record_number\"), \"length\")), \n    fields       = names(z),\n    site         = gelm(x, \"landingPage\"),\n    csv          = gelm(gelm(gelm(x, \"distribution\"), \"data\"), \"downloadURL\", m = \"df\"),\n    dictionary   = paste0(\"https://data.cms.gov/provider-data/sites/default/files/data_dictionaries/physician/DOC_Data_Dictionary.pdf\"))\n}\n\n\naff &lt;- provider::affiliations(npi = 1558595660, na.rm = FALSE, tidy = FALSE)\ncat(utils::formatOL(meta_ndf(\"affiliations\")$fields, offset = 0), sep = \"\\n\")\ncat(utils::formatOL(names(aff), offset = 0), sep = \"\\n\")\n\n\n\n 1. record_number\n 2. npi\n 3. ind_pac_id\n 4. provider_last_name\n 5. provider_first_name\n 6. provider_middle_name\n 7. suff\n 8. facility_type\n 9. facility_affiliations_certification_number\n10. facility_type_certification_number\n\n\n 1. record_number\n 2. npi\n 3. ind_pac_id\n 4. provider_last_name\n 5. provider_first_name\n 6. provider_middle_name\n 7. suff\n 8. facility_type\n 9. facility_affiliations_certification_number\n10. facility_type_certification_number\n\n\n\ncln &lt;- provider::clinicians(npi = 1558595660, na.rm = FALSE, tidy = FALSE)\ncat(utils::formatOL(meta_ndf(\"clinicians\")$fields), sep = \"\\n\")\ncat(utils::formatOL(names(cln), offset = 1), sep = \"\\n\")\n\n\n\n 1. record_number\n 2. npi\n 3. ind_pac_id\n 4. ind_enrl_id\n 5. provider_last_name\n 6. provider_first_name\n 7. provider_middle_name\n 8. suff\n 9. gndr\n10. cred\n11. med_sch\n12. grd_yr\n13. pri_spec\n14. sec_spec_1\n15. sec_spec_2\n16. sec_spec_3\n17. sec_spec_4\n18. sec_spec_all\n19. telehlth\n20. facility_name\n21. org_pac_id\n22. num_org_mem\n23. adr_ln_1\n24. adr_ln_2\n25. ln_2_sprs\n26. citytown\n27. state\n28. zip_code\n29. telephone_number\n30. ind_assgn\n31. grp_assgn\n32. adrs_id\n\n\n  1. record_number\n  2. npi\n  3. ind_pac_id\n  4. ind_enrl_id\n  5. provider_last_name\n  6. provider_first_name\n  7. provider_middle_name\n  8. suff\n  9. gndr\n 10. cred\n 11. med_sch\n 12. grd_yr\n 13. pri_spec\n 14. sec_spec_1\n 15. sec_spec_2\n 16. sec_spec_3\n 17. sec_spec_4\n 18. sec_spec_all\n 19. telehlth\n 20. facility_name\n 21. org_pac_id\n 22. num_org_mem\n 23. adr_ln_1\n 24. adr_ln_2\n 25. ln_2_sprs\n 26. citytown\n 27. state\n 28. zip_code\n 29. telephone_number\n 30. ind_assgn\n 31. grp_assgn\n 32. adrs_id\n\n\n\n\n\njohnd &lt;- affiliations(npi = 1558595660, na.rm = FALSE)\n\njohnd |&gt; \n  create_informant(\n    tbl_name = NULL,\n    label = \"Provider Facility Affiliations\"\n  ) |&gt; \n  info_tabular(\n    `Row Definition` = \"A row has randomized values.\",\n    Source = c(\n      \"- From the **pointblank** package.\",\n      \"- [https://rstudio.github.io/pointblank/]()\"\n     )\n   ) |&gt; \n  info_columns(\n    columns = npi,\n    info = \"10-digit National Provider Identifier.\") |&gt;\n  info_columns(\n    columns = pac,\n    info = \"10-digit PECOS Associate Control ID.\") |&gt;\n  info_columns(\n    columns = vars(first, middle, last, suffix),\n    info = \"Individual Provider's Name.\") |&gt;\n  info_columns(\n    columns = facility_type,\n    info = \"Individual Provider's Name.\") |&gt;\n  info_section(\n    section_name = \"Notes\",\n    usage = \"`affiliations(parent_ccn = '670055')`\",\n    Source = c(\n      \"- From the **(provider)** package.\",\n      \"- [CMS Affiliations API](https://data.cms.gov/provider-data/dataset/27ea-46a8)\"\n    )) |&gt; \n  get_informant_report(\n    title = \"**`affiliations()`** Data Dictionary\",\n    size = \"standard\"\n  )\n\nError in get_informant_report(info_section(info_columns(info_columns(info_columns(info_columns(info_tabular(create_informant(johnd, : could not find function \"get_informant_report\""
  },
  {
    "objectID": "posts/provider_cache/provider_cache.html#pointblank",
    "href": "posts/provider_cache/provider_cache.html#pointblank",
    "title": "provider: Metadata Caching",
    "section": "",
    "text": "johnd &lt;- affiliations(npi = 1558595660, na.rm = FALSE)\n\njohnd |&gt; \n  create_informant(\n    tbl_name = NULL,\n    label = \"Provider Facility Affiliations\"\n  ) |&gt; \n  info_tabular(\n    `Row Definition` = \"A row has randomized values.\",\n    Source = c(\n      \"- From the **pointblank** package.\",\n      \"- [https://rstudio.github.io/pointblank/]()\"\n     )\n   ) |&gt; \n  info_columns(\n    columns = npi,\n    info = \"10-digit National Provider Identifier.\") |&gt;\n  info_columns(\n    columns = pac,\n    info = \"10-digit PECOS Associate Control ID.\") |&gt;\n  info_columns(\n    columns = vars(first, middle, last, suffix),\n    info = \"Individual Provider's Name.\") |&gt;\n  info_columns(\n    columns = facility_type,\n    info = \"Individual Provider's Name.\") |&gt;\n  info_section(\n    section_name = \"Notes\",\n    usage = \"`affiliations(parent_ccn = '670055')`\",\n    Source = c(\n      \"- From the **(provider)** package.\",\n      \"- [CMS Affiliations API](https://data.cms.gov/provider-data/dataset/27ea-46a8)\"\n    )) |&gt; \n  get_informant_report(\n    title = \"**`affiliations()`** Data Dictionary\",\n    size = \"standard\"\n  )\n\nError in get_informant_report(info_section(info_columns(info_columns(info_columns(info_columns(info_tabular(create_informant(johnd, : could not find function \"get_informant_report\""
  },
  {
    "objectID": "posts/provider_cache/provider_cache.html#finding-data",
    "href": "posts/provider_cache/provider_cache.html#finding-data",
    "title": "provider: Metadata Caching",
    "section": "\n2.1 Finding Data",
    "text": "2.1 Finding Data\n\nIs there a catalog of available data?\n\nYes, the data.json file is an Open Data catalog containing the datasets available on our site. As new data is added, it is automatically updated to the data.json.\nIn the data.json, there is an array called dataset. You can search through this array using the title of your dataset, such as \"Payroll Based Journal Daily Nurse Staffing\". Inside of the dataset, there is an array called distribution which will contain all the versions of the data in all available formats for each version. In this array there are a few different types of entries:\n\nThe first entry (with a description of ‘latest’) will provide a URL that will always point to the latest data, even as new versions are published.\nThe remaining entries will provide references to the data at fixed points in time, listed in descending order by date. For example, \"https://data.cms.gov/data-api/v1/dataset/d10d792e- ea6e-4145-8512-34efbc1be04b/data\" will always point to the Payroll Based Journal Daily Nurse Staffing data from Q2 2021. Some datasets will have multiple historical versions available and some will only have the most recent data available.\n\nThe data with mediaType of “text/csv” is downloadable as a CSV file and data with mediaType of “application/zip” is downloadable as a ZIP file.\nThe data with a format of “API” will point to an API endpoint.\n\n\n\n\nHow can I get an earlier version of the data?\n\nIf your data has earlier versions available, there is a “temporal” field in the distribution section of the data.json file which will indicate the time period. An example is below.\nOlder Version Code Example in Python\nFinds the API link for the 2017 Medicare Inpatient Hospitals - by Provider and Service Data\nhttps://data.cms.gov/provider-summary-by-type-of-service/medicare-inpatient-hospitals/medicare-inpatient-hospitals-by-provider-and-service\nimport requests\n\nurl         = \"https://data.cms.gov/data.json\"\ntitle       = \"Medicare Inpatient Hospitals - by Provider and Service\"\ntime_period = \"2017-01-01/2017-12-31\"\nresponse    = requests.request(\"GET\", url)\n\nif response.ok:\n    response = response.json()\n    dataset = response['dataset']\n    for set in dataset:\n        if title == set['title']:\n            for distro in set['distribution']:\n                if 'format' in distro.keys():\n                    if distro['format'] == \"API\" and distro['temporal'] == time_period:\n                        print(f\"API link for {title} from {time_period} is {distro['accessURL']}\")"
  },
  {
    "objectID": "posts/provider_cache/provider_cache.html#session-information",
    "href": "posts/provider_cache/provider_cache.html#session-information",
    "title": "provider: Metadata Caching",
    "section": "\n2.2 Session Information",
    "text": "2.2 Session Information\n\n\nR version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nother attached packages: httr2(v.1.0.7), fuimus(v.0.0.5.9004), provider(v.0.0.1.9000), collapse(v.2.0.18), kit(v.0.0.19), magrittr(v.2.0.3), data.table(v.1.16.99), fastverse(v.0.3.4), lubridate(v.1.9.4), forcats(v.1.0.0), stringr(v.1.5.1), dplyr(v.1.1.4), purrr(v.1.0.2), readr(v.2.1.5), tidyr(v.1.3.1.9000), tibble(v.3.2.1), ggplot2(v.3.5.1) and tidyverse(v.2.0.0)\nloaded via a namespace (and not attached): rappdirs(v.0.3.3), utf8(v.1.2.4), generics(v.0.1.3), stringi(v.1.8.4), hms(v.1.1.3), digest(v.0.6.37), evaluate(v.1.0.1), grid(v.4.4.2), timechange(v.0.3.0), fastmap(v.1.2.0), jsonlite(v.1.8.9), pander(v.0.6.5), fansi(v.1.0.6), scales(v.1.3.0), textshaping(v.0.4.1), cli(v.3.6.3), rlang(v.1.1.4), munsell(v.0.5.1), withr(v.3.0.2), yaml(v.2.3.10), tools(v.4.4.2), parallel(v.4.4.2), tzdb(v.0.4.0), zeallot(v.0.1.0), colorspace(v.2.1-1), curl(v.6.0.1), vctrs(v.0.6.5), R6(v.2.5.1), lifecycle(v.1.0.4), snakecase(v.0.11.1), htmlwidgets(v.1.6.4), janitor(v.2.2.0), ragg(v.1.3.3), pkgconfig(v.2.0.3), pillar(v.1.9.0), gtable(v.0.3.6), glue(v.1.8.0), Rcpp(v.1.0.13-1), systemfonts(v.1.1.0), xfun(v.0.49), tidyselect(v.1.2.1), rstudioapi(v.0.17.1), knitr(v.1.49), htmltools(v.0.5.8.1), rmarkdown(v.2.29) and compiler(v.4.4.2)"
  },
  {
    "objectID": "posts/packaging/packaging.html",
    "href": "posts/packaging/packaging.html",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "",
    "text": "initialize_package.R\n\ninitialize_package &lt;- \\(pkgname,\n                        local = \"C:/Users/Andrew/Desktop/Repositories/\",\n                        github = \"https://github.com/andrewallenbruce/\") {\n  \n  usethis::create_package(\n    path          = glue::glue(\"{local}{pkgname}\"),\n    fields        = list(\n    Package       = glue::glue(\"{pkgname}\"),\n    \"Authors@R\"   = utils::person(\n    given         = c(\"Andrew\", \"Allen\"), \n    family        = \"Bruce\", \n    email         = \"andrewallenbruce@gmail.com\", \n    role          = c(\"aut\", \"cre\", \"cph\")),\n    Maintainer    = \"Andrew Allen Bruce &lt;andrewallenbruce@gmail.com&gt;\",\n    URL           = glue::glue(\"{github}{pkgname}\"),\n    BugReports    = glue::glue(\"{github}{pkgname}/issues\"))\n  )\n}\n\n\n\n\nWill ask you to commit files to Git. Say YES.\n\n\nuse_git()\n\n\nWill ask you to commit files to GitHub. Say YES.\n\n\n\nuse_github()\n\n\n\nuse_mit_license(\"Andrew Allen Bruce\")\n\n\n\nuse_code_of_conduct(contact = \"andrewallenbruce@gmail.com\")\n\n\n\nuse_package_doc()\n\n\n\nuse_news_md()\n\n\n\nroxyglobals::use_roxyglobals()\n\nIn the DESCRIPTION file, make sure the following two fields are filled out:\nConfig/roxyglobals/filename: generated-globals.R\nConfig/roxyglobals/unique: TRUE\n\n\nuse_testthat(parallel = TRUE)\n\n\n\nuse_test(\"add-test\")\n\n\n\nuse_pkgdown_github_pages()\n\n\n\n\n_pkgdown.yml\n\nurl: https://andrewallenbruce.github.io/pkgname/\n\ntemplate:\n  bootstrap: 5\n  light-switch: true\n  bslib:\n    base_font: {google: \"Roboto\"}\n    heading_font: {google: \"Roboto Slab\"}\n    code_font: {google: \"Source Code Pro\"}\n\nnavbar:\n  structure:\n    left:\n    - intro\n    - reference\n    - articles\n    - tutorials\n    - news\n    right:\n    - search\n    - github\n    - lightswitch\n  components:\n    reference:\n      text: Reference\n      href: reference/index.html\n    search:\n      search: []\n    lightswitch:\n      icon: fa-sun\n      aria-label: Light switch\n      id: lightswitch\n      menu:\n      - text: Light\n        theme: light\n        icon: fa-sun\n      - text: Dark\n        theme: dark\n        icon: fa-moon\n      - text: Auto\n        theme: auto\n        icon: fa-adjust\n    news:\n      text: Changelog\n      href: news/index.html\n    github:\n      icon: fab fa-github fa-lg\n      href: https://github.com/andrewallenbruce/pkgname/\n      aria-label: GitHub\n\n\n\n\n_pkgdown.yml\n\nreference:\n\n- title: Classifications\n  desc: &gt;\n    Classification systems for added context and dimensionality reduction.\n  contents:\n  - betos\n  - ndc_lookup\n  - taxonomies\n  - taxonomy_codes\n  - taxonomy_crosswalk\n\n- title: Utilities\n  desc: &gt;\n    Various helper functions.\n  contents:\n  - change\n  - geomean\n  - years_df\n  - duration_vec\n  - summary_stats\n  - add_counties\n\n\n\nuse_vignette(\"getting-started\", \"Getting Started\")\n\n\n\nuse_readme_rmd()\n\n\n\nglue::glue('\n&lt;!-- badges: start --&gt;\n\n![GitHub R package version](https://img.shields.io/github/r-package/v/andrewallenbruce/{PACKAGE}?style=flat-square&logo=R&label=Package&color=%23192a38)\n[![Code size](https://img.shields.io/github/languages/code-size/andrewallenbruce/{PACKAGE}.svg)](https://github.com/andrewallenbruce/{PACKAGE})\n[![Last commit](https://img.shields.io/github/last-commit/andrewallenbruce/{PACKAGE}.svg)](https://github.com/andrewallenbruce/{PACKAGE}/commits/master)\n[![License: MIT](https://img.shields.io/badge/license-MIT-blue.svg)](https://choosealicense.com/licenses/mit/)\n\n&lt;!-- badges: end --&gt;\n', \nPACKAGE = \"pkgname\", \nsep = \"\\n\")\n\n&lt;!-- badges: start --&gt;\n\n![GitHub R package version](https://img.shields.io/github/r-package/v/andrewallenbruce/pkgname?style=flat-square&logo=R&label=Package&color=%23192a38)\n[![Code size](https://img.shields.io/github/languages/code-size/andrewallenbruce/pkgname.svg)](https://github.com/andrewallenbruce/pkgname)\n[![Last commit](https://img.shields.io/github/last-commit/andrewallenbruce/pkgname.svg)](https://github.com/andrewallenbruce/pkgname/commits/master)\n[![License: MIT](https://img.shields.io/badge/license-MIT-blue.svg)](https://choosealicense.com/licenses/mit/)\n\n&lt;!-- badges: end --&gt;\n\n\n\n\nbuild_rmd(\"README.Rmd\")\n\nError in build_rmd(\"README.Rmd\"): could not find function \"build_rmd\"\n\n\n\n\ndevtools::check()\n\n\n\nuse_tidy_description()"
  },
  {
    "objectID": "posts/packaging/packaging.html#connect-to-git",
    "href": "posts/packaging/packaging.html#connect-to-git",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "",
    "text": "Will ask you to commit files to Git. Say YES.\n\n\nuse_git()\n\n\nWill ask you to commit files to GitHub. Say YES."
  },
  {
    "objectID": "posts/packaging/packaging.html#create-github-repository",
    "href": "posts/packaging/packaging.html#create-github-repository",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "",
    "text": "use_github()"
  },
  {
    "objectID": "posts/packaging/packaging.html#add-license",
    "href": "posts/packaging/packaging.html#add-license",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "",
    "text": "use_mit_license(\"Andrew Allen Bruce\")"
  },
  {
    "objectID": "posts/packaging/packaging.html#add-code-of-conduct",
    "href": "posts/packaging/packaging.html#add-code-of-conduct",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "",
    "text": "use_code_of_conduct(contact = \"andrewallenbruce@gmail.com\")"
  },
  {
    "objectID": "posts/packaging/packaging.html#add-package-document",
    "href": "posts/packaging/packaging.html#add-package-document",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "",
    "text": "use_package_doc()"
  },
  {
    "objectID": "posts/packaging/packaging.html#add-newschangelog",
    "href": "posts/packaging/packaging.html#add-newschangelog",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "",
    "text": "use_news_md()"
  },
  {
    "objectID": "posts/packaging/packaging.html#set-up-roxyglobals",
    "href": "posts/packaging/packaging.html#set-up-roxyglobals",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "",
    "text": "roxyglobals::use_roxyglobals()\n\nIn the DESCRIPTION file, make sure the following two fields are filled out:\nConfig/roxyglobals/filename: generated-globals.R\nConfig/roxyglobals/unique: TRUE"
  },
  {
    "objectID": "posts/packaging/packaging.html#set-up-testthat",
    "href": "posts/packaging/packaging.html#set-up-testthat",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "",
    "text": "use_testthat(parallel = TRUE)\n\n\n\nuse_test(\"add-test\")"
  },
  {
    "objectID": "posts/packaging/packaging.html#create-pkgdown-site",
    "href": "posts/packaging/packaging.html#create-pkgdown-site",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "",
    "text": "use_pkgdown_github_pages()\n\n\n\n\n_pkgdown.yml\n\nurl: https://andrewallenbruce.github.io/pkgname/\n\ntemplate:\n  bootstrap: 5\n  light-switch: true\n  bslib:\n    base_font: {google: \"Roboto\"}\n    heading_font: {google: \"Roboto Slab\"}\n    code_font: {google: \"Source Code Pro\"}\n\nnavbar:\n  structure:\n    left:\n    - intro\n    - reference\n    - articles\n    - tutorials\n    - news\n    right:\n    - search\n    - github\n    - lightswitch\n  components:\n    reference:\n      text: Reference\n      href: reference/index.html\n    search:\n      search: []\n    lightswitch:\n      icon: fa-sun\n      aria-label: Light switch\n      id: lightswitch\n      menu:\n      - text: Light\n        theme: light\n        icon: fa-sun\n      - text: Dark\n        theme: dark\n        icon: fa-moon\n      - text: Auto\n        theme: auto\n        icon: fa-adjust\n    news:\n      text: Changelog\n      href: news/index.html\n    github:\n      icon: fab fa-github fa-lg\n      href: https://github.com/andrewallenbruce/pkgname/\n      aria-label: GitHub\n\n\n\n\n_pkgdown.yml\n\nreference:\n\n- title: Classifications\n  desc: &gt;\n    Classification systems for added context and dimensionality reduction.\n  contents:\n  - betos\n  - ndc_lookup\n  - taxonomies\n  - taxonomy_codes\n  - taxonomy_crosswalk\n\n- title: Utilities\n  desc: &gt;\n    Various helper functions.\n  contents:\n  - change\n  - geomean\n  - years_df\n  - duration_vec\n  - summary_stats\n  - add_counties\n\n\n\nuse_vignette(\"getting-started\", \"Getting Started\")"
  },
  {
    "objectID": "posts/packaging/packaging.html#add-readme.rmd",
    "href": "posts/packaging/packaging.html#add-readme.rmd",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "",
    "text": "use_readme_rmd()\n\n\n\nglue::glue('\n&lt;!-- badges: start --&gt;\n\n![GitHub R package version](https://img.shields.io/github/r-package/v/andrewallenbruce/{PACKAGE}?style=flat-square&logo=R&label=Package&color=%23192a38)\n[![Code size](https://img.shields.io/github/languages/code-size/andrewallenbruce/{PACKAGE}.svg)](https://github.com/andrewallenbruce/{PACKAGE})\n[![Last commit](https://img.shields.io/github/last-commit/andrewallenbruce/{PACKAGE}.svg)](https://github.com/andrewallenbruce/{PACKAGE}/commits/master)\n[![License: MIT](https://img.shields.io/badge/license-MIT-blue.svg)](https://choosealicense.com/licenses/mit/)\n\n&lt;!-- badges: end --&gt;\n', \nPACKAGE = \"pkgname\", \nsep = \"\\n\")\n\n&lt;!-- badges: start --&gt;\n\n![GitHub R package version](https://img.shields.io/github/r-package/v/andrewallenbruce/pkgname?style=flat-square&logo=R&label=Package&color=%23192a38)\n[![Code size](https://img.shields.io/github/languages/code-size/andrewallenbruce/pkgname.svg)](https://github.com/andrewallenbruce/pkgname)\n[![Last commit](https://img.shields.io/github/last-commit/andrewallenbruce/pkgname.svg)](https://github.com/andrewallenbruce/pkgname/commits/master)\n[![License: MIT](https://img.shields.io/badge/license-MIT-blue.svg)](https://choosealicense.com/licenses/mit/)\n\n&lt;!-- badges: end --&gt;\n\n\n\n\nbuild_rmd(\"README.Rmd\")\n\nError in build_rmd(\"README.Rmd\"): could not find function \"build_rmd\""
  },
  {
    "objectID": "posts/packaging/packaging.html#run-rcmdchk",
    "href": "posts/packaging/packaging.html#run-rcmdchk",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "",
    "text": "devtools::check()\n\n\n\nuse_tidy_description()"
  },
  {
    "objectID": "posts/packaging/packaging.html#use-gert-to-force-commitpush",
    "href": "posts/packaging/packaging.html#use-gert-to-force-commitpush",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "\n5.1 Use {gert} to Force Commit/Push",
    "text": "5.1 Use {gert} to Force Commit/Push\n\nWhen RStudio won’t let you commit files & push them to GitHub.\n\n\nfuimus::git_commit\n\nfunction (msg) \n{\n    files &lt;- gert::git_status()\n    files_to_stage &lt;- dplyr::pull(dplyr::filter(files, !staged), \n        file)\n    if (fs::file_exists(here::here(\".git/index.lock\"))) {\n        fs::file_delete(here::here(\".git/index.lock\"))\n    }\n    gert::git_add(files_to_stage)\n    gert::git_commit_all(message = msg)\n    fledge::bump_version()\n}\n&lt;bytecode: 0x0000027ed969c9a8&gt;\n&lt;environment: namespace:fuimus&gt;"
  },
  {
    "objectID": "posts/packaging/packaging.html#session-information",
    "href": "posts/packaging/packaging.html#session-information",
    "title": "Tips & Tricks: R Package Creation/Maintenance",
    "section": "\n6.1 Session Information",
    "text": "6.1 Session Information\n\n\nR version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nloaded via a namespace (and not attached): digest(v.0.6.37), fastmap(v.1.2.0), xfun(v.0.50), glue(v.1.8.0), knitr(v.1.49), htmltools(v.0.5.8.1), rmarkdown(v.2.29), lifecycle(v.1.0.4), cli(v.3.6.3.9001), pander(v.0.6.5), fuimus(v.0.0.5.9009), textshaping(v.0.4.1), systemfonts(v.1.1.0), compiler(v.4.4.2), rstudioapi(v.0.17.1), tools(v.4.4.2), ragg(v.1.3.3), evaluate(v.1.0.1), Rcpp(v.1.0.13-1), yaml(v.2.3.10), crayon(v.1.5.3), rlang(v.1.1.4), jsonlite(v.1.8.9) and htmlwidgets(v.1.6.4)"
  },
  {
    "objectID": "posts/npi/npi_constructor.html",
    "href": "posts/npi/npi_constructor.html",
    "title": "provider: Luhn’s Algorithm",
    "section": "",
    "text": "A National Provider Identifier (NPI) is a unique 10-digit identification number assigned to health care providers in the United States through NPPES1 The Centers for Medicare & Medicaid Services (CMS) developed the NPI as a way to standardize the identification of health care providers across the health care industry."
  },
  {
    "objectID": "posts/npi/npi_constructor.html#sec-checkdigit",
    "href": "posts/npi/npi_constructor.html#sec-checkdigit",
    "title": "provider: Luhn’s Algorithm",
    "section": "\n1.1 NPI Check Digit",
    "text": "1.1 NPI Check Digit\nThe check digit is calculated using the Luhn formula for computing the modulus 10 double-add-double check digit.3\n3 Recognized as an ISO standard (ISO/IEC 7812) and is the specified check digit algorithm to be used for the card issuer identifier on a standard health identification card.When an NPI is used as a card issuer identifier on a standard health identification card, it is prefixed with 80840, in which 80 indicates health applications and 840 indicates the United States. To enable this feature for any NPI, the check digit will always be calculated as if the prefix is present. For a non-prefixed NPI, this is accomplished by adding the constant 24 in step 2 of the calculation.\nCheck Digit Calculation\nThe calculation is as follows:\n\nBeginning with the rightmost digit, double the value of the alternate digits.\nAdd the individual digits of the products from Step 1 to the unaffected digits from the original number.\nSubtract the result of step 2 from the next highest number ending in zero. This is the check digit.\n\n\n\n\n\n\n\nNext Multiple of Ten\n\n\n\nThe next highest number ending in zero is the next multiple of ten.\nSpecifically, for some number n, the next multiple of ten would be n + (10 - (n \\mod 10)):\n\nnext_10 &lt;- \\(n) n + (10 - (n %% 10))\n\nFor example, if n is 23, the next multiple of ten is 30:\n\nnext_10(23)\n\n[1] 30\n\n\nIf n is a multiple of ten, such as 50, the next multiple of 10 is 60:\n\nnext_10(50)\n\n[1] 60\n\n\n\n\n\nExamples\nThe following check digit calculation examples are reproduced from the CMS Standard document, which includes demonstrations for both prefixed and non-prefixed NPIs.\n\n\nPrefix\nNon-Prefix\n\n\n\n\npre = c(8, 0, 8, 4, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9)\nrev = c(8, 0, 8, 8, 0, 2, 2, 6, 4, 10, 6, 14, 8, 18)\nadd = quote(8 + 0 + 8 + 8 + 0 + 2 + 2 + 6 + 4 + 1 + 0 + 6 + 1 + 4 + 8)\neq  = 67\n\nAssume the prefixed 9-position identifier is:\n\nprefix &lt;- \\(x) {\n  as.integer(\n    unlist(\n      strsplit(\n        paste0(80840, x), \"\")\n      )\n    )\n}\n\nprefix(123456789)\n\n [1] 8 0 8 4 0 1 2 3 4 5 6 7 8 9\n\n\nBeginning on the right, double the alternate digits:\n\nreverse_double &lt;- \\(x) {\n  \n  x &lt;- rev(x)\n  \n  idx &lt;- c(1, 3, 5, 7, 9, 11, 13)\n  \n  x[idx] &lt;- x[idx] * 2\n  \n  rev(x)\n}\n\n\nprefix(123456789) |&gt; \n  reverse_double()\n\n [1]  8  0  8  8  0  2  2  6  4 10  6 14  8 18\n\n\nSum the individual digits:\n\nadd_digits &lt;- \\(x) {\n  sum(\n    as.integer(\n      unlist(\n        strsplit(\n          as.character(x), \"\")\n        )\n      )\n    )\n}\n\nprefix(123456789) |&gt; \n  reverse_double() |&gt; \n  add_digits()\n\n[1] 67\n\n\nSubtract the sum from the next multiple of 10. This is the check digit: 70 – 67 = 3\n\ncheck_digit &lt;- \\(x) {\n  ceiling(x / 10) * 10 - x\n}\n\nprefix(123456789) |&gt; \n  reverse_double() |&gt; \n  add_digits() |&gt;\n  check_digit()\n\n[1] 3\n\n\nAppend the check digit to the identifier: 808401234567893\n\nappend_check &lt;- \\(check, id) {\n  cat(\n    paste0(\n      paste0(\n        prefix(id), \n        collapse = \"\"), \n      check)\n    )\n}\n\nprefix(123456789) |&gt; \n  reverse_double() |&gt; \n  add_digits() |&gt;\n  check_digit() |&gt; \n  append_check(123456789)\n\n808401234567893\n\n\n\n\n\nAssume the non-prefixed 9-position identifier is 123456789\n\n\nsplit_id &lt;- \\(x) {\n  as.integer(\n    unlist(\n      strsplit(\n        as.character(x), \"\"\n        )\n      )\n    )\n}\n\nx &lt;- split_id(123456789)\n\nx\n\n[1] 1 2 3 4 5 6 7 8 9\n\n\n\nBeginning on the right, double the alternate digits: 2  2  6  4 10  6 14  8 18\n\n\nreverse_double &lt;- \\(x) {\n  \n  x &lt;- rev(x)\n  \n  idx &lt;- c(1, 3, 5, 7, 9)\n  \n  x[idx] &lt;- x[idx] * 2\n  \n  rev(x)\n}\n\nx &lt;- reverse_double(x)\n\nx\n\n[1]  2  2  6  4 10  6 14  8 18\n\n\n\nAdd constant 24 to the sum of the individual digits: 2 + 2 + 6 + 4 + 1 + 0 + 6 + 1 + 4 + 8 + 1 + 8 + 24 = 67\n\n\nsum_plus_24 &lt;- \\(x) {\n  sum(\n    as.integer(\n      unlist(\n        strsplit(\n          as.character(x), \"\")\n        )\n      )\n    ) + 24\n}\n\nx &lt;- sum_plus_24(x)\n\nx\n\n[1] 67\n\n\n\nSubtract the sum from the next multiple of 10. This is the check digit: 70 – 67 = 3\n\n\ncheck_digit &lt;- \\(x) {\n  ceiling(x / 10) * 10 - x\n}\n\nx &lt;- check_digit(x)\n\nx\n\n[1] 3\n\n\n\nAppend the check digit to the identifier: 1234567893\n\n\nappend_check &lt;- \\(id, check) {\n  cat(paste0(id, check))\n}\n\nappend_check(123456789, x)\n\n1234567893"
  },
  {
    "objectID": "posts/npi/npi_constructor.html#validating-the-input",
    "href": "posts/npi/npi_constructor.html#validating-the-input",
    "title": "provider: Luhn’s Algorithm",
    "section": "\n2.1 Validating the Input",
    "text": "2.1 Validating the Input\n\nInput string (x) validation order:\n\nAbort if not length(x) == 1\n\nAbort if not 10 characters long\nAbort if any elements of x are not 0-9\n\nAbort if first element is not \"1\" or \"2\"\n\nCoerce to &lt;character&gt; if x is a &lt;numeric&gt; vector\n\n\n\n\n\n\ninput_validation.R\n\n# Abort if `x` is `length(x) != 1`\ncheck_length &lt;- function(x) {\n  \n  arg  &lt;- rlang::caller_arg(x)\n  call &lt;- rlang::caller_env()\n  \n  if (length(x) != 1) {\n    cli::cli_abort(\n      \"{.arg {arg}} must be of length 1.\", \n      arg = arg, \n      call = call,\n      class = \"check_length\"\n      )\n  }\n}\n\n# If `x` is a `&lt;numeric&gt;` \n# vector, coerce to `&lt;character&gt;`\nnumeric_to_char &lt;- function(x) {\n  if (!rlang::is_character(x)) { \n    as.character(x)\n  } else {\n    x  \n  }\n}\n\n# Abort if any of `x`'s \n# elements are not numbers\ncheck_chars_numeric &lt;- function(x) {\n  \n  arg  &lt;- rlang::caller_arg(x)\n  call &lt;- rlang::caller_env()\n  \n  if (!stringfish::sf_grepl(x, \"^[0-9]{1,10}$\")) {\n    cli::cli_abort(\n      \"An {.arg {arg}} must contain numbers only.\", \n      arg = arg, \n      call = call,\n      class = \"check_chars_numeric\"\n      )\n  }\n}\n\n# Abort if `x` is not \n# 10 characters long\ncheck_nchars_10 &lt;- function(x) {\n  \n  arg  &lt;- rlang::caller_arg(x)\n  call &lt;- rlang::caller_env()\n  \n  if (stringfish::sf_nchar(x) != 10L) {\n    cli::cli_abort(\n      \"An {.arg {arg}} must be 10 characters long.\", \n      arg = arg, \n      call = call,\n      class = \"check_nchars_10\"\n      )\n  }\n}\n\n# Must begin with 1 or 2\ncheck_first_char &lt;- function(x) {\n  \n  arg  &lt;- rlang::caller_arg(x)\n  call &lt;- rlang::caller_env()\n  \n  if (!stringfish::sf_substr(x, 1, 1) %in% c(\"1\", \"2\")) {\n    cli::cli_abort(\n      \"An {.arg {arg}} must start with a 1 or 2.\", \n      arg = arg, \n      call = call,\n      class = \"check_first_char\"\n      )\n  }\n}"
  },
  {
    "objectID": "posts/npi/npi_constructor.html#cli-messages",
    "href": "posts/npi/npi_constructor.html#cli-messages",
    "title": "provider: Luhn’s Algorithm",
    "section": "\n2.2 CLI Messages",
    "text": "2.2 CLI Messages\n\n\n\ncli_messages.R\n\nnpi_inform &lt;- function(x, msg) {\n  \n  arg  &lt;- rlang::caller_arg(x)\n  call &lt;- rlang::caller_env()\n  \n  rlang::inform(\n    message = (\n      c(\"*\" = glue::glue(\"{msg}: {x}\"))),\n    use_cli_format = TRUE,\n    arg = arg,\n    call = call,\n    class = \"npi_inform\"\n  )\n}\n\nnpi_alert_invalid &lt;- function(x, y) {\n  \n  arg  &lt;- rlang::caller_arg(x)\n  call &lt;- rlang::caller_env()\n  \n  rlang::inform(\n    message = (c(\"x\" = \"NPI is invalid\")),\n    body = (c(\"!\" = glue::glue(\"{x} != {y}\"))),\n    use_cli_format = TRUE,\n    arg = arg,\n    call = call,\n    class = \"npi_alert_invalid\"\n  )\n}\n\nnpi_alert_valid &lt;- function(x, y) {\n  \n  arg  &lt;- rlang::caller_arg(x)\n  call &lt;- rlang::caller_env()\n  \n  rlang::inform(\n    message = (c(\"v\" = \"NPI is valid\")),\n    body = (c(\"&gt;\" = glue::glue(\"{x} == {y}\"))),\n    use_cli_format = TRUE,\n    arg = arg,\n    call = call,\n    class = \"npi_alert_valid\"\n  )\n}"
  },
  {
    "objectID": "posts/npi/npi_constructor.html#constructor-function",
    "href": "posts/npi/npi_constructor.html#constructor-function",
    "title": "provider: Luhn’s Algorithm",
    "section": "\n2.3 Constructor Function",
    "text": "2.3 Constructor Function\n\n\n\nnpi_constructor.R\n\nnpi_constructor &lt;- function(npi, verbose = TRUE) {\n  \n  npi &lt;- numeric_to_char(npi)\n  check_length(npi)\n  check_nchars_10(npi)\n  check_chars_numeric(npi)\n  check_first_char(npi)\n  \n  p &lt;- \\(..., ss = \"\") paste0(..., collapse = ss)\n  s &lt;- \\(x) unlist(strsplit(x, \"\"), use.names = FALSE)\n  \n  id &lt;- rev(s(npi)[1:9])\n  \n  if (verbose) {\n    npi_inform(npi, \"Testing NPI candidate\")\n    npi_inform(p(id, ss = \"\"), \"Reverse 9-digit identifier\")\n  }\n  \n  idx     &lt;- c(1, 3, 5, 7, 9)\n  id      &lt;- as.numeric(id)\n  id[idx] &lt;- as.numeric(id[idx]) * 2\n  id[idx] &lt;- ifelse(id[idx] &gt; 9, id[idx] - 9, id[idx])\n  \n  if (verbose) {\n    npi_inform(p(id, ss = \" \"), \"Double & reduce alternates\")\n  }\n  \n  id   &lt;- sum(id)\n  cn   &lt;- id + 24\n  ml   &lt;- ceiling(cn / 10) * 10\n  ck   &lt;- ml - cn\n  test &lt;- substr(npi, 1, 9)\n  test &lt;- p(test, ck)\n  \n  if (verbose) {\n    \n    npi_inform(p(p(c(id, 24), ss = \" + \"), p(\" = \", cn)), \"Add 24 to sum digits\")\n    npi_inform(p(p(\"⌈\", cn, \"⌉\"), p(\" = \", ml)) ,\"Next multiple of 10\")\n    npi_inform(p(p(c(ml, cn), ss = \" - \"), p(\" = \", ck)), \"Find check digit\")\n    npi_inform(p(test, ss = \"\"), \"Append check digit\")\n    \n    if (identical(test, npi)) npi_alert_valid(test, npi)\n    if (!identical(test, npi)) npi_alert_invalid(test, npi)\n  }\n  invisible(test)\n}\n\n\nTest Validations\n\nnpi_constructor(\"123456789\")\n\nError in `npi_constructor()`:\n! An `npi` must be 10 characters long.\n\nnpi_constructor(\"O123456789\")\n\nError in `npi_constructor()`:\n! An `npi` must contain numbers only.\n\nnpi_constructor(\"0000000000\")\n\nError in `npi_constructor()`:\n! An `npi` must start with a 1 or 2.\n\n\nTest Verbose Output\n\nnpi_constructor(1234567891)\n\n• Testing NPI candidate: 1234567891\n• Reverse 9-digit identifier: 987654321\n• Double & reduce alternates: 9 8 5 6 1 4 6 2 2\n• Add 24 to sum digits: 43 + 24 = 67\n• Next multiple of 10: ⌈67⌉ = 70\n• Find check digit: 70 - 67 = 3\n• Append check digit: 1234567893\n✖ NPI is invalid\n\n\n\nnpi_constructor(1043477615)\n\n• Testing NPI candidate: 1043477615\n• Reverse 9-digit identifier: 167743401\n• Double & reduce alternates: 2 6 5 7 8 3 8 0 2\n• Add 24 to sum digits: 41 + 24 = 65\n• Next multiple of 10: ⌈65⌉ = 70\n• Find check digit: 70 - 65 = 5\n• Append check digit: 1043477615\n✔ NPI is valid\n\n\n\nnpi_constructor(\"1000000000\")\n\n• Testing NPI candidate: 1000000000\n• Reverse 9-digit identifier: 000000001\n• Double & reduce alternates: 0 0 0 0 0 0 0 0 2\n• Add 24 to sum digits: 2 + 24 = 26\n• Next multiple of 10: ⌈26⌉ = 30\n• Find check digit: 30 - 26 = 4\n• Append check digit: 1000000004\n✖ NPI is invalid\n\n\nTest Verbose Option/Invisible Return\n\nnpi_constructor(\"1000000000\", verbose = FALSE)\n\nnew_npi &lt;- npi_constructor(\"1000000000\", verbose = FALSE)\n\nnew_npi\n\n[1] \"1000000004\""
  },
  {
    "objectID": "posts/npi/npi_constructor.html#minimal-validator",
    "href": "posts/npi/npi_constructor.html#minimal-validator",
    "title": "provider: Luhn’s Algorithm",
    "section": "\n2.4 Minimal Validator",
    "text": "2.4 Minimal Validator\n\n\n\nis_valid_npi.R\n\nsmash &lt;- \\(...) paste0(..., collapse = \"\")\nsplat &lt;- \\(x)   unlist(strsplit(x, \"\"), use.names = FALSE)\nidx   &lt;- c(1, 3, 5, 7, 9)\n\nis_valid_npi &lt;- function(x) {\n  \n  stopifnot(stringfish::sf_grepl(x, \"^[12][0-9]{9}$\"))\n  \n  id &lt;- as.numeric(cheapr::cheapr_rev(splat(x)[1:9]))\n  \n  id[idx] &lt;- id[idx] * 2\n  \n  id[idx] &lt;- codex::iif_else(id[idx] &gt; 9, id[idx] - 9, id[idx])\n  \n  id   &lt;- sum(id) + 24\n  ck   &lt;- (ceiling(id / 10) * 10) - id\n  test &lt;- smash(codex::sf_sub(x, start = 1, stop = 9), ck)\n  \n  identical(test, x)\n}\n\n\nTest Validator\n\nis_valid_npi(\"123456789\")\n\nError in is_valid_npi(\"123456789\"): stringfish::sf_grepl(x, \"^[12][0-9]{9}$\") is not TRUE\n\nis_valid_npi(\"O123456789\")\n\nError in is_valid_npi(\"O123456789\"): stringfish::sf_grepl(x, \"^[12][0-9]{9}$\") is not TRUE\n\nis_valid_npi(\"0000000000\") # All leading zeroes will be dropped\n\nError in is_valid_npi(\"0000000000\"): stringfish::sf_grepl(x, \"^[12][0-9]{9}$\") is not TRUE\n\nis_valid_npi(\"3000000000\")\n\nError in is_valid_npi(\"3000000000\"): stringfish::sf_grepl(x, \"^[12][0-9]{9}$\") is not TRUE\n\nis_valid_npi(\"1043477615\")\n\n[1] TRUE\n\nis_valid_npi(\"1234567891\")\n\n[1] FALSE\n\n\n\nluhn &lt;- function(x) {\n  \n  x &lt;- rev(as.integer(unlist(strsplit(x, \"\"), use.names = FALSE)))\n  \n  odd  &lt;- seq_along(x) %% 2 == 1\n  even &lt;- seq_along(x) %% 2 == 0\n  \n  x[even] &lt;- x[even] * 2\n  x[even] &lt;- ifelse(x[even] &gt; 9, x[even] - 9, x[even])\n  \n  sum_odd  &lt;- sum(x[odd])\n  sum_even &lt;- sum(x[even])\n  \n  sum_x &lt;- sum_odd + sum_even\n  \n  sum_x %% 10 == 0\n}\n\n\nrandom_npi_generator &lt;- \\(n) {\n  stringfish::sf_convert(\n    replicate(\n    n = n, \n    expr = paste0(\n      c(sample(1:2, 1, replace = TRUE), \n        sample(0:9, 9, replace = TRUE)), \n      collapse = \"\")))\n}\nrandom_npi_generator(3)\n\n[1] \"1067993531\" \"1986174102\" \"1486099066\"\n\n\n\nn &lt;- 1e5\nx &lt;- random_npi_generator(n)\n# y &lt;- x[purrr::map_lgl(x, is_valid_npi)]\ny &lt;- x[purrr::map_lgl(x, luhn)]\ncat((length(y) / n) * 100, \"%\")\n\n9.978 %\n\nbench::mark(\n  purrr::map_lgl(x, luhn)) |&gt; \n  dplyr::select(1:9) |&gt; \n  dplyr::glimpse()\n\nRows: 1\nColumns: 9\n$ expression &lt;bch:expr&gt; &lt;purrr::map_lgl(x, luhn)&gt;\n$ min        &lt;bch:tm&gt; 2.82s\n$ median     &lt;bch:tm&gt; 2.82s\n$ `itr/sec`  &lt;dbl&gt; 0.3545314\n$ mem_alloc  &lt;bch:byt&gt; 391KB\n$ `gc/sec`   &lt;dbl&gt; 8.508754\n$ n_itr      &lt;int&gt; 1\n$ n_gc       &lt;dbl&gt; 24\n$ total_time &lt;bch:tm&gt; 2.82s"
  },
  {
    "objectID": "posts/npi/npi_constructor.html#session-information",
    "href": "posts/npi/npi_constructor.html#session-information",
    "title": "provider: Luhn’s Algorithm",
    "section": "\n2.5 Session Information",
    "text": "2.5 Session Information\n\n\nR version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nother attached packages: cli(v.3.6.3), rlang(v.1.1.4), fuimus(v.0.0.5.9002), lubridate(v.1.9.4), forcats(v.1.0.0), stringr(v.1.5.1), dplyr(v.1.1.4), purrr(v.1.0.2), readr(v.2.1.5), tidyr(v.1.3.1.9000), tibble(v.3.2.1), ggplot2(v.3.5.1) and tidyverse(v.2.0.0)\nloaded via a namespace (and not attached): utf8(v.1.2.4), generics(v.0.1.3), stringi(v.1.8.4), hms(v.1.1.3), digest(v.0.6.37), magrittr(v.2.0.3), evaluate(v.1.0.1), grid(v.4.4.2), timechange(v.0.3.0), fastmap(v.1.2.0), jsonlite(v.1.8.9), bench(v.1.1.3), pander(v.0.6.5), kit(v.0.0.19), fansi(v.1.0.6), scales(v.1.3.0), textshaping(v.0.4.1), munsell(v.0.5.1), withr(v.3.0.2), yaml(v.2.3.10), parallel(v.4.4.2), tools(v.4.4.2), tzdb(v.0.4.0), colorspace(v.2.1-1), profmem(v.0.6.0), vctrs(v.0.6.5), R6(v.2.5.1), lifecycle(v.1.0.4), cheapr(v.0.9.92), stringfish(v.0.16.0), htmlwidgets(v.1.6.4), ragg(v.1.3.3), pkgconfig(v.2.0.3), RcppParallel(v.5.1.9), pillar(v.1.9.0), gtable(v.0.3.6), data.table(v.1.16.99), glue(v.1.8.0), codex(v.0.0.1), Rcpp(v.1.0.13-1), collapse(v.2.0.18), systemfonts(v.1.1.0), xfun(v.0.49), tidyselect(v.1.2.1), rstudioapi(v.0.17.1), knitr(v.1.49), htmltools(v.0.5.8.1), rmarkdown(v.2.29) and compiler(v.4.4.2)"
  },
  {
    "objectID": "posts/metaprogramming/metaprogramming.html",
    "href": "posts/metaprogramming/metaprogramming.html",
    "title": "Metaprogramming",
    "section": "",
    "text": "Create a new function call my_mean() that will take an argument, x, and then returns the results of enquo(x)\n\nmy_mean &lt;- function(x) enquo(x)\n\nTest the new function. It should return the same variable name, but inside a quosure. Use order_total as its argument’s value to test\n\nmy_mean(order_total)\n\nRemove the last line that has x, add the contents of the function with the initial dplyr code from step Then replace order_total with !! x\n\nmy_mean &lt;- function(x) {\n  x &lt;- enquo(x)\n  orders |&gt;\n    summarise(mean = mean(!!x, na.rm = TRUE))\n}\n\nIn the summarise() step, replace the name mean, with !! as_label(x), also replace the = sign, with :=\n\nmy_mean &lt;- function(x){\n  x &lt;- enquo(x)\n  \n    summarise(\n      !!as_label(x) := mean(!!x, na.rm = TRUE))\n}\n\nRun the function again, the name of the column should match the argument value\n\nmy_mean(order_total)\n\nTest the function by passing a formula, such as order_total / order_qty\n\nmean(order_total / order_qty)\n\nMake the function generic, add a new argument called: .data. Inisde the function, replace orders with .data\n\nmy_mean &lt;- function(.data, x) {\n  x &lt;- enquo(x)\n  .data %&gt;%\n    summarise(!!as_label(x) := mean(!!x, na.rm = TRUE))\n}\n\n\nThe function now behaves more like a dplyr verb. Start with orders and then pipe into the function ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  my_mean(order_total)\n:::\n\nClean up the code by removing the pipe that inside the function ::: {.cell layout-align=“center”}\n\nmy_mean &lt;- function(.data, x) {\n  x &lt;- enquo(x)\n  summarise(.data, !!as_label(x) := mean(!!x, na.rm = TRUE))\n}\n:::\n\nConfirm that there is no change in the behavior of the function ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  my_mean(order_total)\n:::\n\nAdd a show_query() step to preview the resulting SQL statement ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  my_mean(order_total) %&gt;%\n  show_query()\n:::\n\nTry the function with a non-DB backed variable, such as mtcars. Use mpg as the aggregating variable ::: {.cell layout-align=“center”}\n\nmtcars %&gt;%\n  my_mean(mpg)\n:::\n\nCreate functions that handle a variable number of arguments. The goal of the exercise is to create an anti-select() function.\n\nLoad the purrr package ::: {.cell layout-align=“center”}\n\nlibrary(purrr)\n:::\n\nUse … as the second argument of a function called de_select(). Inside the function use enquos() to parse it ::: {.cell layout-align=“center”}\n\nde_select &lt;- function(.data, ...) {\n  vars &lt;- enquos(...)\n  vars\n}\n:::\n\nTest the function using orders ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  de_select(order_id, date)\n:::\n\nAdd a step to the function that iterates through each quosure and prefixes a minus sign to tell select() to drop that specific field. Use map() for the iteration, and quo() to create the prefixed expression. ::: {.cell layout-align=“center”}\n\nde_select &lt;- function(.data, ...) {\n  vars &lt;- enquos(...)\n  vars &lt;- map(vars, ~ quo(-!!.x))\n  vars\n}\n:::\n\nRun the same test to view the new results ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  de_select(order_id, date)\n:::\n\nAdd the select() step. Use !!! to parse the vars variable inside select() ::: {.cell layout-align=“center”}\n\nde_select &lt;- function(.data, ...) {\n  vars &lt;- enquos(...)\n  vars &lt;- map(vars, ~ quo(-!!.x))\n  select(.data, !!!vars)\n}\n:::\n\nRun the test again, this time the operation will take place.\n::: {.cell layout-align=“center”}\n\norders %&gt;%\n  de_select(order_id, date)\n:::\n\nAdd a show_query() step to see the resulting SQL ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  de_select(order_id, date) %&gt;%\n  show_query()\n:::\n\nTest the function with a different data set, such as mtcars ::: {.cell layout-align=“center”}\n\nmtcars %&gt;%\n  de_select(mpg, wt, am)\n:::\n\nSuggested approach to avoid passing multiple, and similar, queries to the database\n\nCreate a simple dplyr piped operation that returns the mean of order_total for the months of January, February and March as a group ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  filter(date_month %in% c(1,2,3)) %&gt;%\n  summarise(mean = mean(order_total, na.rm = TRUE)) \n:::\n\nAssign the first operation to a variable called a, and create copy of the operation but changing the selected months to January, March and April. Assign the second one to a variable called b. ::: {.cell layout-align=“center”}\n\na &lt;- orders %&gt;%\n  filter(date_month %in% c(1,2,3)) %&gt;%\n  summarise(mean = mean(order_total, na.rm = TRUE)) \n\nb &lt;- orders %&gt;%\n  filter(date_month %in% c(1,3,4)) %&gt;%\n  summarise(mean = mean(order_total, na.rm = TRUE)) \n:::\n\nUse union() to pass a and b at the same time to the database ::: {.cell layout-align=“center”}\n\nunion(a, b)\n:::\n\nPipe the previous instruction to show_query() to confirm that the resulting query is a single one ::: {.cell layout-align=“center”}\n\nunion(a, b) %&gt;%\n  show_query()\n:::\n\nAssign to a new variable called months an overlapping set of months ::: {.cell layout-align=“center”}\n\nmonths &lt;- list(\n  c(1,2,3),\n  c(1,3,4),\n  c(2,4,6)\n)\n:::\n\nUse map() to cycle through each set of overlapping months. Notice that it returns three separate results, meaning that it went to the database three times ::: {.cell layout-align=“center”}\n\nmonths %&gt;%\n  map(\n    ~ orders %&gt;%\n        filter(date_month %in% .x) %&gt;%\n        summarise(mean = mean(order_total, na.rm = TRUE)) \n  )\n:::\n\nAdd a reduce() operation and use union() command to create a single query ::: {.cell layout-align=“center”}\n\nmonths %&gt;%\n  map(\n    ~ orders %&gt;%\n        filter(date_month %in% .x) %&gt;%\n        summarise(mean = mean(order_total, na.rm = TRUE)) \n  ) %&gt;%\n  reduce(function(x, y) union(x, y))\n:::\n\nUse show_query() to see the resulting single query sent to the database ::: {.cell layout-align=“center”}\n\nmonths %&gt;%\n  map(\n    ~ orders %&gt;%\n        filter(date_month %in% .x) %&gt;%\n        summarise(mean = mean(order_total, na.rm = TRUE)) \n  ) %&gt;%\n  reduce(function(x, y) union(x, y)) %&gt;%\n  show_query()\n:::\n\n\nCreate a table with a from and to ranges ::: {.cell layout-align=“center”}\n\nranges &lt;- tribble(\n  ~ from, ~to, \n       1,   4,\n       2,   5,\n       3,   7\n)\n:::\n\nSee how map2() works by passing the two variables as the x and y arguments, and adding them as the function ::: {.cell layout-align=“center”}\n\nmap2(ranges$from, ranges$to, ~.x + .y)\n:::\n\nReplace x + y with the dplyr operation from the previous exercise. In it, re-write the filter to use x and y as the month ranges ::: {.cell layout-align=“center”}\n\nmap2(\n  ranges$from,\n  ranges$to,\n  ~ orders %&gt;%\n    filter(date_month &gt;= .x & date_month &lt;= .y) %&gt;%\n    summarise(mean = mean(order_total, na.rm = TRUE))\n)\n:::\n\nAdd the reduce() operation ::: {.cell layout-align=“center”}\n\nmap2(\n  ranges$from,\n  ranges$to,\n  ~ orders %&gt;%\n    filter(date_month &gt;= .x & date_month &lt;= .y) %&gt;%\n    summarise(mean = mean(order_total, na.rm = TRUE))\n) %&gt;%\n  reduce(function(x, y)\n    union(x, y))\n:::\n\nAdd a show_query() step to see how the final query was constructed. ::: {.cell layout-align=“center”}\n\nmap2(\n  ranges$from,\n  ranges$to,\n  ~ orders %&gt;%\n    filter(date_month &gt;= .x & date_month &lt;= .y) %&gt;%\n    summarise(mean = mean(order_total, na.rm = TRUE))\n) %&gt;%\n  reduce(function(x, y)\n    union(x, y)) %&gt;%\n  show_query()\n:::\n\n\nCreate two character variables. One with the name of a field in flights and another with a new name to be given to the field ::: {.cell layout-align=“center”}\n\nmy_field &lt;- \"new\"\norders_field &lt;- \"order_total\"\n:::\n\nAdd a mutate() step that adds the new field. And then another step selecting just the new field ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  mutate(my_field = !! orders_field) %&gt;%\n  select(my_field)\n:::\n\nAdd a mutate() step that adds the new field. And then another step selecting just the new field ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  mutate(!! my_field := !! orders_field) %&gt;%\n  select(my_field)\n:::\n\nWrap orders_field inside a sym() function ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  mutate(!! my_field := !! sym(orders_field)) %&gt;%\n  select(my_field)\n:::"
  },
  {
    "objectID": "posts/metaprogramming/metaprogramming.html#multiple-variables",
    "href": "posts/metaprogramming/metaprogramming.html#multiple-variables",
    "title": "Metaprogramming",
    "section": "",
    "text": "Create functions that handle a variable number of arguments. The goal of the exercise is to create an anti-select() function.\n\nLoad the purrr package ::: {.cell layout-align=“center”}\n\nlibrary(purrr)\n:::\n\nUse … as the second argument of a function called de_select(). Inside the function use enquos() to parse it ::: {.cell layout-align=“center”}\n\nde_select &lt;- function(.data, ...) {\n  vars &lt;- enquos(...)\n  vars\n}\n:::\n\nTest the function using orders ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  de_select(order_id, date)\n:::\n\nAdd a step to the function that iterates through each quosure and prefixes a minus sign to tell select() to drop that specific field. Use map() for the iteration, and quo() to create the prefixed expression. ::: {.cell layout-align=“center”}\n\nde_select &lt;- function(.data, ...) {\n  vars &lt;- enquos(...)\n  vars &lt;- map(vars, ~ quo(-!!.x))\n  vars\n}\n:::\n\nRun the same test to view the new results ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  de_select(order_id, date)\n:::\n\nAdd the select() step. Use !!! to parse the vars variable inside select() ::: {.cell layout-align=“center”}\n\nde_select &lt;- function(.data, ...) {\n  vars &lt;- enquos(...)\n  vars &lt;- map(vars, ~ quo(-!!.x))\n  select(.data, !!!vars)\n}\n:::\n\nRun the test again, this time the operation will take place.\n::: {.cell layout-align=“center”}\n\norders %&gt;%\n  de_select(order_id, date)\n:::\n\nAdd a show_query() step to see the resulting SQL ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  de_select(order_id, date) %&gt;%\n  show_query()\n:::\n\nTest the function with a different data set, such as mtcars ::: {.cell layout-align=“center”}\n\nmtcars %&gt;%\n  de_select(mpg, wt, am)\n:::"
  },
  {
    "objectID": "posts/metaprogramming/metaprogramming.html#multiple-queries",
    "href": "posts/metaprogramming/metaprogramming.html#multiple-queries",
    "title": "Metaprogramming",
    "section": "",
    "text": "Suggested approach to avoid passing multiple, and similar, queries to the database\n\nCreate a simple dplyr piped operation that returns the mean of order_total for the months of January, February and March as a group ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  filter(date_month %in% c(1,2,3)) %&gt;%\n  summarise(mean = mean(order_total, na.rm = TRUE)) \n:::\n\nAssign the first operation to a variable called a, and create copy of the operation but changing the selected months to January, March and April. Assign the second one to a variable called b. ::: {.cell layout-align=“center”}\n\na &lt;- orders %&gt;%\n  filter(date_month %in% c(1,2,3)) %&gt;%\n  summarise(mean = mean(order_total, na.rm = TRUE)) \n\nb &lt;- orders %&gt;%\n  filter(date_month %in% c(1,3,4)) %&gt;%\n  summarise(mean = mean(order_total, na.rm = TRUE)) \n:::\n\nUse union() to pass a and b at the same time to the database ::: {.cell layout-align=“center”}\n\nunion(a, b)\n:::\n\nPipe the previous instruction to show_query() to confirm that the resulting query is a single one ::: {.cell layout-align=“center”}\n\nunion(a, b) %&gt;%\n  show_query()\n:::\n\nAssign to a new variable called months an overlapping set of months ::: {.cell layout-align=“center”}\n\nmonths &lt;- list(\n  c(1,2,3),\n  c(1,3,4),\n  c(2,4,6)\n)\n:::\n\nUse map() to cycle through each set of overlapping months. Notice that it returns three separate results, meaning that it went to the database three times ::: {.cell layout-align=“center”}\n\nmonths %&gt;%\n  map(\n    ~ orders %&gt;%\n        filter(date_month %in% .x) %&gt;%\n        summarise(mean = mean(order_total, na.rm = TRUE)) \n  )\n:::\n\nAdd a reduce() operation and use union() command to create a single query ::: {.cell layout-align=“center”}\n\nmonths %&gt;%\n  map(\n    ~ orders %&gt;%\n        filter(date_month %in% .x) %&gt;%\n        summarise(mean = mean(order_total, na.rm = TRUE)) \n  ) %&gt;%\n  reduce(function(x, y) union(x, y))\n:::\n\nUse show_query() to see the resulting single query sent to the database ::: {.cell layout-align=“center”}\n\nmonths %&gt;%\n  map(\n    ~ orders %&gt;%\n        filter(date_month %in% .x) %&gt;%\n        summarise(mean = mean(order_total, na.rm = TRUE)) \n  ) %&gt;%\n  reduce(function(x, y) union(x, y)) %&gt;%\n  show_query()\n:::"
  },
  {
    "objectID": "posts/metaprogramming/metaprogramming.html#multiple-queries-with-an-overlapping-range",
    "href": "posts/metaprogramming/metaprogramming.html#multiple-queries-with-an-overlapping-range",
    "title": "Metaprogramming",
    "section": "",
    "text": "Create a table with a from and to ranges ::: {.cell layout-align=“center”}\n\nranges &lt;- tribble(\n  ~ from, ~to, \n       1,   4,\n       2,   5,\n       3,   7\n)\n:::\n\nSee how map2() works by passing the two variables as the x and y arguments, and adding them as the function ::: {.cell layout-align=“center”}\n\nmap2(ranges$from, ranges$to, ~.x + .y)\n:::\n\nReplace x + y with the dplyr operation from the previous exercise. In it, re-write the filter to use x and y as the month ranges ::: {.cell layout-align=“center”}\n\nmap2(\n  ranges$from,\n  ranges$to,\n  ~ orders %&gt;%\n    filter(date_month &gt;= .x & date_month &lt;= .y) %&gt;%\n    summarise(mean = mean(order_total, na.rm = TRUE))\n)\n:::\n\nAdd the reduce() operation ::: {.cell layout-align=“center”}\n\nmap2(\n  ranges$from,\n  ranges$to,\n  ~ orders %&gt;%\n    filter(date_month &gt;= .x & date_month &lt;= .y) %&gt;%\n    summarise(mean = mean(order_total, na.rm = TRUE))\n) %&gt;%\n  reduce(function(x, y)\n    union(x, y))\n:::\n\nAdd a show_query() step to see how the final query was constructed. ::: {.cell layout-align=“center”}\n\nmap2(\n  ranges$from,\n  ranges$to,\n  ~ orders %&gt;%\n    filter(date_month &gt;= .x & date_month &lt;= .y) %&gt;%\n    summarise(mean = mean(order_total, na.rm = TRUE))\n) %&gt;%\n  reduce(function(x, y)\n    union(x, y)) %&gt;%\n  show_query()\n:::"
  },
  {
    "objectID": "posts/metaprogramming/metaprogramming.html#characters-to-field-names",
    "href": "posts/metaprogramming/metaprogramming.html#characters-to-field-names",
    "title": "Metaprogramming",
    "section": "",
    "text": "Create two character variables. One with the name of a field in flights and another with a new name to be given to the field ::: {.cell layout-align=“center”}\n\nmy_field &lt;- \"new\"\norders_field &lt;- \"order_total\"\n:::\n\nAdd a mutate() step that adds the new field. And then another step selecting just the new field ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  mutate(my_field = !! orders_field) %&gt;%\n  select(my_field)\n:::\n\nAdd a mutate() step that adds the new field. And then another step selecting just the new field ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  mutate(!! my_field := !! orders_field) %&gt;%\n  select(my_field)\n:::\n\nWrap orders_field inside a sym() function ::: {.cell layout-align=“center”}\n\norders %&gt;%\n  mutate(!! my_field := !! sym(orders_field)) %&gt;%\n  select(my_field)\n:::"
  },
  {
    "objectID": "posts/dar/art_of_dar.html",
    "href": "posts/dar/art_of_dar.html",
    "title": "forager: The Art of DAR",
    "section": "",
    "text": "Average Days in Accounts Receivable (DAR or Average Days in AR) is a common financial metric known as an efficiency ratio.\nDAR measures the average number of days it takes for a business to collect money owed for services rendered from the responsible parties.\nIts function in the healthcare revenue cycle is as a high-level monitor of the financial health of a healthcare entity.\nThe following is a thorough overview of everything you never knew you didn’t want to know about DAR. Let’s start off with some background and terminology. See Note 1 for more information on the American healthcare economic model.\n\nAging of Accounts\n\nAn account is a billable episode of care. It begins to age once it is billed to the guarantor. These outstanding accounts are monitored in 30-day blocks or bins ([0, 30), [31, 60), [61, 90), [91, 120), and [121, \\infty)) by the number of accounts, the amount owed by each bin and the responsible parties. The older the account, the less likely it will be paid.\n\n\n\n\nGuarantor\n\nThe responsible party for the amount owed (an insurance payer, a patient, etc.) Most claims are originally billed to insurance and, until the insurance makes a payment, the responsibility for the payment continues to be with the insurance payer. After the payer makes or denies a payment (with no just cause for an appeal), the responsibility for the balance of goes to the patient (to be sent an invoice) or the physician (to be written off.)\n\nAccounts Receivable\n\nAR represents money owed to the healthcare practice by patients and/or insurance carriers. The AR balance is the total charges billed to an insurance payer or patient for services rendered but not yet collected. The balance can only be reduced by payment or by adjustments, contractual or otherwise. The AR cycle begins with the delivery of services and ends with reconciliation, or when the balance owed equals zero.\n\nAverage Days in AR\n\nA mathematical formula for the average number of days it takes a business to collect money that it is owed. A low average is good. A high average signals a problem within the revenue cycle.\n\n\n\nSo now we know that a low Days in AR number is good and a high number is bad. How low is good though? How high is bad?\nLet’s say that a practice has a DAR of 95 days. This means that, on average, it takes the practice 95 days to collect it’s outstanding balances. Let’s start with what we can say for sure about a Days in AR of 95:\n\n95 days is roughly equal to a little over three months.\nTherefore, there is three months of unpaid work sitting in Accounts Receivable.\nAs such, this practice will need three months of cash reserves on hand to meet its financial obligations.\n\nThe ideal Days in AR depends entirely upon the medical practice, its customers (patients), its customers’ payers, the services it supplies, the providers performing those services, and the financial situation of the practice.\n\n\n\n\n\n\nTip 1: The American Healthcare Economic Model\n\n\n\n\n\nTo understand the healthcare version of Days in AR, you need to first understand the environment in which it is used.\nTypically, companies sell their products or services directly to consumers and are paid immediately at the point of service (POS). This is called a business-to-consumer revenue model.\nAnother revenue model type is the business-to-business (B2B) model, concerning businesses that transact primarily with each other. Purchases between two businesses tend to be much larger. As such, B2B businesses invoice on a monthly basis, meaning no payment for 30+ days.\nSomewhere in between these two models is the American healthcare system. This gray area is caused by a middleman called a third party payer. Better known as an insurance company, providers enter into a contractual agreement with this third party to be paid for their services at a reduced rate.\nIn exchange, a provider gains access to the payer’s large subscriber base. The difference between the charge a provider submits to a payer and the contracted rate he or she has agreed to is called the contractual adjustment, which is written off once a claim has been adjudicated.\nThe contractual adjustment introduces a critical inefficiency to the healthcare revenue model. Rather than prices being determined by supply and demand, they are set by individually negotiated arrangements, the end result of which is no real demand or pricing curve.\nThis issue is much too complex for me to properly do justice to here. It is, however, an essential concept to grasp when trying to understand healthcare reimbursement. In other words, healthcare reimbursement is crazy, not you.\n\n\n\n\n\n \\overline{dar} = \\ earb \\div (\\ gc \\ \\div \\ n_{days}\\ )\\ \n\n \\overline{dar_t} = \\frac{arb_t}{gc_t\\div n_{days}} \nWhere:\nt = \\text{Time Period} The subscript t denotes the time period being measured.\nn_{days} = \\text{Days in Period} The number of days in t.\ngc_t = \\text{Gross Charges} The sum of all charges billed during t.\n\\overline{dc_t} = \\text{Average Daily Charge} gc_t divided by n_{days}.\narb_t = \\text{AR Balance} The sum of all outstanding balances at close of business (COB) on the final day of t.\n\\overline{dar_t} = \\text{Average Days in AR} arb_t divided by \\overline{dc_t} for time period t.\n\n\n\n\n\n\nNote 2: Example in R\n\n\n\nLet’s say we want to calculate \\overline{dar_t} for the current month. Our Gross Charges total is $131,440 and our AR Balance is $203,460:\n\nex &lt;- tibble(\n  ndays = days_in_month(today()),\n  gc = 131440,\n  arb = 203460)\n\nex |&gt; \n  gt() |&gt; \n  tab_header(\n    title = md(\"**Average Days in AR** _Calculation_\"),\n    subtitle = drng()) |&gt;\n  cols_label(\n    ndays = md(\"**n**&lt;i&gt;&lt;sub&gt;days&lt;/sub&gt;&lt;/i&gt;\"),\n    gc    = md(\"**gc**&lt;i&gt;&lt;sub&gt;t&lt;/sub&gt;&lt;/i&gt;\"),\n    arb   = md(\"**arb**&lt;i&gt;&lt;sub&gt;t&lt;/sub&gt;&lt;/i&gt;\")) |&gt;\n  fmt_currency(columns = 2:3, decimals = 0) |&gt; \n  gt_opts()\n\n\n\n\n\n\n\n\nAverage Days in AR Calculation\n    \n\nDec 1, 2024 - Dec 30, 2024\n    \n\nndays\n      gct\n      arbt\n    \n\n\n31\n$131,440\n$203,460\n\n\n\n\n\n\n\n\nWe have the three numbers we need, let’s plug them into our formula:\n\nex &lt;- ex |&gt; \n  mutate(\n    dc = gc / ndays,\n    dar = arb / dc)\n\nex |&gt; \n  gt() |&gt; \n  tab_header(\n    title = md(\"**Average Days in AR** _Calculation_\"),\n    subtitle = drng()) |&gt;\n  cols_label(\n    ndays = md(\"**n**&lt;i&gt;&lt;sub&gt;days&lt;/sub&gt;&lt;/i&gt;\"),\n    gc    = md(\"**gc**&lt;i&gt;&lt;sub&gt;t&lt;/sub&gt;&lt;/i&gt;\"),\n    arb   = md(\"**arb**&lt;i&gt;&lt;sub&gt;t&lt;/sub&gt;&lt;/i&gt;\"),\n    dc    = md(\"**dc**&lt;i&gt;&lt;sub&gt;t&lt;/sub&gt;&lt;/i&gt;\"),\n    dar   = md(\"**dar**&lt;i&gt;&lt;sub&gt;t&lt;/sub&gt;&lt;/i&gt;\")) |&gt;\n  fmt_currency(columns = c(2:4), decimals = 0) |&gt; \n  fmt_number(columns = 5, decimals = 2) |&gt;\n  gt_opts()\n\n\n\n\n\n\n\n\nAverage Days in AR Calculation\n    \n\nDec 1, 2024 - Dec 30, 2024\n    \n\nndays\n      gct\n      arbt\n      dct\n      dart\n    \n\n\n31\n$131,440\n$203,460\n$4,240\n47.99\n\n\n\n\n\n\n\n\nAnd there we have it, our Average Daily Charge is $4,240 and our Days in AR is 47.99.\n\n\n\nTable 1\n\nTable 2"
  },
  {
    "objectID": "posts/dar/art_of_dar.html#formula-for-dar",
    "href": "posts/dar/art_of_dar.html#formula-for-dar",
    "title": "forager: The Art of DAR",
    "section": "",
    "text": "\\overline{dar} = \\ earb \\div (\\ gc \\ \\div \\ n_{days}\\ )\\ \n\n \\overline{dar_t} = \\frac{arb_t}{gc_t\\div n_{days}} \nWhere:\nt = \\text{Time Period} The subscript t denotes the time period being measured.\nn_{days} = \\text{Days in Period} The number of days in t.\ngc_t = \\text{Gross Charges} The sum of all charges billed during t.\n\\overline{dc_t} = \\text{Average Daily Charge} gc_t divided by n_{days}.\narb_t = \\text{AR Balance} The sum of all outstanding balances at close of business (COB) on the final day of t.\n\\overline{dar_t} = \\text{Average Days in AR} arb_t divided by \\overline{dc_t} for time period t.\n\n\n\n\n\n\nNote 2: Example in R\n\n\n\nLet’s say we want to calculate \\overline{dar_t} for the current month. Our Gross Charges total is $131,440 and our AR Balance is $203,460:\n\nex &lt;- tibble(\n  ndays = days_in_month(today()),\n  gc = 131440,\n  arb = 203460)\n\nex |&gt; \n  gt() |&gt; \n  tab_header(\n    title = md(\"**Average Days in AR** _Calculation_\"),\n    subtitle = drng()) |&gt;\n  cols_label(\n    ndays = md(\"**n**&lt;i&gt;&lt;sub&gt;days&lt;/sub&gt;&lt;/i&gt;\"),\n    gc    = md(\"**gc**&lt;i&gt;&lt;sub&gt;t&lt;/sub&gt;&lt;/i&gt;\"),\n    arb   = md(\"**arb**&lt;i&gt;&lt;sub&gt;t&lt;/sub&gt;&lt;/i&gt;\")) |&gt;\n  fmt_currency(columns = 2:3, decimals = 0) |&gt; \n  gt_opts()\n\n\n\n\n\n\n\n\nAverage Days in AR Calculation\n    \n\nDec 1, 2024 - Dec 30, 2024\n    \n\nndays\n      gct\n      arbt\n    \n\n\n31\n$131,440\n$203,460\n\n\n\n\n\n\n\n\nWe have the three numbers we need, let’s plug them into our formula:\n\nex &lt;- ex |&gt; \n  mutate(\n    dc = gc / ndays,\n    dar = arb / dc)\n\nex |&gt; \n  gt() |&gt; \n  tab_header(\n    title = md(\"**Average Days in AR** _Calculation_\"),\n    subtitle = drng()) |&gt;\n  cols_label(\n    ndays = md(\"**n**&lt;i&gt;&lt;sub&gt;days&lt;/sub&gt;&lt;/i&gt;\"),\n    gc    = md(\"**gc**&lt;i&gt;&lt;sub&gt;t&lt;/sub&gt;&lt;/i&gt;\"),\n    arb   = md(\"**arb**&lt;i&gt;&lt;sub&gt;t&lt;/sub&gt;&lt;/i&gt;\"),\n    dc    = md(\"**dc**&lt;i&gt;&lt;sub&gt;t&lt;/sub&gt;&lt;/i&gt;\"),\n    dar   = md(\"**dar**&lt;i&gt;&lt;sub&gt;t&lt;/sub&gt;&lt;/i&gt;\")) |&gt;\n  fmt_currency(columns = c(2:4), decimals = 0) |&gt; \n  fmt_number(columns = 5, decimals = 2) |&gt;\n  gt_opts()\n\n\n\n\n\n\n\n\nAverage Days in AR Calculation\n    \n\nDec 1, 2024 - Dec 30, 2024\n    \n\nndays\n      gct\n      arbt\n      dct\n      dart\n    \n\n\n31\n$131,440\n$203,460\n$4,240\n47.99\n\n\n\n\n\n\n\n\nAnd there we have it, our Average Daily Charge is $4,240 and our Days in AR is 47.99.\n\n\n\nTable 1\n\nTable 2"
  },
  {
    "objectID": "posts/dar/art_of_dar.html#earb-target-for-dart",
    "href": "posts/dar/art_of_dar.html#earb-target-for-dart",
    "title": "forager: The Art of DAR",
    "section": "\n2.1 EARb Target for DARt",
    "text": "2.1 EARb Target for DARt\nIn the first example, our DAR was 47.99. That’s approximately 13 days over our DARt of 35. What would our EARB need to have been to bring us under our DARt? Here’s our formula:\n eart = (\\ dart \\cdot gc\\ )\\ \\div days_n \nWe’ll calculate the EARB we needed as well as the difference between the two AR figures:"
  },
  {
    "objectID": "posts/dar/art_of_dar.html#session-information",
    "href": "posts/dar/art_of_dar.html#session-information",
    "title": "forager: The Art of DAR",
    "section": "\n2.2 Session Information",
    "text": "2.2 Session Information\n\n\nR version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nother attached packages: forager(v.0.0.1), gt(v.0.11.1.9000), lubridate(v.1.9.4), forcats(v.1.0.0), stringr(v.1.5.1), dplyr(v.1.1.4), purrr(v.1.0.2), readr(v.2.1.5), tidyr(v.1.3.1.9000), tibble(v.3.2.1), ggplot2(v.3.5.1) and tidyverse(v.2.0.0)\nloaded via a namespace (and not attached): sass(v.0.4.9), utf8(v.1.2.4), generics(v.0.1.3), xml2(v.1.3.6), stringi(v.1.8.4), hms(v.1.1.3), digest(v.0.6.37), magrittr(v.2.0.3), evaluate(v.1.0.1), grid(v.4.4.2), timechange(v.0.3.0), fastmap(v.1.2.0), jsonlite(v.1.8.9), pander(v.0.6.5), fansi(v.1.0.6), scales(v.1.3.0), textshaping(v.0.4.1), cli(v.3.6.3), rlang(v.1.1.4), commonmark(v.1.9.2), munsell(v.0.5.1), bigD(v.0.3.0), base64enc(v.0.1-3), withr(v.3.0.2), yaml(v.2.3.10), tools(v.4.4.2), tzdb(v.0.4.0), colorspace(v.2.1-1), vctrs(v.0.6.5), R6(v.2.5.1), lifecycle(v.1.0.4), htmlwidgets(v.1.6.4), ragg(v.1.3.3), pkgconfig(v.2.0.3), pillar(v.1.9.0), gtable(v.0.3.6), Rcpp(v.1.0.13-1), glue(v.1.8.0), systemfonts(v.1.1.0), xfun(v.0.49), tidyselect(v.1.2.1), rstudioapi(v.0.17.1), knitr(v.1.49), htmltools(v.0.5.8.1), rmarkdown(v.2.29), compiler(v.4.4.2) and markdown(v.1.13)"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Learning for Getting A Head",
    "section": "",
    "text": "Order By\n      Default\n      \n        Date - Oldest\n      \n      \n        Date - Newest\n      \n      \n        Title\n      \n    \n  \n    \n      \n      \n    \n\n\n\n\n\n\nDate\n\n\n\nTitle\n\n\n\nReading Time\n\n\n\n\n\n\n\n\n2025-03-09\n\n\nMetaprogramming\n\n\n7 min\n\n\n\n\n\n\n2025-01-14\n\n\nAudit Workflow\n\n\n18 min\n\n\n\n\n\n\n2025-01-10\n\n\nTips & Tricks: R Package Creation/Maintenance\n\n\n6 min\n\n\n\n\n\n\n2024-12-17\n\n\nprovider: Metadata Caching\n\n\n7 min\n\n\n\n\n\n\n2024-12-16\n\n\ncrule: Healthcare Claims Rules\n\n\n19 min\n\n\n\n\n\n\n2024-12-15\n\n\narkrvu: Medicare Physician Fee Schedule\n\n\n38 min\n\n\n\n\n\n\n2024-12-14\n\n\nforager: The Art of DAR\n\n\n8 min\n\n\n\n\n\n\n2024-12-14\n\n\nprovider: Luhn’s Algorithm\n\n\n14 min\n\n\n\n\n\n\n2024-12-14\n\n\narknpi: NPPES Registry Archive\n\n\n7 min\n\n\n\n\n\n\n2024-12-14\n\n\narktax: Provider Taxonomy Codeset\n\n\n5 min\n\n\n\n\n\n\n2024-12-14\n\n\ncodex: Medical Code Regex Builder\n\n\n27 min\n\n\n\n\n\n\n2024-12-13\n\n\nprovider: Comprehensive Search\n\n\n7 min\n\n\n\n\n\n\n2024-11-16\n\n\nMedical Codes as Matrices\n\n\n3 min\n\n\n\n\n\n\n2024-11-04\n\n\n100%\n\n\n8 min\n\n\n\n\n\n\nNo matching items\n Back to top"
  },
  {
    "objectID": "posts/claims/claims.html",
    "href": "posts/claims/claims.html",
    "title": "Audit Workflow",
    "section": "",
    "text": "Between the dates of 2022-06-14 and 2024-03-12 (approx 637 days),\n\n512 Dates of Service were recorded\n7158 Unique Patients were seen\nReferred by 232 different Providers\nSeen by 66 different Rendering Providers"
  },
  {
    "objectID": "posts/claims/claims.html#session-information",
    "href": "posts/claims/claims.html#session-information",
    "title": "Audit Workflow",
    "section": "\n3.1 Session Information",
    "text": "3.1 Session Information\n\n\nR version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nother attached packages: hrbrthemes(v.0.8.7), ggdark(v.0.2.1), marquee(v.0.1.0), fuimus(v.0.0.5.9009), northstar(v.0.0.8), arkrvu(v.0.0.1.9002), gt(v.0.11.1.9000), here(v.1.0.1), lubridate(v.1.9.4), forcats(v.1.0.0), stringr(v.1.5.1), dplyr(v.1.1.4), purrr(v.1.0.2), readr(v.2.1.5), tidyr(v.1.3.1.9000), tibble(v.3.2.1), ggplot2(v.3.5.1) and tidyverse(v.2.0.0)\nloaded via a namespace (and not attached): gtable(v.0.3.6), xfun(v.0.50), htmlwidgets(v.1.6.4), collapse(v.2.0.19), RApiSerialize(v.0.1.4), tzdb(v.0.4.0), vctrs(v.0.6.5), tools(v.4.4.2), generics(v.0.1.3), parallel(v.4.4.2), pkgconfig(v.2.0.3), data.table(v.1.16.99), RcppParallel(v.5.1.9), lifecycle(v.1.0.4), farver(v.2.1.2), compiler(v.4.4.2), textshaping(v.0.4.1), munsell(v.0.5.1), janitor(v.2.2.1), qs(v.0.27.2), snakecase(v.0.11.1), fontLiberation(v.0.1.0), fontquiver(v.0.2.1), htmltools(v.0.5.8.1), yaml(v.2.3.10), Rttf2pt1(v.1.3.12), extrafontdb(v.1.0), pillar(v.1.10.1), crayon(v.1.5.3), fontBitstreamVera(v.0.1.1), tidyselect(v.1.2.1), digest(v.0.6.37), stringi(v.1.8.4), pander(v.0.6.5), labeling(v.0.4.3), pins(v.1.4.0), extrafont(v.0.19), rprojroot(v.2.0.4), fastmap(v.1.2.0), grid(v.4.4.2), archive(v.1.1.10), colorspace(v.2.1-1), cli(v.3.6.3.9001), magrittr(v.2.0.3), utf8(v.1.2.4), withr(v.3.0.2), gdtools(v.0.4.1), scales(v.1.3.0), rappdirs(v.0.3.3), bit64(v.4.5.2), timechange(v.0.3.0), rmarkdown(v.2.29), ggTimeSeries(v.1.0.2), bit(v.4.5.0.1), ragg(v.1.3.3), hms(v.1.1.3), stringfish(v.0.16.0), evaluate(v.1.0.3), knitr(v.1.49), rlang(v.1.1.4), Rcpp(v.1.0.14), zeallot(v.0.1.0), glue(v.1.8.0), xml2(v.1.3.6), rstudioapi(v.0.17.1), vroom(v.1.6.5), jsonlite(v.1.8.9), R6(v.2.5.1), systemfonts(v.1.1.0) and fs(v.1.6.5)"
  },
  {
    "objectID": "posts/draw_matrix/draw_matrix.html",
    "href": "posts/draw_matrix/draw_matrix.html",
    "title": "Medical Codes as Matrices",
    "section": "",
    "text": "pcs &lt;- lst(\n  c = c(0:9, grep(\"[^IO]\", LETTERS, value = TRUE)),\n  p = seq2_along(1, c),\n  a = 1:7)\n\npcs\n\n$c\n [1] \"0\" \"1\" \"2\" \"3\" \"4\" \"5\" \"6\" \"7\" \"8\" \"9\" \"A\" \"B\" \"C\" \"D\" \"E\" \"F\" \"G\" \"H\" \"J\"\n[20] \"K\" \"L\" \"M\" \"N\" \"P\" \"Q\" \"R\" \"S\" \"T\" \"U\" \"V\" \"W\" \"X\" \"Y\" \"Z\"\n\n$p\n [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25\n[26] 26 27 28 29 30 31 32 33 34\n\n$a\n[1] 1 2 3 4 5 6 7\n\n\n\nhcpcs &lt;- lst(\n  c = c(0:9, grep(\"[^DINOW-Z]\", LETTERS, value = TRUE)),\n  p = seq2_along(1, c),\n  a = 1:5)\n\nhcpcs\n\n$c\n [1] \"0\" \"1\" \"2\" \"3\" \"4\" \"5\" \"6\" \"7\" \"8\" \"9\" \"A\" \"B\" \"C\" \"E\" \"F\" \"G\" \"H\" \"J\" \"K\"\n[20] \"L\" \"M\" \"P\" \"Q\" \"R\" \"S\" \"T\" \"U\" \"V\"\n\n$p\n [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25\n[26] 26 27 28\n\n$a\n[1] 1 2 3 4 5\n\n\n\n\nlook &lt;- \\(code, system) {\n  \n  constants &lt;- system$c\n  possible  &lt;- system$p\n  \n  names(possible) &lt;- constants\n  \n  unname(possible[splitter(sf_toupper(code))])\n}\n\nlook(\"0G9000Z\", pcs)\n\n[1]  1 17 10  1  1  1 34\n\nlook(\"99213\", hcpcs)\n\n[1] 10 10  3  2  4\n\n\n\n\nmedtrix &lt;- \\(code, system) {\n  \n  constants &lt;- system$c\n  possible  &lt;- system$p\n  axis      &lt;- system$a\n  \n  m &lt;- matrix(data     = 0L,\n              nrow     = length(constants),\n              ncol     = length(axis),\n              dimnames = list(constants, axis))\n  \n  x &lt;- look(code, system)\n  \n  for (i in axis) { \n    m[x[i], i] &lt;- 1L \n    }\n  \n  return(m)\n}\n\nICD-10-PCS:\n\nmedtrix(code = \"0G9000Z\", system = pcs)\n\n  1 2 3 4 5 6 7\n0 1 0 0 1 1 1 0\n1 0 0 0 0 0 0 0\n2 0 0 0 0 0 0 0\n3 0 0 0 0 0 0 0\n4 0 0 0 0 0 0 0\n5 0 0 0 0 0 0 0\n6 0 0 0 0 0 0 0\n7 0 0 0 0 0 0 0\n8 0 0 0 0 0 0 0\n9 0 0 1 0 0 0 0\nA 0 0 0 0 0 0 0\nB 0 0 0 0 0 0 0\nC 0 0 0 0 0 0 0\nD 0 0 0 0 0 0 0\nE 0 0 0 0 0 0 0\nF 0 0 0 0 0 0 0\nG 0 1 0 0 0 0 0\nH 0 0 0 0 0 0 0\nJ 0 0 0 0 0 0 0\nK 0 0 0 0 0 0 0\nL 0 0 0 0 0 0 0\nM 0 0 0 0 0 0 0\nN 0 0 0 0 0 0 0\nP 0 0 0 0 0 0 0\nQ 0 0 0 0 0 0 0\nR 0 0 0 0 0 0 0\nS 0 0 0 0 0 0 0\nT 0 0 0 0 0 0 0\nU 0 0 0 0 0 0 0\nV 0 0 0 0 0 0 0\nW 0 0 0 0 0 0 0\nX 0 0 0 0 0 0 0\nY 0 0 0 0 0 0 0\nZ 0 0 0 0 0 0 1\n\n\nHCPCS (CPT):\n\nmedtrix(code = \"99213\", system = hcpcs)\n\n  1 2 3 4 5\n0 0 0 0 0 0\n1 0 0 0 1 0\n2 0 0 1 0 0\n3 0 0 0 0 1\n4 0 0 0 0 0\n5 0 0 0 0 0\n6 0 0 0 0 0\n7 0 0 0 0 0\n8 0 0 0 0 0\n9 1 1 0 0 0\nA 0 0 0 0 0\nB 0 0 0 0 0\nC 0 0 0 0 0\nE 0 0 0 0 0\nF 0 0 0 0 0\nG 0 0 0 0 0\nH 0 0 0 0 0\nJ 0 0 0 0 0\nK 0 0 0 0 0\nL 0 0 0 0 0\nM 0 0 0 0 0\nP 0 0 0 0 0\nQ 0 0 0 0 0\nR 0 0 0 0 0\nS 0 0 0 0 0\nT 0 0 0 0 0\nU 0 0 0 0 0\nV 0 0 0 0 0"
  },
  {
    "objectID": "posts/draw_matrix/draw_matrix.html#lookup",
    "href": "posts/draw_matrix/draw_matrix.html#lookup",
    "title": "Medical Codes as Matrices",
    "section": "",
    "text": "look &lt;- \\(code, system) {\n  \n  constants &lt;- system$c\n  possible  &lt;- system$p\n  \n  names(possible) &lt;- constants\n  \n  unname(possible[splitter(sf_toupper(code))])\n}\n\nlook(\"0G9000Z\", pcs)\n\n[1]  1 17 10  1  1  1 34\n\nlook(\"99213\", hcpcs)\n\n[1] 10 10  3  2  4"
  },
  {
    "objectID": "posts/draw_matrix/draw_matrix.html#make-matrix",
    "href": "posts/draw_matrix/draw_matrix.html#make-matrix",
    "title": "Medical Codes as Matrices",
    "section": "",
    "text": "medtrix &lt;- \\(code, system) {\n  \n  constants &lt;- system$c\n  possible  &lt;- system$p\n  axis      &lt;- system$a\n  \n  m &lt;- matrix(data     = 0L,\n              nrow     = length(constants),\n              ncol     = length(axis),\n              dimnames = list(constants, axis))\n  \n  x &lt;- look(code, system)\n  \n  for (i in axis) { \n    m[x[i], i] &lt;- 1L \n    }\n  \n  return(m)\n}\n\nICD-10-PCS:\n\nmedtrix(code = \"0G9000Z\", system = pcs)\n\n  1 2 3 4 5 6 7\n0 1 0 0 1 1 1 0\n1 0 0 0 0 0 0 0\n2 0 0 0 0 0 0 0\n3 0 0 0 0 0 0 0\n4 0 0 0 0 0 0 0\n5 0 0 0 0 0 0 0\n6 0 0 0 0 0 0 0\n7 0 0 0 0 0 0 0\n8 0 0 0 0 0 0 0\n9 0 0 1 0 0 0 0\nA 0 0 0 0 0 0 0\nB 0 0 0 0 0 0 0\nC 0 0 0 0 0 0 0\nD 0 0 0 0 0 0 0\nE 0 0 0 0 0 0 0\nF 0 0 0 0 0 0 0\nG 0 1 0 0 0 0 0\nH 0 0 0 0 0 0 0\nJ 0 0 0 0 0 0 0\nK 0 0 0 0 0 0 0\nL 0 0 0 0 0 0 0\nM 0 0 0 0 0 0 0\nN 0 0 0 0 0 0 0\nP 0 0 0 0 0 0 0\nQ 0 0 0 0 0 0 0\nR 0 0 0 0 0 0 0\nS 0 0 0 0 0 0 0\nT 0 0 0 0 0 0 0\nU 0 0 0 0 0 0 0\nV 0 0 0 0 0 0 0\nW 0 0 0 0 0 0 0\nX 0 0 0 0 0 0 0\nY 0 0 0 0 0 0 0\nZ 0 0 0 0 0 0 1\n\n\nHCPCS (CPT):\n\nmedtrix(code = \"99213\", system = hcpcs)\n\n  1 2 3 4 5\n0 0 0 0 0 0\n1 0 0 0 1 0\n2 0 0 1 0 0\n3 0 0 0 0 1\n4 0 0 0 0 0\n5 0 0 0 0 0\n6 0 0 0 0 0\n7 0 0 0 0 0\n8 0 0 0 0 0\n9 1 1 0 0 0\nA 0 0 0 0 0\nB 0 0 0 0 0\nC 0 0 0 0 0\nE 0 0 0 0 0\nF 0 0 0 0 0\nG 0 0 0 0 0\nH 0 0 0 0 0\nJ 0 0 0 0 0\nK 0 0 0 0 0\nL 0 0 0 0 0\nM 0 0 0 0 0\nP 0 0 0 0 0\nQ 0 0 0 0 0\nR 0 0 0 0 0\nS 0 0 0 0 0\nT 0 0 0 0 0\nU 0 0 0 0 0\nV 0 0 0 0 0"
  },
  {
    "objectID": "posts/draw_matrix/draw_matrix.html#session-information",
    "href": "posts/draw_matrix/draw_matrix.html#session-information",
    "title": "Medical Codes as Matrices",
    "section": "\n2.1 Session Information",
    "text": "2.1 Session Information\n\n\nR version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nother attached packages: fuimus(v.0.0.2), paintr(v.0.0.1), ggthemes(v.5.1.0), stringfish(v.0.16.0), rlang(v.1.1.4), lubridate(v.1.9.3), forcats(v.1.0.0), stringr(v.1.5.1), dplyr(v.1.1.4), purrr(v.1.0.2), readr(v.2.1.5), tidyr(v.1.3.1), tibble(v.3.2.1), ggplot2(v.3.5.1) and tidyverse(v.2.0.0)\nloaded via a namespace (and not attached): utf8(v.1.2.4), generics(v.0.1.3), stringi(v.1.8.4), hms(v.1.1.3), digest(v.0.6.37), magrittr(v.2.0.3), evaluate(v.1.0.1), grid(v.4.4.2), timechange(v.0.3.0), fastmap(v.1.2.0), jsonlite(v.1.8.9), pander(v.0.6.5), fansi(v.1.0.6), scales(v.1.3.0), textshaping(v.0.4.0), cli(v.3.6.3), munsell(v.0.5.1), withr(v.3.0.2), yaml(v.2.3.10), tools(v.4.4.2), tzdb(v.0.4.0), colorspace(v.2.1-1), vctrs(v.0.6.5), R6(v.2.5.1), lifecycle(v.1.0.4), htmlwidgets(v.1.6.4), ragg(v.1.3.3), pkgconfig(v.2.0.3), RcppParallel(v.5.1.9), pillar(v.1.9.0), gtable(v.0.3.6), glue(v.1.8.0), Rcpp(v.1.0.13-1), systemfonts(v.1.1.0), xfun(v.0.49), tidyselect(v.1.2.1), rstudioapi(v.0.17.1), knitr(v.1.49), farver(v.2.1.2), htmltools(v.0.5.8.1), rmarkdown(v.2.29) and compiler(v.4.4.2)"
  },
  {
    "objectID": "posts/mpfs/mpfs.html",
    "href": "posts/mpfs/mpfs.html",
    "title": "arkrvu: Medicare Physician Fee Schedule",
    "section": "",
    "text": "This is an overview of the general format of the Medicare Physician Fee Schedule (MPFS), specifically the PFS Relative Value File. Updates are released on the first day of each quarter. If required, a correction notice may be issued. The file is a zip archive and typically contains six files:\n\ndplyr::tibble(\n  `Naming Convention` = c(\n    p(\"&lt;b&gt;RVU[&lt;/b&gt;\",\n      \"&lt;i&gt;&lt;small&gt;YY&lt;/small&gt;&lt;/i&gt;\",\n      \"&lt;b&gt;]A&lt;/b&gt;\",\n      \".zip\"\n      ),\n    p(\"RVU[YY]AR.zip\"),\n    p(\"RVU[YY]B.zip\"),\n    p(\"RVU[YY]C.zip\"),\n    p(\"RVU[YY]D.zip\")\n  ),\n  `Release Schedule` = c(\n    p(\"Q1: January 1&lt;sup&gt;st&lt;/sup&gt;\"),\n    p(\"Q1: January ??\",\n      \"&lt;br&gt;&lt;br&gt;\",\n      \"&lt;small&gt;&lt;b&gt;Correction Notice&lt;/b&gt;&lt;br&gt;(If Required)&lt;/small&gt;\"\n      ),\n    p(\"Q2: April 1&lt;sup&gt;st&lt;/sup&gt;\"),\n    p(\"Q3: July 1&lt;sup&gt;st&lt;/sup&gt;\"),\n    p(\"Q4: October 1&lt;sup&gt;st&lt;/sup&gt;\")\n  )\n) |&gt; \n  gt::gt(process_md = TRUE) |&gt; \n  gt::fmt_markdown() |&gt; \n  # gt::opt_table_font(font = gt::google_font(name = \"Roboto Slab\")) |&gt; \n  gt::tab_header(\"PFS RVU File Release Schedule\") |&gt;\n  gt::opt_all_caps() |&gt;\n  gt::tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = gt::px(20),\n    column_labels.padding.horizontal = gt::px(20),\n    table.border.top.color = \"#555555\",\n    table.width = gt::pct(100))\n\n\n\n\n\n\nPFS RVU File Release Schedule\n    \n\nNaming Convention\n      Release Schedule\n    \n\n\n\nRVU[YY]A.zip\nQ1: January 1st\n\n\nRVU[YY]AR.zip\nQ1: January ??Correction Notice(If Required)\n\n\nRVU[YY]B.zip\nQ2: April 1st\n\n\nRVU[YY]C.zip\nQ3: July 1st\n\n\nRVU[YY]D.zip\nQ4: October 1st\n\n\n\n\n\n\n\ndplyr::tibble(\n  n = p(1:6, \".\"),\n  `File Name` = c(\n    p(\n      \"&lt;b&gt;RVU&lt;/b&gt;\" #,\n      # \"&lt;b&gt;[&lt;/b&gt;\",\n      # \"&lt;small&gt;YY&lt;/small&gt;\",\n      # \"&lt;b&gt;][&lt;/b&gt;\",\n      # \"&lt;small&gt;VER&lt;/small&gt;\",\n      # \"&lt;b&gt;]&lt;/b&gt;\"\n      ), \n    p(\n      \"&lt;b&gt;PPRRVU&lt;/b&gt;\" #,\n      # \"&lt;b&gt;[&lt;/b&gt;\",\n      # \"&lt;small&gt;YY&lt;/small&gt;\",\n      # \"&lt;b&gt;]&lt;/b&gt;\"\n      ), \n    p(\n      \"&lt;b&gt;GPCI&lt;/b&gt;\" #, \n      # \"&lt;b&gt;[&lt;/b&gt;\",\n      # \"&lt;small&gt;YYYY&lt;/small&gt;\",\n      # \"&lt;b&gt;]&lt;/b&gt;\"\n      ), \n    p(\n      # \"&lt;b&gt;[&lt;/b&gt;\",\n      # \"&lt;small&gt;YY&lt;/small&gt;\",\n      # \"&lt;b&gt;]&lt;/b&gt;\"\n      \"&lt;b&gt;LOCCO&lt;/b&gt;\"\n      ), \n    p(\n      \"&lt;b&gt;ANES&lt;/b&gt;\" #,\n      # \"&lt;b&gt;[&lt;/b&gt;\",\n      # \"&lt;small&gt;YYYY&lt;/small&gt;\",\n      # \"&lt;b&gt;]&lt;/b&gt;\"\n           ), \n    p(\"&lt;b&gt;OPPSCAP&lt;/b&gt;\")),\n  Description = c(\n    \"Data Dictionary, Record Layout and File Documentation\",\n    \"Physician Fee Schedule RVUs and Policy Indicators\",\n    \"Geographic Practice Cost Index Components for each Carrier/Locality combination\",\n    \"Locality to County Crosswalk\",\n    \"Anesthesia Conversion Factors\",\n    \"OPPS-based capitation-adjusted payment amounts.\")) |&gt; \n  gt::gt(\n    rowname_col = \"n\",\n    process_md = TRUE) |&gt; \n  gt::cols_width(\n    n ~ gt::px(70),\n    `File Name` ~ gt::px(100)) |&gt; \n  gt::fmt_markdown() |&gt; \n  gt::opt_all_caps() |&gt; \n  gt::tab_header(\"PFS Relative Value File\") |&gt;\n  gt::opt_all_caps() |&gt;\n  gt::tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = gt::px(20),\n    column_labels.padding.horizontal = gt::px(20),\n    table.border.top.color = \"#555555\",\n    table.width = gt::pct(100))\n\n\n\n\n\n\n\n\n\n\n\nPFS Relative Value File\n    \n\n\n      File Name\n      Description\n    \n\n\n\n\n\n\nRVU\nData Dictionary, Record Layout and File Documentation\n\n\n\n\n\nPPRRVU\nPhysician Fee Schedule RVUs and Policy Indicators\n\n\n\n\n\nGPCI\nGeographic Practice Cost Index Components for each Carrier/Locality combination\n\n\n\n\n\nLOCCO\nLocality to County Crosswalk\n\n\n\n\n\nANES\nAnesthesia Conversion Factors\n\n\n\n\n\nOPPSCAP\nOPPS-based capitation-adjusted payment amounts.\n\n\n\n\n\n\n\nThe pdf labeled “RVU” is a comprehensive guide to the structure and contents of each file in the Relative Value zip file. It describes the methodology, that contains a data dictionary, record layout, and documentation\n\nrvu24a &lt;- arkrvu::get_source(\n  year = 2024, \n  source = \"pprrvu\")$rvu24a_jan |&gt; \n  dplyr::mutate(\n    mod = cheapr::factor_(mod),\n    description = fuimus:::remove_quotes(description),\n    status_code = cheapr::factor_(status_code),\n    pctc_ind = cheapr::factor_(pctc_ind),\n    glob_days = cheapr::factor_(glob_days),\n    mult_proc = cheapr::factor_(mult_proc),\n    bilat_surg = cheapr::factor_(bilat_surg),\n    asst_surg = cheapr::factor_(asst_surg),\n    co_surg = cheapr::factor_(co_surg),\n    team_surg = cheapr::factor_(team_surg),\n    physician_supervision_of_diagnostic_procedures = cheapr::factor_(physician_supervision_of_diagnostic_procedures),\n    diagnostic_imaging_family_indicator = cheapr::factor_(diagnostic_imaging_family_indicator))\n\nover &lt;- cheapr::overview(rvu24a, hist = TRUE)\n\nhcpcs_row &lt;- over$categorical |&gt; \n  dplyr::select(variable = col, value = n_unique) |&gt; \n  dplyr::filter(variable == \"hcpcs\")\n\nover\n\nobs: 18499 \ncols: 31 \n\n----- Numeric -----\n              col  class n_missng p_complt n_unique    mean   p0  p25  p50\n1        work_rvu numerc        0        1     2486    3.88    0    0    0\n2  non_fac_pe_rvu numerc        0        1     2310    4.01    0    0    0\n3  facility_pe_rv numerc        0        1     2079    3.03    0    0    0\n4          mp_rvu numerc        0        1     1026    0.83    0    0    0\n5  non_faclty_ttl numerc        0        1     3877    8.71    0    0    0\n6  facility_total numerc        0        1     3683    7.74    0    0    0\n7          pre_op numerc        0        1        8   0.022    0    0    0\n8        intra_op numerc        0        1       14    0.17    0    0    0\n9         post_op numerc        0        1       11   0.034    0    0    0\n10    conv_factor numerc        0        1        1   32.74 32.7 32.7 32.7\n11 nn_fclty______ numerc        0        1      417     0.9    0    0    0\n12 fclty_p_sd____ numerc        0        1      417     0.9    0    0    0\n13 mp_sd_fr_pps__ numerc        0        1       81  0.0072    0    0    0\n     p75   p100  iqr       sd  hist\n1   3.21 108.91 3.21     8.51 ▇▁▁▁▁\n2   5.35 355.87 5.35 1.05e+01 ▇▁▁▁▁\n3   3.66  53.07 3.66     5.60 ▇▁▁▁▁\n4   0.43  28.99 0.43     2.20 ▇▁▁▁▁\n5   9.79 364.53 9.79 1.81e+01 ▇▁▁▁▁\n6    7.5    171  7.5 1.56e+01 ▇▁▁▁▁\n7      0   0.17    0 4.10e-02 ▇▁▂▁▁\n8      0   0.84    0 3.20e-01 ▇▁▁▁▂\n9      0   0.23    0 6.70e-02 ▇▁▁▁▁\n10 32.74  32.74    0 1.10e-12 ▁▁▇▁▁\n11     0 159.54    0     7.15 ▇▁▁▁▁\n12     0 159.54    0     7.15 ▇▁▁▁▁\n13     0   1.83    0 6.10e-02 ▇▁▁▁▁\n\n----- Categorical -----\n              col  class n_missng p_complt n_unique n_levels               min\n1           hcpcs chrctr        0        1    16324       NA             0001F\n2             mod factor    16323     0.12        3        3                26\n3     description chrctr        1        1    14376       NA 1 bod temp &gt;=35.5\n4     status_code factor        0        1       12       12                 A\n5  nt_sd_fr_mdcr_ chrctr    18366   0.0072        1       NA                 +\n6  non_fac_indctr chrctr    14433     0.22        1       NA                NA\n7  facility_ndctr chrctr    16031     0.13        1       NA                NA\n8        pctc_ind factor        0        1       10       10                 0\n9       glob_days factor        0        1        7        7               000\n10      mult_proc factor        0        1        8        8                 0\n11     bilat_surg factor        0        1        5        5                 0\n12      asst_surg factor        0        1        4        4                 0\n13        co_surg factor        0        1        4        4                 0\n14      team_surg factor        0        1        4        4                 0\n15      endo_base chrctr    18138     0.02       36       NA             0652T\n16 physcn_sprv___ factor        0        1       10       10                01\n17 calculatin_flg chrctr        0        1        1       NA                 0\n18 dgnstc_mgng_f_ factor        0        1        2        2                88\n            max\n1         V5364\n2            TC\n3  y set tubing\n4             X\n5             +\n6            NA\n7            NA\n8             9\n9           ZZZ\n10            9\n11            9\n12            9\n13            9\n14            9\n15        66710\n16           7A\n17            0\n18           99\n\n\n\n\nrvu_splits &lt;- rvu24a |&gt;  \n  hacksaw::count_split(\n    mod,\n    status_code,\n    not_used_for_medicare_payment,\n    non_fac_indicator,\n    facility_indicator,\n    pctc_ind,\n    glob_days,\n    mult_proc,\n    bilat_surg,\n    asst_surg,\n    co_surg,\n    team_surg,\n    endo_base,\n    physician_supervision_of_diagnostic_procedures,\n    diagnostic_imaging_family_indicator\n  )\n\nprocess_splits &lt;- function(split) {\n  \n  split_name &lt;- \\(split) {\n  \n  varname &lt;- rlang::names2(split)[1]\n  \n  split |&gt; \n    dplyr::mutate(variable = !!varname, .before = 1) |&gt; \n    purrr::set_names(c(\"variable\", \"value\", \"n\"))\n  }\n  \n  purrr::map(rvu_splits, split_name) |&gt; \n  purrr::list_rbind() |&gt; \n  dplyr::mutate(pct = n / sum(n), .by = variable)\n  \n}\n\nrvu_vars &lt;- process_splits(rvu_splits)\n\nvars &lt;- rvu_vars |&gt; \n  dplyr::mutate(\n    variable = stringr::str_replace_all(\n      variable, \"_\", \" \") |&gt; \n      stringr::str_to_upper(),\n  )\n\nidx &lt;- c(\n  \"MOD\" = \"For diagnostic tests, a blank in this field denotes the global service and the following modifiers identify the components:&lt;br&gt;26 = Professional component&lt;br&gt;TC = Technical component &lt;i&gt;For services other than those with a professional and/or technical component, a blank will appear in this field with one exception: the presence of CPT modifier -53 indicates that separate RVUs and a fee schedule amount have been established for procedures which the physician terminated before completion. This modifier is used only with colonoscopy CPT codes 44388 and 45378, or with G0105 and G0121. Any other codes billed with modifier -53 are subject to carrier medical review and priced by individual consideration.&lt;br&gt;53 = Discontinued Procedure - Under certain circumstances, the physician may elect to terminate a surgical or diagnostic procedure. Due to extenuating circumstances, or those that threaten the well being of the patient, it may be necessary to indicate that a surgical or diagnostic procedure was started but discontinued.\",\n  \"STATUS CODE\" = \"Indicates whether the code is in the fee schedule and whether it is separately payable if the service is covered. Only RVUs associated with status codes of A, R, or T, are used for Medicare payment.\",\n  \"NOT USED FOR MEDICARE PAYMENT\" = \"The name says it all\",\n  \"NON FAC INDICATOR\" = \"An NA in this field indicates that this procedure is rarely or never performed in the non-facility setting.\",\n  \"FACILITY INDICATOR\" = \"An NA in this field indicates that this procedure is rarely or never performed in the facility setting.\",\n  \"PCTC IND\" = \"Professional Component (PC) or Technical Component (TC) Indicator\",\n  \"GLOB DAYS\" = \"Global Surgery postoperative timeframes that apply to payment for each surgical procedure or another indicator that describes how the global concept applies to the service.\",\n  \"MULT PROC\" = \"Multiple Procedure (CPT Modifier 51) indicator shows which payment adjustment rule for multiple procedures applies to the service.\",\n  \"BILAT SURG\" = \"Bilateral Surgery Indicator (CPT Modifier 50) for services subject to a payment adjustment.\",\n  \"ASST SURG\" = \"Assistant at Surgery (Modifiers AS, 80, 81, and 82) indicator for services where Medicare never pays an assistant at surgery.\",\n  \"CO SURG\" = \"Co-Surgeons (Modifier 62) This field gives an indicator for services for which Medicare may pay 2 surgeons, each in a different specialty.\",\n  \"TEAM SURG\" = \"Team Surgeons (Modifier 66) This field gives an indicator for services for which Medicare may pay team surgeons.\",\n  \"ENDO BASE\" = \"Endoscopic Base Code for each code with a multiple surgery indicator of 3.\",\n  \"PHYSICIAN SUPERVISION OF DIAGNOSTIC PROCEDURES\" = \"Medicare uses this field in post payment review.\",\n  \"DIAGNOSTIC IMAGING FAMILY INDICATOR\" = \"Identifies the applicable Diagnostic Service family for HCPCS codes with a Multiple Procedure indicator of 4. For services effective January 1, 2011, and after, family indicators 01 - 11 won’t populate.\")\n\n\ndplyr::left_join(\n  vars |&gt; dplyr::filter(!cheapr::is_na(value)),\n  dplyr::tibble(\n    variable = names(idx[collapse::funique(vars$variable)]),\n    description = idx[collapse::funique(vars$variable)]),\n  by = dplyr::join_by(variable)) |&gt; \n  fuimus::combine(\n    name = variable, \n    columns = c('variable', 'description'), \n    sep = \"&lt;br&gt;&lt;br&gt;\") |&gt;\n  dplyr::add_row(\n    variable = toupper(hcpcs_row$variable),\n    value = as.character(format(hcpcs_row$value, big.mark = \",\")),\n    n = 18499,\n    pct = 1.0,\n    .before = 1) |&gt; \n  gt::gt(\n    groupname_col = \"variable\",\n    row_group_as_column = TRUE,\n    process_md = TRUE) |&gt; \n  gt::tab_stubhead(label = \"Variable\") |&gt; \n  gt::cols_label(\n    value = \"Unique\",\n    n = \"Total\",\n    pct = \"Percent\") |&gt;\n  gt::fmt_percent(columns = pct) |&gt; \n  gt::fmt_integer(columns = n) |&gt;\n  gt::tab_header(\"RVU Indicators\") |&gt;\n  gt::opt_all_caps() |&gt; \n  gt::tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = gt::px(20),\n    column_labels.padding.horizontal = gt::px(20),\n    table.border.top.color = \"#555555\",\n    table.width = gt::pct(100))\n\n\n\n\n\n\nRVU Indicators\n    \n\nVariable\n      Unique\n      Total\n      Percent\n    \n\n\n\nHCPCS\n16,324\n18,499\n100.00%\n\n\nMODFor diagnostic tests, a blank in this field denotes the global service and the following modifiers identify the components:26 = Professional componentTC = Technical component For services other than those with a professional and/or technical component, a blank will appear in this field with one exception: the presence of CPT modifier -53 indicates that separate RVUs and a fee schedule amount have been established for procedures which the physician terminated before completion. This modifier is used only with colonoscopy CPT codes 44388 and 45378, or with G0105 and G0121. Any other codes billed with modifier -53 are subject to carrier medical review and priced by individual consideration.53 = Discontinued Procedure - Under certain circumstances, the physician may elect to terminate a surgical or diagnostic procedure. Due to extenuating circumstances, or those that threaten the well being of the patient, it may be necessary to indicate that a surgical or diagnostic procedure was started but discontinued.\n26\n1,096\n5.92%\n\n\nTC\n1,076\n5.82%\n\n\n53\n4\n0.02%\n\n\nSTATUS CODEIndicates whether the code is in the fee schedule and whether it is separately payable if the service is covered. Only RVUs associated with status codes of A, R, or T, are used for Medicare payment.\nA\n8,975\n48.52%\n\n\nX\n2,527\n13.66%\n\n\nI\n1,411\n7.63%\n\n\nE\n1,343\n7.26%\n\n\nM\n1,201\n6.49%\n\n\nC\n1,156\n6.25%\n\n\nR\n1,050\n5.68%\n\n\nN\n327\n1.77%\n\n\nJ\n276\n1.49%\n\n\nP\n142\n0.77%\n\n\nB\n83\n0.45%\n\n\nT\n8\n0.04%\n\n\nNOT USED FOR MEDICARE PAYMENTThe name says it all\n+\n133\n0.72%\n\n\nNON FAC INDICATORAn NA in this field indicates that this procedure is rarely or never performed in the non-facility setting.\nNA\n4,066\n21.98%\n\n\nFACILITY INDICATORAn NA in this field indicates that this procedure is rarely or never performed in the facility setting.\nNA\n2,468\n13.34%\n\n\nPCTC INDProfessional Component (PC) or Technical Component (TC) Indicator\n9\n7,704\n41.65%\n\n\n0\n7,128\n38.53%\n\n\n1\n3,229\n17.45%\n\n\n3\n178\n0.96%\n\n\n5\n104\n0.56%\n\n\n7\n74\n0.40%\n\n\n2\n44\n0.24%\n\n\n6\n20\n0.11%\n\n\n4\n17\n0.09%\n\n\n8\n1\n0.01%\n\n\nGLOB DAYSGlobal Surgery postoperative timeframes that apply to payment for each surgical procedure or another indicator that describes how the global concept applies to the service.\nXXX\n11,262\n60.88%\n\n\n090\n3,771\n20.38%\n\n\n000\n1,326\n7.17%\n\n\nYYY\n933\n5.04%\n\n\nZZZ\n719\n3.89%\n\n\n010\n471\n2.55%\n\n\nMMM\n17\n0.09%\n\n\nMULT PROCMultiple Procedure (CPT Modifier 51) indicator shows which payment adjustment rule for multiple procedures applies to the service.\n9\n7,876\n42.58%\n\n\n2\n5,287\n28.58%\n\n\n0\n4,044\n21.86%\n\n\n4\n420\n2.27%\n\n\n3\n361\n1.95%\n\n\n6\n361\n1.95%\n\n\n7\n98\n0.53%\n\n\n5\n52\n0.28%\n\n\nBILAT SURGBilateral Surgery Indicator (CPT Modifier 50) for services subject to a payment adjustment.\n9\n7,892\n42.66%\n\n\n0\n7,784\n42.08%\n\n\n1\n2,203\n11.91%\n\n\n2\n383\n2.07%\n\n\n3\n237\n1.28%\n\n\nASST SURGAssistant at Surgery (Modifiers AS, 80, 81, and 82) indicator for services where Medicare never pays an assistant at surgery.\n9\n7,940\n42.92%\n\n\n0\n5,595\n30.24%\n\n\n2\n2,781\n15.03%\n\n\n1\n2,183\n11.80%\n\n\nCO SURGCo-Surgeons (Modifier 62) This field gives an indicator for services for which Medicare may pay 2 surgeons, each in a different specialty.\n9\n7,885\n42.62%\n\n\n0\n7,839\n42.38%\n\n\n1\n2,474\n13.37%\n\n\n2\n301\n1.63%\n\n\nTEAM SURGTeam Surgeons (Modifier 66) This field gives an indicator for services for which Medicare may pay team surgeons.\n0\n10,430\n56.38%\n\n\n9\n7,885\n42.62%\n\n\n1\n133\n0.72%\n\n\n2\n51\n0.28%\n\n\nENDO BASEEndoscopic Base Code for each code with a multiple surgery indicator of 3.\n52000\n44\n0.24%\n\n\n31231\n30\n0.16%\n\n\n43235\n30\n0.16%\n\n\n31622\n20\n0.11%\n\n\n43200\n18\n0.10%\n\n\n49320\n18\n0.10%\n\n\n29870\n15\n0.08%\n\n\n45330\n14\n0.08%\n\n\n45378\n14\n0.08%\n\n\n44388\n13\n0.07%\n\n\n29805\n11\n0.06%\n\n\n43260\n10\n0.05%\n\n\n45300\n10\n0.05%\n\n\n46600\n10\n0.05%\n\n\n44360\n9\n0.05%\n\n\n31525\n8\n0.04%\n\n\n31575\n8\n0.04%\n\n\n31526\n7\n0.04%\n\n\n52351\n7\n0.04%\n\n\n58555\n7\n0.04%\n\n\n29860\n6\n0.03%\n\n\n29830\n5\n0.03%\n\n\n29840\n5\n0.03%\n\n\n43191\n5\n0.03%\n\n\n50570\n5\n0.03%\n\n\n57452\n5\n0.03%\n\n\n31505\n4\n0.02%\n\n\n47552\n4\n0.02%\n\n\n50951\n4\n0.02%\n\n\n44376\n3\n0.02%\n\n\n44380\n3\n0.02%\n\n\n50551\n3\n0.02%\n\n\n0652T\n2\n0.01%\n\n\n50970\n2\n0.01%\n\n\n43197\n1\n0.01%\n\n\n66710\n1\n0.01%\n\n\nPHYSICIAN SUPERVISION OF DIAGNOSTIC PROCEDURESMedicare uses this field in post payment review.\n09\n17,465\n94.41%\n\n\n01\n533\n2.88%\n\n\n02\n249\n1.35%\n\n\n03\n207\n1.12%\n\n\n04\n16\n0.09%\n\n\n6A\n13\n0.07%\n\n\n7A\n9\n0.05%\n\n\n21\n5\n0.03%\n\n\n05\n1\n0.01%\n\n\n66\n1\n0.01%\n\n\nDIAGNOSTIC IMAGING FAMILY INDICATORIdentifies the applicable Diagnostic Service family for HCPCS codes with a Multiple Procedure indicator of 4. For services effective January 1, 2011, and after, family indicators 01 - 11 won’t populate.\n99\n18,055\n97.60%\n\n\n88\n444\n2.40%\n\n\n\n\n\n\n\n\nover$numeric |&gt; \n  dplyr::select(\n    variable = col, \n    unique = n_unique,\n    p75, \n    max = p100, \n    iqr, \n    mean, \n    sd,\n    hist) |&gt;\n  gt::gt(\n    groupname_col = \"variable\",\n    row_group_as_column = TRUE,\n    process_md = TRUE) |&gt; \n  gt::fmt_integer(columns = unique) |&gt;\n  gt::fmt_number(columns = p75:sd) |&gt;\n  gt::tab_header(\"RVU Numerics\") |&gt;\n  gt::opt_all_caps() |&gt; \n  gt::tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = gt::px(20),\n    column_labels.padding.horizontal = gt::px(20),\n    table.border.top.color = \"#555555\",\n    table.width = gt::pct(100))\n\n\n\n\n\n\nRVU Numerics\n    \n\n\n      unique\n      p75\n      max\n      iqr\n      mean\n      sd\n      hist\n    \n\n\n\nwork_rvu\n2,486\n3.21\n108.91\n3.21\n3.88\n8.51\n▇▁▁▁▁\n\n\nnon_fac_pe_rvu\n2,310\n5.35\n355.87\n5.35\n4.01\n10.52\n▇▁▁▁▁\n\n\nfacility_pe_rvu\n2,079\n3.66\n53.07\n3.66\n3.03\n5.60\n▇▁▁▁▁\n\n\nmp_rvu\n1,026\n0.43\n28.99\n0.43\n0.83\n2.20\n▇▁▁▁▁\n\n\nnon_facility_total\n3,877\n9.79\n364.53\n9.79\n8.71\n18.07\n▇▁▁▁▁\n\n\nfacility_total\n3,683\n7.50\n171.00\n7.50\n7.74\n15.57\n▇▁▁▁▁\n\n\npre_op\n8\n0.00\n0.17\n0.00\n0.02\n0.04\n▇▁▂▁▁\n\n\nintra_op\n14\n0.00\n0.84\n0.00\n0.17\n0.32\n▇▁▁▁▂\n\n\npost_op\n11\n0.00\n0.23\n0.00\n0.03\n0.07\n▇▁▁▁▁\n\n\nconv_factor\n1\n32.74\n32.74\n0.00\n32.74\n0.00\n▁▁▇▁▁\n\n\nnon_facility_pe_used_for_opps_payment_amount\n417\n0.00\n159.54\n0.00\n0.90\n7.15\n▇▁▁▁▁\n\n\nfacility_pe_used_for_opps_payment_amount\n417\n0.00\n159.54\n0.00\n0.90\n7.15\n▇▁▁▁▁\n\n\nmp_used_for_opps_payment_amount\n81\n0.00\n1.83\n0.00\n0.01\n0.06\n▇▁▁▁▁\n\n\n\n\n\n\n\nThe MPFS is a listing of the relative value units (RVUs) for each CPT code, as well as the geographic practice cost index (GPCI) for each code. The RVUs are used to calculate the payment amount for each service, while the GPCI is used to adjust the payment amount based on the location where the service is provided.\nThis file contains information on services covered by the MPFS in 2024. For more than 10,000 physician services, the file contains the associated RVUs, a fee schedule status indicator, and various payment policy indicators needed for payment adjustment (i.e., payment of assistant at surgery, team surgery, bilateral surgery, etc.).\nThe MPFS amounts are adjusted to reflect the variation in practice costs from area to area. A GPCI has been established for every Medicare payment locality for each of the three components of a procedure’s RVU:\n\nPhysician Work\nPractice Expense\nMalpractice Expense (sometimes called Professional Liability Insurance)\n\nThe GPCIs are applied in the calculation of a fee schedule payment amount by multiplying the RVU for each component times the GPCI for that component.\n\n x = [(RVU_w \\times GPCI_w) + (RVU_p \\times GPCI_p) + (RVU_m \\times GPCI_m)] \\times CF \n\n y = 0.95x \n\n z = 0.95(1.15x) \n\n\n\n\n\n\nMany Ways to Say the Same Thing\n\n\n\n\nAs there is a corresponding GPCI value for each of the three components of an RVU, the formula is essentially the dot product of the RVU and GPCI vectors, multiplied by the conversion factor:\n\n a \\cdot b = a_1b_1 + a_2b_2 + a_3b_3 \n\nAs scalars:\n\nwrvu  = 6.26   # Work RVU\nwgpci = 1      # Work GPCI\n\npgpci = 0.883  # Practice GPCI\nprvu  = 4.36   # Practice RVU\n\nmrvu  = 0.99   # Malpractice RVU\nmgpci = 1.125  # Malpractice GPCI\n\ncf    = 32.744 # Conversion Factor\n\nAs vectors:\n\nrvu  &lt;- c(w = 6.26, p = 4.36, m = 0.99)\nrvu\n\n   w    p    m \n6.26 4.36 0.99 \n\ngpci &lt;- c(w = 1, p = 0.883, m = 1.125)\ngpci\n\n    w     p     m \n1.000 0.883 1.125 \n\ncf   &lt;- 32.744\n\n\n\n(\n  (wrvu * wgpci) + \n  (prvu * pgpci) + \n  (mrvu * mgpci)\n ) * cf\n\n[1] 368\n\n\nWith sum():\n\nbase_sum &lt;- \\(rvu, gpci, cf) sum(rvu * gpci) * cf\n\nbase_sum(rvu, gpci, cf)\n\n[1] 368\n\n\nWith sum(diag(outer(x, y))):\n\nsum_diag_outer &lt;- \\(rvu, gpci, cf) sum(diag(outer(rvu, gpci), names = FALSE)) * cf\n\nsum_diag_outer(rvu, gpci, cf)\n\n[1] 368\n\n\nWith crossprod():\n\ndrop(\n  crossprod(\n    c(wrvu, prvu, mrvu), \n    c(wgpci, pgpci, mgpci)) \n  * cf)\n\n[1] 368\n\ndcross &lt;- \\(rvu, gpci, cf) drop(crossprod(rvu, gpci) * cf)\n\ndcross(rvu, gpci, cf)\n\n[1] 368\n\n\nWith %*%:\n\nas.vector(\n  c(wrvu, prvu, mrvu) %*% \n  c(wgpci, pgpci, mgpci) \n  * cf)\n\n[1] 368\n\n\nWith pracma::dot():\n\npracma::dot(\n  c(wrvu, prvu, mrvu), \n  c(wgpci, pgpci, mgpci)) * cf\n\n[1] 368\n\npracma::dot(rvu, gpci) * cf\n\n[1] 368\n\n\nWith northstar::calculate_amounts():\n\nnorthstar::calculate_amounts(\n  wrvu  = 6.26,\n  nprvu = 7.92,\n  fprvu = 4.36,\n  mrvu  = 0.99,\n  cf    = 32.744,\n  wgpci = 1,\n  pgpci = 0.883,\n  mgpci = 1.125\n)\n\nFacility Amounts:\n\nRVU Total ............ 11.22\nParticipating ........ $367.51\nNon-Particpating ..... $349.13\nLimiting Charge ...... $401.50\n\nNon-Facility Amounts:\n\nRVU Total ............ 14.37\nParticipating ........ $470.44\nNon-Particpating ..... $446.91\nLimiting Charge ...... $513.95\n\n\n\n\n\n\n\n\n\n\n\nNon-Facility vs. Facility\n\n\n\nUnder the MPFS, many procedures have separate payment amounts for physician services when provided in facility and non-facility settings.\nThe amount is determined by the Place of Service (POS) code. In general, the POS code reflects the actual place where the patient receives the face-to-face service and determines whether the facility or non-facility payment rate is paid.\nServices rendered to a patient who is an inpatient of a hospital (POS code 21) or an outpatient of a hospital (POS codes 19 or 22), the facility rate is paid, regardless of where the face-to-face encounter with the patient occurred.\n\n\n\n\n\n\n\n\n\nTherapy Code Capitation\n\n\n\nCertain therapy codes will receive a 50% reduction to the Practice Expense.\nSection 5102(b) of the Deficit Reduction Act of 2005 requires a payment cap on the Technical Component (TC) of certain diagnostic imaging procedures and the TC portions of the global diagnostic imaging services.\nThis cap is based on the Outpatient Prospective Payment System (OPPS) payment. To implement this provision, the Physician Fee Schedule amount is compared to the OPPS payment amount and the lower amount is used in the formula to calculate payment.\n\n\n\nAccepting assignment means that a healthcare provider or facility is partnered with Medicare and is required by law to charge only the Medicare-approved amount for various services. This amount is preset by Medicare and is often less than many healthcare facilities would charge.\nBecause of this, when patients receive care at a facility that accepts assignment, they will be required to pay lower out-of-pocket costs as Medicare will cover the full amount of the service cost. Personal costs only include the premium and any charges up to the deductible amount.\nPhysicians or facilities that do not accept assignment are a non-participating providers. All physicians are required to file with Medicare, indicating that they either accept or do not accept assignment. If a provider does not accept assignment, it means that they are not required to charge only the Medicare-approved amount for services.\n\nOne possible option for non-participating providers is to choose to accept assignment for some services but to decline assignment for others. For services that they accept assignment for, they are only able to bill the Medicare-approved amount. However, for other services, they are allowed to charge up to 15 percent more than the Medicare-approved amount.\nThis limit cap is known as the limiting charge. Providers that do not fully participate only receive 95 percent of the Medicare-approved amount when Medicare reimburses them for the cost of care. In turn, the provider can charge the patient up to 15 percent more than this reimbursement amount. This extra charge will not be covered by Medicare, which causes Medicare recipients to incur greater out-of-pocket costs.\nThe Medicare limiting charge is the maximum amount a Non-Participating Provider can charge for services submitted on a non-assigned claim. This is that maximum amount a beneficiary could legally be charged.\n\nThe Medicare limiting charge is, by law, set at 115\\% of the payment amount for the service furnished by the Non-Participating Physician.\nHowever, the law sets the payment amount for Non-Participating Physicians at 95\\% of the payment amount for Participating Physicians (i.e., the Fee Schedule amount).\nCalculating 95\\% of 115\\% of an amount, x, is equivalent to x \\times 1.0925 (or 109.25\\%):\n\n# 95% of 115% of 10\n(10 * 1.15) * 0.95 \n\n[1] 10.9\n\n# 109.25% of 10\n10 * 1.0925 \n\n[1] 10.9\n\nlimiting_charge(10)\n\n[1] 10.9\n\n\n\nThis file contains information on services covered by the Medicare Physician Fee Schedule (MPFS). For more than 10,000 physician services, the file contains the associated relative value units (RVUs), a fee schedule status indicator, and various payment policy indicators needed for payment adjustment (i.e., payment of assistant at surgery, team surgery, bilateral surgery, etc.).\nThe Medicare physician fee schedule amounts are adjusted to reflect the variation in practice costs from area to area. A geographic practice cost index (GPCI) has been established for every Medicare payment locality for each of the three components of a procedure’s relative value unit (i.e., the RVUs for work, practice expense, and malpractice). The GPCIs are applied in the calculation of a fee schedule payment amount by multiplying the RVU for each component times the GPCI for that component.\n\n\nfoot_53 &lt;- \"Not used to report the elective cancellation of a procedure prior to the patient's anesthesia induction and/or surgical preparation in the operating suite. For outpatient hospital/ambulatory surgery center (ASC) reporting of a previously scheduled procedure/service that is partially reduced or cancelled as a result of extenuating circumstances or those that threaten the well being of the patient prior to or after administration of anesthesia, see modifiers 73 and 74 (see modifiers approved for ASC hospital outpatient use).\"\n\nfoot_mod &lt;- \"For services other than those with a professional and/or technical component, a blank will appear in this field with one exception: the presence of CPT modifier 53 indicates that separate RVUs and a fee schedule amount have been established for procedures which the physician terminated before completion. This modifier is used only with colonoscopy CPT codes 44388 and 45378, or with G0105 and G0121. Any other codes billed with modifier 53 are subject to carrier medical review and priced by individual consideration.\"\n\nmod_join &lt;- dplyr::tibble(\n  mod = c(\"26\", \"TC\", \"53\"),\n  name = c(\n    \"Professional Component\",\n    \"Technical Component\",\n    \"Discontinued Procedure\"\n  ),\n  description = c(\n    \"Certain procedures are a combination of a physician or other qualified health care professional component and a technical component. When the physician or other qualified health care professional component is reported separately, the service may be identified by adding modifier 26 to the usual procedure number.\",\n    \"Under certain circumstances, a charge may be made for the technical component alone. Under those circumstances the technical component charge is identified by adding modifier TC to the usual procedure number. Technical component charges are institutional charges and not billed separately by physicians; however, portable x-ray suppliers only bill for technical component and should utilize modifier TC. The charge data from portable x-ray suppliers will then be used to build customary and prevailing profiles.\",\n    \"Under certain circumstances, the physician or other qualified health care professional may elect to terminate a surgical or diagnostic procedure. Due to extenuating circumstances or those that threaten the well being of the patient, it may be necessary to indicate that a surgical or diagnostic procedure was started but discontinued. This circumstance may be reported by adding modifier 53 to the code reported by the individual for the discontinued procedure.\"\n  )\n)\n\nrvu24a |&gt; \n  filter(!cheapr::is_na(mod)) |&gt; \n  dplyr::count(mod, sort = TRUE) |&gt; \n  left_join(mod_join) |&gt; \n  gt(rowname_col = \"mod\") |&gt; \n  cols_label(n = \"# of Codes\") |&gt; \n  cols_align(align = \"left\") |&gt; \n  tab_header(\n    title = \"RVU Modifiers\",\n    subtitle = \"For diagnostic tests, a blank in this field denotes the Global Service & the following modifiers identify the components:\") |&gt; \n  tab_footnote(\n    footnote = foot_53,\n    locations = cells_stub(rows = 3)) |&gt; \n  tab_footnote(footnote = foot_mod) |&gt; \n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\nRVU Modifiers\n    \n\nFor diagnostic tests, a blank in this field denotes the Global Service & the following modifiers identify the components:\n    \n\n\n      # of Codes\n      name\n      description\n    \n\n\n\n26\n1096\nProfessional Component\nCertain procedures are a combination of a physician or other qualified health care professional component and a technical component. When the physician or other qualified health care professional component is reported separately, the service may be identified by adding modifier 26 to the usual procedure number.\n\n\nTC\n1076\nTechnical Component\nUnder certain circumstances, a charge may be made for the technical component alone. Under those circumstances the technical component charge is identified by adding modifier TC to the usual procedure number. Technical component charges are institutional charges and not billed separately by physicians; however, portable x-ray suppliers only bill for technical component and should utilize modifier TC. The charge data from portable x-ray suppliers will then be used to build customary and prevailing profiles.\n\n\n531\n\n4\nDiscontinued Procedure\nUnder certain circumstances, the physician or other qualified health care professional may elect to terminate a surgical or diagnostic procedure. Due to extenuating circumstances or those that threaten the well being of the patient, it may be necessary to indicate that a surgical or diagnostic procedure was started but discontinued. This circumstance may be reported by adding modifier 53 to the code reported by the individual for the discontinued procedure.\n\n\n\n\n For services other than those with a professional and/or technical component, a blank will appear in this field with one exception: the presence of CPT modifier 53 indicates that separate RVUs and a fee schedule amount have been established for procedures which the physician terminated before completion. This modifier is used only with colonoscopy CPT codes 44388 and 45378, or with G0105 and G0121. Any other codes billed with modifier 53 are subject to carrier medical review and priced by individual consideration.\n    \n\n\n1 Not used to report the elective cancellation of a procedure prior to the patient's anesthesia induction and/or surgical preparation in the operating suite. For outpatient hospital/ambulatory surgery center (ASC) reporting of a previously scheduled procedure/service that is partially reduced or cancelled as a result of extenuating circumstances or those that threaten the well being of the patient prior to or after administration of anesthesia, see modifiers 73 and 74 (see modifiers approved for ASC hospital outpatient use).\n    \n\n\n\n\n\n\nIndicates whether the code is in the fee schedule and whether it is separately payable if the service is covered. See Attachment A for description of values.\nOnly RVUs associated with status codes of A, R, or T, are used for Medicare payment.\n\nstatus_lookup &lt;- c(\n  \"A\" = \"**Active Code**\",\n  \"B\" = \"**Payment Bundled**\",\n  \"C\" = \"**Carrier Priced**\",\n  \"D\" = \"**Deleted Codes**\",\n  \"E\" = \"**Regulatory Exclusion**\",\n  \"F\" = \"**Deleted/Discontinued Codes**\",\n  \"X\" = \"**Statutory Exclusion**\",\n  \"I\" = \"**Not Valid for Medicare Purposes**\",\n  \"M\" = \"**Measurement Code**\",\n  \"R\" = \"**Restricted Coverage**\",\n  \"N\" = \"**Non-Covered Service**\",\n  \"J\" = \"**Anesthesia Service**\",\n  \"P\" = \"**Bundled/Excluded Code**\",\n  \"T\" = \"**No Other Services Payable**\"\n)\n\nstatus_lookup2 &lt;- c(\n  \"A\" = \"These codes are separately paid under the Physician Fee Schedule if covered. There will be RVUs and payment amounts for codes with this status. The presence of an A indicator does not mean that Medicare has made a National Coverage Determination regarding the service. Carriers remain responsible for coverage decisions in the absence of a national Medicare policy.\",\n  \"X\" = \"These codes represent an item or service that is not in the statutory definition of “physician services” for fee schedule payment purposes. No RVUs or payment amounts are shown for these codes and no payment may be made under the physician fee schedule. Ex: Ambulance services and Clinical Diagnostic Laboratory Services.\",\n  \"I\" = \"Medicare uses another code for reporting of, and payment for, these services. (Code NOT subject to a 90 day grace period.)\",\n  \"E\" = \"These codes are for items and/or services that CMS chose to exclude from the fee schedule payment by regulation. No RVUs or payment amounts are shown and no payment may be made under the fee schedule for these codes. Payment for them, when covered, continues under reasonable charge procedures.\",\n  \"M\" = \"Used for reporting purposes only.\",\n  \"C\" = \"Carriers will establish RVUs and payment amounts for these services, generally on an individual case basis following review of documentation such as an operative report.\",\n  \"R\" = \"Special coverage instructions apply.\",\n  \"N\" = \"These codes are carried on the HCPCS tape as noncovered services.\",\n  \"J\" = \"No relative Status units or payment amounts for anesthesia codes on the database, only used to facilitate the identification of anesthesia services.\",\n  \"P\" = \"There are no RVUs and no payment amounts for these services. No separate payment is made for them under the fee schedule. If the item or service is covered as incident to a physician service and is provided on the same day as a physician service, payment for it is bundled into the payment for the physician service to which it is incident (an example is an elastic bandage furnished by a physician incident to a physician service). If the item or service is covered as other than incident to a physician service, it is excluded from the fee schedule (for example, colostomy supplies) and is paid under the other payment provision of the Act.\",\n  \"B\" = \"Payment for covered services are always bundled into payment for other services not specified: There will be no RVUs or payment amounts for these codes and no separate payment is ever made. When these services are covered, payment for them is subsumed by the payment for the services to which they are incident (an example is a telephone call from a hospital nurse regarding care of a patient).\",\n  \"T\" = \"There are RVUs and payment amounts for these services, but they are only paid if there are no other services payable under the physician fee schedule billed on the same date by the same provider. If any other services payable under the physician fee schedule are billed on the same date by the same provider, these services are bundled into the physician services for which payment is made.\"\n)\n\nrvu24a |&gt; \n  filter(!cheapr::is_na(status_code)) |&gt; \n  count(status_code, sort = TRUE) |&gt; \n  mutate(name = status_lookup[status_code],\n         description = status_lookup2[status_code]) |&gt;  \n  gt(rowname_col = \"status_code\") |&gt; \n  cols_align(align = \"left\") |&gt; \n  cols_label(n = \"# of Codes\") |&gt; \n  fmt_markdown() |&gt; \n  fmt_integer() |&gt; \n  opt_all_caps() |&gt;\n  tab_style(\n    style = cell_fill(\n      color = \"tan\", \n      alpha = 0.3),\n    locations = cells_body(\n      columns = everything(),\n      rows = c(1, 7, 12))) |&gt; \n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\n      # of Codes\n      name\n      description\n    \n\n\nA\n8,975\nActive Code\nThese codes are separately paid under the Physician Fee Schedule if covered. There will be RVUs and payment amounts for codes with this status. The presence of an A indicator does not mean that Medicare has made a National Coverage Determination regarding the service. Carriers remain responsible for coverage decisions in the absence of a national Medicare policy.\n\n\nX\n2,527\nAnesthesia Service\nThere are RVUs and payment amounts for these services, but they are only paid if there are no other services payable under the physician fee schedule billed on the same date by the same provider. If any other services payable under the physician fee schedule are billed on the same date by the same provider, these services are bundled into the physician services for which payment is made.\n\n\nI\n1,411\nRegulatory Exclusion\nUsed for reporting purposes only.\n\n\nE\n1,343\nDeleted Codes\nThese codes are for items and/or services that CMS chose to exclude from the fee schedule payment by regulation. No RVUs or payment amounts are shown and no payment may be made under the fee schedule for these codes. Payment for them, when covered, continues under reasonable charge procedures.\n\n\nM\n1,201\nStatutory Exclusion\nSpecial coverage instructions apply.\n\n\nC\n1,156\nCarrier Priced\nMedicare uses another code for reporting of, and payment for, these services. (Code NOT subject to a 90 day grace period.)\n\n\nR\n1,050\nRestricted Coverage\nThere are no RVUs and no payment amounts for these services. No separate payment is made for them under the fee schedule. If the item or service is covered as incident to a physician service and is provided on the same day as a physician service, payment for it is bundled into the payment for the physician service to which it is incident (an example is an elastic bandage furnished by a physician incident to a physician service). If the item or service is covered as other than incident to a physician service, it is excluded from the fee schedule (for example, colostomy supplies) and is paid under the other payment provision of the Act.\n\n\nN\n327\nNot Valid for Medicare Purposes\nThese codes are carried on the HCPCS tape as noncovered services.\n\n\nJ\n276\nDeleted/Discontinued Codes\nCarriers will establish RVUs and payment amounts for these services, generally on an individual case basis following review of documentation such as an operative report.\n\n\nP\n142\nMeasurement Code\nNo relative Status units or payment amounts for anesthesia codes on the database, only used to facilitate the identification of anesthesia services.\n\n\nB\n83\nPayment Bundled\nThese codes represent an item or service that is not in the statutory definition of “physician services” for fee schedule payment purposes. No RVUs or payment amounts are shown for these codes and no payment may be made under the physician fee schedule. Ex: Ambulance services and Clinical Diagnostic Laboratory Services.\n\n\nT\n8\nNon-Covered Service\nPayment for covered services are always bundled into payment for other services not specified: There will be no RVUs or payment amounts for these codes and no separate payment is ever made. When these services are covered, payment for them is subsumed by the payment for the services to which they are incident (an example is a telephone call from a hospital nurse regarding care of a patient).\n\n\n\n\n\n\n\n\npctc_lookup &lt;- c(\n  \"0\" = \"**Physician Services**\",\n  \"1\" = \"**Diagnostic Tests for Radiology Services**\",\n  \"2\" = \"**Professional Component Only**\",\n  \"3\" = \"**Technical Component Only**\",\n  \"4\" = \"**Global Test Only**\",\n  \"5\" = \"**Incident To**\",\n  \"6\" = \"**Laboratory Physician Interpretation**\",\n  \"7\" = \"**Physical Therapy Service**\",\n  \"8\" = \"**Physician Interpretation**\",\n  \"9\" = \"**Not Applicable**\"\n)\n\npctc_lookup2 &lt;- c(\n  \"0\" = \"Modifiers 26 and TC &lt;b&gt;&lt;u&gt;cannot&lt;/u&gt;&lt;/b&gt; be used since Physician Services cannot be split into Professional and Technical components.&lt;br&gt;&lt;br&gt;Examples: Visits, Consultations, Surgical Procedures.&lt;br&gt;&lt;br&gt;RVU Components: **PW**, **PE**, **MP**.\",\n  \n  \"1\" = \"Modifiers 26 and TC &lt;b&gt;&lt;u&gt;can&lt;/u&gt;&lt;/b&gt; be used with these codes.&lt;br&gt;&lt;br&gt;Examples: Pulmonary Function Tests, Therapeutic Radiology Procedures, e.g., Radiation Therapy.&lt;br&gt;&lt;br&gt;These codes have both a Professional and Technical component.&lt;br&gt;&lt;br&gt;Total RVUs for codes reported with a 26 modifier include values for physician work, practice expense, and malpractice expense.&lt;br&gt;&lt;br&gt;Total RVUs for codes reported with a TC modifier include values for practice expense and malpractice expense only.&lt;br&gt;&lt;br&gt;Total RVUs for codes reported without a modifier include values for physician work, practice expense, and malpractice expense.\",\n  \n  \"2\" = \"Modifiers 26 and TC &lt;b&gt;&lt;u&gt;cannot&lt;/u&gt;&lt;/b&gt; be used with these codes.&lt;br&gt;&lt;br&gt;Stand-alone codes that describe the physician work portion of selected diagnostic tests for which there is an associated code that describes the technical component of the diagnostic test only and another associated code that describes the global test.&lt;br&gt;&lt;br&gt;Example Code: **93010**: *Electrocardiogram; Interpretation and Report.*&lt;br&gt;&lt;br&gt;RVU Components: **PW**, **PE**, **MP**.\",\n  \n  \"3\" = \"Modifiers 26 and TC &lt;b&gt;&lt;u&gt;cannot&lt;/u&gt;&lt;/b&gt; be used with these codes.&lt;br&gt;&lt;br&gt;Stand-alone codes that describe the technical component (i.e., staff and equipment costs) of selected diagnostic tests for which there is an associated code that describes the professional component of the diagnostic test only. Also identifies codes that are covered only as diagnostic tests and therefore do not have a related professional \ncode.&lt;br&gt;&lt;br&gt;Example Code: **93005** *Electrocardiogram; Tracing Only, without interpretation and report*.&lt;br&gt;&lt;br&gt;RVU Components: **PE** and **MP** only.\",\n\n  \"4\" = \"Modifiers 26 and TC &lt;b&gt;&lt;u&gt;cannot&lt;/u&gt;&lt;/b&gt; be used with these codes.&lt;br&gt;&lt;br&gt;Stand-alone codes that describe selected diagnostic tests for which there are associated codes that describe *(a)* the professional component of the test only, and *(b)* the technical component of the test only.&lt;br&gt;&lt;br&gt;RVU Components: **PW**, **PE**, **MP**.&lt;br&gt;&lt;br&gt;Total RVUs = Sum of the total RVUs for the professional and technical components only codes combined.\",\n\n  \"5\" = \"Modifiers 26 and TC &lt;b&gt;&lt;u&gt;cannot&lt;/u&gt;&lt;/b&gt; be used with these codes.&lt;br&gt;&lt;br&gt;Services covered &lt;b&gt;&lt;u&gt;incident to&lt;/u&gt;&lt;/b&gt; a physician's service when they are provided by auxiliary personnel employed by the physician and working under his or her direct personal supervision.&lt;br&gt;&lt;br&gt;Payment may not be made by carriers for these services when they are provided to hospital inpatients or patients in a hospital outpatient department.\",\n\n  \"6\" = \"Modifier TC &lt;b&gt;&lt;u&gt;cannot&lt;/u&gt;&lt;/b&gt; be used with these codes.&lt;br&gt;&lt;br&gt;Clinical laboratory codes for which separate payment for interpretations by laboratory physicians may be made. Actual performance of the tests is paid for under the lab fee schedule. &lt;br&gt;&lt;br&gt;RVU Components: **PW**, **PE**, **MP**.\",\n\n  \"7\" = \"Payment may not be made if the service is provided to either a patient in a hospital outpatient department or to an inpatient of the hospital by an independently practicing physical or occupational therapist.\",\n\n  \"8\" = \"Identifies the professional component of clinical laboratory codes for which separate payment may be made only if the physician interprets an abnormal smear for hospital inpatient. This applies to CPT codes 88141, 85060 and HCPCS code P3001-26. No TC billing is recognized because payment for the underlying clinical laboratory test is made to the hospital, generally through the PPS rate. No payment is recognized for CPT codes 88141, 85060 or HCPCS code P3001-26 furnished to hospital outpatients or non-hospital patients. The physician interpretation is paid through the clinical laboratory fee schedule payment for the clinical laboratory test.\",\n\n  \"9\" = \"Concept of a professional/technical component does not apply.\")\n\nrvu24a |&gt; \n  filter(!is.na(pctc_ind)) |&gt; \n  count(pctc_ind) |&gt; \n  mutate(\n    category = pctc_lookup[pctc_ind],\n    description = pctc_lookup2[pctc_ind]) |&gt; \n  gt(rowname_col = \"pctc_ind\") |&gt; \n  cols_align(align = \"left\") |&gt; \n  cols_label(n = \"# of Codes\") |&gt; \n  fmt_markdown() |&gt; \n  fmt_integer() |&gt; \n  opt_all_caps() |&gt;\n  opt_row_striping() |&gt; \n  tab_style(\n    style = list(\n      cell_text(align = \"center\", \n                size = px(18), \n                color = \"black\")),\n    locations = cells_stub()) |&gt; \n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", \n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", \n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\n      # of Codes\n      category\n      description\n    \n\n\n0\n7,128\nPhysician Services\nModifiers 26 and TC cannot be used since Physician Services cannot be split into Professional and Technical components.Examples: Visits, Consultations, Surgical Procedures.RVU Components: PW, PE, MP.\n\n\n1\n3,229\nDiagnostic Tests for Radiology Services\nModifiers 26 and TC can be used with these codes.Examples: Pulmonary Function Tests, Therapeutic Radiology Procedures, e.g., Radiation Therapy.These codes have both a Professional and Technical component.Total RVUs for codes reported with a 26 modifier include values for physician work, practice expense, and malpractice expense.Total RVUs for codes reported with a TC modifier include values for practice expense and malpractice expense only.Total RVUs for codes reported without a modifier include values for physician work, practice expense, and malpractice expense.\n\n\n2\n44\nProfessional Component Only\nModifiers 26 and TC cannot be used with these codes.Stand-alone codes that describe the physician work portion of selected diagnostic tests for which there is an associated code that describes the technical component of the diagnostic test only and another associated code that describes the global test.Example Code: 93010: Electrocardiogram; Interpretation and Report.RVU Components: PW, PE, MP.\n\n\n3\n178\nTechnical Component Only\nModifiers 26 and TC cannot be used with these codes.Stand-alone codes that describe the technical component (i.e., staff and equipment costs) of selected diagnostic tests for which there is an associated code that describes the professional component of the diagnostic test only. Also identifies codes that are covered only as diagnostic tests and therefore do not have a related professional\ncode.Example Code: 93005 Electrocardiogram; Tracing Only, without interpretation and report.RVU Components: PE and MP only.\n\n\n4\n17\nGlobal Test Only\nModifiers 26 and TC cannot be used with these codes.Stand-alone codes that describe selected diagnostic tests for which there are associated codes that describe (a) the professional component of the test only, and (b) the technical component of the test only.RVU Components: PW, PE, MP.Total RVUs = Sum of the total RVUs for the professional and technical components only codes combined.\n\n\n5\n104\nIncident To\nModifiers 26 and TC cannot be used with these codes.Services covered incident to a physician’s service when they are provided by auxiliary personnel employed by the physician and working under his or her direct personal supervision.Payment may not be made by carriers for these services when they are provided to hospital inpatients or patients in a hospital outpatient department.\n\n\n6\n20\nLaboratory Physician Interpretation\nModifier TC cannot be used with these codes.Clinical laboratory codes for which separate payment for interpretations by laboratory physicians may be made. Actual performance of the tests is paid for under the lab fee schedule. RVU Components: PW, PE, MP.\n\n\n7\n74\nPhysical Therapy Service\nPayment may not be made if the service is provided to either a patient in a hospital outpatient department or to an inpatient of the hospital by an independently practicing physical or occupational therapist.\n\n\n8\n1\nPhysician Interpretation\nIdentifies the professional component of clinical laboratory codes for which separate payment may be made only if the physician interprets an abnormal smear for hospital inpatient. This applies to CPT codes 88141, 85060 and HCPCS code P3001-26. No TC billing is recognized because payment for the underlying clinical laboratory test is made to the hospital, generally through the PPS rate. No payment is recognized for CPT codes 88141, 85060 or HCPCS code P3001-26 furnished to hospital outpatients or non-hospital patients. The physician interpretation is paid through the clinical laboratory fee schedule payment for the clinical laboratory test.\n\n\n9\n7,704\nNot Applicable\nConcept of a professional/technical component does not apply.\n\n\n\n\n\n\n\nProvides time frames that apply to each surgical procedure.\n\nglob_join &lt;- dplyr::tibble(\n  glob_days = c(\"000\", \"010\", \"090\", \"MMM\", \"XXX\", \"YYY\", \"ZZZ\"),\n  description = c(\n    \"Endoscopic or minor procedure with related preoperative and postoperative relative values on the day of the procedure only included in the fee schedule payment amount&lt;br&gt;&lt;br&gt;Evaluation and Management services on the day of the procedure generally not payable.\",\n    \"Minor procedure with preoperative relative values on the day of the procedure and postoperative relative values during a 10-day postoperative period included in the fee schedule amount&lt;br&gt;&lt;br&gt;Evaluation and Management services on the day of the procedure and during the 10-day postoperative period generally not payable.\",\n    \"Major surgery with a 1-day preoperative period and 90-day postoperative period included in the fee schedule amount.\",\n    \"Maternity codes; usual global period does not apply.\",\n    \"Global concept does not apply.\",\n    \"Carrier determines whether the global concept applies and establishes postoperative period, if appropriate, at time of pricing.\",\n    \"Code is related to another service and is always included in the global period of the other service.\"))\n\nrvu24a |&gt; \n  filter(!is.na(glob_days)) |&gt;\n  count(glob_days, sort = TRUE) |&gt; \n  left_join(glob_join) |&gt; \n  gt(rowname_col = \"glob_days\") |&gt; \n  fmt_markdown() |&gt; \n  fmt_integer() |&gt; \n  cols_align(align = \"left\") |&gt; \n  cols_label(n = \"# of Codes\") |&gt; \n  opt_all_caps() |&gt;\n  tab_style(\n    style = cell_text(align = \"center\", \n                      size = px(16)),\n    locations = cells_stub()) |&gt; \n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\n      # of Codes\n      description\n    \n\n\nXXX\n11,262\nGlobal concept does not apply.\n\n\n090\n3,771\nMajor surgery with a 1-day preoperative period and 90-day postoperative period included in the fee schedule amount.\n\n\n000\n1,326\nEndoscopic or minor procedure with related preoperative and postoperative relative values on the day of the procedure only included in the fee schedule payment amountEvaluation and Management services on the day of the procedure generally not payable.\n\n\nYYY\n933\nCarrier determines whether the global concept applies and establishes postoperative period, if appropriate, at time of pricing.\n\n\nZZZ\n719\nCode is related to another service and is always included in the global period of the other service.\n\n\n010\n471\nMinor procedure with preoperative relative values on the day of the procedure and postoperative relative values during a 10-day postoperative period included in the fee schedule amountEvaluation and Management services on the day of the procedure and during the 10-day postoperative period generally not payable.\n\n\nMMM\n17\nMaternity codes; usual global period does not apply.\n\n\n\n\n\n\n\n\n\nPreoperative\nIntraoperative\nPostoperative\n\n\n\n\nrvu24a |&gt;\n  filter(!is.na(pre_op), pre_op &gt; 0.00) |&gt; \n  count(pre_op, sort = TRUE) |&gt; \n  gt() |&gt; \n  cols_label(pre_op = \"Percentage\",\n             n = \"# of HCPCS\") |&gt; \n  fmt_percent(columns = pre_op, \n              drop_trailing_zeros = TRUE) |&gt; \n  fmt_integer(columns = n) |&gt; \n  tab_header(title = md(\"Global **Preoperative** Percentages\")) |&gt; \n  opt_all_caps() |&gt;\n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\nGlobal Preoperative Percentages\n    \n\nPercentage\n      # of HCPCS\n    \n\n\n\n10%\n2,483\n\n\n9%\n984\n\n\n11%\n361\n\n\n8%\n181\n\n\n12%\n133\n\n\n7%\n69\n\n\n17%\n19\n\n\n\n\n\n\n\n\n\nrvu24a |&gt;\n  filter(!is.na(intra_op), intra_op &gt; 0.00) |&gt; \n  count(intra_op, sort = TRUE) |&gt; \n  gt() |&gt; \n  cols_label(intra_op = \"Percentage\",\n             n = \"# of HCPCS\") |&gt; \n  fmt_percent(columns = intra_op, \n              drop_trailing_zeros = TRUE) |&gt; \n  fmt_integer(columns = n) |&gt; \n  tab_header(\n    title = md(\"Global **Intraoperative** Percentages\"),\n    subtitle = md(\"*Includes Postoperative Work in the Hospital*\")\n    ) |&gt; \n  opt_all_caps() |&gt;\n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\nGlobal Intraoperative Percentages\n    \n\nIncludes Postoperative Work in the Hospital\n    \n\nPercentage\n      # of HCPCS\n    \n\n\n\n69%\n1,408\n\n\n80%\n587\n\n\n81%\n487\n\n\n76%\n482\n\n\n84%\n469\n\n\n70%\n200\n\n\n83%\n181\n\n\n71%\n140\n\n\n74%\n133\n\n\n79%\n69\n\n\n82%\n28\n\n\n73%\n27\n\n\n60%\n19\n\n\n\n\n\n\n\n\n\nrvu24a |&gt;\n  filter(!is.na(post_op), post_op &gt; 0.00) |&gt; \n  count(post_op, sort = TRUE) |&gt; \n  gt() |&gt; \n  cols_label(post_op = \"Percentage\",\n             n = \"# of HCPCS\") |&gt; \n  fmt_percent(columns = post_op, \n              drop_trailing_zeros = TRUE) |&gt; \n  fmt_integer(columns = n) |&gt; \n  tab_header(\n    title = md(\"Global **Postoperative** Percentages\"),\n    subtitle = md(\"*Provided in the office after discharge from the hospital*\")) |&gt; \n  opt_all_caps() |&gt;\n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\nGlobal Postoperative Percentages\n    \n\nProvided in the office after discharge from the hospital\n    \n\nPercentage\n      # of HCPCS\n    \n\n\n\n21%\n1,408\n\n\n10%\n1,074\n\n\n7%\n469\n\n\n14%\n350\n\n\n13%\n334\n\n\n9%\n209\n\n\n20%\n200\n\n\n19%\n140\n\n\n16%\n27\n\n\n23%\n19\n\n\n\n\n\n\n\n\n\n\n\nTODO\n\n\nFacility\nNon-Facility\n\n\n\nAn NA in this field indicates that this procedure is rarely or never performed in the Facility setting:\n\nrvu24a |&gt; \n  filter(!is.na(facility_indicator)) |&gt;\n  cheapr::overview()\n\nobs: 2468 \ncols: 31 \n\n----- Numeric -----\n              col  class n_missng p_complt n_unique   mean   p0   p25   p50\n1        work_rvu numerc        0        1      242   0.42    0     0     0\n2  non_fac_pe_rvu numerc        0        1      818   3.21    0  0.39  1.57\n3  facility_pe_rv numerc        0        1      818   3.21    0  0.38  1.56\n4          mp_rvu numerc        0        1       54  0.044    0  0.01  0.02\n5  non_faclty_ttl numerc        0        1      884   3.67    0  0.49  2.04\n6  facility_total numerc        0        1      884   3.67    0  0.49  2.04\n7          pre_op numerc        0        1        1      0    0     0     0\n8        intra_op numerc        0        1        1      0    0     0     0\n9         post_op numerc        0        1        1      0    0     0     0\n10    conv_factor numerc        0        1        1  32.74 32.7 32.74 32.74\n11 nn_fclty______ numerc        0        1      417   6.72    0     0     0\n12 fclty_p_sd____ numerc        0        1      417   6.72    0     0     0\n13 mp_sd_fr_pps__ numerc        0        1       81  0.054    0     0     0\n     p75   p100  iqr       sd  hist\n1   0.55   8.78 0.55 8.50e-01 ▇▁▁▁▁\n2    4.2  53.07 3.81     4.91 ▇▁▁▁▁\n3    4.2  53.07 3.82     4.91 ▇▁▁▁▁\n4   0.05   1.56 0.04 9.70e-02 ▇▁▁▁▁\n5   4.78  55.36 4.29     5.38 ▇▁▁▁▁\n6   4.78  55.36 4.29     5.38 ▇▁▁▁▁\n7      0      0    0     0.00 ▁▁▇▁▁\n8      0      0    0     0.00 ▁▁▇▁▁\n9      0      0    0     0.00 ▁▁▇▁▁\n10 32.74  32.74    0 1.20e-13 ▁▁▇▁▁\n11  5.32 159.54 5.32 1.85e+01 ▇▁▁▁▁\n12  5.32 159.54 5.32 1.85e+01 ▇▁▁▁▁\n13  0.05   1.83 0.05 1.60e-01 ▇▁▁▁▁\n\n----- Categorical -----\n              col  class n_missng p_complt n_unique n_levels\n1           hcpcs chrctr        0        1     1402       NA\n2             mod factor     1402     0.43        1        3\n3     description chrctr        0        1     1290       NA\n4     status_code factor        0        1        8       12\n5  nt_sd_fr_mdcr_ chrctr     2439    0.012        1       NA\n6  non_fac_indctr chrctr     2464   0.0016        1       NA\n7  facility_ndctr chrctr        0        1        1       NA\n8        pctc_ind factor        0        1        8       10\n9       glob_days factor        0        1        5        7\n10      mult_proc factor        0        1        7        8\n11     bilat_surg factor        0        1        5        5\n12      asst_surg factor        0        1        4        4\n13        co_surg factor        0        1        3        4\n14      team_surg factor        0        1        2        4\n15      endo_base chrctr     2468        0        0       NA\n16 physcn_sprv___ factor        0        1        9       10\n17 calculatin_flg chrctr        0        1        1       NA\n18 dgnstc_mgng_f_ factor        0        1        2        2\n                     min                         max\n1                  0075T                       Q0035\n2                     TC                          TC\n3  2d cephal radio image Xray place prox ext thor ao\n4                      A                           X\n5                      +                           +\n6                     NA                          NA\n7                     NA                          NA\n8                      0                           9\n9                    000                         ZZZ\n10                     0                           9\n11                     0                           9\n12                     0                           9\n13                     0                           9\n14                     0                           9\n15                  &lt;NA&gt;                        &lt;NA&gt;\n16                    01                          7A\n17                     0                           0\n18                    88                          99\n\n\n\n\nAn NA in this field indicates that this procedure is rarely or never performed in the Non-Facility setting:\n\nrvu24a |&gt; \n  filter(!is.na(non_fac_indicator)) |&gt;\n  cheapr::overview()\n\nobs: 4066 \ncols: 31 \n\n----- Numeric -----\n              col  class n_missng p_complt n_unique  mean   p0   p25   p50\n1        work_rvu numerc        0        1     2238  15.4    0  6.95 12.11\n2  non_fac_pe_rvu numerc        0        1     1884 10.39    0  5.77   9.5\n3  facility_pe_rv numerc        0        1     1884 10.39    0  5.77   9.5\n4          mp_rvu numerc        0        1     1025  3.48    0   1.2   2.2\n5  non_faclty_ttl numerc        0        1     2957 29.27    0 14.92  24.5\n6  facility_total numerc        0        1     2957 29.27    0 14.92  24.5\n7          pre_op numerc        0        1        8  0.08    0  0.09   0.1\n8        intra_op numerc        0        1       14  0.62    0  0.69  0.71\n9         post_op numerc        0        1       11  0.12    0  0.07   0.1\n10    conv_factor numerc        0        1        1 32.74 32.7 32.74 32.74\n11 nn_fclty______ numerc        0        1        1     0    0     0     0\n12 fclty_p_sd____ numerc        0        1        1     0    0     0     0\n13 mp_sd_fr_pps__ numerc        0        1        1     0    0     0     0\n     p75   p100   iqr       sd  hist\n1  20.57 108.91 13.62 1.22e+01 ▇▂▁▁▁\n2  13.58  48.63  7.81     6.95 ▇▆▁▁▁\n3  13.58  48.63  7.81     6.95 ▇▆▁▁▁\n4   4.57  28.99  3.37     3.58 ▇▂▁▁▁\n5  38.16    171 23.24 2.13e+01 ▇▃▁▁▁\n6  38.16    171 23.24 2.13e+01 ▇▃▁▁▁\n7    0.1   0.17  0.01 3.90e-02 ▂▁▇▂▁\n8   0.81   0.84  0.12 3.00e-01 ▂▁▁▁▇\n9   0.21   0.23  0.14 7.50e-02 ▅▅▆▂▇\n10 32.74  32.74     0 3.10e-13 ▁▁▇▁▁\n11     0      0     0     0.00 ▁▁▇▁▁\n12     0      0     0     0.00 ▁▁▇▁▁\n13     0      0     0     0.00 ▁▁▇▁▁\n\n----- Categorical -----\n              col  class n_missng p_complt n_unique n_levels\n1           hcpcs chrctr        0        1     4064       NA\n2             mod factor     4064  0.00049        1        3\n3     description chrctr        0        1     3019       NA\n4     status_code factor        0        1        7       12\n5  nt_sd_fr_mdcr_ chrctr     4039   0.0066        1       NA\n6  non_fac_indctr chrctr        0        1        1       NA\n7  facility_ndctr chrctr     4062  0.00098        1       NA\n8        pctc_ind factor        0        1        6       10\n9       glob_days factor        0        1        6        7\n10      mult_proc factor        0        1        4        8\n11     bilat_surg factor        0        1        4        5\n12      asst_surg factor        0        1        4        4\n13        co_surg factor        0        1        4        4\n14      team_surg factor        0        1        4        4\n15      endo_base chrctr     3850    0.053       30       NA\n16 physcn_sprv___ factor        0        1        2       10\n17 calculatin_flg chrctr        0        1        1       NA\n18 dgnstc_mgng_f_ factor        0        1        1        2\n                       min                          max\n1                    11004                        G9157\n2                       TC                           TC\n3  1st hosp ip/obs high 75 Xcpsl ctrc rmvl cplx insj 1+\n4                        A                            X\n5                        +                            +\n6                       NA                           NA\n7                       NA                           NA\n8                        0                            9\n9                      000                          ZZZ\n10                       0                            9\n11                       0                            9\n12                       0                            9\n13                       0                            9\n14                       0                            9\n15                   29805                        66710\n16                      03                           09\n17                       0                            0\n18                      99                           99\n\n\n\n\n\n\nIndicates applicable payment adjustment rule for multiple procedures (modifier 51).\n\nmult_pro_lookup &lt;- c(\n  \"0\" = \"No payment adjustment rules.&lt;br&gt;&lt;br&gt;If the procedure is reported on the same day as another procedure, base the payment on the lower of (a) the actual charge, or (b) the fee schedule amount for the procedure.\",\n  \"1\" = \"Standard payment adjustment rules.&lt;br&gt;&lt;br&gt;If the procedure is reported on the same day as another procedure that has an indicator of 1, 2 or 3, rank the procedures by fee schedule amount and apply the appropriate reduction to this code (100%, 50%, 25%, 25%, 25%, and by report).&lt;br&gt;&lt;br&gt;Base the payment on the lower of (a) the actual charge, or (b) the fee schedule amount reduced by the appropriate percentage.\",\n  \"2\" = \"Standard payment adjustment rules.&lt;br&gt;&lt;br&gt;If the procedure is reported on the same day as another procedure with an indicator of 1, 2 or 3, rank the procedures by fee schedule amount and apply the appropriate reduction to this code (100%, 50%, 50%, 50%, 50% and by report).&lt;br&gt;&lt;br&gt;Base the payment on the lower of (a) the actual charge, or (b) the fee schedule amount reduced by the appropriate percentage.\",\n  \"3\" = \"Special rules for Multiple Endoscopic Procedures apply if procedure is billed with another endoscopy in the same family (i.e., another endoscopy that has the same base procedure).&lt;br&gt;&lt;br&gt;The base procedure for each code with this indicator is identified in the Endobase field.&lt;br&gt;&lt;br&gt;Apply the multiple endoscopy rules to a family before ranking the family with the other procedures performed on the same day.&lt;br&gt;&lt;br&gt;&lt;b&gt;Example:&lt;/b&gt; Multiple endoscopies in the same family are reported on the same day as endoscopies in another family or on the same day as a non-endoscopic procedure.&lt;br&gt;&lt;br&gt;If an endoscopic procedure is reported with only its base procedure, do not pay separately for the base procedure. Payment for the base procedure is included in the payment for the other endoscopy.\",\n  \"4\" = \"Special rules for the technical component (TC) of diagnostic imaging procedures apply if procedure is billed with another diagnostic imaging procedure in the same family (per the diagnostic imaging family indicator).&lt;br&gt;&lt;br&gt;If the procedure is reported in the same session on the same day as another procedure with the same family indicator, rank the procedures by fee schedule amount for the TC. Pay 100% for the highest priced procedure, and 50% for each subsequent procedure. Base the payment for subsequent procedures on the lower of (a) the actual charge, or (b) the fee schedule amount reduced by the appropriate percentage.&lt;br&gt;&lt;br&gt;Subject to 50% reduction of the TC diagnostic imaging. Subject to 5% reduction of the PC of diagnostic imaging.\",\n  \"5\" = \"Subject to 50% of the practice expense component for certain therapy services.\",\n  \"6\" = \"Subject to 25% reduction of the second highest and subsequent procedures to the TC of diagnostic cardiovascular services.\",\n  \"7\" = \"Subject to 20% reduction of the second highest and subsequent procedures to the TC of diagnostic ophthalmology services.\",\n  \"9\" = \"Missing\"\n)\n\nrvu24a |&gt; \n  count(mult_proc) |&gt; \n  filter(!is.na(mult_proc)) |&gt; \n  mutate(description = mult_pro_lookup[mult_proc]) |&gt; \n  gt(rowname_col = \"mult_proc\") |&gt;\n  fmt_markdown() |&gt; \n  fmt_integer() |&gt; \n  tab_style(\n    style = cell_text(align = \"center\", size = px(18)),\n    locations = cells_stub()\n  ) |&gt; \n  cols_align(align = \"left\") |&gt; \n  cols_label(n = \"# of Codes\") |&gt; \n  opt_all_caps() |&gt;\n  gt::tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = gt::px(20),\n    column_labels.padding.horizontal = gt::px(20),\n    table.border.top.color = \"#555555\",\n    table.width = gt::pct(100))\n\n\n\n\n\n\n      # of Codes\n      description\n    \n\n\n0\n4,044\nNo payment adjustment rules.If the procedure is reported on the same day as another procedure, base the payment on the lower of (a) the actual charge, or (b) the fee schedule amount for the procedure.\n\n\n2\n5,287\nStandard payment adjustment rules.If the procedure is reported on the same day as another procedure that has an indicator of 1, 2 or 3, rank the procedures by fee schedule amount and apply the appropriate reduction to this code (100%, 50%, 25%, 25%, 25%, and by report).Base the payment on the lower of (a) the actual charge, or (b) the fee schedule amount reduced by the appropriate percentage.\n\n\n3\n361\nStandard payment adjustment rules.If the procedure is reported on the same day as another procedure with an indicator of 1, 2 or 3, rank the procedures by fee schedule amount and apply the appropriate reduction to this code (100%, 50%, 50%, 50%, 50% and by report).Base the payment on the lower of (a) the actual charge, or (b) the fee schedule amount reduced by the appropriate percentage.\n\n\n4\n420\nSpecial rules for Multiple Endoscopic Procedures apply if procedure is billed with another endoscopy in the same family (i.e., another endoscopy that has the same base procedure).The base procedure for each code with this indicator is identified in the Endobase field.Apply the multiple endoscopy rules to a family before ranking the family with the other procedures performed on the same day.Example: Multiple endoscopies in the same family are reported on the same day as endoscopies in another family or on the same day as a non-endoscopic procedure.If an endoscopic procedure is reported with only its base procedure, do not pay separately for the base procedure. Payment for the base procedure is included in the payment for the other endoscopy.\n\n\n5\n52\nSpecial rules for the technical component (TC) of diagnostic imaging procedures apply if procedure is billed with another diagnostic imaging procedure in the same family (per the diagnostic imaging family indicator).If the procedure is reported in the same session on the same day as another procedure with the same family indicator, rank the procedures by fee schedule amount for the TC. Pay 100% for the highest priced procedure, and 50% for each subsequent procedure. Base the payment for subsequent procedures on the lower of (a) the actual charge, or (b) the fee schedule amount reduced by the appropriate percentage.Subject to 50% reduction of the TC diagnostic imaging. Subject to 5% reduction of the PC of diagnostic imaging.\n\n\n6\n361\nSubject to 50% of the practice expense component for certain therapy services.\n\n\n7\n98\nSubject to 25% reduction of the second highest and subsequent procedures to the TC of diagnostic cardiovascular services.\n\n\n9\n7,876\nSubject to 20% reduction of the second highest and subsequent procedures to the TC of diagnostic ophthalmology services."
  },
  {
    "objectID": "posts/mpfs/mpfs.html#rvu",
    "href": "posts/mpfs/mpfs.html#rvu",
    "title": "arkrvu: Medicare Physician Fee Schedule",
    "section": "",
    "text": "The pdf labeled “RVU” is a comprehensive guide to the structure and contents of each file in the Relative Value zip file. It describes the methodology, that contains a data dictionary, record layout, and documentation\n\nrvu24a &lt;- arkrvu::get_source(\n  year = 2024, \n  source = \"pprrvu\")$rvu24a_jan |&gt; \n  dplyr::mutate(\n    mod = cheapr::factor_(mod),\n    description = fuimus:::remove_quotes(description),\n    status_code = cheapr::factor_(status_code),\n    pctc_ind = cheapr::factor_(pctc_ind),\n    glob_days = cheapr::factor_(glob_days),\n    mult_proc = cheapr::factor_(mult_proc),\n    bilat_surg = cheapr::factor_(bilat_surg),\n    asst_surg = cheapr::factor_(asst_surg),\n    co_surg = cheapr::factor_(co_surg),\n    team_surg = cheapr::factor_(team_surg),\n    physician_supervision_of_diagnostic_procedures = cheapr::factor_(physician_supervision_of_diagnostic_procedures),\n    diagnostic_imaging_family_indicator = cheapr::factor_(diagnostic_imaging_family_indicator))\n\nover &lt;- cheapr::overview(rvu24a, hist = TRUE)\n\nhcpcs_row &lt;- over$categorical |&gt; \n  dplyr::select(variable = col, value = n_unique) |&gt; \n  dplyr::filter(variable == \"hcpcs\")\n\nover\n\nobs: 18499 \ncols: 31 \n\n----- Numeric -----\n              col  class n_missng p_complt n_unique    mean   p0  p25  p50\n1        work_rvu numerc        0        1     2486    3.88    0    0    0\n2  non_fac_pe_rvu numerc        0        1     2310    4.01    0    0    0\n3  facility_pe_rv numerc        0        1     2079    3.03    0    0    0\n4          mp_rvu numerc        0        1     1026    0.83    0    0    0\n5  non_faclty_ttl numerc        0        1     3877    8.71    0    0    0\n6  facility_total numerc        0        1     3683    7.74    0    0    0\n7          pre_op numerc        0        1        8   0.022    0    0    0\n8        intra_op numerc        0        1       14    0.17    0    0    0\n9         post_op numerc        0        1       11   0.034    0    0    0\n10    conv_factor numerc        0        1        1   32.74 32.7 32.7 32.7\n11 nn_fclty______ numerc        0        1      417     0.9    0    0    0\n12 fclty_p_sd____ numerc        0        1      417     0.9    0    0    0\n13 mp_sd_fr_pps__ numerc        0        1       81  0.0072    0    0    0\n     p75   p100  iqr       sd  hist\n1   3.21 108.91 3.21     8.51 ▇▁▁▁▁\n2   5.35 355.87 5.35 1.05e+01 ▇▁▁▁▁\n3   3.66  53.07 3.66     5.60 ▇▁▁▁▁\n4   0.43  28.99 0.43     2.20 ▇▁▁▁▁\n5   9.79 364.53 9.79 1.81e+01 ▇▁▁▁▁\n6    7.5    171  7.5 1.56e+01 ▇▁▁▁▁\n7      0   0.17    0 4.10e-02 ▇▁▂▁▁\n8      0   0.84    0 3.20e-01 ▇▁▁▁▂\n9      0   0.23    0 6.70e-02 ▇▁▁▁▁\n10 32.74  32.74    0 1.10e-12 ▁▁▇▁▁\n11     0 159.54    0     7.15 ▇▁▁▁▁\n12     0 159.54    0     7.15 ▇▁▁▁▁\n13     0   1.83    0 6.10e-02 ▇▁▁▁▁\n\n----- Categorical -----\n              col  class n_missng p_complt n_unique n_levels               min\n1           hcpcs chrctr        0        1    16324       NA             0001F\n2             mod factor    16323     0.12        3        3                26\n3     description chrctr        1        1    14376       NA 1 bod temp &gt;=35.5\n4     status_code factor        0        1       12       12                 A\n5  nt_sd_fr_mdcr_ chrctr    18366   0.0072        1       NA                 +\n6  non_fac_indctr chrctr    14433     0.22        1       NA                NA\n7  facility_ndctr chrctr    16031     0.13        1       NA                NA\n8        pctc_ind factor        0        1       10       10                 0\n9       glob_days factor        0        1        7        7               000\n10      mult_proc factor        0        1        8        8                 0\n11     bilat_surg factor        0        1        5        5                 0\n12      asst_surg factor        0        1        4        4                 0\n13        co_surg factor        0        1        4        4                 0\n14      team_surg factor        0        1        4        4                 0\n15      endo_base chrctr    18138     0.02       36       NA             0652T\n16 physcn_sprv___ factor        0        1       10       10                01\n17 calculatin_flg chrctr        0        1        1       NA                 0\n18 dgnstc_mgng_f_ factor        0        1        2        2                88\n            max\n1         V5364\n2            TC\n3  y set tubing\n4             X\n5             +\n6            NA\n7            NA\n8             9\n9           ZZZ\n10            9\n11            9\n12            9\n13            9\n14            9\n15        66710\n16           7A\n17            0\n18           99"
  },
  {
    "objectID": "posts/mpfs/mpfs.html#indicators",
    "href": "posts/mpfs/mpfs.html#indicators",
    "title": "arkrvu: Medicare Physician Fee Schedule",
    "section": "",
    "text": "rvu_splits &lt;- rvu24a |&gt;  \n  hacksaw::count_split(\n    mod,\n    status_code,\n    not_used_for_medicare_payment,\n    non_fac_indicator,\n    facility_indicator,\n    pctc_ind,\n    glob_days,\n    mult_proc,\n    bilat_surg,\n    asst_surg,\n    co_surg,\n    team_surg,\n    endo_base,\n    physician_supervision_of_diagnostic_procedures,\n    diagnostic_imaging_family_indicator\n  )\n\nprocess_splits &lt;- function(split) {\n  \n  split_name &lt;- \\(split) {\n  \n  varname &lt;- rlang::names2(split)[1]\n  \n  split |&gt; \n    dplyr::mutate(variable = !!varname, .before = 1) |&gt; \n    purrr::set_names(c(\"variable\", \"value\", \"n\"))\n  }\n  \n  purrr::map(rvu_splits, split_name) |&gt; \n  purrr::list_rbind() |&gt; \n  dplyr::mutate(pct = n / sum(n), .by = variable)\n  \n}\n\nrvu_vars &lt;- process_splits(rvu_splits)\n\nvars &lt;- rvu_vars |&gt; \n  dplyr::mutate(\n    variable = stringr::str_replace_all(\n      variable, \"_\", \" \") |&gt; \n      stringr::str_to_upper(),\n  )\n\nidx &lt;- c(\n  \"MOD\" = \"For diagnostic tests, a blank in this field denotes the global service and the following modifiers identify the components:&lt;br&gt;26 = Professional component&lt;br&gt;TC = Technical component &lt;i&gt;For services other than those with a professional and/or technical component, a blank will appear in this field with one exception: the presence of CPT modifier -53 indicates that separate RVUs and a fee schedule amount have been established for procedures which the physician terminated before completion. This modifier is used only with colonoscopy CPT codes 44388 and 45378, or with G0105 and G0121. Any other codes billed with modifier -53 are subject to carrier medical review and priced by individual consideration.&lt;br&gt;53 = Discontinued Procedure - Under certain circumstances, the physician may elect to terminate a surgical or diagnostic procedure. Due to extenuating circumstances, or those that threaten the well being of the patient, it may be necessary to indicate that a surgical or diagnostic procedure was started but discontinued.\",\n  \"STATUS CODE\" = \"Indicates whether the code is in the fee schedule and whether it is separately payable if the service is covered. Only RVUs associated with status codes of A, R, or T, are used for Medicare payment.\",\n  \"NOT USED FOR MEDICARE PAYMENT\" = \"The name says it all\",\n  \"NON FAC INDICATOR\" = \"An NA in this field indicates that this procedure is rarely or never performed in the non-facility setting.\",\n  \"FACILITY INDICATOR\" = \"An NA in this field indicates that this procedure is rarely or never performed in the facility setting.\",\n  \"PCTC IND\" = \"Professional Component (PC) or Technical Component (TC) Indicator\",\n  \"GLOB DAYS\" = \"Global Surgery postoperative timeframes that apply to payment for each surgical procedure or another indicator that describes how the global concept applies to the service.\",\n  \"MULT PROC\" = \"Multiple Procedure (CPT Modifier 51) indicator shows which payment adjustment rule for multiple procedures applies to the service.\",\n  \"BILAT SURG\" = \"Bilateral Surgery Indicator (CPT Modifier 50) for services subject to a payment adjustment.\",\n  \"ASST SURG\" = \"Assistant at Surgery (Modifiers AS, 80, 81, and 82) indicator for services where Medicare never pays an assistant at surgery.\",\n  \"CO SURG\" = \"Co-Surgeons (Modifier 62) This field gives an indicator for services for which Medicare may pay 2 surgeons, each in a different specialty.\",\n  \"TEAM SURG\" = \"Team Surgeons (Modifier 66) This field gives an indicator for services for which Medicare may pay team surgeons.\",\n  \"ENDO BASE\" = \"Endoscopic Base Code for each code with a multiple surgery indicator of 3.\",\n  \"PHYSICIAN SUPERVISION OF DIAGNOSTIC PROCEDURES\" = \"Medicare uses this field in post payment review.\",\n  \"DIAGNOSTIC IMAGING FAMILY INDICATOR\" = \"Identifies the applicable Diagnostic Service family for HCPCS codes with a Multiple Procedure indicator of 4. For services effective January 1, 2011, and after, family indicators 01 - 11 won’t populate.\")\n\n\ndplyr::left_join(\n  vars |&gt; dplyr::filter(!cheapr::is_na(value)),\n  dplyr::tibble(\n    variable = names(idx[collapse::funique(vars$variable)]),\n    description = idx[collapse::funique(vars$variable)]),\n  by = dplyr::join_by(variable)) |&gt; \n  fuimus::combine(\n    name = variable, \n    columns = c('variable', 'description'), \n    sep = \"&lt;br&gt;&lt;br&gt;\") |&gt;\n  dplyr::add_row(\n    variable = toupper(hcpcs_row$variable),\n    value = as.character(format(hcpcs_row$value, big.mark = \",\")),\n    n = 18499,\n    pct = 1.0,\n    .before = 1) |&gt; \n  gt::gt(\n    groupname_col = \"variable\",\n    row_group_as_column = TRUE,\n    process_md = TRUE) |&gt; \n  gt::tab_stubhead(label = \"Variable\") |&gt; \n  gt::cols_label(\n    value = \"Unique\",\n    n = \"Total\",\n    pct = \"Percent\") |&gt;\n  gt::fmt_percent(columns = pct) |&gt; \n  gt::fmt_integer(columns = n) |&gt;\n  gt::tab_header(\"RVU Indicators\") |&gt;\n  gt::opt_all_caps() |&gt; \n  gt::tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = gt::px(20),\n    column_labels.padding.horizontal = gt::px(20),\n    table.border.top.color = \"#555555\",\n    table.width = gt::pct(100))\n\n\n\n\n\n\nRVU Indicators\n    \n\nVariable\n      Unique\n      Total\n      Percent\n    \n\n\n\nHCPCS\n16,324\n18,499\n100.00%\n\n\nMODFor diagnostic tests, a blank in this field denotes the global service and the following modifiers identify the components:26 = Professional componentTC = Technical component For services other than those with a professional and/or technical component, a blank will appear in this field with one exception: the presence of CPT modifier -53 indicates that separate RVUs and a fee schedule amount have been established for procedures which the physician terminated before completion. This modifier is used only with colonoscopy CPT codes 44388 and 45378, or with G0105 and G0121. Any other codes billed with modifier -53 are subject to carrier medical review and priced by individual consideration.53 = Discontinued Procedure - Under certain circumstances, the physician may elect to terminate a surgical or diagnostic procedure. Due to extenuating circumstances, or those that threaten the well being of the patient, it may be necessary to indicate that a surgical or diagnostic procedure was started but discontinued.\n26\n1,096\n5.92%\n\n\nTC\n1,076\n5.82%\n\n\n53\n4\n0.02%\n\n\nSTATUS CODEIndicates whether the code is in the fee schedule and whether it is separately payable if the service is covered. Only RVUs associated with status codes of A, R, or T, are used for Medicare payment.\nA\n8,975\n48.52%\n\n\nX\n2,527\n13.66%\n\n\nI\n1,411\n7.63%\n\n\nE\n1,343\n7.26%\n\n\nM\n1,201\n6.49%\n\n\nC\n1,156\n6.25%\n\n\nR\n1,050\n5.68%\n\n\nN\n327\n1.77%\n\n\nJ\n276\n1.49%\n\n\nP\n142\n0.77%\n\n\nB\n83\n0.45%\n\n\nT\n8\n0.04%\n\n\nNOT USED FOR MEDICARE PAYMENTThe name says it all\n+\n133\n0.72%\n\n\nNON FAC INDICATORAn NA in this field indicates that this procedure is rarely or never performed in the non-facility setting.\nNA\n4,066\n21.98%\n\n\nFACILITY INDICATORAn NA in this field indicates that this procedure is rarely or never performed in the facility setting.\nNA\n2,468\n13.34%\n\n\nPCTC INDProfessional Component (PC) or Technical Component (TC) Indicator\n9\n7,704\n41.65%\n\n\n0\n7,128\n38.53%\n\n\n1\n3,229\n17.45%\n\n\n3\n178\n0.96%\n\n\n5\n104\n0.56%\n\n\n7\n74\n0.40%\n\n\n2\n44\n0.24%\n\n\n6\n20\n0.11%\n\n\n4\n17\n0.09%\n\n\n8\n1\n0.01%\n\n\nGLOB DAYSGlobal Surgery postoperative timeframes that apply to payment for each surgical procedure or another indicator that describes how the global concept applies to the service.\nXXX\n11,262\n60.88%\n\n\n090\n3,771\n20.38%\n\n\n000\n1,326\n7.17%\n\n\nYYY\n933\n5.04%\n\n\nZZZ\n719\n3.89%\n\n\n010\n471\n2.55%\n\n\nMMM\n17\n0.09%\n\n\nMULT PROCMultiple Procedure (CPT Modifier 51) indicator shows which payment adjustment rule for multiple procedures applies to the service.\n9\n7,876\n42.58%\n\n\n2\n5,287\n28.58%\n\n\n0\n4,044\n21.86%\n\n\n4\n420\n2.27%\n\n\n3\n361\n1.95%\n\n\n6\n361\n1.95%\n\n\n7\n98\n0.53%\n\n\n5\n52\n0.28%\n\n\nBILAT SURGBilateral Surgery Indicator (CPT Modifier 50) for services subject to a payment adjustment.\n9\n7,892\n42.66%\n\n\n0\n7,784\n42.08%\n\n\n1\n2,203\n11.91%\n\n\n2\n383\n2.07%\n\n\n3\n237\n1.28%\n\n\nASST SURGAssistant at Surgery (Modifiers AS, 80, 81, and 82) indicator for services where Medicare never pays an assistant at surgery.\n9\n7,940\n42.92%\n\n\n0\n5,595\n30.24%\n\n\n2\n2,781\n15.03%\n\n\n1\n2,183\n11.80%\n\n\nCO SURGCo-Surgeons (Modifier 62) This field gives an indicator for services for which Medicare may pay 2 surgeons, each in a different specialty.\n9\n7,885\n42.62%\n\n\n0\n7,839\n42.38%\n\n\n1\n2,474\n13.37%\n\n\n2\n301\n1.63%\n\n\nTEAM SURGTeam Surgeons (Modifier 66) This field gives an indicator for services for which Medicare may pay team surgeons.\n0\n10,430\n56.38%\n\n\n9\n7,885\n42.62%\n\n\n1\n133\n0.72%\n\n\n2\n51\n0.28%\n\n\nENDO BASEEndoscopic Base Code for each code with a multiple surgery indicator of 3.\n52000\n44\n0.24%\n\n\n31231\n30\n0.16%\n\n\n43235\n30\n0.16%\n\n\n31622\n20\n0.11%\n\n\n43200\n18\n0.10%\n\n\n49320\n18\n0.10%\n\n\n29870\n15\n0.08%\n\n\n45330\n14\n0.08%\n\n\n45378\n14\n0.08%\n\n\n44388\n13\n0.07%\n\n\n29805\n11\n0.06%\n\n\n43260\n10\n0.05%\n\n\n45300\n10\n0.05%\n\n\n46600\n10\n0.05%\n\n\n44360\n9\n0.05%\n\n\n31525\n8\n0.04%\n\n\n31575\n8\n0.04%\n\n\n31526\n7\n0.04%\n\n\n52351\n7\n0.04%\n\n\n58555\n7\n0.04%\n\n\n29860\n6\n0.03%\n\n\n29830\n5\n0.03%\n\n\n29840\n5\n0.03%\n\n\n43191\n5\n0.03%\n\n\n50570\n5\n0.03%\n\n\n57452\n5\n0.03%\n\n\n31505\n4\n0.02%\n\n\n47552\n4\n0.02%\n\n\n50951\n4\n0.02%\n\n\n44376\n3\n0.02%\n\n\n44380\n3\n0.02%\n\n\n50551\n3\n0.02%\n\n\n0652T\n2\n0.01%\n\n\n50970\n2\n0.01%\n\n\n43197\n1\n0.01%\n\n\n66710\n1\n0.01%\n\n\nPHYSICIAN SUPERVISION OF DIAGNOSTIC PROCEDURESMedicare uses this field in post payment review.\n09\n17,465\n94.41%\n\n\n01\n533\n2.88%\n\n\n02\n249\n1.35%\n\n\n03\n207\n1.12%\n\n\n04\n16\n0.09%\n\n\n6A\n13\n0.07%\n\n\n7A\n9\n0.05%\n\n\n21\n5\n0.03%\n\n\n05\n1\n0.01%\n\n\n66\n1\n0.01%\n\n\nDIAGNOSTIC IMAGING FAMILY INDICATORIdentifies the applicable Diagnostic Service family for HCPCS codes with a Multiple Procedure indicator of 4. For services effective January 1, 2011, and after, family indicators 01 - 11 won’t populate.\n99\n18,055\n97.60%\n\n\n88\n444\n2.40%"
  },
  {
    "objectID": "posts/mpfs/mpfs.html#numeric",
    "href": "posts/mpfs/mpfs.html#numeric",
    "title": "arkrvu: Medicare Physician Fee Schedule",
    "section": "",
    "text": "over$numeric |&gt; \n  dplyr::select(\n    variable = col, \n    unique = n_unique,\n    p75, \n    max = p100, \n    iqr, \n    mean, \n    sd,\n    hist) |&gt;\n  gt::gt(\n    groupname_col = \"variable\",\n    row_group_as_column = TRUE,\n    process_md = TRUE) |&gt; \n  gt::fmt_integer(columns = unique) |&gt;\n  gt::fmt_number(columns = p75:sd) |&gt;\n  gt::tab_header(\"RVU Numerics\") |&gt;\n  gt::opt_all_caps() |&gt; \n  gt::tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = gt::px(20),\n    column_labels.padding.horizontal = gt::px(20),\n    table.border.top.color = \"#555555\",\n    table.width = gt::pct(100))\n\n\n\n\n\n\nRVU Numerics\n    \n\n\n      unique\n      p75\n      max\n      iqr\n      mean\n      sd\n      hist\n    \n\n\n\nwork_rvu\n2,486\n3.21\n108.91\n3.21\n3.88\n8.51\n▇▁▁▁▁\n\n\nnon_fac_pe_rvu\n2,310\n5.35\n355.87\n5.35\n4.01\n10.52\n▇▁▁▁▁\n\n\nfacility_pe_rvu\n2,079\n3.66\n53.07\n3.66\n3.03\n5.60\n▇▁▁▁▁\n\n\nmp_rvu\n1,026\n0.43\n28.99\n0.43\n0.83\n2.20\n▇▁▁▁▁\n\n\nnon_facility_total\n3,877\n9.79\n364.53\n9.79\n8.71\n18.07\n▇▁▁▁▁\n\n\nfacility_total\n3,683\n7.50\n171.00\n7.50\n7.74\n15.57\n▇▁▁▁▁\n\n\npre_op\n8\n0.00\n0.17\n0.00\n0.02\n0.04\n▇▁▂▁▁\n\n\nintra_op\n14\n0.00\n0.84\n0.00\n0.17\n0.32\n▇▁▁▁▂\n\n\npost_op\n11\n0.00\n0.23\n0.00\n0.03\n0.07\n▇▁▁▁▁\n\n\nconv_factor\n1\n32.74\n32.74\n0.00\n32.74\n0.00\n▁▁▇▁▁\n\n\nnon_facility_pe_used_for_opps_payment_amount\n417\n0.00\n159.54\n0.00\n0.90\n7.15\n▇▁▁▁▁\n\n\nfacility_pe_used_for_opps_payment_amount\n417\n0.00\n159.54\n0.00\n0.90\n7.15\n▇▁▁▁▁\n\n\nmp_used_for_opps_payment_amount\n81\n0.00\n1.83\n0.00\n0.01\n0.06\n▇▁▁▁▁"
  },
  {
    "objectID": "posts/mpfs/mpfs.html#pprvu",
    "href": "posts/mpfs/mpfs.html#pprvu",
    "title": "arkrvu: Medicare Physician Fee Schedule",
    "section": "",
    "text": "The MPFS is a listing of the relative value units (RVUs) for each CPT code, as well as the geographic practice cost index (GPCI) for each code. The RVUs are used to calculate the payment amount for each service, while the GPCI is used to adjust the payment amount based on the location where the service is provided.\nThis file contains information on services covered by the MPFS in 2024. For more than 10,000 physician services, the file contains the associated RVUs, a fee schedule status indicator, and various payment policy indicators needed for payment adjustment (i.e., payment of assistant at surgery, team surgery, bilateral surgery, etc.).\nThe MPFS amounts are adjusted to reflect the variation in practice costs from area to area. A GPCI has been established for every Medicare payment locality for each of the three components of a procedure’s RVU:\n\nPhysician Work\nPractice Expense\nMalpractice Expense (sometimes called Professional Liability Insurance)\n\nThe GPCIs are applied in the calculation of a fee schedule payment amount by multiplying the RVU for each component times the GPCI for that component.\n\n x = [(RVU_w \\times GPCI_w) + (RVU_p \\times GPCI_p) + (RVU_m \\times GPCI_m)] \\times CF \n\n y = 0.95x \n\n z = 0.95(1.15x) \n\n\n\n\n\n\nMany Ways to Say the Same Thing\n\n\n\n\nAs there is a corresponding GPCI value for each of the three components of an RVU, the formula is essentially the dot product of the RVU and GPCI vectors, multiplied by the conversion factor:\n\n a \\cdot b = a_1b_1 + a_2b_2 + a_3b_3 \n\nAs scalars:\n\nwrvu  = 6.26   # Work RVU\nwgpci = 1      # Work GPCI\n\npgpci = 0.883  # Practice GPCI\nprvu  = 4.36   # Practice RVU\n\nmrvu  = 0.99   # Malpractice RVU\nmgpci = 1.125  # Malpractice GPCI\n\ncf    = 32.744 # Conversion Factor\n\nAs vectors:\n\nrvu  &lt;- c(w = 6.26, p = 4.36, m = 0.99)\nrvu\n\n   w    p    m \n6.26 4.36 0.99 \n\ngpci &lt;- c(w = 1, p = 0.883, m = 1.125)\ngpci\n\n    w     p     m \n1.000 0.883 1.125 \n\ncf   &lt;- 32.744\n\n\n\n(\n  (wrvu * wgpci) + \n  (prvu * pgpci) + \n  (mrvu * mgpci)\n ) * cf\n\n[1] 368\n\n\nWith sum():\n\nbase_sum &lt;- \\(rvu, gpci, cf) sum(rvu * gpci) * cf\n\nbase_sum(rvu, gpci, cf)\n\n[1] 368\n\n\nWith sum(diag(outer(x, y))):\n\nsum_diag_outer &lt;- \\(rvu, gpci, cf) sum(diag(outer(rvu, gpci), names = FALSE)) * cf\n\nsum_diag_outer(rvu, gpci, cf)\n\n[1] 368\n\n\nWith crossprod():\n\ndrop(\n  crossprod(\n    c(wrvu, prvu, mrvu), \n    c(wgpci, pgpci, mgpci)) \n  * cf)\n\n[1] 368\n\ndcross &lt;- \\(rvu, gpci, cf) drop(crossprod(rvu, gpci) * cf)\n\ndcross(rvu, gpci, cf)\n\n[1] 368\n\n\nWith %*%:\n\nas.vector(\n  c(wrvu, prvu, mrvu) %*% \n  c(wgpci, pgpci, mgpci) \n  * cf)\n\n[1] 368\n\n\nWith pracma::dot():\n\npracma::dot(\n  c(wrvu, prvu, mrvu), \n  c(wgpci, pgpci, mgpci)) * cf\n\n[1] 368\n\npracma::dot(rvu, gpci) * cf\n\n[1] 368\n\n\nWith northstar::calculate_amounts():\n\nnorthstar::calculate_amounts(\n  wrvu  = 6.26,\n  nprvu = 7.92,\n  fprvu = 4.36,\n  mrvu  = 0.99,\n  cf    = 32.744,\n  wgpci = 1,\n  pgpci = 0.883,\n  mgpci = 1.125\n)\n\nFacility Amounts:\n\nRVU Total ............ 11.22\nParticipating ........ $367.51\nNon-Particpating ..... $349.13\nLimiting Charge ...... $401.50\n\nNon-Facility Amounts:\n\nRVU Total ............ 14.37\nParticipating ........ $470.44\nNon-Particpating ..... $446.91\nLimiting Charge ...... $513.95\n\n\n\n\n\n\n\n\n\n\n\nNon-Facility vs. Facility\n\n\n\nUnder the MPFS, many procedures have separate payment amounts for physician services when provided in facility and non-facility settings.\nThe amount is determined by the Place of Service (POS) code. In general, the POS code reflects the actual place where the patient receives the face-to-face service and determines whether the facility or non-facility payment rate is paid.\nServices rendered to a patient who is an inpatient of a hospital (POS code 21) or an outpatient of a hospital (POS codes 19 or 22), the facility rate is paid, regardless of where the face-to-face encounter with the patient occurred.\n\n\n\n\n\n\n\n\n\nTherapy Code Capitation\n\n\n\nCertain therapy codes will receive a 50% reduction to the Practice Expense.\nSection 5102(b) of the Deficit Reduction Act of 2005 requires a payment cap on the Technical Component (TC) of certain diagnostic imaging procedures and the TC portions of the global diagnostic imaging services.\nThis cap is based on the Outpatient Prospective Payment System (OPPS) payment. To implement this provision, the Physician Fee Schedule amount is compared to the OPPS payment amount and the lower amount is used in the formula to calculate payment."
  },
  {
    "objectID": "posts/mpfs/mpfs.html#accepting-assignment",
    "href": "posts/mpfs/mpfs.html#accepting-assignment",
    "title": "arkrvu: Medicare Physician Fee Schedule",
    "section": "",
    "text": "Accepting assignment means that a healthcare provider or facility is partnered with Medicare and is required by law to charge only the Medicare-approved amount for various services. This amount is preset by Medicare and is often less than many healthcare facilities would charge.\nBecause of this, when patients receive care at a facility that accepts assignment, they will be required to pay lower out-of-pocket costs as Medicare will cover the full amount of the service cost. Personal costs only include the premium and any charges up to the deductible amount.\nPhysicians or facilities that do not accept assignment are a non-participating providers. All physicians are required to file with Medicare, indicating that they either accept or do not accept assignment. If a provider does not accept assignment, it means that they are not required to charge only the Medicare-approved amount for services.\n\nOne possible option for non-participating providers is to choose to accept assignment for some services but to decline assignment for others. For services that they accept assignment for, they are only able to bill the Medicare-approved amount. However, for other services, they are allowed to charge up to 15 percent more than the Medicare-approved amount.\nThis limit cap is known as the limiting charge. Providers that do not fully participate only receive 95 percent of the Medicare-approved amount when Medicare reimburses them for the cost of care. In turn, the provider can charge the patient up to 15 percent more than this reimbursement amount. This extra charge will not be covered by Medicare, which causes Medicare recipients to incur greater out-of-pocket costs.\nThe Medicare limiting charge is the maximum amount a Non-Participating Provider can charge for services submitted on a non-assigned claim. This is that maximum amount a beneficiary could legally be charged.\n\nThe Medicare limiting charge is, by law, set at 115\\% of the payment amount for the service furnished by the Non-Participating Physician.\nHowever, the law sets the payment amount for Non-Participating Physicians at 95\\% of the payment amount for Participating Physicians (i.e., the Fee Schedule amount).\nCalculating 95\\% of 115\\% of an amount, x, is equivalent to x \\times 1.0925 (or 109.25\\%):\n\n# 95% of 115% of 10\n(10 * 1.15) * 0.95 \n\n[1] 10.9\n\n# 109.25% of 10\n10 * 1.0925 \n\n[1] 10.9\n\nlimiting_charge(10)\n\n[1] 10.9"
  },
  {
    "objectID": "posts/mpfs/mpfs.html#relative-value-file",
    "href": "posts/mpfs/mpfs.html#relative-value-file",
    "title": "arkrvu: Medicare Physician Fee Schedule",
    "section": "",
    "text": "This file contains information on services covered by the Medicare Physician Fee Schedule (MPFS). For more than 10,000 physician services, the file contains the associated relative value units (RVUs), a fee schedule status indicator, and various payment policy indicators needed for payment adjustment (i.e., payment of assistant at surgery, team surgery, bilateral surgery, etc.).\nThe Medicare physician fee schedule amounts are adjusted to reflect the variation in practice costs from area to area. A geographic practice cost index (GPCI) has been established for every Medicare payment locality for each of the three components of a procedure’s relative value unit (i.e., the RVUs for work, practice expense, and malpractice). The GPCIs are applied in the calculation of a fee schedule payment amount by multiplying the RVU for each component times the GPCI for that component.\n\n\nfoot_53 &lt;- \"Not used to report the elective cancellation of a procedure prior to the patient's anesthesia induction and/or surgical preparation in the operating suite. For outpatient hospital/ambulatory surgery center (ASC) reporting of a previously scheduled procedure/service that is partially reduced or cancelled as a result of extenuating circumstances or those that threaten the well being of the patient prior to or after administration of anesthesia, see modifiers 73 and 74 (see modifiers approved for ASC hospital outpatient use).\"\n\nfoot_mod &lt;- \"For services other than those with a professional and/or technical component, a blank will appear in this field with one exception: the presence of CPT modifier 53 indicates that separate RVUs and a fee schedule amount have been established for procedures which the physician terminated before completion. This modifier is used only with colonoscopy CPT codes 44388 and 45378, or with G0105 and G0121. Any other codes billed with modifier 53 are subject to carrier medical review and priced by individual consideration.\"\n\nmod_join &lt;- dplyr::tibble(\n  mod = c(\"26\", \"TC\", \"53\"),\n  name = c(\n    \"Professional Component\",\n    \"Technical Component\",\n    \"Discontinued Procedure\"\n  ),\n  description = c(\n    \"Certain procedures are a combination of a physician or other qualified health care professional component and a technical component. When the physician or other qualified health care professional component is reported separately, the service may be identified by adding modifier 26 to the usual procedure number.\",\n    \"Under certain circumstances, a charge may be made for the technical component alone. Under those circumstances the technical component charge is identified by adding modifier TC to the usual procedure number. Technical component charges are institutional charges and not billed separately by physicians; however, portable x-ray suppliers only bill for technical component and should utilize modifier TC. The charge data from portable x-ray suppliers will then be used to build customary and prevailing profiles.\",\n    \"Under certain circumstances, the physician or other qualified health care professional may elect to terminate a surgical or diagnostic procedure. Due to extenuating circumstances or those that threaten the well being of the patient, it may be necessary to indicate that a surgical or diagnostic procedure was started but discontinued. This circumstance may be reported by adding modifier 53 to the code reported by the individual for the discontinued procedure.\"\n  )\n)\n\nrvu24a |&gt; \n  filter(!cheapr::is_na(mod)) |&gt; \n  dplyr::count(mod, sort = TRUE) |&gt; \n  left_join(mod_join) |&gt; \n  gt(rowname_col = \"mod\") |&gt; \n  cols_label(n = \"# of Codes\") |&gt; \n  cols_align(align = \"left\") |&gt; \n  tab_header(\n    title = \"RVU Modifiers\",\n    subtitle = \"For diagnostic tests, a blank in this field denotes the Global Service & the following modifiers identify the components:\") |&gt; \n  tab_footnote(\n    footnote = foot_53,\n    locations = cells_stub(rows = 3)) |&gt; \n  tab_footnote(footnote = foot_mod) |&gt; \n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\nRVU Modifiers\n    \n\nFor diagnostic tests, a blank in this field denotes the Global Service & the following modifiers identify the components:\n    \n\n\n      # of Codes\n      name\n      description\n    \n\n\n\n26\n1096\nProfessional Component\nCertain procedures are a combination of a physician or other qualified health care professional component and a technical component. When the physician or other qualified health care professional component is reported separately, the service may be identified by adding modifier 26 to the usual procedure number.\n\n\nTC\n1076\nTechnical Component\nUnder certain circumstances, a charge may be made for the technical component alone. Under those circumstances the technical component charge is identified by adding modifier TC to the usual procedure number. Technical component charges are institutional charges and not billed separately by physicians; however, portable x-ray suppliers only bill for technical component and should utilize modifier TC. The charge data from portable x-ray suppliers will then be used to build customary and prevailing profiles.\n\n\n531\n\n4\nDiscontinued Procedure\nUnder certain circumstances, the physician or other qualified health care professional may elect to terminate a surgical or diagnostic procedure. Due to extenuating circumstances or those that threaten the well being of the patient, it may be necessary to indicate that a surgical or diagnostic procedure was started but discontinued. This circumstance may be reported by adding modifier 53 to the code reported by the individual for the discontinued procedure.\n\n\n\n\n For services other than those with a professional and/or technical component, a blank will appear in this field with one exception: the presence of CPT modifier 53 indicates that separate RVUs and a fee schedule amount have been established for procedures which the physician terminated before completion. This modifier is used only with colonoscopy CPT codes 44388 and 45378, or with G0105 and G0121. Any other codes billed with modifier 53 are subject to carrier medical review and priced by individual consideration.\n    \n\n\n1 Not used to report the elective cancellation of a procedure prior to the patient's anesthesia induction and/or surgical preparation in the operating suite. For outpatient hospital/ambulatory surgery center (ASC) reporting of a previously scheduled procedure/service that is partially reduced or cancelled as a result of extenuating circumstances or those that threaten the well being of the patient prior to or after administration of anesthesia, see modifiers 73 and 74 (see modifiers approved for ASC hospital outpatient use).\n    \n\n\n\n\n\n\nIndicates whether the code is in the fee schedule and whether it is separately payable if the service is covered. See Attachment A for description of values.\nOnly RVUs associated with status codes of A, R, or T, are used for Medicare payment.\n\nstatus_lookup &lt;- c(\n  \"A\" = \"**Active Code**\",\n  \"B\" = \"**Payment Bundled**\",\n  \"C\" = \"**Carrier Priced**\",\n  \"D\" = \"**Deleted Codes**\",\n  \"E\" = \"**Regulatory Exclusion**\",\n  \"F\" = \"**Deleted/Discontinued Codes**\",\n  \"X\" = \"**Statutory Exclusion**\",\n  \"I\" = \"**Not Valid for Medicare Purposes**\",\n  \"M\" = \"**Measurement Code**\",\n  \"R\" = \"**Restricted Coverage**\",\n  \"N\" = \"**Non-Covered Service**\",\n  \"J\" = \"**Anesthesia Service**\",\n  \"P\" = \"**Bundled/Excluded Code**\",\n  \"T\" = \"**No Other Services Payable**\"\n)\n\nstatus_lookup2 &lt;- c(\n  \"A\" = \"These codes are separately paid under the Physician Fee Schedule if covered. There will be RVUs and payment amounts for codes with this status. The presence of an A indicator does not mean that Medicare has made a National Coverage Determination regarding the service. Carriers remain responsible for coverage decisions in the absence of a national Medicare policy.\",\n  \"X\" = \"These codes represent an item or service that is not in the statutory definition of “physician services” for fee schedule payment purposes. No RVUs or payment amounts are shown for these codes and no payment may be made under the physician fee schedule. Ex: Ambulance services and Clinical Diagnostic Laboratory Services.\",\n  \"I\" = \"Medicare uses another code for reporting of, and payment for, these services. (Code NOT subject to a 90 day grace period.)\",\n  \"E\" = \"These codes are for items and/or services that CMS chose to exclude from the fee schedule payment by regulation. No RVUs or payment amounts are shown and no payment may be made under the fee schedule for these codes. Payment for them, when covered, continues under reasonable charge procedures.\",\n  \"M\" = \"Used for reporting purposes only.\",\n  \"C\" = \"Carriers will establish RVUs and payment amounts for these services, generally on an individual case basis following review of documentation such as an operative report.\",\n  \"R\" = \"Special coverage instructions apply.\",\n  \"N\" = \"These codes are carried on the HCPCS tape as noncovered services.\",\n  \"J\" = \"No relative Status units or payment amounts for anesthesia codes on the database, only used to facilitate the identification of anesthesia services.\",\n  \"P\" = \"There are no RVUs and no payment amounts for these services. No separate payment is made for them under the fee schedule. If the item or service is covered as incident to a physician service and is provided on the same day as a physician service, payment for it is bundled into the payment for the physician service to which it is incident (an example is an elastic bandage furnished by a physician incident to a physician service). If the item or service is covered as other than incident to a physician service, it is excluded from the fee schedule (for example, colostomy supplies) and is paid under the other payment provision of the Act.\",\n  \"B\" = \"Payment for covered services are always bundled into payment for other services not specified: There will be no RVUs or payment amounts for these codes and no separate payment is ever made. When these services are covered, payment for them is subsumed by the payment for the services to which they are incident (an example is a telephone call from a hospital nurse regarding care of a patient).\",\n  \"T\" = \"There are RVUs and payment amounts for these services, but they are only paid if there are no other services payable under the physician fee schedule billed on the same date by the same provider. If any other services payable under the physician fee schedule are billed on the same date by the same provider, these services are bundled into the physician services for which payment is made.\"\n)\n\nrvu24a |&gt; \n  filter(!cheapr::is_na(status_code)) |&gt; \n  count(status_code, sort = TRUE) |&gt; \n  mutate(name = status_lookup[status_code],\n         description = status_lookup2[status_code]) |&gt;  \n  gt(rowname_col = \"status_code\") |&gt; \n  cols_align(align = \"left\") |&gt; \n  cols_label(n = \"# of Codes\") |&gt; \n  fmt_markdown() |&gt; \n  fmt_integer() |&gt; \n  opt_all_caps() |&gt;\n  tab_style(\n    style = cell_fill(\n      color = \"tan\", \n      alpha = 0.3),\n    locations = cells_body(\n      columns = everything(),\n      rows = c(1, 7, 12))) |&gt; \n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\n      # of Codes\n      name\n      description\n    \n\n\nA\n8,975\nActive Code\nThese codes are separately paid under the Physician Fee Schedule if covered. There will be RVUs and payment amounts for codes with this status. The presence of an A indicator does not mean that Medicare has made a National Coverage Determination regarding the service. Carriers remain responsible for coverage decisions in the absence of a national Medicare policy.\n\n\nX\n2,527\nAnesthesia Service\nThere are RVUs and payment amounts for these services, but they are only paid if there are no other services payable under the physician fee schedule billed on the same date by the same provider. If any other services payable under the physician fee schedule are billed on the same date by the same provider, these services are bundled into the physician services for which payment is made.\n\n\nI\n1,411\nRegulatory Exclusion\nUsed for reporting purposes only.\n\n\nE\n1,343\nDeleted Codes\nThese codes are for items and/or services that CMS chose to exclude from the fee schedule payment by regulation. No RVUs or payment amounts are shown and no payment may be made under the fee schedule for these codes. Payment for them, when covered, continues under reasonable charge procedures.\n\n\nM\n1,201\nStatutory Exclusion\nSpecial coverage instructions apply.\n\n\nC\n1,156\nCarrier Priced\nMedicare uses another code for reporting of, and payment for, these services. (Code NOT subject to a 90 day grace period.)\n\n\nR\n1,050\nRestricted Coverage\nThere are no RVUs and no payment amounts for these services. No separate payment is made for them under the fee schedule. If the item or service is covered as incident to a physician service and is provided on the same day as a physician service, payment for it is bundled into the payment for the physician service to which it is incident (an example is an elastic bandage furnished by a physician incident to a physician service). If the item or service is covered as other than incident to a physician service, it is excluded from the fee schedule (for example, colostomy supplies) and is paid under the other payment provision of the Act.\n\n\nN\n327\nNot Valid for Medicare Purposes\nThese codes are carried on the HCPCS tape as noncovered services.\n\n\nJ\n276\nDeleted/Discontinued Codes\nCarriers will establish RVUs and payment amounts for these services, generally on an individual case basis following review of documentation such as an operative report.\n\n\nP\n142\nMeasurement Code\nNo relative Status units or payment amounts for anesthesia codes on the database, only used to facilitate the identification of anesthesia services.\n\n\nB\n83\nPayment Bundled\nThese codes represent an item or service that is not in the statutory definition of “physician services” for fee schedule payment purposes. No RVUs or payment amounts are shown for these codes and no payment may be made under the physician fee schedule. Ex: Ambulance services and Clinical Diagnostic Laboratory Services.\n\n\nT\n8\nNon-Covered Service\nPayment for covered services are always bundled into payment for other services not specified: There will be no RVUs or payment amounts for these codes and no separate payment is ever made. When these services are covered, payment for them is subsumed by the payment for the services to which they are incident (an example is a telephone call from a hospital nurse regarding care of a patient).\n\n\n\n\n\n\n\n\npctc_lookup &lt;- c(\n  \"0\" = \"**Physician Services**\",\n  \"1\" = \"**Diagnostic Tests for Radiology Services**\",\n  \"2\" = \"**Professional Component Only**\",\n  \"3\" = \"**Technical Component Only**\",\n  \"4\" = \"**Global Test Only**\",\n  \"5\" = \"**Incident To**\",\n  \"6\" = \"**Laboratory Physician Interpretation**\",\n  \"7\" = \"**Physical Therapy Service**\",\n  \"8\" = \"**Physician Interpretation**\",\n  \"9\" = \"**Not Applicable**\"\n)\n\npctc_lookup2 &lt;- c(\n  \"0\" = \"Modifiers 26 and TC &lt;b&gt;&lt;u&gt;cannot&lt;/u&gt;&lt;/b&gt; be used since Physician Services cannot be split into Professional and Technical components.&lt;br&gt;&lt;br&gt;Examples: Visits, Consultations, Surgical Procedures.&lt;br&gt;&lt;br&gt;RVU Components: **PW**, **PE**, **MP**.\",\n  \n  \"1\" = \"Modifiers 26 and TC &lt;b&gt;&lt;u&gt;can&lt;/u&gt;&lt;/b&gt; be used with these codes.&lt;br&gt;&lt;br&gt;Examples: Pulmonary Function Tests, Therapeutic Radiology Procedures, e.g., Radiation Therapy.&lt;br&gt;&lt;br&gt;These codes have both a Professional and Technical component.&lt;br&gt;&lt;br&gt;Total RVUs for codes reported with a 26 modifier include values for physician work, practice expense, and malpractice expense.&lt;br&gt;&lt;br&gt;Total RVUs for codes reported with a TC modifier include values for practice expense and malpractice expense only.&lt;br&gt;&lt;br&gt;Total RVUs for codes reported without a modifier include values for physician work, practice expense, and malpractice expense.\",\n  \n  \"2\" = \"Modifiers 26 and TC &lt;b&gt;&lt;u&gt;cannot&lt;/u&gt;&lt;/b&gt; be used with these codes.&lt;br&gt;&lt;br&gt;Stand-alone codes that describe the physician work portion of selected diagnostic tests for which there is an associated code that describes the technical component of the diagnostic test only and another associated code that describes the global test.&lt;br&gt;&lt;br&gt;Example Code: **93010**: *Electrocardiogram; Interpretation and Report.*&lt;br&gt;&lt;br&gt;RVU Components: **PW**, **PE**, **MP**.\",\n  \n  \"3\" = \"Modifiers 26 and TC &lt;b&gt;&lt;u&gt;cannot&lt;/u&gt;&lt;/b&gt; be used with these codes.&lt;br&gt;&lt;br&gt;Stand-alone codes that describe the technical component (i.e., staff and equipment costs) of selected diagnostic tests for which there is an associated code that describes the professional component of the diagnostic test only. Also identifies codes that are covered only as diagnostic tests and therefore do not have a related professional \ncode.&lt;br&gt;&lt;br&gt;Example Code: **93005** *Electrocardiogram; Tracing Only, without interpretation and report*.&lt;br&gt;&lt;br&gt;RVU Components: **PE** and **MP** only.\",\n\n  \"4\" = \"Modifiers 26 and TC &lt;b&gt;&lt;u&gt;cannot&lt;/u&gt;&lt;/b&gt; be used with these codes.&lt;br&gt;&lt;br&gt;Stand-alone codes that describe selected diagnostic tests for which there are associated codes that describe *(a)* the professional component of the test only, and *(b)* the technical component of the test only.&lt;br&gt;&lt;br&gt;RVU Components: **PW**, **PE**, **MP**.&lt;br&gt;&lt;br&gt;Total RVUs = Sum of the total RVUs for the professional and technical components only codes combined.\",\n\n  \"5\" = \"Modifiers 26 and TC &lt;b&gt;&lt;u&gt;cannot&lt;/u&gt;&lt;/b&gt; be used with these codes.&lt;br&gt;&lt;br&gt;Services covered &lt;b&gt;&lt;u&gt;incident to&lt;/u&gt;&lt;/b&gt; a physician's service when they are provided by auxiliary personnel employed by the physician and working under his or her direct personal supervision.&lt;br&gt;&lt;br&gt;Payment may not be made by carriers for these services when they are provided to hospital inpatients or patients in a hospital outpatient department.\",\n\n  \"6\" = \"Modifier TC &lt;b&gt;&lt;u&gt;cannot&lt;/u&gt;&lt;/b&gt; be used with these codes.&lt;br&gt;&lt;br&gt;Clinical laboratory codes for which separate payment for interpretations by laboratory physicians may be made. Actual performance of the tests is paid for under the lab fee schedule. &lt;br&gt;&lt;br&gt;RVU Components: **PW**, **PE**, **MP**.\",\n\n  \"7\" = \"Payment may not be made if the service is provided to either a patient in a hospital outpatient department or to an inpatient of the hospital by an independently practicing physical or occupational therapist.\",\n\n  \"8\" = \"Identifies the professional component of clinical laboratory codes for which separate payment may be made only if the physician interprets an abnormal smear for hospital inpatient. This applies to CPT codes 88141, 85060 and HCPCS code P3001-26. No TC billing is recognized because payment for the underlying clinical laboratory test is made to the hospital, generally through the PPS rate. No payment is recognized for CPT codes 88141, 85060 or HCPCS code P3001-26 furnished to hospital outpatients or non-hospital patients. The physician interpretation is paid through the clinical laboratory fee schedule payment for the clinical laboratory test.\",\n\n  \"9\" = \"Concept of a professional/technical component does not apply.\")\n\nrvu24a |&gt; \n  filter(!is.na(pctc_ind)) |&gt; \n  count(pctc_ind) |&gt; \n  mutate(\n    category = pctc_lookup[pctc_ind],\n    description = pctc_lookup2[pctc_ind]) |&gt; \n  gt(rowname_col = \"pctc_ind\") |&gt; \n  cols_align(align = \"left\") |&gt; \n  cols_label(n = \"# of Codes\") |&gt; \n  fmt_markdown() |&gt; \n  fmt_integer() |&gt; \n  opt_all_caps() |&gt;\n  opt_row_striping() |&gt; \n  tab_style(\n    style = list(\n      cell_text(align = \"center\", \n                size = px(18), \n                color = \"black\")),\n    locations = cells_stub()) |&gt; \n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", \n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", \n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\n      # of Codes\n      category\n      description\n    \n\n\n0\n7,128\nPhysician Services\nModifiers 26 and TC cannot be used since Physician Services cannot be split into Professional and Technical components.Examples: Visits, Consultations, Surgical Procedures.RVU Components: PW, PE, MP.\n\n\n1\n3,229\nDiagnostic Tests for Radiology Services\nModifiers 26 and TC can be used with these codes.Examples: Pulmonary Function Tests, Therapeutic Radiology Procedures, e.g., Radiation Therapy.These codes have both a Professional and Technical component.Total RVUs for codes reported with a 26 modifier include values for physician work, practice expense, and malpractice expense.Total RVUs for codes reported with a TC modifier include values for practice expense and malpractice expense only.Total RVUs for codes reported without a modifier include values for physician work, practice expense, and malpractice expense.\n\n\n2\n44\nProfessional Component Only\nModifiers 26 and TC cannot be used with these codes.Stand-alone codes that describe the physician work portion of selected diagnostic tests for which there is an associated code that describes the technical component of the diagnostic test only and another associated code that describes the global test.Example Code: 93010: Electrocardiogram; Interpretation and Report.RVU Components: PW, PE, MP.\n\n\n3\n178\nTechnical Component Only\nModifiers 26 and TC cannot be used with these codes.Stand-alone codes that describe the technical component (i.e., staff and equipment costs) of selected diagnostic tests for which there is an associated code that describes the professional component of the diagnostic test only. Also identifies codes that are covered only as diagnostic tests and therefore do not have a related professional\ncode.Example Code: 93005 Electrocardiogram; Tracing Only, without interpretation and report.RVU Components: PE and MP only.\n\n\n4\n17\nGlobal Test Only\nModifiers 26 and TC cannot be used with these codes.Stand-alone codes that describe selected diagnostic tests for which there are associated codes that describe (a) the professional component of the test only, and (b) the technical component of the test only.RVU Components: PW, PE, MP.Total RVUs = Sum of the total RVUs for the professional and technical components only codes combined.\n\n\n5\n104\nIncident To\nModifiers 26 and TC cannot be used with these codes.Services covered incident to a physician’s service when they are provided by auxiliary personnel employed by the physician and working under his or her direct personal supervision.Payment may not be made by carriers for these services when they are provided to hospital inpatients or patients in a hospital outpatient department.\n\n\n6\n20\nLaboratory Physician Interpretation\nModifier TC cannot be used with these codes.Clinical laboratory codes for which separate payment for interpretations by laboratory physicians may be made. Actual performance of the tests is paid for under the lab fee schedule. RVU Components: PW, PE, MP.\n\n\n7\n74\nPhysical Therapy Service\nPayment may not be made if the service is provided to either a patient in a hospital outpatient department or to an inpatient of the hospital by an independently practicing physical or occupational therapist.\n\n\n8\n1\nPhysician Interpretation\nIdentifies the professional component of clinical laboratory codes for which separate payment may be made only if the physician interprets an abnormal smear for hospital inpatient. This applies to CPT codes 88141, 85060 and HCPCS code P3001-26. No TC billing is recognized because payment for the underlying clinical laboratory test is made to the hospital, generally through the PPS rate. No payment is recognized for CPT codes 88141, 85060 or HCPCS code P3001-26 furnished to hospital outpatients or non-hospital patients. The physician interpretation is paid through the clinical laboratory fee schedule payment for the clinical laboratory test.\n\n\n9\n7,704\nNot Applicable\nConcept of a professional/technical component does not apply."
  },
  {
    "objectID": "posts/mpfs/mpfs.html#global-surgery-days",
    "href": "posts/mpfs/mpfs.html#global-surgery-days",
    "title": "arkrvu: Medicare Physician Fee Schedule",
    "section": "",
    "text": "Provides time frames that apply to each surgical procedure.\n\nglob_join &lt;- dplyr::tibble(\n  glob_days = c(\"000\", \"010\", \"090\", \"MMM\", \"XXX\", \"YYY\", \"ZZZ\"),\n  description = c(\n    \"Endoscopic or minor procedure with related preoperative and postoperative relative values on the day of the procedure only included in the fee schedule payment amount&lt;br&gt;&lt;br&gt;Evaluation and Management services on the day of the procedure generally not payable.\",\n    \"Minor procedure with preoperative relative values on the day of the procedure and postoperative relative values during a 10-day postoperative period included in the fee schedule amount&lt;br&gt;&lt;br&gt;Evaluation and Management services on the day of the procedure and during the 10-day postoperative period generally not payable.\",\n    \"Major surgery with a 1-day preoperative period and 90-day postoperative period included in the fee schedule amount.\",\n    \"Maternity codes; usual global period does not apply.\",\n    \"Global concept does not apply.\",\n    \"Carrier determines whether the global concept applies and establishes postoperative period, if appropriate, at time of pricing.\",\n    \"Code is related to another service and is always included in the global period of the other service.\"))\n\nrvu24a |&gt; \n  filter(!is.na(glob_days)) |&gt;\n  count(glob_days, sort = TRUE) |&gt; \n  left_join(glob_join) |&gt; \n  gt(rowname_col = \"glob_days\") |&gt; \n  fmt_markdown() |&gt; \n  fmt_integer() |&gt; \n  cols_align(align = \"left\") |&gt; \n  cols_label(n = \"# of Codes\") |&gt; \n  opt_all_caps() |&gt;\n  tab_style(\n    style = cell_text(align = \"center\", \n                      size = px(16)),\n    locations = cells_stub()) |&gt; \n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\n      # of Codes\n      description\n    \n\n\nXXX\n11,262\nGlobal concept does not apply.\n\n\n090\n3,771\nMajor surgery with a 1-day preoperative period and 90-day postoperative period included in the fee schedule amount.\n\n\n000\n1,326\nEndoscopic or minor procedure with related preoperative and postoperative relative values on the day of the procedure only included in the fee schedule payment amountEvaluation and Management services on the day of the procedure generally not payable.\n\n\nYYY\n933\nCarrier determines whether the global concept applies and establishes postoperative period, if appropriate, at time of pricing.\n\n\nZZZ\n719\nCode is related to another service and is always included in the global period of the other service.\n\n\n010\n471\nMinor procedure with preoperative relative values on the day of the procedure and postoperative relative values during a 10-day postoperative period included in the fee schedule amountEvaluation and Management services on the day of the procedure and during the 10-day postoperative period generally not payable.\n\n\nMMM\n17\nMaternity codes; usual global period does not apply.\n\n\n\n\n\n\n\n\n\nPreoperative\nIntraoperative\nPostoperative\n\n\n\n\nrvu24a |&gt;\n  filter(!is.na(pre_op), pre_op &gt; 0.00) |&gt; \n  count(pre_op, sort = TRUE) |&gt; \n  gt() |&gt; \n  cols_label(pre_op = \"Percentage\",\n             n = \"# of HCPCS\") |&gt; \n  fmt_percent(columns = pre_op, \n              drop_trailing_zeros = TRUE) |&gt; \n  fmt_integer(columns = n) |&gt; \n  tab_header(title = md(\"Global **Preoperative** Percentages\")) |&gt; \n  opt_all_caps() |&gt;\n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\nGlobal Preoperative Percentages\n    \n\nPercentage\n      # of HCPCS\n    \n\n\n\n10%\n2,483\n\n\n9%\n984\n\n\n11%\n361\n\n\n8%\n181\n\n\n12%\n133\n\n\n7%\n69\n\n\n17%\n19\n\n\n\n\n\n\n\n\n\nrvu24a |&gt;\n  filter(!is.na(intra_op), intra_op &gt; 0.00) |&gt; \n  count(intra_op, sort = TRUE) |&gt; \n  gt() |&gt; \n  cols_label(intra_op = \"Percentage\",\n             n = \"# of HCPCS\") |&gt; \n  fmt_percent(columns = intra_op, \n              drop_trailing_zeros = TRUE) |&gt; \n  fmt_integer(columns = n) |&gt; \n  tab_header(\n    title = md(\"Global **Intraoperative** Percentages\"),\n    subtitle = md(\"*Includes Postoperative Work in the Hospital*\")\n    ) |&gt; \n  opt_all_caps() |&gt;\n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\nGlobal Intraoperative Percentages\n    \n\nIncludes Postoperative Work in the Hospital\n    \n\nPercentage\n      # of HCPCS\n    \n\n\n\n69%\n1,408\n\n\n80%\n587\n\n\n81%\n487\n\n\n76%\n482\n\n\n84%\n469\n\n\n70%\n200\n\n\n83%\n181\n\n\n71%\n140\n\n\n74%\n133\n\n\n79%\n69\n\n\n82%\n28\n\n\n73%\n27\n\n\n60%\n19\n\n\n\n\n\n\n\n\n\nrvu24a |&gt;\n  filter(!is.na(post_op), post_op &gt; 0.00) |&gt; \n  count(post_op, sort = TRUE) |&gt; \n  gt() |&gt; \n  cols_label(post_op = \"Percentage\",\n             n = \"# of HCPCS\") |&gt; \n  fmt_percent(columns = post_op, \n              drop_trailing_zeros = TRUE) |&gt; \n  fmt_integer(columns = n) |&gt; \n  tab_header(\n    title = md(\"Global **Postoperative** Percentages\"),\n    subtitle = md(\"*Provided in the office after discharge from the hospital*\")) |&gt; \n  opt_all_caps() |&gt;\n  tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = px(20),\n    column_labels.padding.horizontal = px(20),\n    table.border.top.color = \"#555555\",\n    table.width = pct(100))\n\n\n\n\n\n\nGlobal Postoperative Percentages\n    \n\nProvided in the office after discharge from the hospital\n    \n\nPercentage\n      # of HCPCS\n    \n\n\n\n21%\n1,408\n\n\n10%\n1,074\n\n\n7%\n469\n\n\n14%\n350\n\n\n13%\n334\n\n\n9%\n209\n\n\n20%\n200\n\n\n19%\n140\n\n\n16%\n27\n\n\n23%\n19"
  },
  {
    "objectID": "posts/mpfs/mpfs.html#indicators-1",
    "href": "posts/mpfs/mpfs.html#indicators-1",
    "title": "arkrvu: Medicare Physician Fee Schedule",
    "section": "",
    "text": "TODO\n\n\nFacility\nNon-Facility\n\n\n\nAn NA in this field indicates that this procedure is rarely or never performed in the Facility setting:\n\nrvu24a |&gt; \n  filter(!is.na(facility_indicator)) |&gt;\n  cheapr::overview()\n\nobs: 2468 \ncols: 31 \n\n----- Numeric -----\n              col  class n_missng p_complt n_unique   mean   p0   p25   p50\n1        work_rvu numerc        0        1      242   0.42    0     0     0\n2  non_fac_pe_rvu numerc        0        1      818   3.21    0  0.39  1.57\n3  facility_pe_rv numerc        0        1      818   3.21    0  0.38  1.56\n4          mp_rvu numerc        0        1       54  0.044    0  0.01  0.02\n5  non_faclty_ttl numerc        0        1      884   3.67    0  0.49  2.04\n6  facility_total numerc        0        1      884   3.67    0  0.49  2.04\n7          pre_op numerc        0        1        1      0    0     0     0\n8        intra_op numerc        0        1        1      0    0     0     0\n9         post_op numerc        0        1        1      0    0     0     0\n10    conv_factor numerc        0        1        1  32.74 32.7 32.74 32.74\n11 nn_fclty______ numerc        0        1      417   6.72    0     0     0\n12 fclty_p_sd____ numerc        0        1      417   6.72    0     0     0\n13 mp_sd_fr_pps__ numerc        0        1       81  0.054    0     0     0\n     p75   p100  iqr       sd  hist\n1   0.55   8.78 0.55 8.50e-01 ▇▁▁▁▁\n2    4.2  53.07 3.81     4.91 ▇▁▁▁▁\n3    4.2  53.07 3.82     4.91 ▇▁▁▁▁\n4   0.05   1.56 0.04 9.70e-02 ▇▁▁▁▁\n5   4.78  55.36 4.29     5.38 ▇▁▁▁▁\n6   4.78  55.36 4.29     5.38 ▇▁▁▁▁\n7      0      0    0     0.00 ▁▁▇▁▁\n8      0      0    0     0.00 ▁▁▇▁▁\n9      0      0    0     0.00 ▁▁▇▁▁\n10 32.74  32.74    0 1.20e-13 ▁▁▇▁▁\n11  5.32 159.54 5.32 1.85e+01 ▇▁▁▁▁\n12  5.32 159.54 5.32 1.85e+01 ▇▁▁▁▁\n13  0.05   1.83 0.05 1.60e-01 ▇▁▁▁▁\n\n----- Categorical -----\n              col  class n_missng p_complt n_unique n_levels\n1           hcpcs chrctr        0        1     1402       NA\n2             mod factor     1402     0.43        1        3\n3     description chrctr        0        1     1290       NA\n4     status_code factor        0        1        8       12\n5  nt_sd_fr_mdcr_ chrctr     2439    0.012        1       NA\n6  non_fac_indctr chrctr     2464   0.0016        1       NA\n7  facility_ndctr chrctr        0        1        1       NA\n8        pctc_ind factor        0        1        8       10\n9       glob_days factor        0        1        5        7\n10      mult_proc factor        0        1        7        8\n11     bilat_surg factor        0        1        5        5\n12      asst_surg factor        0        1        4        4\n13        co_surg factor        0        1        3        4\n14      team_surg factor        0        1        2        4\n15      endo_base chrctr     2468        0        0       NA\n16 physcn_sprv___ factor        0        1        9       10\n17 calculatin_flg chrctr        0        1        1       NA\n18 dgnstc_mgng_f_ factor        0        1        2        2\n                     min                         max\n1                  0075T                       Q0035\n2                     TC                          TC\n3  2d cephal radio image Xray place prox ext thor ao\n4                      A                           X\n5                      +                           +\n6                     NA                          NA\n7                     NA                          NA\n8                      0                           9\n9                    000                         ZZZ\n10                     0                           9\n11                     0                           9\n12                     0                           9\n13                     0                           9\n14                     0                           9\n15                  &lt;NA&gt;                        &lt;NA&gt;\n16                    01                          7A\n17                     0                           0\n18                    88                          99\n\n\n\n\nAn NA in this field indicates that this procedure is rarely or never performed in the Non-Facility setting:\n\nrvu24a |&gt; \n  filter(!is.na(non_fac_indicator)) |&gt;\n  cheapr::overview()\n\nobs: 4066 \ncols: 31 \n\n----- Numeric -----\n              col  class n_missng p_complt n_unique  mean   p0   p25   p50\n1        work_rvu numerc        0        1     2238  15.4    0  6.95 12.11\n2  non_fac_pe_rvu numerc        0        1     1884 10.39    0  5.77   9.5\n3  facility_pe_rv numerc        0        1     1884 10.39    0  5.77   9.5\n4          mp_rvu numerc        0        1     1025  3.48    0   1.2   2.2\n5  non_faclty_ttl numerc        0        1     2957 29.27    0 14.92  24.5\n6  facility_total numerc        0        1     2957 29.27    0 14.92  24.5\n7          pre_op numerc        0        1        8  0.08    0  0.09   0.1\n8        intra_op numerc        0        1       14  0.62    0  0.69  0.71\n9         post_op numerc        0        1       11  0.12    0  0.07   0.1\n10    conv_factor numerc        0        1        1 32.74 32.7 32.74 32.74\n11 nn_fclty______ numerc        0        1        1     0    0     0     0\n12 fclty_p_sd____ numerc        0        1        1     0    0     0     0\n13 mp_sd_fr_pps__ numerc        0        1        1     0    0     0     0\n     p75   p100   iqr       sd  hist\n1  20.57 108.91 13.62 1.22e+01 ▇▂▁▁▁\n2  13.58  48.63  7.81     6.95 ▇▆▁▁▁\n3  13.58  48.63  7.81     6.95 ▇▆▁▁▁\n4   4.57  28.99  3.37     3.58 ▇▂▁▁▁\n5  38.16    171 23.24 2.13e+01 ▇▃▁▁▁\n6  38.16    171 23.24 2.13e+01 ▇▃▁▁▁\n7    0.1   0.17  0.01 3.90e-02 ▂▁▇▂▁\n8   0.81   0.84  0.12 3.00e-01 ▂▁▁▁▇\n9   0.21   0.23  0.14 7.50e-02 ▅▅▆▂▇\n10 32.74  32.74     0 3.10e-13 ▁▁▇▁▁\n11     0      0     0     0.00 ▁▁▇▁▁\n12     0      0     0     0.00 ▁▁▇▁▁\n13     0      0     0     0.00 ▁▁▇▁▁\n\n----- Categorical -----\n              col  class n_missng p_complt n_unique n_levels\n1           hcpcs chrctr        0        1     4064       NA\n2             mod factor     4064  0.00049        1        3\n3     description chrctr        0        1     3019       NA\n4     status_code factor        0        1        7       12\n5  nt_sd_fr_mdcr_ chrctr     4039   0.0066        1       NA\n6  non_fac_indctr chrctr        0        1        1       NA\n7  facility_ndctr chrctr     4062  0.00098        1       NA\n8        pctc_ind factor        0        1        6       10\n9       glob_days factor        0        1        6        7\n10      mult_proc factor        0        1        4        8\n11     bilat_surg factor        0        1        4        5\n12      asst_surg factor        0        1        4        4\n13        co_surg factor        0        1        4        4\n14      team_surg factor        0        1        4        4\n15      endo_base chrctr     3850    0.053       30       NA\n16 physcn_sprv___ factor        0        1        2       10\n17 calculatin_flg chrctr        0        1        1       NA\n18 dgnstc_mgng_f_ factor        0        1        1        2\n                       min                          max\n1                    11004                        G9157\n2                       TC                           TC\n3  1st hosp ip/obs high 75 Xcpsl ctrc rmvl cplx insj 1+\n4                        A                            X\n5                        +                            +\n6                       NA                           NA\n7                       NA                           NA\n8                        0                            9\n9                      000                          ZZZ\n10                       0                            9\n11                       0                            9\n12                       0                            9\n13                       0                            9\n14                       0                            9\n15                   29805                        66710\n16                      03                           09\n17                       0                            0\n18                      99                           99\n\n\n\n\n\n\nIndicates applicable payment adjustment rule for multiple procedures (modifier 51).\n\nmult_pro_lookup &lt;- c(\n  \"0\" = \"No payment adjustment rules.&lt;br&gt;&lt;br&gt;If the procedure is reported on the same day as another procedure, base the payment on the lower of (a) the actual charge, or (b) the fee schedule amount for the procedure.\",\n  \"1\" = \"Standard payment adjustment rules.&lt;br&gt;&lt;br&gt;If the procedure is reported on the same day as another procedure that has an indicator of 1, 2 or 3, rank the procedures by fee schedule amount and apply the appropriate reduction to this code (100%, 50%, 25%, 25%, 25%, and by report).&lt;br&gt;&lt;br&gt;Base the payment on the lower of (a) the actual charge, or (b) the fee schedule amount reduced by the appropriate percentage.\",\n  \"2\" = \"Standard payment adjustment rules.&lt;br&gt;&lt;br&gt;If the procedure is reported on the same day as another procedure with an indicator of 1, 2 or 3, rank the procedures by fee schedule amount and apply the appropriate reduction to this code (100%, 50%, 50%, 50%, 50% and by report).&lt;br&gt;&lt;br&gt;Base the payment on the lower of (a) the actual charge, or (b) the fee schedule amount reduced by the appropriate percentage.\",\n  \"3\" = \"Special rules for Multiple Endoscopic Procedures apply if procedure is billed with another endoscopy in the same family (i.e., another endoscopy that has the same base procedure).&lt;br&gt;&lt;br&gt;The base procedure for each code with this indicator is identified in the Endobase field.&lt;br&gt;&lt;br&gt;Apply the multiple endoscopy rules to a family before ranking the family with the other procedures performed on the same day.&lt;br&gt;&lt;br&gt;&lt;b&gt;Example:&lt;/b&gt; Multiple endoscopies in the same family are reported on the same day as endoscopies in another family or on the same day as a non-endoscopic procedure.&lt;br&gt;&lt;br&gt;If an endoscopic procedure is reported with only its base procedure, do not pay separately for the base procedure. Payment for the base procedure is included in the payment for the other endoscopy.\",\n  \"4\" = \"Special rules for the technical component (TC) of diagnostic imaging procedures apply if procedure is billed with another diagnostic imaging procedure in the same family (per the diagnostic imaging family indicator).&lt;br&gt;&lt;br&gt;If the procedure is reported in the same session on the same day as another procedure with the same family indicator, rank the procedures by fee schedule amount for the TC. Pay 100% for the highest priced procedure, and 50% for each subsequent procedure. Base the payment for subsequent procedures on the lower of (a) the actual charge, or (b) the fee schedule amount reduced by the appropriate percentage.&lt;br&gt;&lt;br&gt;Subject to 50% reduction of the TC diagnostic imaging. Subject to 5% reduction of the PC of diagnostic imaging.\",\n  \"5\" = \"Subject to 50% of the practice expense component for certain therapy services.\",\n  \"6\" = \"Subject to 25% reduction of the second highest and subsequent procedures to the TC of diagnostic cardiovascular services.\",\n  \"7\" = \"Subject to 20% reduction of the second highest and subsequent procedures to the TC of diagnostic ophthalmology services.\",\n  \"9\" = \"Missing\"\n)\n\nrvu24a |&gt; \n  count(mult_proc) |&gt; \n  filter(!is.na(mult_proc)) |&gt; \n  mutate(description = mult_pro_lookup[mult_proc]) |&gt; \n  gt(rowname_col = \"mult_proc\") |&gt;\n  fmt_markdown() |&gt; \n  fmt_integer() |&gt; \n  tab_style(\n    style = cell_text(align = \"center\", size = px(18)),\n    locations = cells_stub()\n  ) |&gt; \n  cols_align(align = \"left\") |&gt; \n  cols_label(n = \"# of Codes\") |&gt; \n  opt_all_caps() |&gt;\n  gt::tab_options(\n    heading.align = \"left\",\n    heading.border.bottom.color = \"#555555\", # \"#4758AB\",\n    heading.title.font.weight = \"bold\",\n    heading.background.color = \"#555555\", # \"#f8f9fa\",\n    quarto.disable_processing = TRUE,\n    data_row.padding.horizontal = gt::px(20),\n    column_labels.padding.horizontal = gt::px(20),\n    table.border.top.color = \"#555555\",\n    table.width = gt::pct(100))\n\n\n\n\n\n\n      # of Codes\n      description\n    \n\n\n0\n4,044\nNo payment adjustment rules.If the procedure is reported on the same day as another procedure, base the payment on the lower of (a) the actual charge, or (b) the fee schedule amount for the procedure.\n\n\n2\n5,287\nStandard payment adjustment rules.If the procedure is reported on the same day as another procedure that has an indicator of 1, 2 or 3, rank the procedures by fee schedule amount and apply the appropriate reduction to this code (100%, 50%, 25%, 25%, 25%, and by report).Base the payment on the lower of (a) the actual charge, or (b) the fee schedule amount reduced by the appropriate percentage.\n\n\n3\n361\nStandard payment adjustment rules.If the procedure is reported on the same day as another procedure with an indicator of 1, 2 or 3, rank the procedures by fee schedule amount and apply the appropriate reduction to this code (100%, 50%, 50%, 50%, 50% and by report).Base the payment on the lower of (a) the actual charge, or (b) the fee schedule amount reduced by the appropriate percentage.\n\n\n4\n420\nSpecial rules for Multiple Endoscopic Procedures apply if procedure is billed with another endoscopy in the same family (i.e., another endoscopy that has the same base procedure).The base procedure for each code with this indicator is identified in the Endobase field.Apply the multiple endoscopy rules to a family before ranking the family with the other procedures performed on the same day.Example: Multiple endoscopies in the same family are reported on the same day as endoscopies in another family or on the same day as a non-endoscopic procedure.If an endoscopic procedure is reported with only its base procedure, do not pay separately for the base procedure. Payment for the base procedure is included in the payment for the other endoscopy.\n\n\n5\n52\nSpecial rules for the technical component (TC) of diagnostic imaging procedures apply if procedure is billed with another diagnostic imaging procedure in the same family (per the diagnostic imaging family indicator).If the procedure is reported in the same session on the same day as another procedure with the same family indicator, rank the procedures by fee schedule amount for the TC. Pay 100% for the highest priced procedure, and 50% for each subsequent procedure. Base the payment for subsequent procedures on the lower of (a) the actual charge, or (b) the fee schedule amount reduced by the appropriate percentage.Subject to 50% reduction of the TC diagnostic imaging. Subject to 5% reduction of the PC of diagnostic imaging.\n\n\n6\n361\nSubject to 50% of the practice expense component for certain therapy services.\n\n\n7\n98\nSubject to 25% reduction of the second highest and subsequent procedures to the TC of diagnostic cardiovascular services.\n\n\n9\n7,876\nSubject to 20% reduction of the second highest and subsequent procedures to the TC of diagnostic ophthalmology services."
  },
  {
    "objectID": "posts/mpfs/mpfs.html#session-information",
    "href": "posts/mpfs/mpfs.html#session-information",
    "title": "arkrvu: Medicare Physician Fee Schedule",
    "section": "\n3.1 Session Information",
    "text": "3.1 Session Information\n\n\nR version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nother attached packages: gt(v.0.11.1.9000), cheapr(v.0.9.92), hacksaw(v.0.0.2), arkrvu(v.0.0.1.9000), northstar(v.0.0.8), lubridate(v.1.9.4), forcats(v.1.0.0), stringr(v.1.5.1), dplyr(v.1.1.4), purrr(v.1.0.2), readr(v.2.1.5), tidyr(v.1.3.1.9000), tibble(v.3.2.1), ggplot2(v.3.5.1) and tidyverse(v.2.0.0)\nloaded via a namespace (and not attached): gtable(v.0.3.6), xfun(v.0.49), htmlwidgets(v.1.6.4), collapse(v.2.0.18), RApiSerialize(v.0.1.4), tzdb(v.0.4.0), vctrs(v.0.6.5), tools(v.4.4.2), generics(v.0.1.3), parallel(v.4.4.2), fansi(v.1.0.6), pkgconfig(v.2.0.3), RcppParallel(v.5.1.9), lifecycle(v.1.0.4), compiler(v.4.4.2), textshaping(v.0.4.1), munsell(v.0.5.1), qs(v.0.27.2), htmltools(v.0.5.8.1), sass(v.0.4.9), yaml(v.2.3.10), pracma(v.2.4.4), pillar(v.1.9.0), commonmark(v.1.9.2), tidyselect(v.1.2.1), digest(v.0.6.37), stringi(v.1.8.4), pander(v.0.6.5), fuimus(v.0.0.5.9003), pins(v.1.4.0), fastmap(v.1.2.0), grid(v.4.4.2), colorspace(v.2.1-1), cli(v.3.6.3), magrittr(v.2.0.3), base64enc(v.0.1-3), utf8(v.1.2.4), withr(v.3.0.2), scales(v.1.3.0), rappdirs(v.0.3.3), timechange(v.0.3.0), rmarkdown(v.2.29), ragg(v.1.3.3), hms(v.1.1.3), stringfish(v.0.16.0), evaluate(v.1.0.1), knitr(v.1.49), markdown(v.1.13), rlang(v.1.1.4), Rcpp(v.1.0.13-1), zeallot(v.0.1.0), glue(v.1.8.0), xml2(v.1.3.6), rstudioapi(v.0.17.1), jsonlite(v.1.8.9), R6(v.2.5.1), systemfonts(v.1.1.0) and fs(v.1.6.5)"
  },
  {
    "objectID": "posts/nppes_nber_archives/nppes_archives.html",
    "href": "posts/nppes_nber_archives/nppes_archives.html",
    "title": "arknpi: NPPES Registry Archive",
    "section": "",
    "text": "deactivated |&gt; collapse::fcount(deact_date)\n\n# A tibble: 34 × 2\n   deact_date     N\n   &lt;date&gt;     &lt;int&gt;\n 1 2024-01-01     1\n 2 2024-01-02    47\n 3 2024-01-03   502\n 4 2024-01-04    28\n 5 2024-01-05    18\n 6 2024-01-06     5\n 7 2024-01-08    35\n 8 2024-01-09    14\n 9 2024-01-10   318\n10 2024-01-11    40\n# ℹ 24 more rows\n\n\n\n\nRemove suffix columns\n\n\nbase &lt;- collapse::rsplit(\n  collapse::funique(wk$base), \n  wk$base$entity) |&gt; \n  purrr::map(fuimus::remove_quiet)\n\nbase$I$prefix &lt;- NULL\nbase$I$suffix &lt;- NULL\nbase\n\n$I\n# A tibble: 15,267 × 13\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   &lt;chr&gt;      &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    \n 1 1912620808 I      2024-01-01  2024-01-01 2022-09-26 NA         NA        \n 2 1518543511 I      2024-01-01  2024-01-01 2021-03-20 NA         NA        \n 3 1619688645 I      2024-01-01  2024-01-01 2022-12-12 NA         NA        \n 4 1437575206 I      2024-01-01  2024-01-01 2014-03-17 NA         NA        \n 5 1053912162 I      2024-01-01  2024-01-01 2020-11-04 NA         NA        \n 6 1265752158 I      2024-01-01  2024-01-01 2010-06-02 2018-02-20 2018-09-11\n 7 1609131515 I      2024-01-01  2024-01-01 2012-07-06 NA         NA        \n 8 1750841870 I      2024-01-01  2024-01-01 2019-03-24 NA         NA        \n 9 1942708748 I      2024-01-01  2024-01-01 2018-01-26 NA         NA        \n10 1255864583 I      2024-01-01  2024-01-01 2017-04-04 NA         NA        \n# ℹ 15,257 more rows\n# ℹ 6 more variables: sole_prop &lt;chr&gt;, gender &lt;chr&gt;, first_name &lt;chr&gt;,\n#   middle_name &lt;chr&gt;, last_name &lt;chr&gt;, credential &lt;chr&gt;\n\n$O\n# A tibble: 3,917 × 10\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   &lt;chr&gt;      &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    \n 1 1952724692 O      2024-01-01  2024-01-01 2014-01-31 NA         NA        \n 2 1548924087 O      2024-01-01  2022-10-04 2021-10-29 NA         NA        \n 3 1295504330 O      2024-01-01  2023-09-26 2024-01-01 NA         NA        \n 4 1386413417 O      2024-01-01  2023-09-19 2024-01-01 NA         NA        \n 5 1558130690 O      2024-01-01  2023-12-21 2024-01-01 NA         NA        \n 6 1821867961 O      2024-01-01  2023-12-28 2024-01-01 NA         NA        \n 7 1649049784 O      2024-01-01  2023-12-27 2024-01-01 NA         NA        \n 8 1275302317 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n 9 1356110498 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n10 1508635640 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n# ℹ 3,907 more rows\n# ℹ 3 more variables: org_subpart &lt;chr&gt;, org_parent &lt;chr&gt;, org_provider &lt;chr&gt;\n\n\n\n\n\nLook for credentials in last_name\n\n\n\nbase$I |&gt; \n  collapse::fsubset(codex::na(credential)) |&gt; \n  collapse::fsubset(codex::sf_detect(last_name, \", \")) |&gt; \n  dplyr::glimpse()\n\nRows: 2\nColumns: 13\n$ npi         &lt;chr&gt; \"1265752158\", \"1386886174\"\n$ entity      &lt;chr&gt; \"I\", \"I\"\n$ last_update &lt;date&gt; 2024-01-01, 2024-01-03\n$ cert_date   &lt;date&gt; 2024-01-01, 2024-01-03\n$ enum_date   &lt;date&gt; 2010-06-02, 2009-03-25\n$ deact_date  &lt;date&gt; 2018-02-20, NA\n$ react_date  &lt;date&gt; 2018-09-11, NA\n$ sole_prop   &lt;chr&gt; \"N\", \"Y\"\n$ gender      &lt;chr&gt; \"F\", \"F\"\n$ first_name  &lt;chr&gt; \"LIVIA\", \"JUDY\"\n$ middle_name &lt;chr&gt; \"S\", \"A\"\n$ last_name   &lt;chr&gt; \"MACHADO, RPH, PHARMD, BCPS\", \"LIU, INC\"\n$ credential  &lt;chr&gt; NA, NA\n\n\n\n\n\norg_subparts have org_parent names\nNon-subparts only have org_provider names\n\n\ncollapse::rsplit(\n  base$O |&gt; \n    dplyr::relocate(\n      org_parent, \n      org_provider, \n      .after = npi), \n  base$O$org_subpart) |&gt; \n  purrr::map(\\(df) \n      fuimus::remove_quiet(df) |&gt; \n      dplyr::select(-org_subpart))\n\n$N\n# A tibble: 3,514 × 8\n   npi        org_provider   entity last_update cert_date  enum_date  deact_date\n   &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    \n 1 1952724692 WHITE BEHAVIO… O      2024-01-01  2024-01-01 2014-01-31 NA        \n 2 1548924087 MORGAN HEART … O      2024-01-01  2022-10-04 2021-10-29 NA        \n 3 1295504330 KENDRA TAYLOR… O      2024-01-01  2023-09-26 2024-01-01 NA        \n 4 1386413417 ULYSSES' PLAC… O      2024-01-01  2023-09-19 2024-01-01 NA        \n 5 1558130690 RETHINK COUNS… O      2024-01-01  2023-12-21 2024-01-01 NA        \n 6 1821867961 AURORA COMMUN… O      2024-01-01  2023-12-28 2024-01-01 NA        \n 7 1649049784 PULSE URGENT … O      2024-01-01  2023-12-27 2024-01-01 NA        \n 8 1275302317 NVR & SDD CON… O      2024-01-01  2023-12-30 2024-01-01 NA        \n 9 1356110498 HEBKRAM'S PA   O      2024-01-01  2023-12-30 2024-01-01 NA        \n10 1508635640 HYPNOSIS412    O      2024-01-01  2023-12-30 2024-01-01 NA        \n# ℹ 3,504 more rows\n# ℹ 1 more variable: react_date &lt;date&gt;\n\n$Y\n# A tibble: 403 × 9\n   npi        org_parent   org_provider entity last_update cert_date  enum_date \n   &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;date&gt;    \n 1 1689443723 RAE 6 LLC    RAE6TECH     O      2024-01-01  2023-12-30 2024-01-01\n 2 1124804042 POPLAR PEDI… POPLAR PEDI… O      2024-01-01  2024-01-01 2023-09-06\n 3 1942079942 ASTERRA LLC  AUBURN ACUP… O      2024-01-01  2024-01-01 2024-01-01\n 4 1578332573 LW CARE LLC  LW CARE LLC  O      2024-01-01  2023-12-27 2024-01-01\n 5 1013786011 LW CARE LLC  LW CARE LLC  O      2024-01-01  2024-01-01 2024-01-01\n 6 1831968833 LW CARE LLC  LW CARE LLC  O      2024-01-01  2024-01-01 2024-01-01\n 7 1568231561 LW CARE LLC  LW CARE LLC  O      2024-01-01  2024-01-01 2024-01-01\n 8 1467167593 1336854454   CLINICAL CA… O      2024-01-01  2024-01-01 2023-01-23\n 9 1821867821 LW CARE LLC  LW CARE LLC  O      2024-01-01  2024-01-01 2024-01-01\n10 1114410495 LAKE WASHIN… ADVANCED PA… O      2024-01-01  2024-01-01 2018-06-11\n# ℹ 393 more rows\n# ℹ 2 more variables: deact_date &lt;date&gt;, react_date &lt;date&gt;\n\n\n\n\nIf sole_prop is X (Did Not Answer), then cert_date is NA\n\nLooks like deact_date & react_date are NA as well\n\n\ncollapse::rsplit(\n  base$I, \n  base$I$sole_prop) |&gt; \n  purrr::map(fuimus::remove_quiet)\n\n$N\n# A tibble: 10,405 × 13\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   &lt;chr&gt;      &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    \n 1 1912620808 I      2024-01-01  2024-01-01 2022-09-26 NA         NA        \n 2 1619688645 I      2024-01-01  2024-01-01 2022-12-12 NA         NA        \n 3 1265752158 I      2024-01-01  2024-01-01 2010-06-02 2018-02-20 2018-09-11\n 4 1609131515 I      2024-01-01  2024-01-01 2012-07-06 NA         NA        \n 5 1750841870 I      2024-01-01  2024-01-01 2019-03-24 NA         NA        \n 6 1942708748 I      2024-01-01  2024-01-01 2018-01-26 NA         NA        \n 7 1477895621 I      2024-01-01  2024-01-01 2013-03-25 NA         NA        \n 8 1891305488 I      2024-01-01  2024-01-01 2020-08-07 NA         NA        \n 9 1477322501 I      2024-01-01  2022-10-20 2024-01-01 NA         NA        \n10 1568231694 I      2024-01-01  2022-03-28 2024-01-01 NA         NA        \n# ℹ 10,395 more rows\n# ℹ 6 more variables: sole_prop &lt;chr&gt;, gender &lt;chr&gt;, first_name &lt;chr&gt;,\n#   middle_name &lt;chr&gt;, last_name &lt;chr&gt;, credential &lt;chr&gt;\n\n$X\n# A tibble: 29 × 10\n   npi     entity last_update enum_date  sole_prop gender first_name middle_name\n   &lt;chr&gt;   &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;      \n 1 163915… I      2024-01-06  2005-12-22 X         M      STEPHEN    JOHN       \n 2 199270… I      2024-01-06  2005-08-10 X         F      PRISCILA   &lt;NA&gt;       \n 3 161994… I      2024-01-06  2006-02-21 X         F      NORMA      VB         \n 4 171097… I      2024-01-06  2005-11-03 X         F      SHAHIRA    HALIM      \n 5 137652… I      2024-01-06  2006-01-03 X         F      ROSEMARY   M          \n 6 103310… I      2024-01-06  2005-10-24 X         M      JOHN       B          \n 7 175032… I      2024-01-06  2006-06-16 X         F      MERRILL    &lt;NA&gt;       \n 8 114427… I      2024-01-06  2006-05-22 X         F      LUCILLE    J          \n 9 152804… I      2024-01-06  2005-12-22 X         M      JOHN       &lt;NA&gt;       \n10 157851… I      2024-01-06  2006-05-04 X         M      DONALD     MICHAEL    \n# ℹ 19 more rows\n# ℹ 2 more variables: last_name &lt;chr&gt;, credential &lt;chr&gt;\n\n$Y\n# A tibble: 4,833 × 13\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   &lt;chr&gt;      &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    \n 1 1518543511 I      2024-01-01  2024-01-01 2021-03-20 NA         NA        \n 2 1437575206 I      2024-01-01  2024-01-01 2014-03-17 NA         NA        \n 3 1053912162 I      2024-01-01  2024-01-01 2020-11-04 NA         NA        \n 4 1255864583 I      2024-01-01  2024-01-01 2017-04-04 NA         NA        \n 5 1831968973 I      2024-01-01  2023-12-12 2024-01-01 NA         NA        \n 6 1922877067 I      2024-01-01  2023-12-10 2024-01-01 NA         NA        \n 7 1568231603 I      2024-01-01  2023-12-20 2024-01-01 NA         NA        \n 8 1477322519 I      2024-01-01  2023-12-23 2024-01-01 NA         NA        \n 9 1912776055 I      2024-01-01  2023-12-19 2024-01-01 NA         NA        \n10 1730958877 I      2024-01-01  2023-12-26 2024-01-01 NA         NA        \n# ℹ 4,823 more rows\n# ℹ 6 more variables: sole_prop &lt;chr&gt;, gender &lt;chr&gt;, first_name &lt;chr&gt;,\n#   middle_name &lt;chr&gt;, last_name &lt;chr&gt;, credential &lt;chr&gt;\n\n\n\n\nConsider matches on city, state, & zip with different addresses\n\n\naddress &lt;- collapse::funique(wk$address)\n\n# Exact match on all address fields\nexact &lt;- address |&gt; \n  dplyr::filter(\n    mail_address == prac_address,\n    mail_city == prac_city,\n    mail_state == prac_state,\n    mail_zip == prac_zip,\n    mail_country == prac_country,\n    mail_phone == prac_phone,\n    mail_fax == prac_fax) |&gt; \n  collapse::fcompute(\n    npi = npi,\n    entity = entity,\n    purpose = \"MP\",\n    address = prac_address,\n    city = prac_city,\n    state = prac_state,\n    zip = arknpi::make_zip(prac_zip),\n    country = prac_country,\n    phone = arknpi::make_phone(prac_phone),\n    fax = arknpi::make_phone(prac_fax))\n\n# Match on all except FAX\nfax &lt;- address |&gt; \n  dplyr::filter(\n    npi %!in% exact$npi,  \n    mail_address == prac_address, \n    mail_city == prac_city,\n    mail_state == prac_state,\n    mail_country == prac_country,\n    mail_zip == prac_zip,\n    mail_phone == prac_phone) |&gt; \n  collapse::fcompute(\n    npi = npi,\n    entity = entity,\n    address = prac_address,\n    city = prac_city,\n    state = prac_state,\n    zip = arknpi::make_zip(prac_zip),\n    country = prac_country,\n    phone = arknpi::make_phone(prac_phone),\n    fax = arknpi::make_case(mail_fax, prac_fax),\n    purpose = arknpi::make_purpose(mail_fax, prac_fax)) |&gt;\n  collapse::fmutate(fax = arknpi::make_phone(fax))\n\n# Match on all except ZIP, PHONE, and FAX\nphone &lt;- address |&gt; \n  dplyr::filter(npi %!in% c(exact$npi, fax$npi),      \n    mail_address == prac_address,\n    mail_city == prac_city,\n    mail_state == prac_state,\n    mail_country == prac_country) |&gt;\n  collapse::fcompute(\n    npi = npi,\n    entity = entity,\n    purpose = arknpi::make_purpose(mail_phone, prac_phone),\n    address = prac_address,\n    city = prac_city,\n    state = prac_state,\n    zip = arknpi::make_case(mail_zip, prac_zip),\n    country = prac_country,\n    phone = arknpi::make_case(mail_phone, prac_phone),\n    fax = arknpi::make_case(mail_fax, prac_fax)) |&gt; \n  collapse::fmutate(\n    zip = arknpi::make_zip(zip),\n    phone = arknpi::make_phone(phone),\n    fax = arknpi::make_phone(fax))\n\n# Pivot remaining addresses\npiv &lt;- address |&gt; \n  dplyr::filter(npi %!in% c(exact$npi, fax$npi, phone$npi)) |&gt; \n  tidyr::pivot_longer(\n    -c(npi, entity), \n    names_to = \"type_part\", \n    values_to = \"value\") |&gt; \n  tidyr::separate_wider_delim(\n    type_part, \n    delim = \"_\", \n    names = c(\"type\", \"part\")) |&gt; \n  collapse::fmutate(\n    purpose = dplyr::case_when(\n      type == \"mail\" ~ \"M\",\n      type == \"prac\" ~ \"P\",\n    .default = type),\n    type = NULL) |&gt;\n  tidyr::pivot_wider(\n    names_from = part, \n    values_from = value) |&gt; \n  collapse::fmutate(\n    zip = arknpi::make_zip(zip),\n    phone = arknpi::make_phone(phone),\n    fax = arknpi::make_phone(fax))\n\naddress &lt;- collapse::rowbind(exact, fax, phone, piv)\n\naddress &lt;- collapse::rsplit(\n  address, \n  address$entity) |&gt; \n  purrr::map(remove_quiet)\n\naddress\n\n$I\n# A tibble: 22,883 × 10\n   npi        entity purpose address       city  state zip   country phone fax  \n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;\n 1 1437575206 I      MP      3840 PACKARD… ANN … MI    4810… US      (734… (734…\n 2 1477895621 I      MP      3144 SANTA A… EL M… CA    9173… US      (626… (626…\n 3 1346019486 I      MP      57 TOWNSHIP … CHES… OH    4561… US      (740… (740…\n 4 1265201206 I      MP      822 LOVELACE… BREW… AL    3642… US      (251… (800…\n 5 1447029483 I      MP      350 FAIRWAY … DEER… FL    3344… US      (877… (866…\n 6 1295504249 I      MP      1550 N 115TH… SEAT… WA    9813… US      (206… (206…\n 7 1073382024 I      MP      401 16TH ST … ROCH… MN    5590… US      (507… (507…\n 8 1639948698 I      MP      920 SARATOGA… SAN … CA    9512… US      (408… (408…\n 9 1508635574 I      MP      14725 SE RHO… PORT… OR    9723… US      (971… (971…\n10 1932978905 I      MP      3801 KELL BL… WICH… TX    7630… US      (940… (940…\n# ℹ 22,873 more rows\n\n$O\n# A tibble: 5,839 × 10\n   npi        entity purpose address       city  state zip   country phone fax  \n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;\n 1 1548924087 O      MP      46 GRAMATAN … MOUN… NY    1055… US      (295… (646…\n 2 1205605342 O      MP      7610 CARROLL… TAKO… MD    2091… US      (301… (301…\n 3 1114796257 O      MP      6510 KENILWO… RIVE… MD    2073… US      (301… (301…\n 4 1902675945 O      MP      2585 PACIFIC… TORR… CA    9050… US      (424… (310…\n 5 1538938576 O      MP      10751 W ROWE… PEOR… AZ    8538… US      (623… (623…\n 6 1568231512 O      MP      1121 FIRECRA… JUST… TX    7624… US      (940… (940…\n 7 1912776964 O      MP      3760 CURTIS … COCOA FL    3292… US      (321… (321…\n 8 1306615364 O      MP      350 FAIRWAY … DEER… FL    3344… US      (877… (866…\n 9 1336918390 O      MP      240 E GARRIS… GAST… NC    2805… US      (980… (980…\n10 1649049610 O      MP      6751 N SUNSE… GLEN… AZ    8530… US      (775… (702…\n# ℹ 5,829 more rows\n\n\n\n\nploc &lt;- tidytable::fread(\n  \"D:/NBER_NPI_Archives/weekly/unzipped/practicelocation/pl_pfile_20240101-20240107.csv\",\n  colClasses = list(character = 1:10)) |&gt; \n  setNames(c(\"npi\", \"add_1\", \"add_2\", \"city\", \"state\", \n             \"zip\", \"country\", \"phone\", \"ext\", \"fax\")) |&gt; \n  purrr::map_dfr(fuimus::na_if_common) |&gt; \n  fuimus::combine(address, c(\"add_1\", \"add_2\"), sep = \" \") |&gt;\n  fuimus::combine(phone, c(\"phone\", \"ext\"), sep = \" \") |&gt;\n  dplyr::reframe(\n    npi,\n    purpose = \"S\",\n    address,\n    city,\n    state,\n    zip = arknpi::make_zip(zip),\n    country,\n    phone = arknpi::make_phone(phone),\n    fax = arknpi::make_phone(fax))\n\nploc\n\n# A tibble: 4,958 × 9\n   npi        purpose address              city  state zip   country phone fax  \n   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;\n 1 1336918309 S       455 E Eisenhower Pk… Ann … MI    4810… US      (734… (517…\n 2 1073382040 S       455 E Eisenhower Pk… Ann … MI    4810… US      (888… &lt;NA&gt; \n 3 1376008821 S       876 Dutchess Tpke    Poug… NY    1260… US      (845… &lt;NA&gt; \n 4 1750841870 S       300 Crescent Dr      Vaca… CA    9568… US      (949… &lt;NA&gt; \n 5 1811383706 S       Dogwood Ave Buildin… John… TN    37614 US      (423… (423…\n 6 1811383706 S       111 W Stone Dr Ste … King… TN    3766… US      (423… &lt;NA&gt; \n 7 1255864583 S       10521 Meridian Ave N Seat… WA    9813… US      (206… &lt;NA&gt; \n 8 1295396158 S       176 Palisade Ave     Jers… NJ    0730… US      (201… &lt;NA&gt; \n 9 1295396158 S       29 E 29th St         Bayo… NJ    0700… US      (201… &lt;NA&gt; \n10 1285629089 S       4 Sheridan Sq Suite… King… TN    3766… US      (423… (423…\n# ℹ 4,948 more rows\n\n\n\n\ntaxonomy &lt;- wk$taxonomy |&gt; \n  dplyr::select(\n    npi, \n    entity, \n    dplyr::starts_with(\"taxonomy\")) |&gt; \n  collapse::fmutate(\n    taxonomy_level = data.table::fcase(\n      taxonomy_primary == \"Y\", \"P\",\n      taxonomy_primary == \"N\", \"O\",\n      taxonomy_primary == \"X\", \"X\"),\n    taxonomy_primary = NULL)\n\ntaxonomy &lt;- collapse::rowbind(\n  taxonomy |&gt; \n    collapse::fsubset(codex::na(taxonomy_group)) |&gt; \n    collapse::fselect(-taxonomy_group) |&gt; \n    collapse::funique(),\n  taxonomy |&gt; \n    collapse::fsubset(codex::not_na(taxonomy_group)) |&gt; \n    collapse::fselect(-taxonomy_code, -taxonomy_level) |&gt; \n    collapse::funique() |&gt; \n    collapse::frename(taxonomy_code = taxonomy_group) |&gt; \n    collapse::fmutate(taxonomy_level = \"G\")) |&gt; \n  collapse::fmutate(\n    taxonomy_level = factor(\n      taxonomy_level, \n      levels = c(\"P\", \"O\", \"X\", \"G\"), \n      ordered = TRUE)) |&gt; \n  dplyr::arrange(npi, taxonomy_level) |&gt; \n  #------------------Deduplicate Primary Taxonomy\n  collapse::fmutate(primary = ifelse(taxonomy_level == \"P\", taxonomy_code, NA_character_)) |&gt; \n  tidyr::fill(primary, .by = npi) |&gt; \n  collapse::fgroup_by(npi) |&gt;\n  collapse::fmutate(eq = ifelse(taxonomy_level != \"P\" & taxonomy_code == primary, TRUE, FALSE)) |&gt; \n  collapse::fungroup() |&gt; \n  collapse::fsubset(!eq) |&gt; \n  collapse::fselect(-eq, -primary)\n\ncollapse::rsplit(\n  taxonomy, \n  taxonomy$entity) |&gt; \n  purrr::map(remove_quiet)\n\n$I\n# A tibble: 18,711 × 4\n   npi        entity taxonomy_code taxonomy_level\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;         &lt;ord&gt;         \n 1 1003009861 I      207RC0000X    P             \n 2 1003013137 I      363AM0700X    P             \n 3 1003018060 I      106H00000X    P             \n 4 1003047531 I      207L00000X    P             \n 5 1003047531 I      390200000X    O             \n 6 1003052903 I      2084P0800X    P             \n 7 1003063173 I      208G00000X    P             \n 8 1003109091 I      208100000X    P             \n 9 1003109091 I      2081P2900X    O             \n10 1003122698 I      2085R0202X    P             \n# ℹ 18,701 more rows\n\n$O\n# A tibble: 3,318 × 4\n   npi        entity taxonomy_code taxonomy_level\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;         &lt;ord&gt;         \n 1 1003096488 O      261Q00000X    P             \n 2 1003196072 O      3416L0300X    P             \n 3 1003200874 O      253Z00000X    P             \n 4 1003200874 O      251E00000X    O             \n 5 1003330226 O      251E00000X    P             \n 6 1003330226 O      251J00000X    O             \n 7 1003337734 O      324500000X    P             \n 8 1003407230 O      261QM1300X    P             \n 9 1003407230 O      251E00000X    O             \n10 1003407230 O      193200000X    G             \n# ℹ 3,308 more rows\n\n\n\n\nlicense &lt;- collapse::fselect(\n  wk$taxonomy, \n  npi, \n  entity, \n  license_no, \n  license_state) |&gt; \n  collapse::funique()\n\nlicense &lt;- collapse::rsplit(\n  license, \n  license$entity) |&gt; \n  purrr::map(\n    function(df) \n      fuimus::remove_quiet(df) |&gt; \n      dplyr::filter(codex::not_na(license_no)))\n\nlicense\n\n$I\n# A tibble: 14,155 × 4\n   npi        entity license_no license_state\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;        \n 1 1518543511 I      70884      NY           \n 2 1619688645 I      0001270234 VA           \n 3 1619688645 I      0024185857 VA           \n 4 1437575206 I      6301009991 MI           \n 5 1053912162 I      032328     NY           \n 6 1265752158 I      PS52491    FL           \n 7 1609131515 I      280453-1   NY           \n 8 1942708748 I      585919     NY           \n 9 1255864583 I      MC60672915 WA           \n10 1255864583 I      LH60963777 WA           \n# ℹ 14,145 more rows\n\n$O\n# A tibble: 532 × 4\n   npi        entity license_no license_state\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;        \n 1 1952724692 O      6301009991 MI           \n 2 1508824574 O      SA5335     FL           \n 3 1528515327 O      6401015547 MI           \n 4 1891209284 O      ISW01554   RI           \n 5 1437334182 O      9190       TX           \n 6 1427109271 O      602289671  WA           \n 7 1750821781 O      168900     WA           \n 8 1093182198 O      190859AP   CA           \n 9 1093182198 O      190075AP   CA           \n10 1841677408 O      190070AP   CA           \n# ℹ 522 more rows\n\n\n\n\nidentifier &lt;- wk$identifier |&gt; \n  # Remove Taxonomy Codes\n  collapse::fsubset(\n    codex::sf_ndetect(otid, \"^[A-Z0-9]{9}X$\")) |&gt; \n  collapse::fmutate(otid_type = as.character(as.integer(otid_type)))\n\ncollapse::rsplit(\n  identifier, \n  identifier$entity) |&gt; \n  purrr::map(remove_quiet)\n\n$I\n# A tibble: 3,052 × 6\n   npi        entity otid       otid_type otid_state otid_issuer                \n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;                      \n 1 1003685140 I      3496       1         NH         STATE OF NEW HAMPSHIRE OFF…\n 2 1134998198 I      1194322628 5         MI         &lt;NA&gt;                       \n 3 1578544367 I      10007752   5         TX         &lt;NA&gt;                       \n 4 1578544367 I      152031401  5         TX         &lt;NA&gt;                       \n 5 1578544367 I      152028001  5         TX         &lt;NA&gt;                       \n 6 1316936222 I      4160095    1         TN         BLUE CROSS                 \n 7 1316936222 I      1053635    5         LA         &lt;NA&gt;                       \n 8 1316936222 I      087281     5         AZ         &lt;NA&gt;                       \n 9 1316936222 I      3000540    5         TN         &lt;NA&gt;                       \n10 1316936222 I      P00444174  1         &lt;NA&gt;       MEDICARE RAILROAD          \n# ℹ 3,042 more rows\n\n$O\n# A tibble: 1,314 × 6\n   npi        entity otid       otid_type otid_state otid_issuer          \n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;                \n 1 1417726456 O      0155098    5         OH         &lt;NA&gt;                 \n 2 1225765241 O      U5083      1         TX         TEXAS MEDICAL LICENSE\n 3 1689443665 O      1417266396 5         NY         &lt;NA&gt;                 \n 4 1255611539 O      014469     1         TX         TEXAS HCSSA LICENSE  \n 5 1508824574 O      890596700  5         FL         &lt;NA&gt;                 \n 6 1750958104 O      1386940575 5         WI         &lt;NA&gt;                 \n 7 1982294732 O      250000218  5         NV         &lt;NA&gt;                 \n 8 1891209284 O      U300404468 1         RI         MEDICARE PTAN        \n 9 1730729385 O      1952817926 1         &lt;NA&gt;       ORGANIZATIONAL NPI   \n10 1730729385 O      1043526098 1         &lt;NA&gt;       NPI                  \n# ℹ 1,304 more rows\n\n\n\n\nchange prefix to oname_\n\n\n\nwk$other &lt;- wk$other |&gt; \n  setNames(c(\n    \"npi\", \"entity\", \"onm_org\", \n    \"onm_org_type\", \"onm_prefix\", \n    \"onm_first\", \"onm_middle\", \n    \"onm_last\", \"onm_last_type\", \n    \"onm_suffix\", \"onm_credential\")) |&gt; \n  collapse::fselect(-onm_suffix, -onm_prefix)\n\nother &lt;- collapse::rsplit(\n  wk$other, \n  wk$other$entity) |&gt; \n  purrr::map(remove_quiet)\n\nother$O &lt;- collapse::frename(other$O, onm_type = onm_org_type)\nother$I &lt;- collapse::frename(other$I, onm_type = onm_last_type)\n\nother$I\n\n# A tibble: 1,221 × 7\n   npi        entity onm_first onm_middle onm_last   onm_type onm_credential\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;         \n 1 1255864583 I      GWEN      &lt;NA&gt;       WILSON     2        LMHC, ATR     \n 2 1659140796 I      KATELIN   LEE ANN    BOYER      1        &lt;NA&gt;          \n 3 1184493223 I      AESHA     ISHWARBHAI PATEL      5        &lt;NA&gt;          \n 4 1437928579 I      TREVA     JO         MOYA       1        &lt;NA&gt;          \n 5 1881463826 I      AMANDA    RENEE      SCHELLHORN 1        &lt;NA&gt;          \n 6 1871362814 I      BRITTANY  C          DARNELL    1        CCMA-CHC      \n 7 1770352718 I      PEBBLES   MAURINE    YEE        5        PMHNP-BC      \n 8 1497524441 I      CARING    FOR        MAMAS      2        &lt;NA&gt;          \n 9 1033988084 I      JANINE    LISSETT    LESSLEY    1        &lt;NA&gt;          \n10 1487423430 I      &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;       2        &lt;NA&gt;          \n# ℹ 1,211 more rows\n\n\n\noname &lt;- tidytable::fread(\n  \"D:/NBER_NPI_Archives/weekly/unzipped/othername/othername_pfile_20240101-20240107.csv\",\n    colClasses = list(character = 1:3)) |&gt; \n  janitor::clean_names() |&gt;\n    purrr::map_dfr(fuimus::na_if_common) |&gt; \n  dplyr::reframe(\n    npi, \n    entity = \"O\",\n    oname_org = provider_other_organization_name, \n    oname_type = provider_other_organization_name_type_code)\n\n\ndplyr::left_join(oname, other$O, by = c(\"npi\", \"entity\")) |&gt; \n  dplyr::arrange(npi)\n\n# A tibble: 1,721 × 6\n   npi        entity oname_org                       oname_type onm_org onm_type\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;                           &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;   \n 1 1003096488 O      Trace Regional Hospital         3          TRACE … 3       \n 2 1003196072 O      Hocking Township Fire Dept.     3          HOCKIN… 3       \n 3 1003199829 O      Plains Ear, Nose, Throat & Fac… 3          PLAINS… 3       \n 4 1003330226 O      Thrive Skilled Pediatric Care   3          THRIVE… 3       \n 5 1003337734 O      Ohio Detox Center               3          OHIO D… 3       \n 6 1003372533 O      Glacier Valley SBS FFS          5          &lt;NA&gt;    &lt;NA&gt;    \n 7 1003407230 O      Milk Guide                      3          MILK G… 3       \n 8 1003407230 O      Mother Nurture Lactation Care … 3          MILK G… 3       \n 9 1003429242 O      Durango Neurosurgery Satellite… 3          DURANG… 3       \n10 1003429903 O      25 Road OB-GYN Clinic           3          25 ROA… 3       \n# ℹ 1,711 more rows\n\ndplyr::arrange(other$O, npi)\n\n# A tibble: 1,125 × 4\n   npi        entity onm_org                                           onm_type\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;                                             &lt;chr&gt;   \n 1 1003096488 O      TRACE REGIONAL HOSPITAL                           3       \n 2 1003196072 O      HOCKING TOWNSHIP FIRE DEPT                        3       \n 3 1003199829 O      PLAINS EAR, NOSE, THROAT & FACIAL PLASTIC SURGERY 3       \n 4 1003330226 O      THRIVE SKILLED PEDIATRIC CARE                     3       \n 5 1003337734 O      OHIO DETOX CENTER                                 3       \n 6 1003407230 O      MILK GUIDE                                        3       \n 7 1003429242 O      DURANGO NEUROSURGERY SATELLITE CLINIC             3       \n 8 1003429903 O      25 ROAD OB-GYN CLINIC                             3       \n 9 1003463092 O      MEDCARE PHARMACY                                  3       \n10 1003495466 O      LIFESTANCE HEALTH                                 3       \n# ℹ 1,115 more rows\n\ndplyr::arrange(oname, npi)\n\n# A tibble: 1,721 × 4\n   npi        entity oname_org                                        oname_type\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;                                            &lt;chr&gt;     \n 1 1003096488 O      Trace Regional Hospital                          3         \n 2 1003196072 O      Hocking Township Fire Dept.                      3         \n 3 1003199829 O      Plains Ear, Nose, Throat & Facial Plastic Surge… 3         \n 4 1003330226 O      Thrive Skilled Pediatric Care                    3         \n 5 1003337734 O      Ohio Detox Center                                3         \n 6 1003372533 O      Glacier Valley SBS FFS                           5         \n 7 1003407230 O      Milk Guide                                       3         \n 8 1003407230 O      Mother Nurture Lactation Care LLC                3         \n 9 1003429242 O      Durango Neurosurgery Satellite Clinic            3         \n10 1003429903 O      25 Road OB-GYN Clinic                            3         \n# ℹ 1,711 more rows\n\n\n\n\nwk$ao |&gt; \n  collapse::fmutate(ao_phone = arknpi::make_phone(ao_phone)) |&gt; \n  collapse::fselect(-ao_prefix, -ao_suffix)\n\n# A tibble: 3,917 × 8\n   npi        entity ao_first  ao_middle ao_last ao_credential ao_title ao_phone\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt;   \n 1 1952724692 O      MICHELE   &lt;NA&gt;      WHITE   PHD, LLP, LPC OWNER    (734) 9…\n 2 1548924087 O      TANESHA   &lt;NA&gt;      MORGAN  LCSW          CEO      (929) 5…\n 3 1295504330 O      KENDRA    &lt;NA&gt;      TAYLOR  &lt;NA&gt;          OWNER    (615) 2…\n 4 1386413417 O      MELISSA   &lt;NA&gt;      DELLA … LCSW          OWNER    (520) 8…\n 5 1558130690 O      MALYNDI   R         WEST    &lt;NA&gt;          OWNER &… (512) 5…\n 6 1821867961 O      AURORA    CANE      HOYLE   FNP-BC        PRIMARY… (503) 5…\n 7 1649049784 O      ASMITA    &lt;NA&gt;      PATEL   MD            SECRETA… (630) 3…\n 8 1275302317 O      RANGANAR… &lt;NA&gt;      NARASI… &lt;NA&gt;          MANAGER… (781) 3…\n 9 1356110498 O      AKRAM     &lt;NA&gt;      ABD EL… MD            PHYSICI… (704) 4…\n10 1508635640 O      JAYSON    &lt;NA&gt;      ROWLAND CHT CPH       HYPNOTH… (412) 2…\n# ℹ 3,907 more rows\n\n\n\n\n\nR version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nother attached packages: arknpi(v.0.0.0.9001), codex(v.0.0.1), fuimus(v.0.0.5.9002), collapse(v.2.0.18), data.table(v.1.16.99), lubridate(v.1.9.4), forcats(v.1.0.0), stringr(v.1.5.1), dplyr(v.1.1.4), purrr(v.1.0.2), readr(v.2.1.5), tidyr(v.1.3.1.9000), tibble(v.3.2.1), ggplot2(v.3.5.1) and tidyverse(v.2.0.0)\nloaded via a namespace (and not attached): rappdirs(v.0.3.3), utf8(v.1.2.4), generics(v.0.1.3), stringi(v.1.8.4), hms(v.1.1.3), digest(v.0.6.37), magrittr(v.2.0.3), evaluate(v.1.0.1), grid(v.4.4.2), timechange(v.0.3.0), fastmap(v.1.2.0), jsonlite(v.1.8.9), pins(v.1.4.0), pander(v.0.6.5), tidytable(v.0.11.2), fansi(v.1.0.6), scales(v.1.3.0), textshaping(v.0.4.1), RApiSerialize(v.0.1.4), cli(v.3.6.3), rlang(v.1.1.4), munsell(v.0.5.1), withr(v.3.0.2), yaml(v.2.3.10), qs(v.0.27.2), tools(v.4.4.2), parallel(v.4.4.2), tzdb(v.0.4.0), colorspace(v.2.1-1), vctrs(v.0.6.5), R6(v.2.5.1), lifecycle(v.1.0.4), snakecase(v.0.11.1), cheapr(v.0.9.92), stringfish(v.0.16.0), fs(v.1.6.5), htmlwidgets(v.1.6.4), janitor(v.2.2.0), ragg(v.1.3.3), pkgconfig(v.2.0.3), RcppParallel(v.5.1.9), pillar(v.1.9.0), gtable(v.0.3.6), glue(v.1.8.0), Rcpp(v.1.0.13-1), systemfonts(v.1.1.0), xfun(v.0.49), tidyselect(v.1.2.1), rstudioapi(v.0.17.1), knitr(v.1.49), htmltools(v.0.5.8.1), rmarkdown(v.2.29) and compiler(v.4.4.2)"
  },
  {
    "objectID": "posts/nppes_nber_archives/nppes_archives.html#deactivated-npis",
    "href": "posts/nppes_nber_archives/nppes_archives.html#deactivated-npis",
    "title": "arknpi: NPPES Registry Archive",
    "section": "",
    "text": "deactivated |&gt; collapse::fcount(deact_date)\n\n# A tibble: 34 × 2\n   deact_date     N\n   &lt;date&gt;     &lt;int&gt;\n 1 2024-01-01     1\n 2 2024-01-02    47\n 3 2024-01-03   502\n 4 2024-01-04    28\n 5 2024-01-05    18\n 6 2024-01-06     5\n 7 2024-01-08    35\n 8 2024-01-09    14\n 9 2024-01-10   318\n10 2024-01-11    40\n# ℹ 24 more rows"
  },
  {
    "objectID": "posts/nppes_nber_archives/nppes_archives.html#base",
    "href": "posts/nppes_nber_archives/nppes_archives.html#base",
    "title": "arknpi: NPPES Registry Archive",
    "section": "",
    "text": "Remove suffix columns\n\n\nbase &lt;- collapse::rsplit(\n  collapse::funique(wk$base), \n  wk$base$entity) |&gt; \n  purrr::map(fuimus::remove_quiet)\n\nbase$I$prefix &lt;- NULL\nbase$I$suffix &lt;- NULL\nbase\n\n$I\n# A tibble: 15,267 × 13\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   &lt;chr&gt;      &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    \n 1 1912620808 I      2024-01-01  2024-01-01 2022-09-26 NA         NA        \n 2 1518543511 I      2024-01-01  2024-01-01 2021-03-20 NA         NA        \n 3 1619688645 I      2024-01-01  2024-01-01 2022-12-12 NA         NA        \n 4 1437575206 I      2024-01-01  2024-01-01 2014-03-17 NA         NA        \n 5 1053912162 I      2024-01-01  2024-01-01 2020-11-04 NA         NA        \n 6 1265752158 I      2024-01-01  2024-01-01 2010-06-02 2018-02-20 2018-09-11\n 7 1609131515 I      2024-01-01  2024-01-01 2012-07-06 NA         NA        \n 8 1750841870 I      2024-01-01  2024-01-01 2019-03-24 NA         NA        \n 9 1942708748 I      2024-01-01  2024-01-01 2018-01-26 NA         NA        \n10 1255864583 I      2024-01-01  2024-01-01 2017-04-04 NA         NA        \n# ℹ 15,257 more rows\n# ℹ 6 more variables: sole_prop &lt;chr&gt;, gender &lt;chr&gt;, first_name &lt;chr&gt;,\n#   middle_name &lt;chr&gt;, last_name &lt;chr&gt;, credential &lt;chr&gt;\n\n$O\n# A tibble: 3,917 × 10\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   &lt;chr&gt;      &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    \n 1 1952724692 O      2024-01-01  2024-01-01 2014-01-31 NA         NA        \n 2 1548924087 O      2024-01-01  2022-10-04 2021-10-29 NA         NA        \n 3 1295504330 O      2024-01-01  2023-09-26 2024-01-01 NA         NA        \n 4 1386413417 O      2024-01-01  2023-09-19 2024-01-01 NA         NA        \n 5 1558130690 O      2024-01-01  2023-12-21 2024-01-01 NA         NA        \n 6 1821867961 O      2024-01-01  2023-12-28 2024-01-01 NA         NA        \n 7 1649049784 O      2024-01-01  2023-12-27 2024-01-01 NA         NA        \n 8 1275302317 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n 9 1356110498 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n10 1508635640 O      2024-01-01  2023-12-30 2024-01-01 NA         NA        \n# ℹ 3,907 more rows\n# ℹ 3 more variables: org_subpart &lt;chr&gt;, org_parent &lt;chr&gt;, org_provider &lt;chr&gt;\n\n\n\n\n\nLook for credentials in last_name\n\n\n\nbase$I |&gt; \n  collapse::fsubset(codex::na(credential)) |&gt; \n  collapse::fsubset(codex::sf_detect(last_name, \", \")) |&gt; \n  dplyr::glimpse()\n\nRows: 2\nColumns: 13\n$ npi         &lt;chr&gt; \"1265752158\", \"1386886174\"\n$ entity      &lt;chr&gt; \"I\", \"I\"\n$ last_update &lt;date&gt; 2024-01-01, 2024-01-03\n$ cert_date   &lt;date&gt; 2024-01-01, 2024-01-03\n$ enum_date   &lt;date&gt; 2010-06-02, 2009-03-25\n$ deact_date  &lt;date&gt; 2018-02-20, NA\n$ react_date  &lt;date&gt; 2018-09-11, NA\n$ sole_prop   &lt;chr&gt; \"N\", \"Y\"\n$ gender      &lt;chr&gt; \"F\", \"F\"\n$ first_name  &lt;chr&gt; \"LIVIA\", \"JUDY\"\n$ middle_name &lt;chr&gt; \"S\", \"A\"\n$ last_name   &lt;chr&gt; \"MACHADO, RPH, PHARMD, BCPS\", \"LIU, INC\"\n$ credential  &lt;chr&gt; NA, NA\n\n\n\n\n\norg_subparts have org_parent names\nNon-subparts only have org_provider names\n\n\ncollapse::rsplit(\n  base$O |&gt; \n    dplyr::relocate(\n      org_parent, \n      org_provider, \n      .after = npi), \n  base$O$org_subpart) |&gt; \n  purrr::map(\\(df) \n      fuimus::remove_quiet(df) |&gt; \n      dplyr::select(-org_subpart))\n\n$N\n# A tibble: 3,514 × 8\n   npi        org_provider   entity last_update cert_date  enum_date  deact_date\n   &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    \n 1 1952724692 WHITE BEHAVIO… O      2024-01-01  2024-01-01 2014-01-31 NA        \n 2 1548924087 MORGAN HEART … O      2024-01-01  2022-10-04 2021-10-29 NA        \n 3 1295504330 KENDRA TAYLOR… O      2024-01-01  2023-09-26 2024-01-01 NA        \n 4 1386413417 ULYSSES' PLAC… O      2024-01-01  2023-09-19 2024-01-01 NA        \n 5 1558130690 RETHINK COUNS… O      2024-01-01  2023-12-21 2024-01-01 NA        \n 6 1821867961 AURORA COMMUN… O      2024-01-01  2023-12-28 2024-01-01 NA        \n 7 1649049784 PULSE URGENT … O      2024-01-01  2023-12-27 2024-01-01 NA        \n 8 1275302317 NVR & SDD CON… O      2024-01-01  2023-12-30 2024-01-01 NA        \n 9 1356110498 HEBKRAM'S PA   O      2024-01-01  2023-12-30 2024-01-01 NA        \n10 1508635640 HYPNOSIS412    O      2024-01-01  2023-12-30 2024-01-01 NA        \n# ℹ 3,504 more rows\n# ℹ 1 more variable: react_date &lt;date&gt;\n\n$Y\n# A tibble: 403 × 9\n   npi        org_parent   org_provider entity last_update cert_date  enum_date \n   &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;date&gt;    \n 1 1689443723 RAE 6 LLC    RAE6TECH     O      2024-01-01  2023-12-30 2024-01-01\n 2 1124804042 POPLAR PEDI… POPLAR PEDI… O      2024-01-01  2024-01-01 2023-09-06\n 3 1942079942 ASTERRA LLC  AUBURN ACUP… O      2024-01-01  2024-01-01 2024-01-01\n 4 1578332573 LW CARE LLC  LW CARE LLC  O      2024-01-01  2023-12-27 2024-01-01\n 5 1013786011 LW CARE LLC  LW CARE LLC  O      2024-01-01  2024-01-01 2024-01-01\n 6 1831968833 LW CARE LLC  LW CARE LLC  O      2024-01-01  2024-01-01 2024-01-01\n 7 1568231561 LW CARE LLC  LW CARE LLC  O      2024-01-01  2024-01-01 2024-01-01\n 8 1467167593 1336854454   CLINICAL CA… O      2024-01-01  2024-01-01 2023-01-23\n 9 1821867821 LW CARE LLC  LW CARE LLC  O      2024-01-01  2024-01-01 2024-01-01\n10 1114410495 LAKE WASHIN… ADVANCED PA… O      2024-01-01  2024-01-01 2018-06-11\n# ℹ 393 more rows\n# ℹ 2 more variables: deact_date &lt;date&gt;, react_date &lt;date&gt;\n\n\n\n\nIf sole_prop is X (Did Not Answer), then cert_date is NA\n\nLooks like deact_date & react_date are NA as well\n\n\ncollapse::rsplit(\n  base$I, \n  base$I$sole_prop) |&gt; \n  purrr::map(fuimus::remove_quiet)\n\n$N\n# A tibble: 10,405 × 13\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   &lt;chr&gt;      &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    \n 1 1912620808 I      2024-01-01  2024-01-01 2022-09-26 NA         NA        \n 2 1619688645 I      2024-01-01  2024-01-01 2022-12-12 NA         NA        \n 3 1265752158 I      2024-01-01  2024-01-01 2010-06-02 2018-02-20 2018-09-11\n 4 1609131515 I      2024-01-01  2024-01-01 2012-07-06 NA         NA        \n 5 1750841870 I      2024-01-01  2024-01-01 2019-03-24 NA         NA        \n 6 1942708748 I      2024-01-01  2024-01-01 2018-01-26 NA         NA        \n 7 1477895621 I      2024-01-01  2024-01-01 2013-03-25 NA         NA        \n 8 1891305488 I      2024-01-01  2024-01-01 2020-08-07 NA         NA        \n 9 1477322501 I      2024-01-01  2022-10-20 2024-01-01 NA         NA        \n10 1568231694 I      2024-01-01  2022-03-28 2024-01-01 NA         NA        \n# ℹ 10,395 more rows\n# ℹ 6 more variables: sole_prop &lt;chr&gt;, gender &lt;chr&gt;, first_name &lt;chr&gt;,\n#   middle_name &lt;chr&gt;, last_name &lt;chr&gt;, credential &lt;chr&gt;\n\n$X\n# A tibble: 29 × 10\n   npi     entity last_update enum_date  sole_prop gender first_name middle_name\n   &lt;chr&gt;   &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;      \n 1 163915… I      2024-01-06  2005-12-22 X         M      STEPHEN    JOHN       \n 2 199270… I      2024-01-06  2005-08-10 X         F      PRISCILA   &lt;NA&gt;       \n 3 161994… I      2024-01-06  2006-02-21 X         F      NORMA      VB         \n 4 171097… I      2024-01-06  2005-11-03 X         F      SHAHIRA    HALIM      \n 5 137652… I      2024-01-06  2006-01-03 X         F      ROSEMARY   M          \n 6 103310… I      2024-01-06  2005-10-24 X         M      JOHN       B          \n 7 175032… I      2024-01-06  2006-06-16 X         F      MERRILL    &lt;NA&gt;       \n 8 114427… I      2024-01-06  2006-05-22 X         F      LUCILLE    J          \n 9 152804… I      2024-01-06  2005-12-22 X         M      JOHN       &lt;NA&gt;       \n10 157851… I      2024-01-06  2006-05-04 X         M      DONALD     MICHAEL    \n# ℹ 19 more rows\n# ℹ 2 more variables: last_name &lt;chr&gt;, credential &lt;chr&gt;\n\n$Y\n# A tibble: 4,833 × 13\n   npi        entity last_update cert_date  enum_date  deact_date react_date\n   &lt;chr&gt;      &lt;chr&gt;  &lt;date&gt;      &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;date&gt;    \n 1 1518543511 I      2024-01-01  2024-01-01 2021-03-20 NA         NA        \n 2 1437575206 I      2024-01-01  2024-01-01 2014-03-17 NA         NA        \n 3 1053912162 I      2024-01-01  2024-01-01 2020-11-04 NA         NA        \n 4 1255864583 I      2024-01-01  2024-01-01 2017-04-04 NA         NA        \n 5 1831968973 I      2024-01-01  2023-12-12 2024-01-01 NA         NA        \n 6 1922877067 I      2024-01-01  2023-12-10 2024-01-01 NA         NA        \n 7 1568231603 I      2024-01-01  2023-12-20 2024-01-01 NA         NA        \n 8 1477322519 I      2024-01-01  2023-12-23 2024-01-01 NA         NA        \n 9 1912776055 I      2024-01-01  2023-12-19 2024-01-01 NA         NA        \n10 1730958877 I      2024-01-01  2023-12-26 2024-01-01 NA         NA        \n# ℹ 4,823 more rows\n# ℹ 6 more variables: sole_prop &lt;chr&gt;, gender &lt;chr&gt;, first_name &lt;chr&gt;,\n#   middle_name &lt;chr&gt;, last_name &lt;chr&gt;, credential &lt;chr&gt;"
  },
  {
    "objectID": "posts/nppes_nber_archives/nppes_archives.html#address",
    "href": "posts/nppes_nber_archives/nppes_archives.html#address",
    "title": "arknpi: NPPES Registry Archive",
    "section": "",
    "text": "Consider matches on city, state, & zip with different addresses\n\n\naddress &lt;- collapse::funique(wk$address)\n\n# Exact match on all address fields\nexact &lt;- address |&gt; \n  dplyr::filter(\n    mail_address == prac_address,\n    mail_city == prac_city,\n    mail_state == prac_state,\n    mail_zip == prac_zip,\n    mail_country == prac_country,\n    mail_phone == prac_phone,\n    mail_fax == prac_fax) |&gt; \n  collapse::fcompute(\n    npi = npi,\n    entity = entity,\n    purpose = \"MP\",\n    address = prac_address,\n    city = prac_city,\n    state = prac_state,\n    zip = arknpi::make_zip(prac_zip),\n    country = prac_country,\n    phone = arknpi::make_phone(prac_phone),\n    fax = arknpi::make_phone(prac_fax))\n\n# Match on all except FAX\nfax &lt;- address |&gt; \n  dplyr::filter(\n    npi %!in% exact$npi,  \n    mail_address == prac_address, \n    mail_city == prac_city,\n    mail_state == prac_state,\n    mail_country == prac_country,\n    mail_zip == prac_zip,\n    mail_phone == prac_phone) |&gt; \n  collapse::fcompute(\n    npi = npi,\n    entity = entity,\n    address = prac_address,\n    city = prac_city,\n    state = prac_state,\n    zip = arknpi::make_zip(prac_zip),\n    country = prac_country,\n    phone = arknpi::make_phone(prac_phone),\n    fax = arknpi::make_case(mail_fax, prac_fax),\n    purpose = arknpi::make_purpose(mail_fax, prac_fax)) |&gt;\n  collapse::fmutate(fax = arknpi::make_phone(fax))\n\n# Match on all except ZIP, PHONE, and FAX\nphone &lt;- address |&gt; \n  dplyr::filter(npi %!in% c(exact$npi, fax$npi),      \n    mail_address == prac_address,\n    mail_city == prac_city,\n    mail_state == prac_state,\n    mail_country == prac_country) |&gt;\n  collapse::fcompute(\n    npi = npi,\n    entity = entity,\n    purpose = arknpi::make_purpose(mail_phone, prac_phone),\n    address = prac_address,\n    city = prac_city,\n    state = prac_state,\n    zip = arknpi::make_case(mail_zip, prac_zip),\n    country = prac_country,\n    phone = arknpi::make_case(mail_phone, prac_phone),\n    fax = arknpi::make_case(mail_fax, prac_fax)) |&gt; \n  collapse::fmutate(\n    zip = arknpi::make_zip(zip),\n    phone = arknpi::make_phone(phone),\n    fax = arknpi::make_phone(fax))\n\n# Pivot remaining addresses\npiv &lt;- address |&gt; \n  dplyr::filter(npi %!in% c(exact$npi, fax$npi, phone$npi)) |&gt; \n  tidyr::pivot_longer(\n    -c(npi, entity), \n    names_to = \"type_part\", \n    values_to = \"value\") |&gt; \n  tidyr::separate_wider_delim(\n    type_part, \n    delim = \"_\", \n    names = c(\"type\", \"part\")) |&gt; \n  collapse::fmutate(\n    purpose = dplyr::case_when(\n      type == \"mail\" ~ \"M\",\n      type == \"prac\" ~ \"P\",\n    .default = type),\n    type = NULL) |&gt;\n  tidyr::pivot_wider(\n    names_from = part, \n    values_from = value) |&gt; \n  collapse::fmutate(\n    zip = arknpi::make_zip(zip),\n    phone = arknpi::make_phone(phone),\n    fax = arknpi::make_phone(fax))\n\naddress &lt;- collapse::rowbind(exact, fax, phone, piv)\n\naddress &lt;- collapse::rsplit(\n  address, \n  address$entity) |&gt; \n  purrr::map(remove_quiet)\n\naddress\n\n$I\n# A tibble: 22,883 × 10\n   npi        entity purpose address       city  state zip   country phone fax  \n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;\n 1 1437575206 I      MP      3840 PACKARD… ANN … MI    4810… US      (734… (734…\n 2 1477895621 I      MP      3144 SANTA A… EL M… CA    9173… US      (626… (626…\n 3 1346019486 I      MP      57 TOWNSHIP … CHES… OH    4561… US      (740… (740…\n 4 1265201206 I      MP      822 LOVELACE… BREW… AL    3642… US      (251… (800…\n 5 1447029483 I      MP      350 FAIRWAY … DEER… FL    3344… US      (877… (866…\n 6 1295504249 I      MP      1550 N 115TH… SEAT… WA    9813… US      (206… (206…\n 7 1073382024 I      MP      401 16TH ST … ROCH… MN    5590… US      (507… (507…\n 8 1639948698 I      MP      920 SARATOGA… SAN … CA    9512… US      (408… (408…\n 9 1508635574 I      MP      14725 SE RHO… PORT… OR    9723… US      (971… (971…\n10 1932978905 I      MP      3801 KELL BL… WICH… TX    7630… US      (940… (940…\n# ℹ 22,873 more rows\n\n$O\n# A tibble: 5,839 × 10\n   npi        entity purpose address       city  state zip   country phone fax  \n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;\n 1 1548924087 O      MP      46 GRAMATAN … MOUN… NY    1055… US      (295… (646…\n 2 1205605342 O      MP      7610 CARROLL… TAKO… MD    2091… US      (301… (301…\n 3 1114796257 O      MP      6510 KENILWO… RIVE… MD    2073… US      (301… (301…\n 4 1902675945 O      MP      2585 PACIFIC… TORR… CA    9050… US      (424… (310…\n 5 1538938576 O      MP      10751 W ROWE… PEOR… AZ    8538… US      (623… (623…\n 6 1568231512 O      MP      1121 FIRECRA… JUST… TX    7624… US      (940… (940…\n 7 1912776964 O      MP      3760 CURTIS … COCOA FL    3292… US      (321… (321…\n 8 1306615364 O      MP      350 FAIRWAY … DEER… FL    3344… US      (877… (866…\n 9 1336918390 O      MP      240 E GARRIS… GAST… NC    2805… US      (980… (980…\n10 1649049610 O      MP      6751 N SUNSE… GLEN… AZ    8530… US      (775… (702…\n# ℹ 5,829 more rows\n\n\n\n\nploc &lt;- tidytable::fread(\n  \"D:/NBER_NPI_Archives/weekly/unzipped/practicelocation/pl_pfile_20240101-20240107.csv\",\n  colClasses = list(character = 1:10)) |&gt; \n  setNames(c(\"npi\", \"add_1\", \"add_2\", \"city\", \"state\", \n             \"zip\", \"country\", \"phone\", \"ext\", \"fax\")) |&gt; \n  purrr::map_dfr(fuimus::na_if_common) |&gt; \n  fuimus::combine(address, c(\"add_1\", \"add_2\"), sep = \" \") |&gt;\n  fuimus::combine(phone, c(\"phone\", \"ext\"), sep = \" \") |&gt;\n  dplyr::reframe(\n    npi,\n    purpose = \"S\",\n    address,\n    city,\n    state,\n    zip = arknpi::make_zip(zip),\n    country,\n    phone = arknpi::make_phone(phone),\n    fax = arknpi::make_phone(fax))\n\nploc\n\n# A tibble: 4,958 × 9\n   npi        purpose address              city  state zip   country phone fax  \n   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;\n 1 1336918309 S       455 E Eisenhower Pk… Ann … MI    4810… US      (734… (517…\n 2 1073382040 S       455 E Eisenhower Pk… Ann … MI    4810… US      (888… &lt;NA&gt; \n 3 1376008821 S       876 Dutchess Tpke    Poug… NY    1260… US      (845… &lt;NA&gt; \n 4 1750841870 S       300 Crescent Dr      Vaca… CA    9568… US      (949… &lt;NA&gt; \n 5 1811383706 S       Dogwood Ave Buildin… John… TN    37614 US      (423… (423…\n 6 1811383706 S       111 W Stone Dr Ste … King… TN    3766… US      (423… &lt;NA&gt; \n 7 1255864583 S       10521 Meridian Ave N Seat… WA    9813… US      (206… &lt;NA&gt; \n 8 1295396158 S       176 Palisade Ave     Jers… NJ    0730… US      (201… &lt;NA&gt; \n 9 1295396158 S       29 E 29th St         Bayo… NJ    0700… US      (201… &lt;NA&gt; \n10 1285629089 S       4 Sheridan Sq Suite… King… TN    3766… US      (423… (423…\n# ℹ 4,948 more rows"
  },
  {
    "objectID": "posts/nppes_nber_archives/nppes_archives.html#taxonomy",
    "href": "posts/nppes_nber_archives/nppes_archives.html#taxonomy",
    "title": "arknpi: NPPES Registry Archive",
    "section": "",
    "text": "taxonomy &lt;- wk$taxonomy |&gt; \n  dplyr::select(\n    npi, \n    entity, \n    dplyr::starts_with(\"taxonomy\")) |&gt; \n  collapse::fmutate(\n    taxonomy_level = data.table::fcase(\n      taxonomy_primary == \"Y\", \"P\",\n      taxonomy_primary == \"N\", \"O\",\n      taxonomy_primary == \"X\", \"X\"),\n    taxonomy_primary = NULL)\n\ntaxonomy &lt;- collapse::rowbind(\n  taxonomy |&gt; \n    collapse::fsubset(codex::na(taxonomy_group)) |&gt; \n    collapse::fselect(-taxonomy_group) |&gt; \n    collapse::funique(),\n  taxonomy |&gt; \n    collapse::fsubset(codex::not_na(taxonomy_group)) |&gt; \n    collapse::fselect(-taxonomy_code, -taxonomy_level) |&gt; \n    collapse::funique() |&gt; \n    collapse::frename(taxonomy_code = taxonomy_group) |&gt; \n    collapse::fmutate(taxonomy_level = \"G\")) |&gt; \n  collapse::fmutate(\n    taxonomy_level = factor(\n      taxonomy_level, \n      levels = c(\"P\", \"O\", \"X\", \"G\"), \n      ordered = TRUE)) |&gt; \n  dplyr::arrange(npi, taxonomy_level) |&gt; \n  #------------------Deduplicate Primary Taxonomy\n  collapse::fmutate(primary = ifelse(taxonomy_level == \"P\", taxonomy_code, NA_character_)) |&gt; \n  tidyr::fill(primary, .by = npi) |&gt; \n  collapse::fgroup_by(npi) |&gt;\n  collapse::fmutate(eq = ifelse(taxonomy_level != \"P\" & taxonomy_code == primary, TRUE, FALSE)) |&gt; \n  collapse::fungroup() |&gt; \n  collapse::fsubset(!eq) |&gt; \n  collapse::fselect(-eq, -primary)\n\ncollapse::rsplit(\n  taxonomy, \n  taxonomy$entity) |&gt; \n  purrr::map(remove_quiet)\n\n$I\n# A tibble: 18,711 × 4\n   npi        entity taxonomy_code taxonomy_level\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;         &lt;ord&gt;         \n 1 1003009861 I      207RC0000X    P             \n 2 1003013137 I      363AM0700X    P             \n 3 1003018060 I      106H00000X    P             \n 4 1003047531 I      207L00000X    P             \n 5 1003047531 I      390200000X    O             \n 6 1003052903 I      2084P0800X    P             \n 7 1003063173 I      208G00000X    P             \n 8 1003109091 I      208100000X    P             \n 9 1003109091 I      2081P2900X    O             \n10 1003122698 I      2085R0202X    P             \n# ℹ 18,701 more rows\n\n$O\n# A tibble: 3,318 × 4\n   npi        entity taxonomy_code taxonomy_level\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;         &lt;ord&gt;         \n 1 1003096488 O      261Q00000X    P             \n 2 1003196072 O      3416L0300X    P             \n 3 1003200874 O      253Z00000X    P             \n 4 1003200874 O      251E00000X    O             \n 5 1003330226 O      251E00000X    P             \n 6 1003330226 O      251J00000X    O             \n 7 1003337734 O      324500000X    P             \n 8 1003407230 O      261QM1300X    P             \n 9 1003407230 O      251E00000X    O             \n10 1003407230 O      193200000X    G             \n# ℹ 3,308 more rows"
  },
  {
    "objectID": "posts/nppes_nber_archives/nppes_archives.html#license",
    "href": "posts/nppes_nber_archives/nppes_archives.html#license",
    "title": "arknpi: NPPES Registry Archive",
    "section": "",
    "text": "license &lt;- collapse::fselect(\n  wk$taxonomy, \n  npi, \n  entity, \n  license_no, \n  license_state) |&gt; \n  collapse::funique()\n\nlicense &lt;- collapse::rsplit(\n  license, \n  license$entity) |&gt; \n  purrr::map(\n    function(df) \n      fuimus::remove_quiet(df) |&gt; \n      dplyr::filter(codex::not_na(license_no)))\n\nlicense\n\n$I\n# A tibble: 14,155 × 4\n   npi        entity license_no license_state\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;        \n 1 1518543511 I      70884      NY           \n 2 1619688645 I      0001270234 VA           \n 3 1619688645 I      0024185857 VA           \n 4 1437575206 I      6301009991 MI           \n 5 1053912162 I      032328     NY           \n 6 1265752158 I      PS52491    FL           \n 7 1609131515 I      280453-1   NY           \n 8 1942708748 I      585919     NY           \n 9 1255864583 I      MC60672915 WA           \n10 1255864583 I      LH60963777 WA           \n# ℹ 14,145 more rows\n\n$O\n# A tibble: 532 × 4\n   npi        entity license_no license_state\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;        \n 1 1952724692 O      6301009991 MI           \n 2 1508824574 O      SA5335     FL           \n 3 1528515327 O      6401015547 MI           \n 4 1891209284 O      ISW01554   RI           \n 5 1437334182 O      9190       TX           \n 6 1427109271 O      602289671  WA           \n 7 1750821781 O      168900     WA           \n 8 1093182198 O      190859AP   CA           \n 9 1093182198 O      190075AP   CA           \n10 1841677408 O      190070AP   CA           \n# ℹ 522 more rows"
  },
  {
    "objectID": "posts/nppes_nber_archives/nppes_archives.html#identifiers",
    "href": "posts/nppes_nber_archives/nppes_archives.html#identifiers",
    "title": "arknpi: NPPES Registry Archive",
    "section": "",
    "text": "identifier &lt;- wk$identifier |&gt; \n  # Remove Taxonomy Codes\n  collapse::fsubset(\n    codex::sf_ndetect(otid, \"^[A-Z0-9]{9}X$\")) |&gt; \n  collapse::fmutate(otid_type = as.character(as.integer(otid_type)))\n\ncollapse::rsplit(\n  identifier, \n  identifier$entity) |&gt; \n  purrr::map(remove_quiet)\n\n$I\n# A tibble: 3,052 × 6\n   npi        entity otid       otid_type otid_state otid_issuer                \n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;                      \n 1 1003685140 I      3496       1         NH         STATE OF NEW HAMPSHIRE OFF…\n 2 1134998198 I      1194322628 5         MI         &lt;NA&gt;                       \n 3 1578544367 I      10007752   5         TX         &lt;NA&gt;                       \n 4 1578544367 I      152031401  5         TX         &lt;NA&gt;                       \n 5 1578544367 I      152028001  5         TX         &lt;NA&gt;                       \n 6 1316936222 I      4160095    1         TN         BLUE CROSS                 \n 7 1316936222 I      1053635    5         LA         &lt;NA&gt;                       \n 8 1316936222 I      087281     5         AZ         &lt;NA&gt;                       \n 9 1316936222 I      3000540    5         TN         &lt;NA&gt;                       \n10 1316936222 I      P00444174  1         &lt;NA&gt;       MEDICARE RAILROAD          \n# ℹ 3,042 more rows\n\n$O\n# A tibble: 1,314 × 6\n   npi        entity otid       otid_type otid_state otid_issuer          \n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;                \n 1 1417726456 O      0155098    5         OH         &lt;NA&gt;                 \n 2 1225765241 O      U5083      1         TX         TEXAS MEDICAL LICENSE\n 3 1689443665 O      1417266396 5         NY         &lt;NA&gt;                 \n 4 1255611539 O      014469     1         TX         TEXAS HCSSA LICENSE  \n 5 1508824574 O      890596700  5         FL         &lt;NA&gt;                 \n 6 1750958104 O      1386940575 5         WI         &lt;NA&gt;                 \n 7 1982294732 O      250000218  5         NV         &lt;NA&gt;                 \n 8 1891209284 O      U300404468 1         RI         MEDICARE PTAN        \n 9 1730729385 O      1952817926 1         &lt;NA&gt;       ORGANIZATIONAL NPI   \n10 1730729385 O      1043526098 1         &lt;NA&gt;       NPI                  \n# ℹ 1,304 more rows"
  },
  {
    "objectID": "posts/nppes_nber_archives/nppes_archives.html#other-names",
    "href": "posts/nppes_nber_archives/nppes_archives.html#other-names",
    "title": "arknpi: NPPES Registry Archive",
    "section": "",
    "text": "change prefix to oname_\n\n\n\nwk$other &lt;- wk$other |&gt; \n  setNames(c(\n    \"npi\", \"entity\", \"onm_org\", \n    \"onm_org_type\", \"onm_prefix\", \n    \"onm_first\", \"onm_middle\", \n    \"onm_last\", \"onm_last_type\", \n    \"onm_suffix\", \"onm_credential\")) |&gt; \n  collapse::fselect(-onm_suffix, -onm_prefix)\n\nother &lt;- collapse::rsplit(\n  wk$other, \n  wk$other$entity) |&gt; \n  purrr::map(remove_quiet)\n\nother$O &lt;- collapse::frename(other$O, onm_type = onm_org_type)\nother$I &lt;- collapse::frename(other$I, onm_type = onm_last_type)\n\nother$I\n\n# A tibble: 1,221 × 7\n   npi        entity onm_first onm_middle onm_last   onm_type onm_credential\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;         \n 1 1255864583 I      GWEN      &lt;NA&gt;       WILSON     2        LMHC, ATR     \n 2 1659140796 I      KATELIN   LEE ANN    BOYER      1        &lt;NA&gt;          \n 3 1184493223 I      AESHA     ISHWARBHAI PATEL      5        &lt;NA&gt;          \n 4 1437928579 I      TREVA     JO         MOYA       1        &lt;NA&gt;          \n 5 1881463826 I      AMANDA    RENEE      SCHELLHORN 1        &lt;NA&gt;          \n 6 1871362814 I      BRITTANY  C          DARNELL    1        CCMA-CHC      \n 7 1770352718 I      PEBBLES   MAURINE    YEE        5        PMHNP-BC      \n 8 1497524441 I      CARING    FOR        MAMAS      2        &lt;NA&gt;          \n 9 1033988084 I      JANINE    LISSETT    LESSLEY    1        &lt;NA&gt;          \n10 1487423430 I      &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;       2        &lt;NA&gt;          \n# ℹ 1,211 more rows\n\n\n\noname &lt;- tidytable::fread(\n  \"D:/NBER_NPI_Archives/weekly/unzipped/othername/othername_pfile_20240101-20240107.csv\",\n    colClasses = list(character = 1:3)) |&gt; \n  janitor::clean_names() |&gt;\n    purrr::map_dfr(fuimus::na_if_common) |&gt; \n  dplyr::reframe(\n    npi, \n    entity = \"O\",\n    oname_org = provider_other_organization_name, \n    oname_type = provider_other_organization_name_type_code)\n\n\ndplyr::left_join(oname, other$O, by = c(\"npi\", \"entity\")) |&gt; \n  dplyr::arrange(npi)\n\n# A tibble: 1,721 × 6\n   npi        entity oname_org                       oname_type onm_org onm_type\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;                           &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;   \n 1 1003096488 O      Trace Regional Hospital         3          TRACE … 3       \n 2 1003196072 O      Hocking Township Fire Dept.     3          HOCKIN… 3       \n 3 1003199829 O      Plains Ear, Nose, Throat & Fac… 3          PLAINS… 3       \n 4 1003330226 O      Thrive Skilled Pediatric Care   3          THRIVE… 3       \n 5 1003337734 O      Ohio Detox Center               3          OHIO D… 3       \n 6 1003372533 O      Glacier Valley SBS FFS          5          &lt;NA&gt;    &lt;NA&gt;    \n 7 1003407230 O      Milk Guide                      3          MILK G… 3       \n 8 1003407230 O      Mother Nurture Lactation Care … 3          MILK G… 3       \n 9 1003429242 O      Durango Neurosurgery Satellite… 3          DURANG… 3       \n10 1003429903 O      25 Road OB-GYN Clinic           3          25 ROA… 3       \n# ℹ 1,711 more rows\n\ndplyr::arrange(other$O, npi)\n\n# A tibble: 1,125 × 4\n   npi        entity onm_org                                           onm_type\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;                                             &lt;chr&gt;   \n 1 1003096488 O      TRACE REGIONAL HOSPITAL                           3       \n 2 1003196072 O      HOCKING TOWNSHIP FIRE DEPT                        3       \n 3 1003199829 O      PLAINS EAR, NOSE, THROAT & FACIAL PLASTIC SURGERY 3       \n 4 1003330226 O      THRIVE SKILLED PEDIATRIC CARE                     3       \n 5 1003337734 O      OHIO DETOX CENTER                                 3       \n 6 1003407230 O      MILK GUIDE                                        3       \n 7 1003429242 O      DURANGO NEUROSURGERY SATELLITE CLINIC             3       \n 8 1003429903 O      25 ROAD OB-GYN CLINIC                             3       \n 9 1003463092 O      MEDCARE PHARMACY                                  3       \n10 1003495466 O      LIFESTANCE HEALTH                                 3       \n# ℹ 1,115 more rows\n\ndplyr::arrange(oname, npi)\n\n# A tibble: 1,721 × 4\n   npi        entity oname_org                                        oname_type\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;                                            &lt;chr&gt;     \n 1 1003096488 O      Trace Regional Hospital                          3         \n 2 1003196072 O      Hocking Township Fire Dept.                      3         \n 3 1003199829 O      Plains Ear, Nose, Throat & Facial Plastic Surge… 3         \n 4 1003330226 O      Thrive Skilled Pediatric Care                    3         \n 5 1003337734 O      Ohio Detox Center                                3         \n 6 1003372533 O      Glacier Valley SBS FFS                           5         \n 7 1003407230 O      Milk Guide                                       3         \n 8 1003407230 O      Mother Nurture Lactation Care LLC                3         \n 9 1003429242 O      Durango Neurosurgery Satellite Clinic            3         \n10 1003429903 O      25 Road OB-GYN Clinic                            3         \n# ℹ 1,711 more rows"
  },
  {
    "objectID": "posts/nppes_nber_archives/nppes_archives.html#authorized-official",
    "href": "posts/nppes_nber_archives/nppes_archives.html#authorized-official",
    "title": "arknpi: NPPES Registry Archive",
    "section": "",
    "text": "wk$ao |&gt; \n  collapse::fmutate(ao_phone = arknpi::make_phone(ao_phone)) |&gt; \n  collapse::fselect(-ao_prefix, -ao_suffix)\n\n# A tibble: 3,917 × 8\n   npi        entity ao_first  ao_middle ao_last ao_credential ao_title ao_phone\n   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;    &lt;chr&gt;   \n 1 1952724692 O      MICHELE   &lt;NA&gt;      WHITE   PHD, LLP, LPC OWNER    (734) 9…\n 2 1548924087 O      TANESHA   &lt;NA&gt;      MORGAN  LCSW          CEO      (929) 5…\n 3 1295504330 O      KENDRA    &lt;NA&gt;      TAYLOR  &lt;NA&gt;          OWNER    (615) 2…\n 4 1386413417 O      MELISSA   &lt;NA&gt;      DELLA … LCSW          OWNER    (520) 8…\n 5 1558130690 O      MALYNDI   R         WEST    &lt;NA&gt;          OWNER &… (512) 5…\n 6 1821867961 O      AURORA    CANE      HOYLE   FNP-BC        PRIMARY… (503) 5…\n 7 1649049784 O      ASMITA    &lt;NA&gt;      PATEL   MD            SECRETA… (630) 3…\n 8 1275302317 O      RANGANAR… &lt;NA&gt;      NARASI… &lt;NA&gt;          MANAGER… (781) 3…\n 9 1356110498 O      AKRAM     &lt;NA&gt;      ABD EL… MD            PHYSICI… (704) 4…\n10 1508635640 O      JAYSON    &lt;NA&gt;      ROWLAND CHT CPH       HYPNOTH… (412) 2…\n# ℹ 3,907 more rows"
  },
  {
    "objectID": "posts/nppes_nber_archives/nppes_archives.html#session-information",
    "href": "posts/nppes_nber_archives/nppes_archives.html#session-information",
    "title": "arknpi: NPPES Registry Archive",
    "section": "",
    "text": "R version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nother attached packages: arknpi(v.0.0.0.9001), codex(v.0.0.1), fuimus(v.0.0.5.9002), collapse(v.2.0.18), data.table(v.1.16.99), lubridate(v.1.9.4), forcats(v.1.0.0), stringr(v.1.5.1), dplyr(v.1.1.4), purrr(v.1.0.2), readr(v.2.1.5), tidyr(v.1.3.1.9000), tibble(v.3.2.1), ggplot2(v.3.5.1) and tidyverse(v.2.0.0)\nloaded via a namespace (and not attached): rappdirs(v.0.3.3), utf8(v.1.2.4), generics(v.0.1.3), stringi(v.1.8.4), hms(v.1.1.3), digest(v.0.6.37), magrittr(v.2.0.3), evaluate(v.1.0.1), grid(v.4.4.2), timechange(v.0.3.0), fastmap(v.1.2.0), jsonlite(v.1.8.9), pins(v.1.4.0), pander(v.0.6.5), tidytable(v.0.11.2), fansi(v.1.0.6), scales(v.1.3.0), textshaping(v.0.4.1), RApiSerialize(v.0.1.4), cli(v.3.6.3), rlang(v.1.1.4), munsell(v.0.5.1), withr(v.3.0.2), yaml(v.2.3.10), qs(v.0.27.2), tools(v.4.4.2), parallel(v.4.4.2), tzdb(v.0.4.0), colorspace(v.2.1-1), vctrs(v.0.6.5), R6(v.2.5.1), lifecycle(v.1.0.4), snakecase(v.0.11.1), cheapr(v.0.9.92), stringfish(v.0.16.0), fs(v.1.6.5), htmlwidgets(v.1.6.4), janitor(v.2.2.0), ragg(v.1.3.3), pkgconfig(v.2.0.3), RcppParallel(v.5.1.9), pillar(v.1.9.0), gtable(v.0.3.6), glue(v.1.8.0), Rcpp(v.1.0.13-1), systemfonts(v.1.1.0), xfun(v.0.49), tidyselect(v.1.2.1), rstudioapi(v.0.17.1), knitr(v.1.49), htmltools(v.0.5.8.1), rmarkdown(v.2.29) and compiler(v.4.4.2)"
  },
  {
    "objectID": "posts/percent/percent.html",
    "href": "posts/percent/percent.html",
    "title": "100%",
    "section": "",
    "text": "Percent Changes (%ΔX). Let me preface what I have to say about percent changes by saying that–other than being a clue that a percent change or a ratio expressed as a percentage lurks somewhere close–I view the % sign as being equivalent to 1/100. So, for example, 23% is just another name for .23, and 100% is just another name for 1. Indeed, economists are just as likely to say “with probability 1” as they are to say “with a 100% probability.”\nIt turns out that natural logarithms (“ln” or “log”) are the perfect way to think about percent changes. Suppose a variable X has a “before” and an “after” value.\nplatonic_change = \\(old, new) {\n  log(new) - log(old)\n}\n\nearthly_change = \\(old, new) {\n  (new - old) / old\n}\n\nmidpoint_change = \\(old, new) {\n  (new - old) / ((new + old) / 2)\n}\n\nplatonic_change(old = 1, new = 5) * 100\n\n[1] 160.9438\n\nmidpoint_change(old = 1, new = 5) * 100\n\n[1] 133.3333\n\nearthly_change(old = 1, new = 5) * 100\n\n[1] 400\nFormally, that’s because of these limits: lim_{x rightarrow infty} {(x-1) over {(x+1)/2}} = 2\nlim_{x rightarrow infty} {(0-x) over {(x+0)/2}} = -2\nBelow is a table showing the relationship between Platonic percent changes, midpoint percent changes and earthly percent changes. In financial terms, one can think of earthly percentage changes as “continuously compounded” versions of Platonic percent changes:\nex &lt;- dplyr::tibble(\n  platonic = pct$platonic,\n  midpoint = 200 * (exp(platonic / 100) - 1) / (exp(platonic / 100) + 1),\n  earthly = 100 * exp(platonic / 100) - 100,\n  ratio = exp(platonic / 100)\n)\n\nex |&gt; \n  filter(platonic &gt;= 0) |&gt; \n  print(n = 20)\n\n# A tibble: 19 × 4\n   platonic midpoint earthly ratio\n      &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;\n 1        0     0       0     1   \n 2        5     5.00    5.13  1.05\n 3       10     9.99   10.5   1.11\n 4       15    15.0    16.2   1.16\n 5       20    19.9    22.1   1.22\n 6       25    24.9    28.4   1.28\n 7       30    29.8    35.0   1.35\n 8       40    39.5    49.2   1.49\n 9       50    49.0    64.9   1.65\n10       60    58.3    82.2   1.82\n11       70    67.3   101.    2.01\n12       80    76.0   123.    2.23\n13       90    84.4   146.    2.46\n14      100    92.4   172.    2.72\n15      140   121.    306.    4.06\n16      210   156.    717.    8.17\n17      280   177.   1544.   16.4 \n18      350   188.   3212.   33.1 \n19      420   194.   6569.   66.7\nThere are at least two things to point out in this table:\nLet’s look at negative percent changes as well. Here is the table for how the different concepts of negative percent changes compare:\nex |&gt; \n  filter(platonic &lt;= 0) |&gt; \n  arrange(desc(platonic)) |&gt;\n  print(n = 20)\n\n# A tibble: 19 × 4\n   platonic midpoint earthly  ratio\n      &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;\n 1        0     0       0    1     \n 2       -5    -5.00   -4.88 0.951 \n 3      -10    -9.99   -9.52 0.905 \n 4      -15   -15.0   -13.9  0.861 \n 5      -20   -19.9   -18.1  0.819 \n 6      -25   -24.9   -22.1  0.779 \n 7      -30   -29.8   -25.9  0.741 \n 8      -40   -39.5   -33.0  0.670 \n 9      -50   -49.0   -39.3  0.607 \n10      -60   -58.3   -45.1  0.549 \n11      -70   -67.3   -50.3  0.497 \n12      -80   -76.0   -55.1  0.449 \n13      -90   -84.4   -59.3  0.407 \n14     -100   -92.4   -63.2  0.368 \n15     -140  -121.    -75.3  0.247 \n16     -210  -156.    -87.8  0.122 \n17     -280  -177.    -93.9  0.0608\n18     -350  -188.    -97.0  0.0302\n19     -420  -194.    -98.5  0.0150\nA key point to make is that with both Platonic (logarithmic) percent changes and midpoint percent changes, equal sized changes of opposite direction cancel each other out. For example, a +50% Platonic percent change, followed by a -50% Platonic percent change, would leave things back where they started. This is true for a +50% midpoint percent change, followed by a -50% midpoint percent change. But, starting from X, a 50% earthly percent change leads to 1.5 X. Following that by a -50% earthly percent change leads to a result of .75 X, which is not at all where things started. This is a very ugly feature of earthly percent changes. That ugliness is one good reason to rise up to the Platonic level, or at least the midpoint level.\nContinuous-Time Growth Rates. There are many wonderful things about Platonic percent changes that I can’t go into without breaking my resolve to keep the equation count down. But one of the most wonderful is that to find a growth rate one only has to divide by the time that has elapsed between Xbefore and Xafter. That is, as long as one is using the Platonic percent change %ΔX=log(Xafter)-log(Xbefore),\n%ΔX / [time elapsed] = growth rate.\nThe growth rate here is technically called a “continuous-time growth rate.” The continuous-time growth rate is not only very useful, it is a thing of great beauty.\nUpdate on How the Different Concepts of Percent Change Relate to Each Other. One of my students asked about how the different percent change concepts relate to each other. For that, I need some equations. And I need “exp” which is the opposite of the natural logarithm “log.” Taking the function exp(X) is the same as taking e, (a number that is famous among mathematicians and equal to 2.718…) to the power X. For the equations below, it is crucial to treat % as another name for 1/100, so that, for example, 5% is the same thing as .05.\nEarthly percent changes are the most familiar. Almost anyone other than an economist who talks about percent changes is talking about earthly percent changes. Most of you learned about earthly percent changes in elementary school. So let me first write down how to get from the earthly percent change to the Platonic and midpoint percent changes. (I won’t try to prove these equations here, just state them.)\nearthly_to_platonic = \\(earthly) log(1 + earthly)\n\nearthly_to_midpoint = \\(earthly) (2 * earthly) / (2 + earthly)\nIf you are trying to figure out the effects of continuously compounded interest, or the effects of some other continuous-time growth rate, you will want to be able go from Platonic percent changes–which come straight from multiplying the growth rate by the amount of elapsed time–to earthly percent changes. For good measure, I will include the formula for midpoint percent changes as well:\nplatonic_to_earthly = \\(platonic) exp(platonic) - 1\n\nplatonic_to_midpoint = \\(platonic) (2 * (exp(platonic) - 1)) / (exp(platonic) + 1)\nI found the function giving the midpoint percent change as a function of the Platonic percent change quite intriguing. For one thing, when I changed signs and put “-Platonic” in the place where you see “Platonic” on the right-hand side of the equation the result equal to -midpoint. When switching the sign of the argument (the inside thing: Platonic) just switches the sign of the overall expression, mathematicians call it an “odd” function (“odd” as in “odd and even” not “odd” as in “strange”). The meaning of this function being odd is that Platonic and midpoint percent changes map into each other the same way for negative changes as for positive changes. (That isn’t true at all for the earthly percent changes.) The other intriguing thing about the function giving the midpoint percent change as a function of the Platonic percent change is how close it is to giving back the same number. To a fourth-order (the squared term and the fourth power term are zero), the approximation for the function is this:\n# midpoint = platonic - (platonic^3 / 12) + (5th power and higher terms)\n\nmidpoint_to_earthly = \\(midpoint) (2 * midpoint) / (2 - midpoint)\n\nmidpoint_to_platonic = \\(midpoint) log(2 + midpoint) - log(2 - midpoint)\n\nmidpoint_to_platonic2 = \\(midpoint) log(1 + (midpoint / 2)) - log(1 - (midpoint / 2))"
  },
  {
    "objectID": "posts/percent/percent.html#session-information",
    "href": "posts/percent/percent.html#session-information",
    "title": "100%",
    "section": "\n1 Session Information",
    "text": "1 Session Information\n\n\nR version 4.4.1 (2024-06-14 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nother attached packages: here(v.1.0.1), fuimus(v.0.0.2), lubridate(v.1.9.3), forcats(v.1.0.0), stringr(v.1.5.1), dplyr(v.1.1.4), purrr(v.1.0.2), readr(v.2.1.5), tidyr(v.1.3.1), tibble(v.3.2.1), ggplot2(v.3.5.1) and tidyverse(v.2.0.0)\nloaded via a namespace (and not attached): utf8(v.1.2.4), generics(v.0.1.3), stringi(v.1.8.4), hms(v.1.1.3), digest(v.0.6.37), magrittr(v.2.0.3), evaluate(v.1.0.1), grid(v.4.4.1), timechange(v.0.3.0), fastmap(v.1.2.0), rprojroot(v.2.0.4), jsonlite(v.1.8.9), pander(v.0.6.5), fansi(v.1.0.6), scales(v.1.3.0), textshaping(v.0.4.0), cli(v.3.6.3), rlang(v.1.1.4), crayon(v.1.5.3), bit64(v.4.5.2), munsell(v.0.5.1), withr(v.3.0.2), yaml(v.2.3.10), tools(v.4.4.1), parallel(v.4.4.1), tzdb(v.0.4.0), colorspace(v.2.1-1), vctrs(v.0.6.5), R6(v.2.5.1), lifecycle(v.1.0.4), htmlwidgets(v.1.6.4), bit(v.4.5.0), vroom(v.1.6.5), ragg(v.1.3.3), pkgconfig(v.2.0.3), pillar(v.1.9.0), gtable(v.0.3.6), Rcpp(v.1.0.13), glue(v.1.8.0), systemfonts(v.1.1.0), xfun(v.0.48), tidyselect(v.1.2.1), rstudioapi(v.0.17.1), knitr(v.1.48), htmltools(v.0.5.8.1), rmarkdown(v.2.29) and compiler(v.4.4.1)"
  },
  {
    "objectID": "posts/provider_s7/provider_s7.html",
    "href": "posts/provider_s7/provider_s7.html",
    "title": "provider: Comprehensive Search",
    "section": "",
    "text": "nppes(npi = 1043245657) |&gt; glimpse()\n\nRows: 1\nColumns: 29\n$ npi           &lt;chr&gt; \"1043245657\"\n$ entity_type   &lt;fct&gt; Individual\n$ enum_date     &lt;date&gt; 2006-07-11\n$ last_update   &lt;date&gt; 2013-10-08\n$ status        &lt;fct&gt; Active\n$ prefix        &lt;chr&gt; \"Dr.\"\n$ first         &lt;chr&gt; \"MARK\"\n$ middle        &lt;chr&gt; \"K\"\n$ last          &lt;chr&gt; \"FUNG\"\n$ gender        &lt;fct&gt; Male\n$ credential    &lt;chr&gt; \"MD, PhD\"\n$ sole_prop     &lt;lgl&gt; FALSE\n$ purpose       &lt;fct&gt; Practice\n$ address       &lt;chr&gt; \"111 COLCHESTER AVE FLETCHER ALLEN HEALTH CARE - PATHOLO…\n$ city          &lt;chr&gt; \"BURLINGTON\"\n$ state         &lt;ord&gt; VT\n$ zip           &lt;chr&gt; \"054011473\"\n$ country       &lt;chr&gt; \"US\"\n$ phone         &lt;chr&gt; \"802-847-3000\"\n$ fax           &lt;chr&gt; \"802-847-3509\"\n$ tx_code       &lt;chr&gt; \"207ZB0001X\"\n$ tx_primary    &lt;lgl&gt; TRUE\n$ tx_desc       &lt;chr&gt; \"Pathology, Blood Banking & Transfusion Medicine\"\n$ tx_license    &lt;chr&gt; \"042-0010655\"\n$ tx_state      &lt;ord&gt; VT\n$ id_code       &lt;chr&gt; \"05\"\n$ id_desc       &lt;chr&gt; \"MEDICAID\"\n$ id_state      &lt;ord&gt; VT\n$ id_identifier &lt;chr&gt; \"1010070\"\n\n\n\n\nex_tx = \"207ZB0001X\"\n\n\n\nDisplay\nDefinition\nHierarchy\nChangelog\nConsole\n\n\n\n\ntx_dis &lt;- taxonomy_display(\n  taxonomy_code = ex_tx\n  )[[\"taxonomy_display\"]]\n\ncat(tx_dis)\n\nBlood Banking & Transfusion Medicine Physician\n\n\n\n\n\ntx_def &lt;- taxonomy_definition(\n  taxonomy_code = ex_tx\n  )[[\"taxonomy_definition\"]]\n\ncat(tx_def)\n\nA physician who specializes in blood banking/transfusion medicine is responsible for the maintenance of an adequate blood supply, blood donor and patient-recipient safety and appropriate blood utilization. Pre-transfusion compatibility testing and antibody testing assure that blood transfusions, when indicated, are as safe as possible. This physician directs the preparation and safe use of specially prepared blood components, including red blood cells, white blood cells, platelets and plasma constituents, and marrow or stem cells for transplantation.\n\n\n\n\n\ntx_hier &lt;- taxonomy_hierarchy(\n  taxonomy_code = ex_tx\n  )[, 2:3]\n\ntx_hier\n\n# A tibble: 4 × 2\n  taxonomy_level      taxonomy_level_title                \n  &lt;ord&gt;               &lt;chr&gt;                               \n1 I. Section          Individual                          \n2 II. Grouping        Allopathic & Osteopathic Physicians \n3 III. Classification Pathology                           \n4 IV. Specialization  Blood Banking & Transfusion Medicine\n\n\n\n\n\ntx_chg &lt;- taxonomy_changelog(\n  taxonomy_code = ex_tx\n  )[, 2:4]\n\ntx_chg\n\n# A tibble: 2 × 3\n  date       change   details           \n  &lt;date&gt;     &lt;ord&gt;    &lt;chr&gt;             \n1 2007-07-01 modified definition, source\n2 2011-07-01 modified source            \n\n\n\n\n\nutils::formatOL(\n  c(\n    \"Section: \",\n    \"Grouping: \",\n    \"Classification: \",\n    \"Specialization: \"\n    ),\n  type = \"I\",\n  offset = 2\n  ) |&gt; \n  writeLines()\n\n    I. Section:\n   II. Grouping:\n  III. Classification:\n   IV. Specialization:\n\n# view_length &lt;- \\(x) {\n#   grp_name &lt;- format(seq_along(x))\n#   grp_size &lt;- format(vlen(x), justify = \"left\")\n#   grp_mems &lt;- unname(x)\n#   grp_mems &lt;- if (empty(grp_mems)) NULL else format(grp_mems, justify = \"none\")\n#   cli::cat_bullet(glue::glue(\"{grp_name}: \", \"{grp_size}|\", \"-[{grp_mems}]\"))\n#   return(invisible(x))\n# }\n\n\n\n\n\n\nproviders(npi = 1043245657) |&gt; glimpse()\n\nRows: 1\nColumns: 10\n$ npi                   &lt;chr&gt; \"1043245657\"\n$ pac                   &lt;chr&gt; \"7810891009\"\n$ enid                  &lt;chr&gt; \"I20031120000251\"\n$ specialty_code        &lt;chr&gt; \"14-22\"\n$ specialty_description &lt;chr&gt; \"PRACTITIONER - PATHOLOGY\"\n$ state                 &lt;ord&gt; VT\n$ first                 &lt;chr&gt; \"MARK\"\n$ middle                &lt;chr&gt; \"K\"\n$ last                  &lt;chr&gt; \"FUNG\"\n$ gender                &lt;fct&gt; Male\n\n\n\nclinicians(npi = 1043245657) |&gt; glimpse()\n\nRows: 1\nColumns: 19\n$ npi           &lt;chr&gt; \"1043245657\"\n$ pac           &lt;chr&gt; \"7810891009\"\n$ enid          &lt;chr&gt; \"I20031120000251\"\n$ first         &lt;chr&gt; \"MARK\"\n$ middle        &lt;chr&gt; \"K\"\n$ last          &lt;chr&gt; \"FUNG\"\n$ gender        &lt;fct&gt; Male\n$ credential    &lt;chr&gt; \"MD\"\n$ school        &lt;chr&gt; \"UNIVERSITY OF ALABAMA SCHOOL OF MEDICINE\"\n$ grad_year     &lt;int&gt; 1999\n$ specialty     &lt;chr&gt; \"PATHOLOGY\"\n$ facility_name &lt;chr&gt; \"UNIVERSITY OF VERMONT MEDICAL CENTER INC\"\n$ pac_org       &lt;chr&gt; \"3779491071\"\n$ members_org   &lt;int&gt; 1023\n$ address_org   &lt;chr&gt; \"111 COLCHESTER AVE\"\n$ city_org      &lt;chr&gt; \"BURLINGTON\"\n$ state_org     &lt;ord&gt; VT\n$ zip_org       &lt;chr&gt; \"054011473\"\n$ phone_org     &lt;chr&gt; \"8028470000\"\n\n\n\nopt_out(npi = 1043245657)\n\n\norder_refer(npi = 1043245657)\n\n# A tibble: 5 × 4\n  npi        first last  eligible                 \n  &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt; &lt;fct&gt;                    \n1 1043245657 MARK  FUNG  Medicare Part B          \n2 1043245657 MARK  FUNG  Home Health Agency       \n3 1043245657 MARK  FUNG  Durable Medical Equipment\n4 1043245657 MARK  FUNG  Power Mobility Devices   \n5 1043245657 MARK  FUNG  Hospice                  \n\n\n\nreassignments(npi = 1043245657) |&gt; glimpse()\n\nRows: 1\nColumns: 12\n$ npi           &lt;chr&gt; \"1043245657\"\n$ pac           &lt;chr&gt; \"7810891009\"\n$ enid          &lt;chr&gt; \"I20031120000251\"\n$ first         &lt;chr&gt; \"MARK\"\n$ last          &lt;chr&gt; \"FUNG\"\n$ associations  &lt;int&gt; 1\n$ organization  &lt;chr&gt; \"UNIVERSITY OF VERMONT MEDICAL CENTER INC\"\n$ pac_org       &lt;chr&gt; \"3779491071\"\n$ enid_org      &lt;chr&gt; \"O20060822000040\"\n$ state_org     &lt;ord&gt; VT\n$ reassignments &lt;int&gt; 98\n$ entry         &lt;fct&gt; Reassignment\n\n\n\naffiliations(npi = 1043245657) |&gt; glimpse()\n\nRows: 2\nColumns: 7\n$ npi           &lt;chr&gt; \"1043245657\", \"1043245657\"\n$ pac           &lt;chr&gt; \"7810891009\", \"7810891009\"\n$ first         &lt;chr&gt; \"MARK\", \"MARK\"\n$ middle        &lt;chr&gt; \"K\", \"K\"\n$ last          &lt;chr&gt; \"FUNG\", \"FUNG\"\n$ facility_type &lt;fct&gt; Hospital, Hospital\n$ facility_ccn  &lt;chr&gt; \"470003\", \"330250\"\n\n\n\nhospitals(facility_ccn = 470003) |&gt; glimpse()\n\nRows: 2\nColumns: 21\n$ npi_org           &lt;chr&gt; \"1568419976\", \"1568419976\"\n$ pac_org           &lt;chr&gt; \"3779491071\", \"3779491071\"\n$ enid_org          &lt;chr&gt; \"O20021111000009\", \"O20021111000009\"\n$ enid_state        &lt;ord&gt; VT, VT\n$ facility_ccn      &lt;chr&gt; \"470003\", \"470003\"\n$ organization      &lt;chr&gt; \"UNIVERSITY OF VERMONT MEDICAL CENTER INC\", \"UNIVERS…\n$ doing_business_as &lt;chr&gt; \"UNIVERSITY OF VERMONT MEDICAL CENTER\", \"UNIVERSITY …\n$ specialty_code    &lt;chr&gt; \"00-09\", \"00-09\"\n$ specialty         &lt;chr&gt; \"PART A PROVIDER - HOSPITAL\", \"PART A PROVIDER - HOS…\n$ incorp_date       &lt;date&gt; 1995-01-01, 1995-01-01\n$ incorp_state      &lt;ord&gt; VT, VT\n$ structure         &lt;chr&gt; \"CORPORATION\", \"CORPORATION\"\n$ address           &lt;chr&gt; \"111 COLCHESTER AVE\", \"111 COLCHESTER AVE\"\n$ city              &lt;chr&gt; \"BURLINGTON\", \"BURLINGTON\"\n$ state             &lt;ord&gt; VT, VT\n$ zip               &lt;chr&gt; \"54011473\", \"54011473\"\n$ location_type     &lt;chr&gt; \"OTHER HOSPITAL PRACTICE LOCATION: HOSPITAL - GENERA…\n$ registration      &lt;fct&gt; Non-Profit, Non-Profit\n$ multi_npi         &lt;lgl&gt; FALSE, FALSE\n$ reh_conversion    &lt;lgl&gt; FALSE, FALSE\n$ subgroup          &lt;fct&gt; Acute Care, Other\n\nhospitals(facility_ccn = 330250) |&gt; glimpse()\n\nRows: 1\nColumns: 21\n$ npi_org           &lt;chr&gt; \"1033270699\"\n$ pac_org           &lt;chr&gt; \"2769396878\"\n$ enid_org          &lt;chr&gt; \"O20120110000201\"\n$ enid_state        &lt;ord&gt; NY\n$ facility_ccn      &lt;chr&gt; \"330250\"\n$ organization      &lt;chr&gt; \"CHAMPLAIN VALLEY PHYSICIANS HOSPITAL MEDICAL CENTER\"\n$ doing_business_as &lt;chr&gt; \"THE UNIVERSITY OF VT HEALTH NETWORK - CHAMPLAIN VAL…\n$ specialty_code    &lt;chr&gt; \"00-09\"\n$ specialty         &lt;chr&gt; \"PART A PROVIDER - HOSPITAL\"\n$ incorp_date       &lt;date&gt; 1926-01-01\n$ incorp_state      &lt;ord&gt; NY\n$ structure         &lt;chr&gt; \"CORPORATION\"\n$ address           &lt;chr&gt; \"75 BEEKMAN ST\"\n$ city              &lt;chr&gt; \"PLATTSBURGH\"\n$ state             &lt;ord&gt; NY\n$ zip               &lt;chr&gt; \"129011438\"\n$ location_type     &lt;chr&gt; \"MAIN/PRIMARY HOSPITAL LOCATION\"\n$ registration      &lt;fct&gt; Non-Profit\n$ multi_npi         &lt;lgl&gt; FALSE\n$ reh_conversion    &lt;lgl&gt; FALSE\n$ subgroup          &lt;fct&gt; Acute Care\n\n\n\n\nProvider &lt;- new_class(\n  name = \"Provider\", \n  abstract = TRUE,\n  properties = list(\n    npi = class_character,\n    entity = class_factor\n  ))\n\n\n\nIndividual &lt;- new_class(\n  name = \"Individual\",\n  parent = Provider,\n  properties = list(\n    npi = new_property(NULL | class_character),\n    entity = new_property(NULL | class_character),\n    demographics = new_property(class_list, \n      default = list(\n        prefix = class_character,\n        first_name = class_character,\n        middle_name = class_character,\n        last_name = class_character,\n        suffix = class_character,\n        gender = class_character,\n        credential = class_character,\n        sole_proprietor = class_logical,\n        medical_school = class_character,\n        graduation_year = class_integer\n      )),\n    dates = new_property(\n      class_list, \n      default = list(\n        updated = class_Date,\n        enumerated = class_Date,\n        certified = class_Date\n      )),\n    address = new_property(\n      class_list, \n      default = list(\n        purpose = class_character,\n        street = class_character,\n        city = class_character,\n        state = class_character,\n        postal_code = class_character,\n        country = class_character,\n        phone = class_character,\n        fax = class_character\n      )),\n    taxonomy = new_property(\n      class_list, \n      default = list(\n        code = class_character,\n        primary = class_logical,\n        description = class_character,\n        license = class_character,\n        state = class_character\n      )),\n    identifier = new_property(\n      class_list, \n      default = list(\n        code = class_character,\n        indicator = class_character,\n        issuer = class_character,\n        state = class_character\n      )),\n    enrollment = new_property(class_list, \n      default = list(\n        pac = new_property(NULL | class_character),\n        enid = new_property(NULL | class_character),\n        specialty = new_property(\n          class_list, \n          default = list(\n            code = class_character, \n            description = class_character)),\n        state = class_character,\n        # opt_out = new_property(class_logical | class_list),\n        order_refer = new_property(\n          class_list, \n          default = list(\n          MedicareB = class_logical,\n          HHA = class_logical,\n          DME = class_logical,\n          PMD = class_logical,\n          Hospice = class_logical))))))\n\n\n\nfung_ex &lt;- Individual(\n  npi = \"1043245657\",\n  entity = \"I\",\n  demographics = list(\n    prefix = \"DR\",\n    first_name = \"MARK\",\n    middle_name = \"K\",\n    last_name = \"FUNG\",\n    suffix = NA_character_,\n    gender = \"Male\",\n    credential = \"MD, PhD\",\n    sole_proprietor = FALSE,\n    medical_school = NA_character_,\n    graduation_year = 1999L),\n  dates = list(\n    updated = as.Date(\"2013-10-08\"),\n    enumerated = as.Date(\"2006-07-11\"),\n    certified = as.Date(\"2021-07-01\")),\n  address = list(\n    purpose = \"Practice\",\n    street = \"111 COLCHESTER AVE\",\n    city = \"BURLINGTON\",\n    state = \"VT\",\n    postal_code = \"05401\",\n    country = \"US\",\n    phone = \"802-847-3000\",\n    fax = \"802-847-3509\"),\n  taxonomy = list(\n    code = \"207ZB0001X\",\n    primary = TRUE,\n    description = \"Pathology, Blood Banking & Transfusion Medicine\",\n    license = \"042-0010655\",\n    state = \"VT\"),\n  identifier = list(\n    code = \"1010070\",\n    indicator = \"05\",\n    issuer = \"MEDICAID\",\n    state = \"VT\"),\n  enrollment = list(\n    pac = \"7810891009\",\n    enid = \"I20031120000251\",\n    specialty = list(\n      code = \"14-22\",\n      description = \"PRACTITIONER - PATHOLOGY\"),\n    state = \"VT\",\n    order_refer = list(\n      MedicareB = TRUE,\n      HHA = TRUE,\n      DME = TRUE,\n      PMD = TRUE,\n      Hospice = TRUE)))\n\nfung_ex\n\n&lt;Individual&gt;\n @ npi         : chr \"1043245657\"\n @ entity      : chr \"I\"\n @ demographics:List of 10\n .. $ prefix         : chr \"DR\"\n .. $ first_name     : chr \"MARK\"\n .. $ middle_name    : chr \"K\"\n .. $ last_name      : chr \"FUNG\"\n .. $ suffix         : chr NA\n .. $ gender         : chr \"Male\"\n .. $ credential     : chr \"MD, PhD\"\n .. $ sole_proprietor: logi FALSE\n .. $ medical_school : chr NA\n .. $ graduation_year: int 1999\n @ dates       :List of 3\n .. $ updated   : Date[1:1], format: \"2013-10-08\"\n .. $ enumerated: Date[1:1], format: \"2006-07-11\"\n .. $ certified : Date[1:1], format: \"2021-07-01\"\n @ address     :List of 8\n .. $ purpose    : chr \"Practice\"\n .. $ street     : chr \"111 COLCHESTER AVE\"\n .. $ city       : chr \"BURLINGTON\"\n .. $ state      : chr \"VT\"\n .. $ postal_code: chr \"05401\"\n .. $ country    : chr \"US\"\n .. $ phone      : chr \"802-847-3000\"\n .. $ fax        : chr \"802-847-3509\"\n @ taxonomy    :List of 5\n .. $ code       : chr \"207ZB0001X\"\n .. $ primary    : logi TRUE\n .. $ description: chr \"Pathology, Blood Banking & Transfusion Medicine\"\n .. $ license    : chr \"042-0010655\"\n .. $ state      : chr \"VT\"\n @ identifier  :List of 4\n .. $ code     : chr \"1010070\"\n .. $ indicator: chr \"05\"\n .. $ issuer   : chr \"MEDICAID\"\n .. $ state    : chr \"VT\"\n @ enrollment  :List of 5\n .. $ pac        : chr \"7810891009\"\n .. $ enid       : chr \"I20031120000251\"\n .. $ specialty  :List of 2\n ..  ..$ code       : chr \"14-22\"\n ..  ..$ description: chr \"PRACTITIONER - PATHOLOGY\"\n .. $ state      : chr \"VT\"\n .. $ order_refer:List of 5\n ..  ..$ MedicareB: logi TRUE\n ..  ..$ HHA      : logi TRUE\n ..  ..$ DME      : logi TRUE\n ..  ..$ PMD      : logi TRUE\n ..  ..$ Hospice  : logi TRUE\n\n\n\n\n\nR version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nother attached packages: S7(v.0.2.0.9000), arktax(v.0.0.1.9003), provider(v.0.0.1.9000), collapse(v.2.0.18), kit(v.0.0.19), magrittr(v.2.0.3), data.table(v.1.16.99), fastverse(v.0.3.4), lubridate(v.1.9.4), forcats(v.1.0.0), stringr(v.1.5.1), dplyr(v.1.1.4), purrr(v.1.0.2), readr(v.2.1.5), tidyr(v.1.3.1.9000), tibble(v.3.2.1), ggplot2(v.3.5.1) and tidyverse(v.2.0.0)\nloaded via a namespace (and not attached): gtable(v.0.3.6), xfun(v.0.49), httr2(v.1.0.7), htmlwidgets(v.1.6.4), RApiSerialize(v.0.1.4), tzdb(v.0.4.0), vctrs(v.0.6.5), tools(v.4.4.2), generics(v.0.1.3), curl(v.6.0.1), parallel(v.4.4.2), fansi(v.1.0.6), pkgconfig(v.2.0.3), checkmate(v.2.3.2), RcppParallel(v.5.1.9), lifecycle(v.1.0.4), compiler(v.4.4.2), textshaping(v.0.4.1), munsell(v.0.5.1), janitor(v.2.2.0), qs(v.0.27.2), snakecase(v.0.11.1), htmltools(v.0.5.8.1), yaml(v.2.3.10), pillar(v.1.9.0), tidyselect(v.1.2.1), digest(v.0.6.37), stringi(v.1.8.4), pander(v.0.6.5), pins(v.1.4.0), fastmap(v.1.2.0), grid(v.4.4.2), colorspace(v.2.1-1), cli(v.3.6.3), utf8(v.1.2.4), withr(v.3.0.2), backports(v.1.5.0), scales(v.1.3.0), rappdirs(v.0.3.3), timechange(v.0.3.0), rmarkdown(v.2.29), ragg(v.1.3.3), hms(v.1.1.3), stringfish(v.0.16.0), evaluate(v.1.0.1), knitr(v.1.49), rlang(v.1.1.4), Rcpp(v.1.0.13-1), zeallot(v.0.1.0), glue(v.1.8.0), strex(v.2.0.1), rstudioapi(v.0.17.1), jsonlite(v.1.8.9), R6(v.2.5.1), systemfonts(v.1.1.0) and fs(v.1.6.5)"
  },
  {
    "objectID": "posts/provider_s7/provider_s7.html#api-examples",
    "href": "posts/provider_s7/provider_s7.html#api-examples",
    "title": "provider: Comprehensive Search",
    "section": "",
    "text": "nppes(npi = 1043245657) |&gt; glimpse()\n\nRows: 1\nColumns: 29\n$ npi           &lt;chr&gt; \"1043245657\"\n$ entity_type   &lt;fct&gt; Individual\n$ enum_date     &lt;date&gt; 2006-07-11\n$ last_update   &lt;date&gt; 2013-10-08\n$ status        &lt;fct&gt; Active\n$ prefix        &lt;chr&gt; \"Dr.\"\n$ first         &lt;chr&gt; \"MARK\"\n$ middle        &lt;chr&gt; \"K\"\n$ last          &lt;chr&gt; \"FUNG\"\n$ gender        &lt;fct&gt; Male\n$ credential    &lt;chr&gt; \"MD, PhD\"\n$ sole_prop     &lt;lgl&gt; FALSE\n$ purpose       &lt;fct&gt; Practice\n$ address       &lt;chr&gt; \"111 COLCHESTER AVE FLETCHER ALLEN HEALTH CARE - PATHOLO…\n$ city          &lt;chr&gt; \"BURLINGTON\"\n$ state         &lt;ord&gt; VT\n$ zip           &lt;chr&gt; \"054011473\"\n$ country       &lt;chr&gt; \"US\"\n$ phone         &lt;chr&gt; \"802-847-3000\"\n$ fax           &lt;chr&gt; \"802-847-3509\"\n$ tx_code       &lt;chr&gt; \"207ZB0001X\"\n$ tx_primary    &lt;lgl&gt; TRUE\n$ tx_desc       &lt;chr&gt; \"Pathology, Blood Banking & Transfusion Medicine\"\n$ tx_license    &lt;chr&gt; \"042-0010655\"\n$ tx_state      &lt;ord&gt; VT\n$ id_code       &lt;chr&gt; \"05\"\n$ id_desc       &lt;chr&gt; \"MEDICAID\"\n$ id_state      &lt;ord&gt; VT\n$ id_identifier &lt;chr&gt; \"1010070\"\n\n\n\n\nex_tx = \"207ZB0001X\"\n\n\n\nDisplay\nDefinition\nHierarchy\nChangelog\nConsole\n\n\n\n\ntx_dis &lt;- taxonomy_display(\n  taxonomy_code = ex_tx\n  )[[\"taxonomy_display\"]]\n\ncat(tx_dis)\n\nBlood Banking & Transfusion Medicine Physician\n\n\n\n\n\ntx_def &lt;- taxonomy_definition(\n  taxonomy_code = ex_tx\n  )[[\"taxonomy_definition\"]]\n\ncat(tx_def)\n\nA physician who specializes in blood banking/transfusion medicine is responsible for the maintenance of an adequate blood supply, blood donor and patient-recipient safety and appropriate blood utilization. Pre-transfusion compatibility testing and antibody testing assure that blood transfusions, when indicated, are as safe as possible. This physician directs the preparation and safe use of specially prepared blood components, including red blood cells, white blood cells, platelets and plasma constituents, and marrow or stem cells for transplantation.\n\n\n\n\n\ntx_hier &lt;- taxonomy_hierarchy(\n  taxonomy_code = ex_tx\n  )[, 2:3]\n\ntx_hier\n\n# A tibble: 4 × 2\n  taxonomy_level      taxonomy_level_title                \n  &lt;ord&gt;               &lt;chr&gt;                               \n1 I. Section          Individual                          \n2 II. Grouping        Allopathic & Osteopathic Physicians \n3 III. Classification Pathology                           \n4 IV. Specialization  Blood Banking & Transfusion Medicine\n\n\n\n\n\ntx_chg &lt;- taxonomy_changelog(\n  taxonomy_code = ex_tx\n  )[, 2:4]\n\ntx_chg\n\n# A tibble: 2 × 3\n  date       change   details           \n  &lt;date&gt;     &lt;ord&gt;    &lt;chr&gt;             \n1 2007-07-01 modified definition, source\n2 2011-07-01 modified source            \n\n\n\n\n\nutils::formatOL(\n  c(\n    \"Section: \",\n    \"Grouping: \",\n    \"Classification: \",\n    \"Specialization: \"\n    ),\n  type = \"I\",\n  offset = 2\n  ) |&gt; \n  writeLines()\n\n    I. Section:\n   II. Grouping:\n  III. Classification:\n   IV. Specialization:\n\n# view_length &lt;- \\(x) {\n#   grp_name &lt;- format(seq_along(x))\n#   grp_size &lt;- format(vlen(x), justify = \"left\")\n#   grp_mems &lt;- unname(x)\n#   grp_mems &lt;- if (empty(grp_mems)) NULL else format(grp_mems, justify = \"none\")\n#   cli::cat_bullet(glue::glue(\"{grp_name}: \", \"{grp_size}|\", \"-[{grp_mems}]\"))\n#   return(invisible(x))\n# }\n\n\n\n\n\n\nproviders(npi = 1043245657) |&gt; glimpse()\n\nRows: 1\nColumns: 10\n$ npi                   &lt;chr&gt; \"1043245657\"\n$ pac                   &lt;chr&gt; \"7810891009\"\n$ enid                  &lt;chr&gt; \"I20031120000251\"\n$ specialty_code        &lt;chr&gt; \"14-22\"\n$ specialty_description &lt;chr&gt; \"PRACTITIONER - PATHOLOGY\"\n$ state                 &lt;ord&gt; VT\n$ first                 &lt;chr&gt; \"MARK\"\n$ middle                &lt;chr&gt; \"K\"\n$ last                  &lt;chr&gt; \"FUNG\"\n$ gender                &lt;fct&gt; Male\n\n\n\nclinicians(npi = 1043245657) |&gt; glimpse()\n\nRows: 1\nColumns: 19\n$ npi           &lt;chr&gt; \"1043245657\"\n$ pac           &lt;chr&gt; \"7810891009\"\n$ enid          &lt;chr&gt; \"I20031120000251\"\n$ first         &lt;chr&gt; \"MARK\"\n$ middle        &lt;chr&gt; \"K\"\n$ last          &lt;chr&gt; \"FUNG\"\n$ gender        &lt;fct&gt; Male\n$ credential    &lt;chr&gt; \"MD\"\n$ school        &lt;chr&gt; \"UNIVERSITY OF ALABAMA SCHOOL OF MEDICINE\"\n$ grad_year     &lt;int&gt; 1999\n$ specialty     &lt;chr&gt; \"PATHOLOGY\"\n$ facility_name &lt;chr&gt; \"UNIVERSITY OF VERMONT MEDICAL CENTER INC\"\n$ pac_org       &lt;chr&gt; \"3779491071\"\n$ members_org   &lt;int&gt; 1023\n$ address_org   &lt;chr&gt; \"111 COLCHESTER AVE\"\n$ city_org      &lt;chr&gt; \"BURLINGTON\"\n$ state_org     &lt;ord&gt; VT\n$ zip_org       &lt;chr&gt; \"054011473\"\n$ phone_org     &lt;chr&gt; \"8028470000\"\n\n\n\nopt_out(npi = 1043245657)\n\n\norder_refer(npi = 1043245657)\n\n# A tibble: 5 × 4\n  npi        first last  eligible                 \n  &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt; &lt;fct&gt;                    \n1 1043245657 MARK  FUNG  Medicare Part B          \n2 1043245657 MARK  FUNG  Home Health Agency       \n3 1043245657 MARK  FUNG  Durable Medical Equipment\n4 1043245657 MARK  FUNG  Power Mobility Devices   \n5 1043245657 MARK  FUNG  Hospice                  \n\n\n\nreassignments(npi = 1043245657) |&gt; glimpse()\n\nRows: 1\nColumns: 12\n$ npi           &lt;chr&gt; \"1043245657\"\n$ pac           &lt;chr&gt; \"7810891009\"\n$ enid          &lt;chr&gt; \"I20031120000251\"\n$ first         &lt;chr&gt; \"MARK\"\n$ last          &lt;chr&gt; \"FUNG\"\n$ associations  &lt;int&gt; 1\n$ organization  &lt;chr&gt; \"UNIVERSITY OF VERMONT MEDICAL CENTER INC\"\n$ pac_org       &lt;chr&gt; \"3779491071\"\n$ enid_org      &lt;chr&gt; \"O20060822000040\"\n$ state_org     &lt;ord&gt; VT\n$ reassignments &lt;int&gt; 98\n$ entry         &lt;fct&gt; Reassignment\n\n\n\naffiliations(npi = 1043245657) |&gt; glimpse()\n\nRows: 2\nColumns: 7\n$ npi           &lt;chr&gt; \"1043245657\", \"1043245657\"\n$ pac           &lt;chr&gt; \"7810891009\", \"7810891009\"\n$ first         &lt;chr&gt; \"MARK\", \"MARK\"\n$ middle        &lt;chr&gt; \"K\", \"K\"\n$ last          &lt;chr&gt; \"FUNG\", \"FUNG\"\n$ facility_type &lt;fct&gt; Hospital, Hospital\n$ facility_ccn  &lt;chr&gt; \"470003\", \"330250\"\n\n\n\nhospitals(facility_ccn = 470003) |&gt; glimpse()\n\nRows: 2\nColumns: 21\n$ npi_org           &lt;chr&gt; \"1568419976\", \"1568419976\"\n$ pac_org           &lt;chr&gt; \"3779491071\", \"3779491071\"\n$ enid_org          &lt;chr&gt; \"O20021111000009\", \"O20021111000009\"\n$ enid_state        &lt;ord&gt; VT, VT\n$ facility_ccn      &lt;chr&gt; \"470003\", \"470003\"\n$ organization      &lt;chr&gt; \"UNIVERSITY OF VERMONT MEDICAL CENTER INC\", \"UNIVERS…\n$ doing_business_as &lt;chr&gt; \"UNIVERSITY OF VERMONT MEDICAL CENTER\", \"UNIVERSITY …\n$ specialty_code    &lt;chr&gt; \"00-09\", \"00-09\"\n$ specialty         &lt;chr&gt; \"PART A PROVIDER - HOSPITAL\", \"PART A PROVIDER - HOS…\n$ incorp_date       &lt;date&gt; 1995-01-01, 1995-01-01\n$ incorp_state      &lt;ord&gt; VT, VT\n$ structure         &lt;chr&gt; \"CORPORATION\", \"CORPORATION\"\n$ address           &lt;chr&gt; \"111 COLCHESTER AVE\", \"111 COLCHESTER AVE\"\n$ city              &lt;chr&gt; \"BURLINGTON\", \"BURLINGTON\"\n$ state             &lt;ord&gt; VT, VT\n$ zip               &lt;chr&gt; \"54011473\", \"54011473\"\n$ location_type     &lt;chr&gt; \"OTHER HOSPITAL PRACTICE LOCATION: HOSPITAL - GENERA…\n$ registration      &lt;fct&gt; Non-Profit, Non-Profit\n$ multi_npi         &lt;lgl&gt; FALSE, FALSE\n$ reh_conversion    &lt;lgl&gt; FALSE, FALSE\n$ subgroup          &lt;fct&gt; Acute Care, Other\n\nhospitals(facility_ccn = 330250) |&gt; glimpse()\n\nRows: 1\nColumns: 21\n$ npi_org           &lt;chr&gt; \"1033270699\"\n$ pac_org           &lt;chr&gt; \"2769396878\"\n$ enid_org          &lt;chr&gt; \"O20120110000201\"\n$ enid_state        &lt;ord&gt; NY\n$ facility_ccn      &lt;chr&gt; \"330250\"\n$ organization      &lt;chr&gt; \"CHAMPLAIN VALLEY PHYSICIANS HOSPITAL MEDICAL CENTER\"\n$ doing_business_as &lt;chr&gt; \"THE UNIVERSITY OF VT HEALTH NETWORK - CHAMPLAIN VAL…\n$ specialty_code    &lt;chr&gt; \"00-09\"\n$ specialty         &lt;chr&gt; \"PART A PROVIDER - HOSPITAL\"\n$ incorp_date       &lt;date&gt; 1926-01-01\n$ incorp_state      &lt;ord&gt; NY\n$ structure         &lt;chr&gt; \"CORPORATION\"\n$ address           &lt;chr&gt; \"75 BEEKMAN ST\"\n$ city              &lt;chr&gt; \"PLATTSBURGH\"\n$ state             &lt;ord&gt; NY\n$ zip               &lt;chr&gt; \"129011438\"\n$ location_type     &lt;chr&gt; \"MAIN/PRIMARY HOSPITAL LOCATION\"\n$ registration      &lt;fct&gt; Non-Profit\n$ multi_npi         &lt;lgl&gt; FALSE\n$ reh_conversion    &lt;lgl&gt; FALSE\n$ subgroup          &lt;fct&gt; Acute Care"
  },
  {
    "objectID": "posts/provider_s7/provider_s7.html#provider-class",
    "href": "posts/provider_s7/provider_s7.html#provider-class",
    "title": "provider: Comprehensive Search",
    "section": "",
    "text": "Provider &lt;- new_class(\n  name = \"Provider\", \n  abstract = TRUE,\n  properties = list(\n    npi = class_character,\n    entity = class_factor\n  ))\n\n\n\nIndividual &lt;- new_class(\n  name = \"Individual\",\n  parent = Provider,\n  properties = list(\n    npi = new_property(NULL | class_character),\n    entity = new_property(NULL | class_character),\n    demographics = new_property(class_list, \n      default = list(\n        prefix = class_character,\n        first_name = class_character,\n        middle_name = class_character,\n        last_name = class_character,\n        suffix = class_character,\n        gender = class_character,\n        credential = class_character,\n        sole_proprietor = class_logical,\n        medical_school = class_character,\n        graduation_year = class_integer\n      )),\n    dates = new_property(\n      class_list, \n      default = list(\n        updated = class_Date,\n        enumerated = class_Date,\n        certified = class_Date\n      )),\n    address = new_property(\n      class_list, \n      default = list(\n        purpose = class_character,\n        street = class_character,\n        city = class_character,\n        state = class_character,\n        postal_code = class_character,\n        country = class_character,\n        phone = class_character,\n        fax = class_character\n      )),\n    taxonomy = new_property(\n      class_list, \n      default = list(\n        code = class_character,\n        primary = class_logical,\n        description = class_character,\n        license = class_character,\n        state = class_character\n      )),\n    identifier = new_property(\n      class_list, \n      default = list(\n        code = class_character,\n        indicator = class_character,\n        issuer = class_character,\n        state = class_character\n      )),\n    enrollment = new_property(class_list, \n      default = list(\n        pac = new_property(NULL | class_character),\n        enid = new_property(NULL | class_character),\n        specialty = new_property(\n          class_list, \n          default = list(\n            code = class_character, \n            description = class_character)),\n        state = class_character,\n        # opt_out = new_property(class_logical | class_list),\n        order_refer = new_property(\n          class_list, \n          default = list(\n          MedicareB = class_logical,\n          HHA = class_logical,\n          DME = class_logical,\n          PMD = class_logical,\n          Hospice = class_logical))))))\n\n\n\nfung_ex &lt;- Individual(\n  npi = \"1043245657\",\n  entity = \"I\",\n  demographics = list(\n    prefix = \"DR\",\n    first_name = \"MARK\",\n    middle_name = \"K\",\n    last_name = \"FUNG\",\n    suffix = NA_character_,\n    gender = \"Male\",\n    credential = \"MD, PhD\",\n    sole_proprietor = FALSE,\n    medical_school = NA_character_,\n    graduation_year = 1999L),\n  dates = list(\n    updated = as.Date(\"2013-10-08\"),\n    enumerated = as.Date(\"2006-07-11\"),\n    certified = as.Date(\"2021-07-01\")),\n  address = list(\n    purpose = \"Practice\",\n    street = \"111 COLCHESTER AVE\",\n    city = \"BURLINGTON\",\n    state = \"VT\",\n    postal_code = \"05401\",\n    country = \"US\",\n    phone = \"802-847-3000\",\n    fax = \"802-847-3509\"),\n  taxonomy = list(\n    code = \"207ZB0001X\",\n    primary = TRUE,\n    description = \"Pathology, Blood Banking & Transfusion Medicine\",\n    license = \"042-0010655\",\n    state = \"VT\"),\n  identifier = list(\n    code = \"1010070\",\n    indicator = \"05\",\n    issuer = \"MEDICAID\",\n    state = \"VT\"),\n  enrollment = list(\n    pac = \"7810891009\",\n    enid = \"I20031120000251\",\n    specialty = list(\n      code = \"14-22\",\n      description = \"PRACTITIONER - PATHOLOGY\"),\n    state = \"VT\",\n    order_refer = list(\n      MedicareB = TRUE,\n      HHA = TRUE,\n      DME = TRUE,\n      PMD = TRUE,\n      Hospice = TRUE)))\n\nfung_ex\n\n&lt;Individual&gt;\n @ npi         : chr \"1043245657\"\n @ entity      : chr \"I\"\n @ demographics:List of 10\n .. $ prefix         : chr \"DR\"\n .. $ first_name     : chr \"MARK\"\n .. $ middle_name    : chr \"K\"\n .. $ last_name      : chr \"FUNG\"\n .. $ suffix         : chr NA\n .. $ gender         : chr \"Male\"\n .. $ credential     : chr \"MD, PhD\"\n .. $ sole_proprietor: logi FALSE\n .. $ medical_school : chr NA\n .. $ graduation_year: int 1999\n @ dates       :List of 3\n .. $ updated   : Date[1:1], format: \"2013-10-08\"\n .. $ enumerated: Date[1:1], format: \"2006-07-11\"\n .. $ certified : Date[1:1], format: \"2021-07-01\"\n @ address     :List of 8\n .. $ purpose    : chr \"Practice\"\n .. $ street     : chr \"111 COLCHESTER AVE\"\n .. $ city       : chr \"BURLINGTON\"\n .. $ state      : chr \"VT\"\n .. $ postal_code: chr \"05401\"\n .. $ country    : chr \"US\"\n .. $ phone      : chr \"802-847-3000\"\n .. $ fax        : chr \"802-847-3509\"\n @ taxonomy    :List of 5\n .. $ code       : chr \"207ZB0001X\"\n .. $ primary    : logi TRUE\n .. $ description: chr \"Pathology, Blood Banking & Transfusion Medicine\"\n .. $ license    : chr \"042-0010655\"\n .. $ state      : chr \"VT\"\n @ identifier  :List of 4\n .. $ code     : chr \"1010070\"\n .. $ indicator: chr \"05\"\n .. $ issuer   : chr \"MEDICAID\"\n .. $ state    : chr \"VT\"\n @ enrollment  :List of 5\n .. $ pac        : chr \"7810891009\"\n .. $ enid       : chr \"I20031120000251\"\n .. $ specialty  :List of 2\n ..  ..$ code       : chr \"14-22\"\n ..  ..$ description: chr \"PRACTITIONER - PATHOLOGY\"\n .. $ state      : chr \"VT\"\n .. $ order_refer:List of 5\n ..  ..$ MedicareB: logi TRUE\n ..  ..$ HHA      : logi TRUE\n ..  ..$ DME      : logi TRUE\n ..  ..$ PMD      : logi TRUE\n ..  ..$ Hospice  : logi TRUE"
  },
  {
    "objectID": "posts/provider_s7/provider_s7.html#session-information",
    "href": "posts/provider_s7/provider_s7.html#session-information",
    "title": "provider: Comprehensive Search",
    "section": "",
    "text": "R version 4.4.2 (2024-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nlocale: LC_COLLATE=English_United States.utf8, LC_CTYPE=English_United States.utf8, LC_MONETARY=English_United States.utf8, LC_NUMERIC=C and LC_TIME=English_United States.utf8\nattached base packages: stats, graphics, grDevices, utils, datasets, methods and base\nother attached packages: S7(v.0.2.0.9000), arktax(v.0.0.1.9003), provider(v.0.0.1.9000), collapse(v.2.0.18), kit(v.0.0.19), magrittr(v.2.0.3), data.table(v.1.16.99), fastverse(v.0.3.4), lubridate(v.1.9.4), forcats(v.1.0.0), stringr(v.1.5.1), dplyr(v.1.1.4), purrr(v.1.0.2), readr(v.2.1.5), tidyr(v.1.3.1.9000), tibble(v.3.2.1), ggplot2(v.3.5.1) and tidyverse(v.2.0.0)\nloaded via a namespace (and not attached): gtable(v.0.3.6), xfun(v.0.49), httr2(v.1.0.7), htmlwidgets(v.1.6.4), RApiSerialize(v.0.1.4), tzdb(v.0.4.0), vctrs(v.0.6.5), tools(v.4.4.2), generics(v.0.1.3), curl(v.6.0.1), parallel(v.4.4.2), fansi(v.1.0.6), pkgconfig(v.2.0.3), checkmate(v.2.3.2), RcppParallel(v.5.1.9), lifecycle(v.1.0.4), compiler(v.4.4.2), textshaping(v.0.4.1), munsell(v.0.5.1), janitor(v.2.2.0), qs(v.0.27.2), snakecase(v.0.11.1), htmltools(v.0.5.8.1), yaml(v.2.3.10), pillar(v.1.9.0), tidyselect(v.1.2.1), digest(v.0.6.37), stringi(v.1.8.4), pander(v.0.6.5), pins(v.1.4.0), fastmap(v.1.2.0), grid(v.4.4.2), colorspace(v.2.1-1), cli(v.3.6.3), utf8(v.1.2.4), withr(v.3.0.2), backports(v.1.5.0), scales(v.1.3.0), rappdirs(v.0.3.3), timechange(v.0.3.0), rmarkdown(v.2.29), ragg(v.1.3.3), hms(v.1.1.3), stringfish(v.0.16.0), evaluate(v.1.0.1), knitr(v.1.49), rlang(v.1.1.4), Rcpp(v.1.0.13-1), zeallot(v.0.1.0), glue(v.1.8.0), strex(v.2.0.1), rstudioapi(v.0.17.1), jsonlite(v.1.8.9), R6(v.2.5.1), systemfonts(v.1.1.0) and fs(v.1.6.5)"
  },
  {
    "objectID": "posts/rules/claims_rules.html",
    "href": "posts/rules/claims_rules.html",
    "title": "crule: Healthcare Claims Rules",
    "section": "",
    "text": "To build a composable, portable, and extensible healthcare claims rules engine. The engine will be used to evaluate claims data for compliance with a set of rules. The rules will be defined in a structured format and will be evaluated using R code, but should be general enough to be easily translated to another language. The goal is to create a flexible and extensible system that can be used to evaluate claims data in a variety of scenarios, pre- or post.\n\n\nqueryBuilder\nhealthdb\ninterface\ndataverifyr\ncohortBuilder"
  },
  {
    "objectID": "posts/rules/claims_rules.html#similar-work",
    "href": "posts/rules/claims_rules.html#similar-work",
    "title": "crule: Healthcare Claims Rules",
    "section": "",
    "text": "queryBuilder\nhealthdb\ninterface\ndataverifyr\ncohortBuilder"
  },
  {
    "objectID": "posts/rules/claims_rules.html#descriptors",
    "href": "posts/rules/claims_rules.html#descriptors",
    "title": "crule: Healthcare Claims Rules",
    "section": "\n8.1 Descriptors",
    "text": "8.1 Descriptors\n\n\n\n\n\n\n\n\n\n\n\nnumber\nidentifier\ncategory\n\n\n\n686\nICD:CM\n\n\nAge - Newborn 0 years\n\n\nThe diagnosis is inconsistent with the patients age. One or more ICD-10 codes are only appropriate for newborn patients (28 days and under).\n\n\n\n\n460\nTELE\n\n\nModifier 95\n\n\nModifier 95 may only be appended to the services listed in Appendix P. Review usage of modifier 95. Some payers may have different policies.\n\n\n\n\n569\nMCD:ID\n\n\nConsultations -\n\n\n99242– 99245 and 99252-99255), instead the appropriate evaluation and management code for office, other outpatient services, hospital or nursing facility should be billed for the services rendered. As Idaho Medicaid does not use consultation codes, more than one physician will be permitted to bill an initial visit.\n\n\n\n\n78\nMCD:GA\n\n\nDevelopmental Screenings\n\n\nDevelopmental Screening - Providers must bill code 96110 with the EP modifier and the appropriate preventive ICD-10 diagnosis code (Z00.121, Z00.129, or Z02-Z02.89) at 9, 18, and 30 months. Catch up visits should be coded with EP, HA.\n\n\n\n\n1045\nMCD:AR\n\n\n99401/99402 RHC\n\n\nModifier U9 should be added to 99401/99402 for Family Planning Visits. Assign a family planning dx as primary.\n\n\n\n\n501\nUNVSL\n\n\nLiberty Mutual fax/portal\n\n\nFor WC claims: Follow Workers Comp billing guidelines for electronic claims attachments. If unsuccessful, Fax claims to 888-925-8391 Attn: Bill Review or use the portal at https://www.libertymutualprovidersupport.com\n\n\n\n\n953\nMEDSV\n\n\nNA\n\n\nModifier 59 should not be appended to 97124/97140 if performed on the same body area as the manipulation services\n\n\n\n\n932\nRHC\n\n\nRHC/FQHC\n\n\nG0511/G0512 should be billed on a UB with Rev code 0521. Do not use CG modifier.\n\n\n\n\n151\nMCD:IL\n\n\nOriginating Site: Telehealth\n\n\nRHC Telehealth Originating site: Bill T1015, Q3014\n\n\n\n\n56\nFQHC\n\n\nG0469, G0470 Qualifying Visit\n\n\nAn FQHC qualifying visit for G0469, G0470 is not present. Review coding."
  },
  {
    "objectID": "posts/rules/claims_rules.html#definitions",
    "href": "posts/rules/claims_rules.html#definitions",
    "title": "crule: Healthcare Claims Rules",
    "section": "\n8.2 Definitions",
    "text": "8.2 Definitions\n\n\n\n\n\n\n\n      definition\n    \n\n\n583\n@hcpcs is one of [11730, 11732, 11740, 11750, 11755, 11760, 11762, 11765] %AND% @mod_1 is not [F*, T*] %AND% @mod_2 is not [F*, T*]\n\n\n142\n@icd is [J30.9] %AND% @icd is one of [J45.909, J31.0]\n\n\n533\n@hcpcs is one of [0200T, 0213T, 0214T, 0215T, 0216T, 0217T, 0218T, 0228T, 0229T, 0230T, 0231T, 0308T, 0485T, 0510T, 0511T, 0524T, 0725T, 0726T, 0727T, 0728T, 0729T, 10035, 11450, 11451, 11462, 11463, 11970, 11971, 15777, 15820, 15821, 15822, 15823, 15824, 15825, 15826, 15828, 15829, 15832, 15833, 15834, 15836, 15878, 15879, 19020, 19030, 19081, 19083, 19085, 19100, 19101, 19105, 19110, 19112, 19120, 19125, 19281, 19283, 19285, 19287, 19296, 19298, 19300, 19301, 19302, 19303, 19305, 19306, 19307, 19316, 19318, 19325, 19328, 19330, 19340, 19342, 19350, 19355, 19357, 19361, 19364, 19366, 19367, 19368, 19369, 19370, 19371, 19380, 19396, 19499, 20100, 20150, 20526, 20527, 20550, 20600, 20604, 20605, 20606, 20610, 20611, 20663, 20802, 20805, 20808, 20824, 20827, 20838, 20939, 20973, 20982, 20983, 21010, 21030, 21031, 21050, 21060, 21070, 21073, 21077, 21086, 21116, 21240, 21242, 21243, 21247, 21255, 21256, 21267, 21268, 21270, 21280, 21282, 21295, 21296, 21355, 21356, 21360, 21365, 21366, 21385, 21386, 21387, 21390, 21395, 21400, 21401, 21406, 21407, 21408, 21465, 21480, 21485, 21490, 21615, 21616, 21700, 21705, 21811, 21812, 21813, 23000, 23020, 23031, 23035, 23040, 23044, 23065, 23066, 23071, 23073, 23075, 23076, 23077, 23078, 23100, 23101, 23105, 23106, 23107, 23120, 23125, 23130, 23140, 23145, 23146, 23150, 23155, 23156, 23170, 23172, 23174, 23180, 23182, 23184, 23190, 23195, 23200, 23210, 23220, 23330, 23333, 23334, 23335, 23350, 23400, 23410, 23412, 23415, 23420, 23430, 23440, 23450, 23455, 23460, 23462, 23465, 23466, 23470, 23472, 23473, 23474, 23480, 23485, 23490, 23491, 23500, 23505, 23515, 23520, 23525, 23530, 23532, 23540, 23545, 23550, 23552, 23570, 23575, 23585, 23600, 23605, 23615, 23616, 23620, 23625, 23630, 23650, 23655, 23660, 23665, 23670, 23675, 23680, 23700, 23800, 23802, 23920, 23921, 23930, 23931, 23935, 24000, 24006, 24065, 24066, 24071, 24073, 24075, 24076, 24077, 24079, 24100, 24101, 24102, 24105, 24110, 24115, 24116, 24120, 24125, 24126, 24130, 24134, 24136, 24138, 24140, 24145, 24147, 24149, 24150, 24152, 24155, 24160, 24164, 24200, 24201, 24220, 24300, 24330, 24331, 24332, 24340, 24341, 24342, 24343, 24344, 24345, 24346, 24357, 24358, 24359, 24360, 24361, 24362, 24363, 24365, 24366, 24370, 24371, 24400, 24410, 24420, 24430, 24435, 24470, 24495, 24498, 24500, 24505, 24515, 24516, 24530, 24535, 24538, 24545, 24546, 24560, 24565, 24566, 24575, 24576, 24577, 24579, 24582, 24586, 24587, 24600, 24605, 24615, 24620, 24635, 24640, 24650, 24655, 24665, 24666, 24670, 24675, 24685, 24800, 24802, 24900, 24920, 24925, 24930, 24931, 24935, 24940, 24999, 25000, 25001, 25020, 25023, 25024, 25025, 25028, 25031, 25035, 25040, 25065, 25066, 25071, 25073, 25075, 25076, 25077, 25078, 25085, 25100, 25101, 25105, 25107, 25109, 25110, 25111, 25112, 25115, 25116, 25118, 25119, 25120, 25125, 25126, 25130, 25135, 25136, 25145, 25150, 25151, 25170, 25215, 25230, 25240, 25246, 25248, 25250, 25251, 25259, 25275, 25300, 25301, 25315, 25316, 25320, 25332, 25335, 25337, 25350, 25355, 25360, 25365, 25370, 25375, 25390, 25391, 25392, 25393, 25394, 25400, 25405, 25415, 25420, 25425, 25426, 25430, 25431, 25440, 25441, 25442, 25443, 25444, 25445, 25446, 25447, 25449, 25450, 25455, 25490, 25491, 25492, 25500, 25505, 25515, 25520, 25525, 25526, 25530, 25535, 25545, 25560, 25565, 25574, 25575, 25600, 25605, 25606, 25607, 25608, 25609, 25622, 25624, 25628, 25630, 25635, 25645, 25650, 25651, 25652, 25660, 25670, 25671, 25675, 25676, 25680, 25685, 25690, 25695, 25800, 25805, 25810, 25820, 25825, 25830, 25900, 25905, 25907, 25909, 25915, 25920, 25922, 25924, 25927, 25929, 25931, 25999, 26025, 26030, 26037, 26040, 26045, 26070, 26075, 26100, 26105, 26121, 26123, 26130, 26185, 26340, 26341, 26508, 26516, 26517, 26518, 26546, 26550, 26551, 26553, 26554, 26580, 26641, 26645, 26650, 26665, 26820, 26841, 26842, 27000, 27001, 27003, 27005, 27006, 27025, 27027, 27030, 27033, 27035, 27036, 27040, 27041, 27043, 27045, 27047, 27048, 27049, 27050, 27052, 27054, 27057, 27059, 27060, 27062, 27065, 27066, 27067, 27070, 27071, 27078, 27086, 27087, 27090, 27091, 27093, 27095, 27096, 27097, 27098, 27100, 27105, 27110, 27111, 27120, 27122, 27125, 27130, 27132, 27134, 27137, 27138, 27140, 27146, 27147, 27151, 27156, 27161, 27165, 27170, 27175, 27176, 27177, 27178, 27179, 27181, 27185, 27187, 27220, 27222, 27226, 27227, 27228, 27230, 27232, 27235, 27236, 27238, 27240, 27244, 27245, 27246, 27248, 27250, 27252, 27253, 27254, 27256, 27257, 27258, 27259, 27265, 27266, 27267, 27268, 27269, 27279, 27280, 27284, 27286, 27295, 27299, 27301, 27303, 27305, 27306, 27307, 27310, 27323, 27324, 27325, 27326, 27327, 27328, 27329, 27330, 27331, 27332, 27333, 27334, 27335, 27337, 27339, 27340, 27345, 27347, 27350, 27355, 27356, 27357, 27360, 27364, 27365, 27369, 27372, 27380, 27381, 27385, 27386, 27390, 27393, 27396, 27397, 27400, 27403, 27405, 27407, 27409, 27412, 27415, 27416, 27418, 27420, 27422, 27424, 27425, 27427, 27428, 27429, 27430, 27435, 27437, 27438, 27440, 27441, 27442, 27443, 27445, 27446, 27447, 27448, 27450, 27454, 27455, 27457, 27465, 27466, 27468, 27470, 27472, 27475, 27477, 27479, 27485, 27486, 27487, 27488, 27495, 27496, 27497, 27498, 27499, 27500, 27501, 27502, 27503, 27506, 27507, 27508, 27509, 27510, 27511, 27513, 27514, 27516, 27517, 27519, 27520, 27524, 27530, 27532, 27535, 27536, 27538, 27540, 27550, 27552, 27556, 27557, 27558, 27560, 27562, 27566, 27570, 27580, 27590, 27591, 27592, 27594, 27596, 27598, 27599, 27600, 27601, 27602, 27603, 27604, 27605, 27606, 27607, 27610, 27612, 27613, 27614, 27615, 27616, 27618, 27619, 27620, 27625, 27626, 27630, 27632, 27634, 27635, 27637, 27638, 27640, 27641, 27645, 27646, 27647, 27648, 27650, 27652, 27654, 27656, 27675, 27676, 27681, 27685, 27686, 27687, 27690, 27691, 27695, 27696, 27698, 27700, 27702, 27703, 27704, 27705, 27707, 27709, 27712, 27715, 27720, 27722, 27724, 27725, 27726, 27727, 27730, 27732, 27734, 27740, 27742, 27745, 27750, 27752, 27756, 27758, 27759, 27760, 27762, 27766, 27767, 27768, 27769, 27780, 27781, 27784, 27786, 27788, 27792, 27808, 27810, 27814, 27816, 27818, 27822, 27823, 27824, 27825, 27826, 27827, 27828, 27829, 27830, 27831, 27832, 27840, 27842, 27846, 27848, 27860, 27870, 27871, 27880, 27881, 27882, 27884, 27886, 27888, 27889, 27892, 27893, 27894, 27899, 28008, 28035, 28039, 28041, 28043, 28045, 28046, 28047, 28050, 28052, 28054, 28055, 28060, 28062, 28086, 28088, 28090, 28100, 28102, 28103, 28110, 28111, 28112, 28113, 28114, 28116, 28118, 28119, 28120, 28122, 28124, 28130, 28190, 28192, 28193, 28220, 28222, 28225, 28226, 28230, 28238, 28240, 28250, 28260, 28261, 28262, 28264, 28270, 28272, 28280, 28285, 28286, 28289, 28291, 28292, 28295, 28296, 28297, 28298, 28299, 28300, 28302, 28304, 28305, 28306, 28307, 28308, 28309, 28310, 28315, 28320, 28344, 28360, 28400, 28405, 28406, 28415, 28420, 28430, 28435, 28436, 28445, 28446, 28490, 28495, 28496, 28505, 28530, 28531, 28540, 28545, 28546, 28555, 28570, 28575, 28576, 28585, 28705, 28715, 28725, 28730, 28735, 28737, 28740, 28750, 28755, 28760, 28800, 28805, 28890, 29065, 29075, 29085, 29086, 29105, 29125, 29126, 29130, 29131, 29240, 29260, 29280, 29345, 29355, 29358, 29365, 29405, 29425, 29435, 29440, 29445, 29450, 29505, 29515, 29520, 29530, 29540, 29550, 29580, 29581, 29584, 29705, 29710, 29750, 29800, 29804, 29805, 29806, 29807, 29819, 29820, 29821, 29822, 29823, 29824, 29825, 29826, 29827, 29828, 29830, 29834, 29835, 29836, 29837, 29838, 29840, 29843, 29844, 29845, 29846, 29847, 29848, 29850, 29851, 29855, 29856, 29860, 29861, 29862, 29863, 29866, 29867, 29868, 29870, 29871, 29873, 29874, 29875, 29876, 29877, 29879, 29880, 29881, 29882, 29883, 29884, 29885, 29886, 29887, 29888, 29889, 29891, 29892, 29893, 29894, 29895, 29897, 29898, 29899, 29900, 29901, 29902, 29904, 29905, 29906, 29907, 29914, 29915, 29916, 29999, 30110, 30115, 30130, 30140, 30901, 30903, 31000, 31002, 31020, 31030, 31032, 31040, 31050, 31051, 31070, 31075, 31080, 31081, 31084, 31085, 31086, 31087, 31090, 31200, 31201, 31205, 31225, 31230, 31233, 31235, 31237, 31238, 31239, 31240, 31241, 31253, 31254, 31255, 31256, 31257, 31259, 31267, 31276, 31287, 31288, 31290, 31291, 31292, 31293, 31294, 31295, 31296, 31297, 31298, 31545, 31546, 31572, 31573, 31574, 31951, 32035, 32036, 32215, 32220, 32225, 32491, 32551, 32554, 32555, 32556, 32557, 32650, 32651, 32652, 32654, 32655, 32656, 32664, 32666, 32994, 32997, 32998, 33889, 33891, 34001, 34051, 34101, 34111, 34151, 34201, 34203, 34401, 34421, 34451, 34471, 34490, 34501, 34510, 34520, 34530, 34707, 34708, 34713, 34714, 34715, 34716, 34812, 34820, 34833, 34834, 35001, 35002, 35005, 35011, 35013, 35021, 35022, 35045, 35091, 35092, 35102, 35103, 35111, 35112, 35121, 35122, 35131, 35132, 35141, 35142, 35151, 35152, 35201, 35206, 35207, 35211, 35216, 35221, 35226, 35231, 35236, 35241, 35246, 35251, 35256, 35261, 35266, 35271, 35276, 35281, 35286, 35301, 35302, 35303, 35304, 35305, 35311, 35321, 35331, 35341, 35351, 35355, 35361, 35363, 35371, 35372, 35501, 35506, 35508, 35509, 35510, 35511, 35512, 35515, 35516, 35518, 35521, 35522, 35523, 35525, 35526, 35531, 35533, 35535, 35536, 35539, 35540, 35556, 35558, 35560, 35563, 35565, 35566, 35570, 35571, 35583, 35585, 35587, 35601, 35606, 35612, 35616, 35621, 35623, 35626, 35631, 35632, 35633, 35634, 35636, 35642, 35645, 35647, 35650, 35656, 35661, 35663, 35665, 35666, 35671, 35691, 35693, 35694, 35695, 35701, 35702, 35703, 35879, 35881, 35883, 35884, 36002, 36005, 36010, 36011, 36012, 36014, 36015, 36100, 36200, 36222, 36223, 36224, 36225, 36226, 36227, 36228, 36245, 36246, 36247, 36465, 36466, 36470, 36471, 36473, 36474, 36475, 36476, 36478, 36479, 36482, 36483, 36557, 36558, 36560, 36561, 36565, 36566, 36570, 36571, 36598, 36820, 36838, 37184, 37187, 37188, 37211, 37212, 37215, 37217, 37218, 37220, 37221, 37222, 37223, 37224, 37225, 37226, 37227, 37228, 37229, 37230, 37231, 37232, 37233, 37234, 37235, 37236, 37237, 37238, 37239, 37246, 37247, 37248, 37249, 37500, 37501, 37565, 37609, 37650, 37660, 37700, 37718, 37722, 37735, 37760, 37761, 37765, 37766, 37780, 37785, 38220, 38221, 38222, 38500, 38505, 38510, 38520, 38525, 38530, 38531, 38542, 38589, 38700, 38720, 38724, 38740, 38745, 38760, 38765, 38770, 38790, 38792, 38900, 40720, 42340, 42410, 42415, 42420, 42425, 42426, 42440, 42810, 42815, 43289, 43659, 44238, 44979, 46505, 47579, 49329, 49491, 49492, 49495, 49496, 49500, 49501, 49505, 49507, 49520, 49521, 49525, 49540, 49550, 49553, 49555, 49557, 49560, 49561, 49565, 49566, 49570, 49572, 49590, 49650, 49651, 49652, 49653, 49654, 49655, 49656, 49657, 49659, 50010, 50040, 50045, 50060, 50065, 50070, 50075, 50080, 50081, 50100, 50120, 50125, 50130, 50135, 50200, 50205, 50220, 50225, 50230, 50234, 50236, 50240, 50280, 50320, 50340, 50365, 50382, 50384, 50385, 50386, 50387, 50389, 50390, 50391, 50396, 50400, 50405, 50430, 50431, 50432, 50433, 50434, 50435, 50436, 50437, 50541, 50542, 50543, 50544, 50545, 50546, 50547, 50548, 50549, 50551, 50553, 50555, 50557, 50561, 50570, 50572, 50574, 50575, 50576, 50580, 50590, 50592, 50593, 50600, 50605, 50606, 50610, 50620, 50630, 50650, 50684, 50693, 50694, 50695, 50700, 50705, 50706, 50715, 50740, 50750, 50760, 50780, 50782, 50783, 50785, 50800, 50815, 50820, 50840, 50860, 50900, 50940, 50945, 50947, 50948, 50949, 50951, 50953, 50955, 50957, 50961, 50970, 50972, 50974, 50976, 50980, 51535, 52007, 52320, 52325, 52327, 52330, 52332, 52341, 52342, 52343, 52344, 52345, 52346, 52352, 52353, 52354, 52355, 52356, 54500, 54505, 54512, 54520, 54522, 54530, 54535, 54550, 54560, 54600, 54620, 54640, 54650, 54660, 54670, 54680, 54690, 54692, 54699, 54700, 54800, 54830, 54840, 55000, 55060, 55400, 55500, 55520, 55530, 55535, 55540, 55550, 55559, 55600, 55605, 55650, 55680, 56640, 56740, 58345, 58350, 58578, 58579, 58661, 58672, 58673, 58679, 58750, 58752, 58760, 58770, 58820, 58822, 59898, 60260, 60540, 60545, 60650, 60659, 61154, 61250, 61330, 61333, 61340, 61564, 61580, 61581, 61584, 61585, 61590, 61591, 61592, 61595, 61596, 61597, 61613, 61645, 61790, 61791, 61863, 61867, 61880, 61885, 61888, 62380, 63020, 63030, 63035, 63040, 63042, 63043, 63044, 63191, 64400, 64405, 64408, 64415, 64416, 64417, 64418, 64420, 64421, 64425, 64430, 64435, 64445, 64446, 64447, 64448, 64449, 64450, 64451, 64454, 64455, 64461, 64462, 64463, 64479, 64480, 64483, 64484, 64486, 64487, 64490, 64491, 64492, 64493, 64494, 64495, 64505, 64510, 64520, 64561, 64568, 64569, 64570, 64605, 64610, 64612, 64616, 64617, 64624, 64625, 64632, 64633, 64634, 64635, 64636, 64640, 64712, 64713, 64714, 64718, 64719, 64721, 64732, 64734, 64736, 64738, 64740, 64742, 64744, 64746, 64763, 64766, 64786, 64802, 64804, 64809, 64818, 64821, 64822, 64823, 64831, 64834, 64835, 64836, 64840, 64858, 64861, 64862, 65091, 65093, 65101, 65103, 65105, 65110, 65112, 65114, 65125, 65130, 65135, 65140, 65150, 65155, 65175, 65205, 65210, 65220, 65222, 65235, 65260, 65265, 65270, 65272, 65273, 65275, 65280, 65285, 65286, 65290, 65400, 65410, 65420, 65426, 65430, 65435, 65436, 65450, 65600, 65710, 65730, 65750, 65755, 65756, 65770, 65772, 65775, 65778, 65779, 65780, 65781, 65782, 65785, 65800, 65810, 65815, 65820, 65850, 65855, 65860, 65865, 65870, 65875, 65880, 65900, 65920, 65930, 66020, 66030, 66130, 66150, 66155, 66160, 66170, 66172, 66174, 66175, 66179, 66180, 66183, 66184, 66185, 66225, 66250, 66500, 66505, 66600, 66605, 66625, 66630, 66635, 66680, 66682, 66700, 66710, 66711, 66720, 66740, 66761, 66762, 66770, 66820, 66821, 66825, 66830, 66840, 66850, 66852, 66920, 66930, 66940, 66982, 66983, 66984, 66985, 66986, 66987, 66988, 66999, 67005, 67010, 67015, 67025, 67027, 67028, 67030, 67031, 67036, 67039, 67040, 67041, 67042, 67043, 67101, 67105, 67107, 67108, 67110, 67113, 67115, 67120, 67121, 67141, 67145, 67208, 67210, 67218, 67220, 67227, 67228, 67229, 67250, 67255, 67299, 67311, 67312, 67314, 67316, 67318, 67331, 67332, 67334, 67335, 67343, 67345, 67346, 67399, 67400, 67405, 67412, 67413, 67414, 67415, 67420, 67430, 67440, 67445, 67450, 67500, 67505, 67515, 67550, 67560, 67570, 67599, 67700, 67710, 67715, 67810, 67820, 67825, 67830, 67835, 67840, 67850, 67875, 67880, 67882, 67900, 67901, 67902, 67903, 67904, 67906, 67908, 67909, 67911, 67912, 67914, 67915, 67916, 67917, 67921, 67922, 67923, 67924, 67930, 67935, 67938, 67950, 67961, 67966, 67971, 67973, 67974, 67975, 67999, 68020, 68040, 68100, 68110, 68115, 68130, 68135, 68200, 68320, 68325, 68326, 68328, 68330, 68335, 68340, 68360, 68362, 68371, 68399, 68400, 68420, 68440, 68500, 68505, 68510, 68520, 68525, 68530, 68540, 68550, 68700, 68705, 68720, 68745, 68750, 68760, 68761, 68770, 68801, 68810, 68811, 68815, 68816, 68840, 68850, 68899, 69000, 69005, 69020, 69105, 69110, 69140, 69145, 69200, 69205, 69209, 69220, 69222, 69300, 69310, 69320, 69420, 69421, 69424, 69433, 69436, 69440, 69450, 69501, 69502, 69505, 69511, 69530, 69535, 69540, 69550, 69552, 69554, 69601, 69602, 69603, 69604, 69605, 69610, 69620, 69631, 69632, 69633, 69635, 69636, 69637, 69641, 69642, 69643, 69644, 69645, 69646, 69650, 69660, 69661, 69662, 69666, 69667, 69670, 69676, 69700, 69711, 69714, 69717, 69720, 69725, 69740, 69745, 69799, 69801, 69805, 69806, 69905, 69910, 69915, 69930, 69949, 69950, 69955, 69960, 69970, 69979, 76641, 76642, 92071, G0186, G0289, 70030, 70120, 70130, 70190, 70332, 70336, 70554, 70555, 73000, 73010, 73020, 73030, 73040, 73070, 73080, 73085, 73090, 73092, 73100, 73110, 73115, 73120, 73130, 73140, 73200, 73201, 73202, 73218, 73219, 73220, 73221, 73222, 73223, 73525, 73551, 73552, 73560, 73562, 73564, 73580, 73590, 73592, 73600, 73610, 73615, 73620, 73630, 73650, 73660, 73700, 73701, 73702, 73706, 73718, 73719, 73720, 73721, 73722, 73723, 73725, 76510, 76511, 76512, 76513, 76529, 92230, 95866, 95885, 95886, 95887] %AND% &lt;&lt;@mod_1 is not [RT, LT, 50] %AND% @mod_2 is not [RT, LT, 50]&gt;&gt;\n\n\n239\n@hcpcs is one of [99381, 99391] %AND% @age is greater than [11 MONS]\n\n\n128\n@icd is [F20*] %AND% @icd is one of [F23, F25.0, F30.2, F31.2, F31.5, F31.64, F32.3, F33.3, F25*, F23]\n\n\n944\n@primary_name is one of [BCBS OF GA - B2, BCBS OF GA FEDERAL CLAIMS - KSB, BCBS OF GA CAP, BCBS OF GA - B2, BCBS OF GA HAM, BCBS PATHWAY - B2, BCBS SECONDARY - B2, BCBS XKT, MEDICARE BCBS ADV - KBB, Credence BCBS] %AND% @hcpcs is [J*] %AND% @ndc is not [PRESENT]\n\n\n1002\n@primary_name is BCBS of MS %AND% @ndc is not [PRESENT] %AND% @hcpcs is [J*]\n\n\n972\n@hcpcs is [91310] %AND% @dos before 09/11/2023\n\n\n319\n@pos is not [02, 10] %AND% @mod_1 is [GT, 95, GQ, 93] %AND% @primary_class is not [MEDICARE, MEDICARE REPLACEMENT]\n\n\n866\n@hcpcs is one of [90630, 90653, 90654, 90655, 90656, 90657, 90658, 90660, 90661, 90662, 90664, 90666, 90667, 90668, 90672, 90673, 90674, 90682, 90685, 90686, 90687, 90688, 90689, 90694, 90756] %AND% @age is less than [19 YRS] %AND% @mod_1 is not [33] %AND% @primary_name is one of [BLUE CARE, VSHP BLUECARE RISK EAST/WEST, BLUECARE PLUS DSNP DUAL SPECIAL NEEDS P, VSHP BLUECARE RISK EAST/WEST, BLUECARE PLUS TENNESSEED-SNP, BLUE CARE COVER KIDS]"
  },
  {
    "objectID": "posts/rules/claims_rules.html#step-components",
    "href": "posts/rules/claims_rules.html#step-components",
    "title": "crule: Healthcare Claims Rules",
    "section": "\n8.3 Step Components",
    "text": "8.3 Step Components\nTwo types of a step: qualifier and terminator\nA qualifier is basically a long if (x & y & (a | b | c)) statement.\nA terminator is the final step, analogous to a stopifnot() statement that checks the data.\n\nnumber:\norder:\nidentifier:\nvariable: Recode to standardize names\nclass: Variable Data Class\ngroup: Variable Grouping\naction: Translate to condition\nvalue: Coerce to correct data type, deal with wildcards\ncondition: Predicate function that evaluates to TRUE or FALSE\n\nVariables\n\ndos: 81\npos: 142\nub04: 106\nage: 158\nsex: 3\nreferring: 14\nrendering: 20\nicd: 251\nhcpcs: 1071\nmod_1, mod_2, mod_3, mod_4: 472\nunit: 13\nndc: 23\nrev_code: 19\nprimary_class: 371\nprimary_name: 132\nprimary_auth: 3\nsecondary_class: 6\nsecondary_name: 4"
  }
]